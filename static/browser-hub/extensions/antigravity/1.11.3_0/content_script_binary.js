'use strict';var f=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,b){if(a==Array.prototype||a==Object.prototype)return a;a[c]=b.value;return a};function h(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");}var k=h(this);
function l(a,c){if(c)a:{var b=k;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in b))break a;b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&c!=null&&f(b,a,{configurable:!0,writable:!0,value:c})}}l("Object.is",function(a){return a?a:function(c,b){return c===b?c!==0||1/c===1/b:c!==c&&b!==b}});
l("Array.prototype.includes",function(a){return a?a:function(c,b){var d=this;d instanceof String&&(d=String(d));var e=d.length;b=b||0;for(b<0&&(b=Math.max(b+e,0));b<e;b++){var g=d[b];if(g===c||Object.is(g,c))return!0}return!1}});
l("String.prototype.includes",function(a){return a?a:function(c,b){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(c,b||0)!==-1}});chrome.runtime.sendMessage({action:"getCurrentTabId"}).then(function(a){document.documentElement.setAttribute("data-jetski-tab-id",String((a==null?void 0:a.tabId)||""))}).catch(function(){document.documentElement.setAttribute("data-jetski-tab-id","error")});
chrome.runtime.onMessage.addListener(function(a,c,b){try{a.type&&["RPC_RESULT","RPC_ERROR","EXTENSION_ERROR","EXTENSION_READY"].includes(a.type)?(window.postMessage(a,window.location.origin),b({success:!0})):b({success:!1,error:"Unknown action"})}catch(d){b({success:!1,error:d instanceof Error?d.message:"Unknown error"})}return!0});
window.addEventListener("message",function(a){a.origin===window.location.origin&&a.source===window&&(a=a.data)&&typeof a==="object"&&a!==null&&(a.action==="rpcCall"?chrome.runtime.sendMessage(a).catch(function(){}):a.action==="proxyRpcCall"?a.method&&a.requestId&&chrome.runtime.sendMessage(a).catch(function(){}):a.action==="registerTargetID"?a.targetId&&typeof a.targetId==="string"&&chrome.runtime.sendMessage({action:"registerTargetID",targetId:a.targetId}).catch(function(){}):a.action==="startScreenRecording"?
chrome.runtime.sendMessage(a).catch(function(){}):a.action==="stopScreenRecording"&&chrome.runtime.sendMessage(a).catch(function(){}))});
