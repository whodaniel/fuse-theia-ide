{"version":3,"file":"content/notebooklm-integration.js","mappings":";;AAAA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,YAAY,gCAAgC;;AAE5C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,eAAe;AACnE;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,eAAe;AACnE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAAsD,eAAe;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA,aAAa;AACb,IAAI;AACJ;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb,IAAI;AACJ;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb,IAAI;AACJ;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb,IAAI;AACJ;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B,OAAO;;AAEP;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","sources":["webpack://the-new-fuse-chrome-extension/./src/v6/content/ai-studio/notebooklm.js"],"sourcesContent":["// NotebookLM Content Script\n// Handles interactions with NotebookLM pages\n\nconsole.log('ðŸ““ NotebookLM content script loaded');\n\n// Listen for messages from background script\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  console.log('NotebookLM received message:', message.type);\n\n  switch (message.type) {\n    case 'NOTEBOOKLM_ADD_SOURCE':\n      addSource(message.data).then(sendResponse);\n      return true;\n\n    case 'NOTEBOOKLM_GENERATE_AUDIO':\n      generateAudioOverview().then(sendResponse);\n      return true;\n\n    case 'NOTEBOOKLM_DOWNLOAD_AUDIO':\n      downloadAudio().then(sendResponse);\n      return true;\n\n    case 'NOTEBOOKLM_GET_STATUS':\n      getStatus().then(sendResponse);\n      return true;\n  }\n});\n\n// Add source to NotebookLM\nasync function addSource(data) {\n  try {\n    const { content, title, type = 'text' } = data;\n\n    // Click \"Add source\" button\n    const addButton = findButton('Add source', '[aria-label*=\"Add source\"]');\n    if (!addButton) {\n      throw new Error('Add source button not found');\n    }\n\n    addButton.click();\n    await sleep(500);\n\n    // Select source type\n    if (type === 'text') {\n      const pasteOption = findButton('Paste text', '[aria-label*=\"Paste text\"]');\n      if (pasteOption) {\n        pasteOption.click();\n        await sleep(500);\n      }\n\n      // Paste content\n      const textarea = document.querySelector('textarea');\n      if (textarea) {\n        textarea.value = content;\n        textarea.dispatchEvent(new Event('input', { bubbles: true }));\n        await sleep(500);\n      }\n    } else if (type === 'url') {\n      const urlOption = findButton('Website URL', '[aria-label*=\"Website\"]');\n      if (urlOption) {\n        urlOption.click();\n        await sleep(500);\n      }\n\n      // Enter URL\n      const urlInput =\n        document.querySelector('input[type=\"url\"]') ||\n        document.querySelector('input[placeholder*=\"URL\"]');\n      if (urlInput) {\n        urlInput.value = content;\n        urlInput.dispatchEvent(new Event('input', { bubbles: true }));\n        await sleep(500);\n      }\n    }\n\n    // Set title if provided\n    if (title) {\n      const titleInput = document.querySelector('input[placeholder*=\"title\"]');\n      if (titleInput) {\n        titleInput.value = title;\n        titleInput.dispatchEvent(new Event('input', { bubbles: true }));\n      }\n    }\n\n    // Click Add/Import button\n    const importButton =\n      findButton('Add', '[aria-label*=\"Add\"]') || findButton('Import', '[aria-label*=\"Import\"]');\n    if (importButton) {\n      importButton.click();\n      await sleep(2000); // Wait for import\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error('Failed to add source:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Generate audio overview\nasync function generateAudioOverview() {\n  try {\n    // Click \"Audio overview\" button\n    const audioButton = findButton('Audio overview', '[aria-label*=\"Audio overview\"]');\n    if (!audioButton) {\n      throw new Error('Audio overview button not found');\n    }\n\n    audioButton.click();\n    await sleep(1000);\n\n    // Click \"Generate\" button\n    const generateButton = findButton('Generate', '[aria-label*=\"Generate\"]');\n    if (generateButton) {\n      generateButton.click();\n    }\n\n    // Wait for generation to start\n    await sleep(2000);\n\n    return { success: true, generating: true };\n  } catch (error) {\n    console.error('Failed to generate audio:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Download audio\nasync function downloadAudio() {\n  try {\n    // Find download button\n    const downloadButton =\n      findButton('Download', '[aria-label*=\"Download\"]') || document.querySelector('a[download]');\n\n    if (!downloadButton) {\n      throw new Error('Download button not found');\n    }\n\n    downloadButton.click();\n    await sleep(1000);\n\n    return { success: true };\n  } catch (error) {\n    console.error('Failed to download audio:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Get current status\nasync function getStatus() {\n  try {\n    const status = {\n      hasAudioPlayer: !!document.querySelector('audio'),\n      isGenerating: !!findElement('Generating', '[aria-label*=\"Generating\"]'),\n      hasDownloadButton: !!findButton('Download', '[aria-label*=\"Download\"]'),\n      sourceCount: document.querySelectorAll('[data-source-id]').length,\n    };\n\n    return { success: true, status };\n  } catch (error) {\n    console.error('Failed to get status:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Utility: Find button by text or selector\nfunction findButton(text, selector) {\n  // Try selector first\n  if (selector) {\n    const element = document.querySelector(selector);\n    if (element) return element;\n  }\n\n  // Try finding by text\n  const buttons = Array.from(document.querySelectorAll('button'));\n  return buttons.find((btn) => btn.textContent.trim().toLowerCase().includes(text.toLowerCase()));\n}\n\n// Utility: Find element\nfunction findElement(text, selector) {\n  if (selector) {\n    const element = document.querySelector(selector);\n    if (element) return element;\n  }\n\n  const elements = Array.from(document.querySelectorAll('*'));\n  return elements.find((el) => el.textContent.trim().toLowerCase().includes(text.toLowerCase()));\n}\n\n// Utility: Sleep\nfunction sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// Monitor for audio generation completion\nlet audioGenerationObserver = null;\n\nfunction startAudioGenerationMonitor() {\n  if (audioGenerationObserver) return;\n\n  audioGenerationObserver = new MutationObserver((mutations) => {\n    // Check if audio player appeared\n    const audioPlayer = document.querySelector('audio');\n    if (audioPlayer) {\n      chrome.runtime.sendMessage({\n        type: 'NOTEBOOKLM_AUDIO_READY',\n        data: { ready: true },\n      });\n\n      stopAudioGenerationMonitor();\n    }\n  });\n\n  audioGenerationObserver.observe(document.body, {\n    childList: true,\n    subtree: true,\n  });\n}\n\nfunction stopAudioGenerationMonitor() {\n  if (audioGenerationObserver) {\n    audioGenerationObserver.disconnect();\n    audioGenerationObserver = null;\n  }\n}\n\n// Auto-start monitoring if on NotebookLM page\nif (window.location.hostname === 'notebooklm.google.com') {\n  console.log('âœ… NotebookLM page detected, ready for automation');\n}\n\nconsole.log('âœ… NotebookLM content script ready');\n"],"names":[],"ignoreList":[],"sourceRoot":""}