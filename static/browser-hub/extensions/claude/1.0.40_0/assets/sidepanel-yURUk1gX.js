const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B1WmHw2Q.js","assets/permissions-BsMI2TUG.js","assets/index-4VhcIbAZ.js","assets/Main-DIS361Sg.js","assets/Main-BWmGWfNh.css","assets/mcpPermissions-juDHLu3j.js","assets/client-BLU1RtqI.js","assets/SentryService-Bpayo6Ny.js","assets/ModelSelector-GDUcHpDy.js","assets/punycode.es6-BmPUeujg.js","assets/datadog-BkLmkJ5p.js","assets/index-B7-_3Ura.js"])))=>i.map(i=>d[i]);
import{u as e,c as t,a as n,M as r,h as s,i,p as o,T as a,B as l,I as c,b as u,d,l as h,L as p,C as f,e as m,f as g,g as y,j as x,A as v,k as b,m as C,n as w,o as k,q as S,r as M,s as N,W as _,t as j,v as E,w as T,x as A,E as L,y as O,z as I,D,F as R,G as P,X as z,H as F,R as H,J as V,K as $,N as B,O as U,P as Z,Q as W,S as q,U as G,V as J,Y as K,Z as Y,_ as Q,$ as X,a0 as ee,a1 as te,a2 as ne,a3 as re,a4 as se,a5 as ie,a6 as oe,a7 as ae,a8 as le,a9 as ce,aa as ue}from"./Main-DIS361Sg.js";import{r as de,j as he,u as pe,g as fe,S as me,s as ge,_ as ye,R as xe,a as ve,b as be,c as Ce,d as we,T as ke,e as Se,f as Me,h as Ne,P as _e,i as je,k as Ee,l as Te,m as Ae,U as Le,D as Oe}from"./permissions-BsMI2TUG.js";import{b as Ie,g as De,p as Re,s as Pe,t as ze,B as Fe,a as He,u as Ve,c as $e,d as Be,e as Ue,f as Ze,h as We,n as qe,r as Ge,i as Je,j as Ke,k as Ye,l as Qe,m as Xe,o as et,q as tt,v as nt,w as rt,x as st,y as it,z as ot,A as at,C as lt,D as ct,E as ut,F as dt,G as ht,H as pt,I as ft,J as mt,K as gt}from"./mcpPermissions-juDHLu3j.js";import{u as yt,o as xt,s as vt,n as bt,b as Ct,a as wt,c as kt,d as St,e as Mt,f as Nt,g as _t,l as jt,D as Et,I as Tt,G as At,h as Lt,F as Ot,S as It,i as Dt,C as Rt,j as Pt,k as zt,T as Ft,m as Ht,p as Vt,q as $t,r as Bt,M as Ut,t as Zt,v as Wt,w as qt,x as Gt,y as Jt,z as Kt,A as Yt,B as Qt,E as Xt,H as en,J as tn,K as nn,L as rn,N as sn,V as on,O as an,P as ln,Q as cn,R as un,U as dn,W as hn,X as pn,Y as fn,Z as mn,_ as gn,$ as yn,a0 as xn,a1 as vn,a2 as bn,a3 as Cn,a4 as wn,a5 as kn,a6 as Sn,a7 as Mn,a8 as Nn,a9 as _n,aa as jn,ab as En,ac as Tn,ad as An,ae as Ln,af as On,ag as In,ah as Dn,ai as Rn,aj as Pn,ak as zn,al as Fn,am as Hn,an as Vn,ao as $n,ap as Bn}from"./ModelSelector-GDUcHpDy.js";import{t as Un}from"./punycode.es6-BmPUeujg.js";import{u as Zn,c as Wn,A as qn,a as Gn}from"./client-BLU1RtqI.js";import{w as Jn,g as Kn,S as Yn,P as Qn,i as Xn,a as er}from"./SentryService-Bpayo6Ny.js";import{X as tr,m as nr,u as rr,i as sr}from"./datadog-BkLmkJ5p.js";function ir({ref:n,children:r,parentClassName:s,innerClassName:i,pinToBottomConfig:o={disabled:!1,initialValue:!1},containerRef:a}){const l=de.useRef(a?.current||null),c=e(a,l),u=de.useRef(null),d=de.useRef(o.initialValue),h=de.useRef(!1),p=de.useRef(!1),f=de.useRef(null),m=de.useRef(0),g=de.useCallback(()=>l.current,[]),y=de.useCallback((e="auto",t)=>{if(!l.current)return;if(t?.onlyIfPinned&&!d.current)return;const{scrollHeight:n,scrollTop:r,clientHeight:s}=l.current;r>n-s||(p.current=!0,l.current.scrollTo({top:l.current.scrollHeight,behavior:e}),f.current&&clearTimeout(f.current),f.current=window.setTimeout(()=>{p.current=!1},0))},[]),x=de.useCallback(e=>{d.current=e},[]);return de.useImperativeHandle(n,()=>({getScrollContainer:g,scrollToBottom:y,setPinToBottom:x,innerRef:u}),[g,y,x]),de.useLayoutEffect(()=>{const e=l.current,t=u.current;if(!e||!t||o.disabled)return;const n=()=>{if(p.current)return;const{scrollHeight:t,scrollTop:n,clientHeight:r}=e,s=t-n-r,i=Math.floor(s)<8;h.current=i;const o=n<m.current;m.current=n,!i&&o&&(d.current=!1)},r=new ResizeObserver(()=>{d.current&&y()});return e.addEventListener("scroll",n),r.observe(t),r.observe(e),()=>{e.removeEventListener("scroll",n),r.disconnect(),f.current&&clearTimeout(f.current)}},[u,o.disabled,y]),he.jsx("div",{className:t("overflow-y-scroll overflow-x-hidden",s),ref:c,children:he.jsx("div",{className:t("relative w-full min-h-full",i),ref:u,children:r})})}void 0===globalThis.Buffer&&(globalThis.Buffer=Ie.Buffer);const or=({scrollRefs:e,autoScrollRef:t,messageCount:n,additionalBuffer:r=0,parentContainerRef:s,disablePinToTop:i=!1,disableInitialScrollToBottom:o=!1})=>{const a=de.useRef(n),l=de.useCallback(()=>{const t=e.lastAssistantMessage.current?.clientHeight||0,n=e.lastHumanMessage.current?.clientHeight||0,i=e.chatInput?.current?.clientHeight||0,o=e.extras.current?.clientHeight||0,a=s?.current?.clientHeight||window.innerHeight,l=r||62,c=Math.max(a-n-t-o-i-l,0);e.extraSpace.current&&(e.extraSpace.current.style.height=`${c}px`)},[e.lastAssistantMessage,e.lastHumanMessage,e.chatInput,e.extras,e.extraSpace,s,r]);return de.useLayoutEffect(()=>{a.current!==n&&(l(),i||t.current?.scrollToBottom("smooth")),a.current=n},[n,l,t,i]),de.useLayoutEffect(()=>{const t=new ResizeObserver(()=>{l()});return[e.lastAssistantMessage,e.lastHumanMessage,e.chatInput,e.extras].forEach(e=>{e?.current&&t.observe(e.current)}),window.addEventListener("resize",l),()=>{t.disconnect(),window.removeEventListener("resize",l)}},[e,l,n]),de.useLayoutEffect(()=>{o||t.current?.scrollToBottom("instant")},[t,o]),he.jsx("div",{ref:e.extraSpace,"aria-hidden":"true"})};function ar({domainConfig:e,onPromptClick:t}){return he.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-4 py-8",children:[he.jsx("div",{className:"w-12 h-12 rounded-xl border-[0.5px] border-border-300 bg-always-white shadow-sm mb-4 overflow-hidden",children:he.jsx("img",{src:e.logo_url,alt:"",className:"w-full h-full object-cover"})}),he.jsx("h2",{className:"font-ui-sm text-text-500 mb-[22px]",children:e.header_text}),he.jsx("div",{className:"flex flex-col items-center gap-2 w-full max-w-sm",children:e.prompts.map((e,n)=>he.jsx("button",{onClick:()=>t(e.prompt),className:"min-w-[75px] min-h-8 px-[14px] py-[3px] font-base text-text-100 border-[0.5px] border-border-300 bg-bg-000/30 hover:bg-bg-200 transition-colors text-center line-clamp-2 break-words",style:{borderRadius:"38px"},children:e.prompt_title},n))})]})}function lr(e,t,n,r=[]){const s=de.useRef(null),i=de.useCallback(n,r);de.useEffect(()=>{if(void 0===e)return;const n=De();return s.current=n.subscribe(e,t,i),()=>{s.current&&(n.unsubscribe(s.current),s.current=null)}},[e,t,i])}function cr(e,t,n=["url","status"],r=[]){const s=de.useCallback((n,r)=>{n===e&&t(r)},[e,...r]);lr(e,n,s,[s])}function ur({lightImage:e,darkImage:t,title:n,subtitle:r}){const s=yt();return he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("img",{src:s?t:e,alt:n,className:"w-[212px] h-[122px] rounded-[14px]"}),he.jsxs("div",{className:"mt-4 flex flex-col items-center gap-1 w-[188px]",children:[he.jsx("p",{className:"font-small-bold text-text-300 text-center",children:n}),he.jsx("p",{className:"font-small text-text-500 text-center",children:r})]})]})}const dr={pin_extension:{maxDisplays:1,requiresGate:!1}},hr=({children:e,onMount:t})=>(de.useEffect(()=>{t()},[t]),he.jsx(he.Fragment,{children:e}));function pr({tabId:e,onPromptClick:t}){const r=n(),[s,i]=de.useState(""),[o,a]=de.useState(null),l=pe("crochet_chips",{}),c=((e,t)=>{const[n,r]=de.useState(!1),[s,i]=de.useState(!1);return de.useEffect(()=>{(async()=>{if(t)try{const n=dr[e],s=(await fe(me.TIP_DISPLAY_COUNTS)||{})[e]||[],o=s.includes(String(t)),a=s.length>=n.maxDisplays;i(a),r(!o&&!a)}catch(n){r(!1),i(!1)}else r(!1)})()},[e,t]),{canShow:n,limitReached:s,markAsShown:de.useCallback(async()=>{if(t)try{const n=await fe(me.TIP_DISPLAY_COUNTS)||{},r=n[e]||[];r.includes(String(t))||(r.push(String(t)),n[e]=r,await ge(me.TIP_DISPLAY_COUNTS,n))}catch(n){}},[e,t])}})("pin_extension",e);de.useEffect(()=>{(async()=>{const e=await async function(){try{return!(!chrome.action||!chrome.action.getUserSettings)&&((await chrome.action.getUserSettings()).isOnToolbar??!1)}catch(e){return!1}}();a(e)})()},[]);const u=de.useCallback(e=>{if(e.url)try{const t=new URL(e.url).hostname.replace(/^www\./,"");i(t)}catch(t){i("")}else i("")},[]);de.useEffect(()=>{e&&chrome.tabs.get(e).then(u).catch(e=>{i("")})},[e,u]),lr(e,["url"],(t,n,r)=>{t===e&&n.url&&r&&u(r)},[e]);const d=l[s];return d?he.jsx(ar,{domainConfig:d,onPromptClick:t}):null===o?null:!o&&c.canShow?he.jsx(hr,{onMount:c.markAsShown,children:he.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:he.jsx(ur,{lightImage:"/assets/extension-light-min-CwWd0kAK.svg",darkImage:"/assets/extension-dark-min-Ctxo0Z8w.svg",title:r.formatMessage({defaultMessage:"Pin Claude for quick access",id:"9qJKQKXInl"}),subtitle:r.formatMessage({defaultMessage:"Click the pin icon in the top right corner of the extension window",id:"PqHH2BNESm"})})})}):null}const fr=()=>he.jsxs("div",{className:"flex items-center gap-2 py-2 my-2",children:[he.jsx("div",{className:"flex-1 h-[0.5px] bg-border-300"}),he.jsx("div",{className:"text-xs text-text-400 px-2 bg-bg-100",children:he.jsx(r,{defaultMessage:"Conversation compacted",id:"iTAs3tpllt"})}),he.jsx("div",{className:"flex-1 h-[0.5px] bg-border-300"})]});function mr({state:e="static",className:n,isInteractive:r=!0}){const l=de.useRef(null),c=de.useRef(e),u=function(){!s.current&&i();const[e]=de.useState(o.current);return e}(),[d,h]=de.useState(),[p,f]=de.useState(e),[m,g]=de.useReducer(e=>e+1,0);de.useEffect(()=>{ye(()=>import("./index-DU1bzovA.js"),[]).then(e=>{h(e.animations)})},[]),de.useEffect(()=>f(e),[e]),de.useEffect(()=>{const e=l.current&&"function"==typeof l.current.animate;let t,n;if(!u&&"static"!==p&&e&&d){const{frameCount:e,speed:r}=d[p],s=Array.from({length:e},(t,n)=>({transform:`translateY(-${n*(100/e)}%)`}));t=l.current?.animate(s,{duration:r*s.length,iterations:"tickle"===p?1:1/0,easing:`steps(${s.length}, jump-none)`}),"tickle"===p&&(n=()=>f(c.current),t?.addEventListener("finish",n))}return"tickle"!==p&&(c.current=p),()=>{n&&t&&t.removeEventListener("finish",n),t?.cancel()}},[d,p,u]);const y=()=>{r&&"writing"!==p&&"thinking"!==p&&"tickle"!==p&&(f("tickle"),g())};let x="Hi, I’m Claude. How can I help you today?";m<32&&m>24?x="Ugh, well you can’t do that forever":m<=24&&m>18?x="Alright, alright, you have my attention!":m<=18&&m>12?x="Are you still doing that?":m<=12&&m>5&&(x="Yes, yes. What can I do for you?");const v=!r||"writing"===p||"thinking"===p;if("static"===p||u||!d)return he.jsx("div",{"aria-hidden":"true",children:he.jsx(a,{className:t("font-claude-response max-w-none italic",v&&"opacity-0"),tooltipContent:x,side:"right",children:he.jsx("div",{className:t(n,"w-8 text-accent-brand inline-block select-none"),onMouseDown:y,children:he.jsx(gr,{className:"w-full fill-current"})})})});const{svg:b,width:C,height:w}=d[p],k=C/w;return he.jsx("div",{"aria-hidden":"true",children:he.jsx(a,{className:t("font-claude-response max-w-none italic",v&&"opacity-0"),tooltipContent:x,side:"right",children:he.jsx("div",{className:t(n,"w-8 text-accent-brand inline-block overflow-hidden select-none"),style:{aspectRatio:k},onMouseDown:y,children:he.jsx("div",{ref:l,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:b}})})})})}function gr(e){return he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:he.jsx("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}function yr({isDarkMode:e,text:t}){return he.jsxs("span",{className:"text-sm italic font-claude-response relative inline-block mb-1",style:{color:"transparent",background:e?"linear-gradient(90deg, #faf9f5 0%, #faf9f5 35%, #808080 50%, #faf9f5 65%, #faf9f5 100%)":"linear-gradient(90deg, #141413 0%, #141413 35%, #888888 50%, #141413 65%, #141413 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"shimmerSweep 2.25s ease-in-out infinite"},children:[he.jsx("style",{dangerouslySetInnerHTML:{__html:"\n  @keyframes shimmerSweep {\n    0% { background-position: 200% 0; }\n    100% { background-position: -200% 0; }\n  }\n"}}),t]})}function xr({error:e,tabId:t,title:s,onRetry:i}){const o=n(),[a,c]=de.useState(null),[u,d]=de.useState(!1),h=s??o.formatMessage({defaultMessage:"Error",id:"KN7zKn8z4F"}),p=e?.includes("Cannot access a chrome-extension:// URL of different extension"),f=e?.toLowerCase().includes("connection error")||e?.toLowerCase().includes("network error")||e?.toLowerCase().includes("failed to fetch");return de.useEffect(()=>{p&&t&&!u&&(async()=>{try{d(!0);const e=await async function(e){try{const t=await chrome.scripting.executeScript({target:{tabId:e},func:()=>{try{const e=document.documentElement.outerHTML.toLowerCase(),t=[{name:"LastPass",patterns:["lastpass","lpform","data-lastpass"]},{name:"Loom",patterns:["loom-","loom.com"]}];for(const n of t)for(const t of n.patterns)if(e.includes(t))return n.name;return null}catch{return null}}});return t&&0!==t.length&&t[0].result?t[0].result:null}catch{return null}}(t);e&&c(e)}catch{}finally{d(!1)}})()},[p,t,u]),e?he.jsx("div",{className:"p-4 bg-danger-900 border border-danger-200 rounded-lg",children:he.jsxs("div",{className:"flex items-start",children:[he.jsx("svg",{className:"w-5 h-5 text-danger-200 mt-0.5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:he.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),he.jsxs("div",{className:"flex-1 min-w-0",children:[he.jsx("h3",{className:"font-base-bold text-danger-000",children:h}),he.jsx("p",{className:"font-base-sm text-danger-000 mt-1 break-words whitespace-pre-wrap",children:p?a?he.jsx(r,{defaultMessage:"Another extension you're using is preventing Claude in Chrome from operating. Turn off extensions such as {extensionName} to use Claude in your browser.",id:"6zfn3n4+te",values:{extensionName:a}}):he.jsx(r,{defaultMessage:"Another extension you're using is preventing Claude in Chrome from operating.",id:"a7x0CkSo6z"}):e}),f&&i&&he.jsx(l,{onClick:i,variant:"secondary",size:"sm",className:"mt-3",children:he.jsx(r,{defaultMessage:"Retry",id:"62nsdyMyIO"})})]})]})}):null}const vr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M5 2.5C5.93171 2.5 6.71235 3.13768 6.93457 4H13.75C15.5449 4 17 5.45507 17 7.25C17 9.04493 15.5449 10.5 13.75 10.5H12.707L10.3535 12.8535C10.1583 13.0488 9.84175 13.0488 9.64648 12.8535L7.29297 10.5H6.25C5.00736 10.5 4 11.5074 4 12.75C4 13.9926 5.00736 15 6.25 15H13.0654C13.2877 14.1377 14.0683 13.5 15 13.5C16.1046 13.5 17 14.3954 17 15.5C17 16.6046 16.1046 17.5 15 17.5C14.0683 17.5 13.2877 16.8623 13.0654 16H6.25C4.45507 16 3 14.5449 3 12.75C3 10.9551 4.45507 9.5 6.25 9.5H7.29297L9.64648 7.14648L9.72461 7.08203C9.91869 6.95387 10.1827 6.97562 10.3535 7.14648L12.707 9.5H13.75C14.9926 9.5 16 8.49264 16 7.25C16 6.00736 14.9926 5 13.75 5H6.93457C6.71235 5.86232 5.93171 6.5 5 6.5C3.89543 6.5 3 5.60457 3 4.5C3 3.39543 3.89543 2.5 5 2.5ZM15 14.5C14.4477 14.5 14 14.9477 14 15.5C14 16.0523 14.4477 16.5 15 16.5C15.5523 16.5 16 16.0523 16 15.5C16 14.9477 15.5523 14.5 15 14.5ZM8.20703 10L10 11.793L11.793 10L10 8.20703L8.20703 10ZM5 3.5C4.44772 3.5 4 3.94772 4 4.5C4 5.05228 4.44772 5.5 5 5.5C5.55228 5.5 6 5.05228 6 4.5C6 3.94772 5.55228 3.5 5 3.5Z"})}),br=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85787 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85787 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5898 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5898 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM10 6.5C10.2415 6.50008 10.4436 6.67171 10.4902 6.89941L10.5 7V11.792L12.1455 10.1465C12.3406 9.95139 12.6572 9.95174 12.8525 10.1465C13.0478 10.3417 13.0478 10.6583 12.8525 10.8535L10.3535 13.3535C10.1827 13.5243 9.91865 13.5459 9.72461 13.418L9.64648 13.3535L7.14648 10.8535C6.95122 10.6583 6.95123 10.3417 7.14648 10.1465C7.34174 9.95122 7.65825 9.95123 7.85352 10.1465L9.5 11.793V7L9.50977 6.89941C9.55628 6.6715 9.75836 6.50008 10 6.5Z"})}),Cr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M9.5 3C9.77614 3 10 3.22386 10 3.5C10 3.77614 9.77614 4 9.5 4H4.5C4.22386 4 4 4.22386 4 4.5V15.5C4 15.7761 4.22386 16 4.5 16H15.5C15.7761 16 16 15.7761 16 15.5V10.5C16 10.2239 16.2239 10 16.5 10C16.7761 10 17 10.2239 17 10.5V15.5C17 16.3284 16.3284 17 15.5 17H4.5C3.67157 17 3 16.3284 3 15.5V4.5C3 3.67157 3.67157 3 4.5 3H9.5ZM16.5 3C16.5374 3 16.5747 3.00436 16.6113 3.0127C16.6347 3.01803 16.6574 3.02559 16.6797 3.03418C16.687 3.03701 16.6939 3.04076 16.7012 3.04395C16.7213 3.05283 16.7409 3.06272 16.7598 3.07422C16.7675 3.07892 16.7757 3.08274 16.7832 3.08789C16.8082 3.10508 16.8317 3.12471 16.8535 3.14648L16.918 3.22461C16.9289 3.24116 16.9356 3.25988 16.9443 3.27734C16.95 3.28857 16.9572 3.29894 16.9619 3.31055C16.9789 3.35212 16.9888 3.39547 16.9941 3.43945C16.9966 3.45953 17 3.47957 17 3.5V7.5C17 7.77614 16.7761 8 16.5 8C16.2239 8 16 7.77614 16 7.5V4.70703L11.8535 8.85352C11.6583 9.04878 11.3417 9.04878 11.1465 8.85352C10.9512 8.65825 10.9512 8.34175 11.1465 8.14648L15.293 4H12.5C12.2239 4 12 3.77614 12 3.5C12 3.22386 12.2239 3 12.5 3H16.5Z"})}),wr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M4.6465 7.14649C4.84175 6.95124 5.15826 6.95127 5.35353 7.14649C5.54879 7.34175 5.54879 7.65826 5.35353 7.85352L3.70705 9.50001H8.50002L8.6006 9.50977C8.82856 9.55625 8.99993 9.75834 9.00002 10C8.99991 10.2413 8.82907 10.4434 8.60158 10.4902L8.50002 10.5H3.70705L5.35353 12.1455C5.54865 12.3406 5.54835 12.6572 5.35353 12.8525C5.15827 13.0478 4.84176 13.0478 4.6465 12.8525L2.1465 10.3535C1.97577 10.1827 1.95409 9.91864 2.08204 9.72462L2.1465 9.64649L4.6465 7.14649ZM14.6465 7.14649C14.8418 6.95123 15.1583 6.95123 15.3535 7.14649L17.8535 9.64649L17.918 9.72462C18.0459 9.91866 18.0243 10.1827 17.8535 10.3535L15.3535 12.8525C15.1583 13.0478 14.8418 13.0478 14.6465 12.8525C14.4517 12.6572 14.4514 12.3406 14.6465 12.1455L16.293 10.5H11.5L11.3994 10.4902C11.1717 10.4436 11.0001 10.2415 11 10C11.0001 9.75846 11.1716 9.55736 11.3994 9.51075L11.5 9.50001H16.293L14.6465 7.85352C14.4513 7.65829 14.4513 7.34176 14.6465 7.14649Z"})}),kr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM9.64648 6.64648C9.81727 6.47572 10.0813 6.45407 10.2754 6.58203L10.3535 6.64648L12.8535 9.14648C13.0488 9.34174 13.0488 9.65825 12.8535 9.85352C12.6583 10.0488 12.3417 10.0488 12.1465 9.85352L10.5 8.20703V13L10.4902 13.1006C10.4437 13.3285 10.2416 13.4999 10 13.5C9.75851 13.4999 9.55644 13.3283 9.50977 13.1006L9.5 13V8.20703L7.85449 9.85352C7.6594 10.0486 7.34276 10.0483 7.14746 9.85352C6.9522 9.65825 6.9522 9.34175 7.14746 9.14648L9.64648 6.64648Z"})}),Sr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8 4C8.81927 4 9.54404 4.39593 10 5.00488C10.456 4.39593 11.1807 4 12 4H16.5C17.3284 4 18 4.67157 18 5.5V14.5C18 15.3284 17.3284 16 16.5 16H11.9414C11.2959 16 10.7228 16.4131 10.5186 17.0254L10.4746 17.1582C10.4662 17.1834 10.4546 17.2072 10.4424 17.2305C10.4353 17.2441 10.4272 17.2568 10.4189 17.2695C10.4113 17.2814 10.4041 17.2935 10.3955 17.3047C10.3867 17.3161 10.3769 17.3264 10.3672 17.3369C10.3591 17.3457 10.3506 17.3541 10.3418 17.3623C10.3311 17.3723 10.3201 17.3816 10.3086 17.3906C10.2978 17.3991 10.2869 17.4074 10.2754 17.415C10.2645 17.4222 10.2536 17.4292 10.2422 17.4355C10.2298 17.4424 10.2171 17.4483 10.2041 17.4541C10.1925 17.4593 10.181 17.4644 10.1689 17.4688C10.154 17.4741 10.1387 17.4784 10.123 17.4824C10.111 17.4855 10.0992 17.489 10.0869 17.4912C10.0846 17.4916 10.0824 17.4928 10.0801 17.4932C10.0707 17.4947 10.0611 17.4941 10.0518 17.4951C10.0346 17.4969 10.0175 17.499 10 17.499C9.98221 17.499 9.96473 17.497 9.94727 17.4951C9.93823 17.4941 9.92899 17.4946 9.91992 17.4932C9.91727 17.4927 9.91474 17.4917 9.91211 17.4912C9.89984 17.489 9.88798 17.4855 9.87598 17.4824C9.86035 17.4784 9.84504 17.4741 9.83008 17.4688C9.81809 17.4644 9.80652 17.4593 9.79492 17.4541C9.78196 17.4483 9.76916 17.4424 9.75684 17.4355C9.74544 17.4292 9.7345 17.4223 9.72363 17.415C9.71213 17.4074 9.70122 17.3992 9.69043 17.3906C9.67899 17.3816 9.66787 17.3723 9.65723 17.3623C9.6485 17.3541 9.63994 17.3457 9.63184 17.3369C9.62218 17.3264 9.61228 17.3161 9.60352 17.3047C9.59491 17.2935 9.58772 17.2814 9.58008 17.2695C9.5719 17.2568 9.5637 17.2441 9.55664 17.2305C9.54454 17.2073 9.53377 17.1833 9.52539 17.1582L9.48145 17.0254C9.27721 16.4131 8.7041 16 8.05859 16H3.5C2.67157 16 2 15.3284 2 14.5V5.5C2 4.67157 2.67157 4 3.5 4H8ZM3.5 5C3.22386 5 3 5.22386 3 5.5V14.5C3 14.7761 3.22386 15 3.5 15H8.05859C8.588 15 9.08791 15.1671 9.5 15.458V6.5C9.5 5.67157 8.82843 5 8 5H3.5ZM12 5C11.1716 5 10.5 5.67157 10.5 6.5V15.458C10.9121 15.1671 11.412 15 11.9414 15H16.5C16.7761 15 17 14.7761 17 14.5V5.5C17 5.22386 16.7761 5 16.5 5H12ZM7.5 12C7.77614 12 8 12.2239 8 12.5C8 12.7761 7.77614 13 7.5 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H7.5ZM15 12C15.2761 12 15.5 12.2239 15.5 12.5C15.5 12.7761 15.2761 13 15 13H12.5C12.2239 13 12 12.7761 12 12.5C12 12.2239 12.2239 12 12.5 12H15ZM7.5 9.5C7.77614 9.5 8 9.72386 8 10C8 10.2761 7.77614 10.5 7.5 10.5H5C4.72386 10.5 4.5 10.2761 4.5 10C4.5 9.72386 4.72386 9.5 5 9.5H7.5ZM15 9.5C15.2761 9.5 15.5 9.72386 15.5 10C15.5 10.2761 15.2761 10.5 15 10.5H12.5C12.2239 10.5 12 10.2761 12 10C12 9.72386 12.2239 9.5 12.5 9.5H15ZM15 7C15.2761 7 15.5 7.22386 15.5 7.5C15.5 7.77614 15.2761 8 15 8H12.5C12.2239 8 12 7.77614 12 7.5C12 7.22386 12.2239 7 12.5 7H15Z"})}),Mr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M16.1338 6.16015C16.3217 5.95783 16.6375 5.94599 16.8399 6.13378C17.0421 6.32166 17.054 6.6375 16.8662 6.83984L10.3662 13.8398L10.2891 13.9082C10.2053 13.9675 10.1043 14 9.99999 14C9.86101 14 9.72836 13.9417 9.63377 13.8398L3.13374 6.83984L3.07221 6.75976C2.95129 6.56111 2.98312 6.29824 3.16011 6.13378C3.33708 5.96954 3.60085 5.95776 3.78999 6.09277L3.86616 6.16015L9.99999 12.7666L16.1338 6.16015Z"})}),Nr=e=>he.jsxs(c,{...e,children:[he.jsx("path",{d:"M10.2754 12.082C10.0813 11.9539 9.81738 11.9756 9.64652 12.1465L5.64652 16.1465C5.45126 16.3417 5.45126 16.6582 5.64652 16.8535C5.84178 17.0488 6.15829 17.0488 6.35355 16.8535L10 13.207L13.6465 16.8535C13.8418 17.0488 14.1583 17.0488 14.3536 16.8535C14.5488 16.6582 14.5488 16.3417 14.3536 16.1465L10.3536 12.1465L10.2754 12.082Z"}),he.jsx("path",{d:"M10.2754 7.91798C10.0813 8.04614 9.81735 8.02439 9.64649 7.85352L5.64649 3.85352C5.45123 3.65826 5.45123 3.34175 5.64649 3.14649C5.84175 2.95123 6.15826 2.95123 6.35352 3.14649L10 6.79298L13.6465 3.14649C13.8418 2.95123 14.1583 2.95123 14.3535 3.14649C14.5488 3.34175 14.5488 3.65826 14.3535 3.85352L10.3535 7.85352L10.2754 7.91798Z"})]}),_r=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M6.13378 3.16011C6.29824 2.98312 6.5611 2.95129 6.75976 3.07221L6.83984 3.13374L13.8398 9.63377C13.9417 9.72836 14 9.86101 14 9.99999C14 10.1043 13.9675 10.2053 13.9082 10.289L13.8398 10.3662L6.83984 16.8662C6.6375 17.054 6.32166 17.0421 6.13378 16.8399C5.94599 16.6375 5.95783 16.3217 6.16015 16.1338L12.7666 9.99999L6.16015 3.86616L6.09277 3.78999C5.95776 3.60085 5.96954 3.33709 6.13378 3.16011Z"})}),jr=e=>he.jsxs(c,{...e,children:[he.jsx("path",{d:"M10.2754 2.58204C10.0813 2.45388 9.81735 2.47563 9.64649 2.64649L5.64649 6.64649C5.45123 6.84175 5.45123 7.15826 5.64649 7.35352C5.84175 7.54878 6.15826 7.54878 6.35352 7.35352L10 3.70704L13.6465 7.35352C13.8418 7.54878 14.1583 7.54878 14.3535 7.35352C14.5488 7.15826 14.5488 6.84175 14.3535 6.64649L10.3535 2.64649L10.2754 2.58204Z"}),he.jsx("path",{d:"M10.2754 17.418C10.0813 17.5461 9.81735 17.5244 9.64649 17.3535L5.64649 13.3535C5.45123 13.1583 5.45123 12.8418 5.64649 12.6465C5.84175 12.4512 6.15826 12.4512 6.35352 12.6465L10 16.293L13.6465 12.6465C13.8418 12.4512 14.1583 12.4512 14.3535 12.6465C14.5488 12.8418 14.5488 13.1583 14.3535 13.3535L10.3535 17.3535L10.2754 17.418Z"})]}),Er=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5H3C2.79779 17.5 2.61549 17.3782 2.53809 17.1914C2.4607 17.0046 2.50349 16.7895 2.64648 16.6465L4.35547 14.9365C3.20124 13.6175 2.5 11.8906 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 11.7952 4.22659 13.4199 5.40332 14.5967L5.46582 14.6729C5.52017 14.7544 5.5498 14.8508 5.5498 14.9502C5.5498 15.0828 5.49709 15.2099 5.40332 15.3037L4.20703 16.5H10C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM13.29 9.30371C13.3986 9.05001 13.6925 8.93174 13.9463 9.04004C14.2 9.14863 14.3183 9.44253 14.21 9.69629C13.8506 10.536 13.1645 11.25 12.25 11.25C11.6372 11.25 11.128 10.9289 10.75 10.4648C10.372 10.9289 9.86276 11.25 9.25 11.25C8.63724 11.25 8.12801 10.9289 7.75 10.4648C7.37198 10.9289 6.86276 11.25 6.25 11.25C5.97386 11.25 5.75 11.0261 5.75 10.75C5.75 10.4739 5.97386 10.25 6.25 10.25C6.58764 10.25 7.00448 9.97056 7.29004 9.30371L7.32422 9.2373C7.41431 9.09121 7.5749 9 7.75 9C7.9501 9 8.13123 9.11975 8.20996 9.30371L8.32227 9.53516C8.59804 10.0359 8.95442 10.25 9.25 10.25C9.58764 10.25 10.0045 9.97056 10.29 9.30371L10.3242 9.2373C10.4143 9.09121 10.5749 9 10.75 9C10.9501 9 11.1312 9.11975 11.21 9.30371L11.3223 9.53516C11.598 10.0359 11.9544 10.25 12.25 10.25C12.5876 10.25 13.0045 9.97056 13.29 9.30371Z"})}),Tr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M11.6318 4.01757C11.898 4.09032 12.055 4.36555 11.9824 4.63183L8.98242 15.6318C8.90966 15.8981 8.63449 16.0551 8.36816 15.9824C8.10193 15.9097 7.94495 15.6345 8.01758 15.3682L11.0176 4.36816C11.0904 4.102 11.3656 3.94497 11.6318 4.01757ZM13.124 6.17089C13.3059 5.96325 13.6213 5.9423 13.8291 6.12402L17.8291 9.62402L17.9014 9.70215C17.9647 9.78754 18 9.89182 18 10C18 10.1441 17.9375 10.281 17.8291 10.376L13.8291 13.876L13.7471 13.9346C13.5449 14.0498 13.2833 14.011 13.124 13.8291C12.9649 13.6472 12.9606 13.3824 13.1016 13.1973L13.1709 13.124L16.7412 10L13.1709 6.87597C12.9632 6.69411 12.9422 6.37866 13.124 6.17089ZM6.25293 6.06542C6.45509 5.95025 6.71675 5.98908 6.87598 6.17089C7.03513 6.35279 7.03933 6.6176 6.89844 6.80273L6.8291 6.87597L3.25879 10L6.8291 13.124C7.03682 13.3059 7.05771 13.6213 6.87598 13.8291C6.69413 14.0369 6.37869 14.0578 6.1709 13.876L2.1709 10.376L2.09863 10.2979C2.03528 10.2124 2 10.1082 2 10C2.00005 9.85591 2.06247 9.71893 2.1709 9.62402L6.1709 6.12402L6.25293 6.06542Z"})}),Ar=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M16.5 3.99998C17.3284 3.99998 18 4.67156 18 5.49998V14.5C18 15.3284 17.3284 16 16.5 16H3.5C2.67159 16 2.00002 15.3284 2 14.5V8.99998C2 8.72384 2.22386 8.49998 2.5 8.49998C2.77614 8.49998 3 8.72384 3 8.99998V14.5C3.00002 14.7761 3.22387 15 3.5 15H16.5C16.7761 15 17 14.7761 17 14.5V5.49998C17 5.22384 16.7761 4.99998 16.5 4.99998H14C13.7239 4.99998 13.5 4.77611 13.5 4.49998C13.5 4.22384 13.7239 3.99998 14 3.99998H16.5ZM8.09766 3.00975C8.36831 3.06389 8.54415 3.327 8.49023 3.59764L7.49023 8.59764C7.43608 8.86827 7.17297 9.04413 6.90234 8.99022C6.6317 8.93609 6.45587 8.67296 6.50977 8.40233L7.50977 3.40233C7.5639 3.13167 7.82701 2.95583 8.09766 3.00975ZM4.77246 3.55467C4.97954 3.44859 5.23963 3.49874 5.39062 3.68748C5.5415 3.8761 5.53341 4.14059 5.38477 4.31932L5.3125 4.39061L3.30078 5.99998L5.3125 7.60936C5.52811 7.78187 5.56312 8.09686 5.39062 8.31248C5.21812 8.52808 4.90312 8.56309 4.6875 8.39061L2.1875 6.39061L2.1084 6.31053C2.03899 6.223 2.00001 6.11385 2 5.99998C2 5.84811 2.06891 5.70424 2.1875 5.60936L4.6875 3.60936L4.77246 3.55467ZM9.60938 3.68748C9.76037 3.49874 10.0205 3.44859 10.2275 3.55467L10.3125 3.60936L12.8125 5.60936C12.9311 5.70424 13 5.84811 13 5.99998C13 6.11385 12.961 6.22301 12.8916 6.31053L12.8125 6.39061L10.3125 8.39061C10.0969 8.56309 9.78188 8.52808 9.60938 8.31248C9.43688 8.09686 9.47189 7.78187 9.6875 7.60936L11.6992 5.99998L9.6875 4.39061L9.61523 4.31932C9.46659 4.14059 9.4585 3.8761 9.60938 3.68748Z"})}),Lr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8.49991 11C8.53258 11 8.5654 11.0024 8.59757 11.0088L8.60049 11.0098C8.62977 11.0158 8.65829 11.0243 8.68546 11.0352C8.6922 11.0379 8.69834 11.0419 8.70499 11.0449C8.72624 11.0545 8.74696 11.0648 8.76651 11.0772C8.77474 11.0824 8.78197 11.089 8.78995 11.0947C8.80885 11.1083 8.82685 11.1227 8.84366 11.1387C8.84666 11.1415 8.85048 11.1436 8.85343 11.1465C8.857 11.1501 8.85975 11.1546 8.86319 11.1582C8.87703 11.1729 8.88929 11.1888 8.90128 11.2051C8.90983 11.2167 8.91827 11.2281 8.92569 11.2402C8.93337 11.2528 8.93963 11.266 8.9462 11.2793C8.95329 11.2936 8.96107 11.3075 8.96671 11.3223C8.97226 11.3369 8.97619 11.352 8.98038 11.3672C8.98423 11.3812 8.98851 11.395 8.99112 11.4092C8.99653 11.4387 8.99991 11.469 8.99991 11.5V15.5C8.99989 15.7762 8.77604 16 8.49991 16C8.22387 15.9999 7.99993 15.7761 7.99991 15.5V12.7071L3.8534 16.8536L3.77527 16.918C3.58121 17.0461 3.31718 17.0244 3.14636 16.8536C2.97562 16.6827 2.95386 16.4187 3.08191 16.2247L3.14636 16.1465L7.29287 12H4.49989C4.22385 11.9999 3.9999 11.7761 3.99988 11.5C3.99988 11.2239 4.22383 11.0001 4.49989 11H8.49991ZM16.1464 3.14644C16.3417 2.9512 16.6582 2.95126 16.8535 3.14644C17.0487 3.3417 17.0487 3.65821 16.8535 3.85347L12.707 7.99999H15.4999C15.7761 7.99999 16 8.22385 16 8.49999C15.9999 8.77612 15.7761 9 15.4999 9H11.4999C11.4628 8.99998 11.426 8.99456 11.3896 8.98632C11.3648 8.9807 11.3408 8.97312 11.3173 8.96386C11.3127 8.96204 11.3082 8.95997 11.3036 8.958C11.2816 8.94857 11.2607 8.93733 11.2402 8.9248C11.2309 8.91914 11.2217 8.91353 11.2128 8.90722C11.1897 8.8909 11.1667 8.87382 11.1464 8.85351C11.0527 8.75976 10.9999 8.63255 10.9999 8.49999V4.49996C10.9999 4.22389 11.2239 4.00007 11.4999 3.99996C11.7761 3.99996 11.9999 4.22382 11.9999 4.49996V7.29295L16.1464 3.14644Z"})}),Or=e=>he.jsxs(c,{...e,children:[he.jsx("path",{d:"M5.14648 7.14648C5.34175 6.95122 5.65825 6.95122 5.85352 7.14648L8.35352 9.64648C8.44728 9.74025 8.5 9.86739 8.5 10C8.5 10.0994 8.47037 10.1958 8.41602 10.2773L8.35352 10.3535L5.85352 12.8535C5.65825 13.0488 5.34175 13.0488 5.14648 12.8535C4.95122 12.6583 4.95122 12.3417 5.14648 12.1465L7.29297 10L5.14648 7.85352C4.95122 7.65825 4.95122 7.34175 5.14648 7.14648Z"}),he.jsx("path",{d:"M14.5 12C14.7761 12 15 12.2239 15 12.5C15 12.7761 14.7761 13 14.5 13H9.5C9.22386 13 9 12.7761 9 12.5C9 12.2239 9.22386 12 9.5 12H14.5Z"}),he.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5 4C17.3284 4 18 4.67157 18 5.5V14.5C18 15.3284 17.3284 16 16.5 16H3.5C2.67157 16 2 15.3284 2 14.5V5.5C2 4.67157 2.67157 4 3.5 4H16.5ZM3.5 5C3.22386 5 3 5.22386 3 5.5V14.5C3 14.7761 3.22386 15 3.5 15H16.5C16.7761 15 17 14.7761 17 14.5V5.5C17 5.22386 16.7761 5 16.5 5H3.5Z"})]}),Ir=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M13.5 16C13.7761 16 14 16.2239 14 16.5C14 16.7761 13.7761 17 13.5 17H6.5C6.22386 17 6 16.7761 6 16.5C6 16.2239 6.22386 16 6.5 16H13.5ZM16.5 4C17.3284 4 18 4.67157 18 5.5V13.5C18 14.3284 17.3284 15 16.5 15H3.5C2.67157 15 2 14.3284 2 13.5V5.5C2 4.67157 2.67157 4 3.5 4H16.5ZM3.5 5C3.22386 5 3 5.22386 3 5.5V13.5C3 13.7761 3.22386 14 3.5 14H16.5C16.7761 14 17 13.7761 17 13.5V5.5C17 5.22386 16.7761 5 16.5 5H3.5Z"})}),Dr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M12.5 3C13.3284 3 14 3.67157 14 4.5V6H15.5C16.3284 6 17 6.67157 17 7.5V15.5C17 16.3284 16.3284 17 15.5 17H7.5C6.67157 17 6 16.3284 6 15.5V14H4.5C3.67157 14 3 13.3284 3 12.5V4.5C3 3.67157 3.67157 3 4.5 3H12.5ZM14 12.5C14 13.3284 13.3284 14 12.5 14H7V15.5C7 15.7761 7.22386 16 7.5 16H15.5C15.7761 16 16 15.7761 16 15.5V7.5C16 7.22386 15.7761 7 15.5 7H14V12.5ZM4.5 4C4.22386 4 4 4.22386 4 4.5V12.5C4 12.7761 4.22386 13 4.5 13H12.5C12.7761 13 13 12.7761 13 12.5V4.5C13 4.22386 12.7761 4 12.5 4H4.5Z"})}),Rr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M16.5 13C16.7761 13 17 13.2239 17 13.5V15.5C17 16.3284 16.3284 17 15.5 17H4.5C3.67157 17 3 16.3284 3 15.5V13.5C3 13.2239 3.22386 13 3.5 13C3.77614 13 4 13.2239 4 13.5V15.5C4 15.7761 4.22386 16 4.5 16H15.5C15.7761 16 16 15.7761 16 15.5V13.5C16 13.2239 16.2239 13 16.5 13ZM10 3C10.2761 3 10.5 3.22386 10.5 3.5V12.1855L13.626 8.66797C13.8094 8.46166 14.1256 8.44275 14.332 8.62598C14.5383 8.80936 14.5573 9.12563 14.374 9.33203L10.374 13.832L10.2949 13.9033C10.21 13.9654 10.107 14 10 14C9.85718 14 9.72086 13.9388 9.62598 13.832L5.62598 9.33203L5.56738 9.25C5.45079 9.04872 5.48735 8.78653 5.66797 8.62598C5.84854 8.46567 6.1127 8.46039 6.29883 8.59961L6.37402 8.66797L9.5 12.1855V3.5C9.5 3.22386 9.72386 3 10 3Z"})}),Pr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8.22461 11.082C8.41868 10.9539 8.68265 10.9756 8.85352 11.1465C9.02437 11.3173 9.04613 11.5813 8.91797 11.7754L8.85352 11.8535L4.70703 16H7.5C7.77614 16 8 16.2239 8 16.5C8 16.7761 7.77614 17 7.5 17H3.5C3.46695 17 3.43389 16.9967 3.40137 16.9902H3.39941C3.33993 16.9781 3.2851 16.9541 3.23535 16.9229C3.22314 16.9152 3.21185 16.9063 3.2002 16.8975C3.18573 16.8865 3.17138 16.8757 3.1582 16.8633C3.15452 16.8598 3.15008 16.8571 3.14648 16.8535C3.14173 16.8488 3.13832 16.8428 3.13379 16.8379C3.12089 16.8239 3.10891 16.8093 3.09766 16.7939C3.08941 16.7827 3.0814 16.7715 3.07422 16.7598C3.0639 16.7429 3.05517 16.7252 3.04688 16.707C3.04311 16.6988 3.03845 16.691 3.03516 16.6826C3.0248 16.6562 3.01653 16.6289 3.01074 16.6006C3.00395 16.5674 3 16.5337 3 16.5V12.5C3 12.2239 3.22386 12 3.5 12C3.77614 12 4 12.2239 4 12.5V15.293L8.14648 11.1465L8.22461 11.082ZM16.5 3C16.5374 3 16.5747 3.00436 16.6113 3.0127C16.6347 3.01803 16.6574 3.02559 16.6797 3.03418C16.687 3.03701 16.6939 3.04076 16.7012 3.04395C16.7213 3.05283 16.7409 3.06272 16.7598 3.07422C16.7675 3.07892 16.7757 3.08274 16.7832 3.08789C16.8082 3.10508 16.8317 3.12471 16.8535 3.14648L16.918 3.22461C16.9289 3.24116 16.9356 3.25988 16.9443 3.27734C16.95 3.28857 16.9572 3.29894 16.9619 3.31055C16.9868 3.37121 17 3.43545 17 3.5V7.5C17 7.77614 16.7761 8 16.5 8C16.2239 8 16 7.77614 16 7.5V4.70703L11.8535 8.85352C11.6583 9.04878 11.3417 9.04878 11.1465 8.85352C10.9512 8.65825 10.9512 8.34175 11.1465 8.14648L15.293 4H12.5C12.2239 4 12 3.77614 12 3.5C12 3.22386 12.2239 3 12.5 3H16.5Z"})}),zr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10.3857 2.50977C14.3486 2.71054 17.5 5.98724 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 9.72386 2.72386 9.5 3 9.5C3.27614 9.5 3.5 9.72386 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.5225 13.7691 3.68312 10.335 3.50879L10 3.5L9.89941 3.49023C9.67145 3.44371 9.5 3.24171 9.5 3C9.5 2.72386 9.72386 2.5 10 2.5L10.3857 2.50977ZM10 5.5C10.2761 5.5 10.5 5.72386 10.5 6V9.69043L13.2236 11.0527C13.4706 11.1762 13.5708 11.4766 13.4473 11.7236C13.3392 11.9397 13.0957 12.0435 12.8711 11.9834L12.7764 11.9473L9.77637 10.4473C9.60698 10.3626 9.5 10.1894 9.5 10V6C9.5 5.72386 9.72386 5.5 10 5.5ZM3.66211 6.94141C4.0273 6.94159 4.32303 7.23735 4.32324 7.60254C4.32324 7.96791 4.02743 8.26446 3.66211 8.26465C3.29663 8.26465 3 7.96802 3 7.60254C3.00021 7.23723 3.29676 6.94141 3.66211 6.94141ZM4.95605 4.29395C5.32146 4.29404 5.61719 4.59063 5.61719 4.95605C5.6171 5.3214 5.3214 5.61709 4.95605 5.61719C4.59063 5.61719 4.29403 5.32146 4.29395 4.95605C4.29395 4.59057 4.59057 4.29395 4.95605 4.29395ZM7.60254 3C7.96802 3 8.26465 3.29663 8.26465 3.66211C8.26446 4.02743 7.96791 4.32324 7.60254 4.32324C7.23736 4.32302 6.94159 4.0273 6.94141 3.66211C6.94141 3.29676 7.23724 3.00022 7.60254 3Z"})}),Fr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 4C14.0285 4 16.6432 7.30578 17.6602 8.86621L17.7402 8.99902C18.0858 9.62459 18.0858 10.3754 17.7402 11.001L17.6602 11.1338C16.6432 12.6942 14.0285 16 10 16C6.22298 16 3.68865 13.0942 2.54883 11.4453L2.33985 11.1338C1.88802 10.4404 1.88802 9.55955 2.33985 8.86621L2.54883 8.55469C3.68865 6.90581 6.22298 4 10 4ZM10 5C6.74739 5 4.47588 7.53 3.38086 9.11035L3.17774 9.41211C2.94217 9.77359 2.94217 10.2264 3.17774 10.5879L3.38086 10.8896C4.47588 12.47 6.74739 15 10 15C13.4691 15 15.8223 12.1222 16.8223 10.5879L16.8994 10.4482C17.0321 10.1621 17.0321 9.83791 16.8994 9.55176L16.8223 9.41211C15.8223 7.87782 13.4691 5 10 5ZM10 7C11.6569 7 13 8.34315 13 10C13 11.6569 11.6569 13 10 13C8.34315 13 7 11.6569 7 10C7 8.34315 8.34315 7 10 7ZM10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8Z"})}),Hr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M11.5859 2C11.9837 2.00004 12.3652 2.15818 12.6465 2.43945L15.5605 5.35352C15.8418 5.63478 16 6.01629 16 6.41406V16.5C16 17.3284 15.3284 18 14.5 18H5.5C4.72334 18 4.08461 17.4097 4.00781 16.6533L4 16.5V3.5C4 2.67157 4.67157 2 5.5 2H11.5859ZM5.5 3C5.22386 3 5 3.22386 5 3.5V16.5C5 16.7761 5.22386 17 5.5 17H14.5C14.7761 17 15 16.7761 15 16.5V7H12.5C11.6716 7 11 6.32843 11 5.5V3H5.5ZM12.54 13.3037C12.6486 13.05 12.9425 12.9317 13.1963 13.04C13.45 13.1486 13.5683 13.4425 13.46 13.6963C13.1651 14.3853 12.589 15 11.7998 15C11.3132 14.9999 10.908 14.7663 10.5996 14.4258C10.2913 14.7661 9.88667 14.9999 9.40039 15C8.91365 15 8.50769 14.7665 8.19922 14.4258C7.89083 14.7661 7.48636 15 7 15C6.72386 15 6.5 14.7761 6.5 14.5C6.5 14.2239 6.72386 14 7 14C7.21245 14 7.51918 13.8199 7.74023 13.3037L7.77441 13.2373C7.86451 13.0913 8.02513 13 8.2002 13C8.40022 13.0001 8.58145 13.1198 8.66016 13.3037C8.88121 13.8198 9.18796 14 9.40039 14C9.61284 13.9998 9.9197 13.8197 10.1406 13.3037L10.1748 13.2373C10.2649 13.0915 10.4248 13.0001 10.5996 13C10.7997 13 10.9808 13.1198 11.0596 13.3037C11.2806 13.8198 11.5874 13.9999 11.7998 14C12.0122 14 12.319 13.8198 12.54 13.3037ZM12.54 9.30371C12.6486 9.05001 12.9425 8.93174 13.1963 9.04004C13.45 9.14863 13.5683 9.44253 13.46 9.69629C13.1651 10.3853 12.589 11 11.7998 11C11.3132 10.9999 10.908 10.7663 10.5996 10.4258C10.2913 10.7661 9.88667 10.9999 9.40039 11C8.91365 11 8.50769 10.7665 8.19922 10.4258C7.89083 10.7661 7.48636 11 7 11C6.72386 11 6.5 10.7761 6.5 10.5C6.5 10.2239 6.72386 10 7 10C7.21245 10 7.51918 9.8199 7.74023 9.30371L7.77441 9.2373C7.86451 9.09126 8.02513 9 8.2002 9C8.40022 9.00008 8.58145 9.11981 8.66016 9.30371C8.88121 9.8198 9.18796 10 9.40039 10C9.61284 9.99978 9.9197 9.81969 10.1406 9.30371L10.1748 9.2373C10.2649 9.09147 10.4248 9.00014 10.5996 9C10.7997 9 10.9808 9.11975 11.0596 9.30371C11.2806 9.8198 11.5874 9.99989 11.7998 10C12.0122 10 12.319 9.81985 12.54 9.30371ZM12 5.5C12 5.77614 12.2239 6 12.5 6H14.793L12 3.20703V5.5Z"})}),Vr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M7.2705 3.0498C11.1054 1.5437 15.4369 3.42942 16.9473 7.26367C18.4585 11.1003 16.5729 15.4359 12.7363 16.9473C8.89982 18.4583 4.56416 16.5736 3.05272 12.7373C1.54288 8.90435 3.42282 4.57201 7.25194 3.05663C7.25547 3.05522 7.25914 3.05413 7.26269 3.05273C7.26523 3.05172 7.26795 3.05079 7.2705 3.0498ZM8.64159 14.5283C8.05764 14.958 7.56418 15.4198 7.17772 15.8896C8.21355 16.3858 9.37633 16.6096 10.5508 16.5098C10.2224 16.2862 9.89754 16.0029 9.58202 15.6748C9.26312 15.3432 8.94744 14.9583 8.64159 14.5283ZM13.1572 12.5351C12.5305 12.6659 11.8818 12.8585 11.2275 13.1162C10.5729 13.3741 9.96666 13.6758 9.41894 14.0078C9.6946 14.3937 9.97385 14.7371 10.2539 15.0283C10.7036 15.4959 11.1332 15.8156 11.5117 15.9863C11.8879 16.1559 12.1765 16.1643 12.3935 16.0791C12.6107 15.9936 12.8179 15.7903 12.9775 15.4092C13.1379 15.0262 13.2342 14.4991 13.2441 13.8506C13.2503 13.4466 13.2187 13.0053 13.1572 12.5351ZM3.63768 8.51855C3.34594 9.76629 3.4167 11.1121 3.92186 12.3945C4.42675 13.6762 5.29203 14.7083 6.35546 15.4219C6.82009 14.8304 7.4201 14.2628 8.12694 13.748C7.6691 12.9972 7.2458 12.1466 6.88378 11.2275C6.52163 10.3082 6.25055 9.397 6.07323 8.53515C5.20566 8.64053 4.38055 8.63422 3.63768 8.51855ZM16.081 12.3828C15.4777 12.3027 14.8015 12.3016 14.081 12.3857C14.1506 12.9087 14.1838 13.4053 14.1767 13.8652C14.1698 14.3208 14.124 14.75 14.0361 15.1377C14.9636 14.4096 15.6617 13.4524 16.081 12.3828ZM11.0947 6.7705C10.4885 7.14026 9.82394 7.47239 9.11425 7.75195C8.40436 8.03157 7.69176 8.2418 6.99608 8.38476C7.16147 9.17591 7.41289 10.0225 7.75292 10.8857C8.09272 11.7483 8.48601 12.5376 8.90429 13.2285C9.51056 12.8587 10.176 12.5276 10.8857 12.248C11.5954 11.9685 12.3075 11.7572 13.0029 11.6143C12.8376 10.8236 12.5869 9.97794 12.2471 9.11523C11.907 8.25206 11.5133 7.46188 11.0947 6.7705ZM13.6426 4.57714C13.178 5.16855 12.5788 5.73625 11.8721 6.25097C12.3302 7.00222 12.754 7.85307 13.1162 8.77245C13.4782 9.69152 13.7485 10.6024 13.9258 11.4639C14.7932 11.3584 15.6185 11.3649 16.3613 11.4805C16.6528 10.233 16.5841 8.88752 16.0791 7.60546C15.5738 6.32297 14.707 5.29067 13.6426 4.57714ZM5.9619 4.86327C5.03547 5.59096 4.33712 6.54756 3.91796 7.6162C4.52106 7.69641 5.19677 7.69821 5.91698 7.61425C5.84736 7.09104 5.81616 6.59385 5.82323 6.13378C5.83026 5.679 5.87418 5.25038 5.9619 4.86327ZM8.48827 4.01367C8.11174 3.8439 7.82256 3.83644 7.60546 3.92187C7.38849 4.0075 7.182 4.20998 7.02245 4.59081C6.86212 4.97369 6.76585 5.50006 6.75585 6.14843C6.74965 6.55226 6.78027 6.99382 6.84179 7.46386C7.46863 7.33317 8.11803 7.14252 8.77245 6.88476C9.42675 6.62702 10.0316 6.32305 10.5791 5.9912C10.3036 5.6057 10.0259 5.26167 9.74608 4.9707C9.29651 4.50322 8.8667 4.18435 8.48827 4.01367ZM12.8223 4.10937C11.7866 3.61351 10.6234 3.3904 9.44921 3.49023C9.77744 3.71355 10.1026 3.99633 10.418 4.32421C10.7368 4.65579 11.0526 5.04068 11.3584 5.4707C11.9424 5.04095 12.4358 4.57931 12.8223 4.10937Z"})}),$r=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM10.1006 9.00977C10.3286 9.05629 10.5 9.25829 10.5 9.5V12.5H11.5C11.7761 12.5 12 12.7239 12 13C12 13.2761 11.7761 13.5 11.5 13.5H8.5C8.22386 13.5 8 13.2761 8 13C8 12.7239 8.22386 12.5 8.5 12.5H9.5V10H8.5C8.22386 10 8 9.77614 8 9.5C8 9.22386 8.22386 9 8.5 9H10L10.1006 9.00977ZM10 6.5C10.4142 6.5 10.75 6.83579 10.75 7.25C10.75 7.66421 10.4142 8 10 8C9.58579 8 9.25 7.66421 9.25 7.25C9.25 6.83579 9.58579 6.5 10 6.5Z"})}),Br=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M16.5 4C17.3284 4 18 4.67157 18 5.5V14.5C18 15.3284 17.3284 16 16.5 16H3.5C2.67157 16 2 15.3284 2 14.5V5.5C2 4.67157 2.67157 4 3.5 4H16.5ZM3.5 5C3.22386 5 3 5.22386 3 5.5V14.5C3 14.7761 3.22386 15 3.5 15H16.5C16.7761 15 17 14.7761 17 14.5V5.5C17 5.22386 16.7761 5 16.5 5H3.5ZM12.5 12C12.7761 12 13 12.2239 13 12.5C13 12.7761 12.7761 13 12.5 13H7.5C7.22386 13 7 12.7761 7 12.5C7 12.2239 7.22386 12 7.5 12H12.5ZM6.25 9.5C6.66421 9.5 7 9.83579 7 10.25C7 10.6642 6.66421 11 6.25 11C5.83579 11 5.5 10.6642 5.5 10.25C5.5 9.83579 5.83579 9.5 6.25 9.5ZM8.75 9.5C9.16421 9.5 9.5 9.83579 9.5 10.25C9.5 10.6642 9.16421 11 8.75 11C8.33579 11 8 10.6642 8 10.25C8 9.83579 8.33579 9.5 8.75 9.5ZM11.25 9.5C11.6642 9.5 12 9.83579 12 10.25C12 10.6642 11.6642 11 11.25 11C10.8358 11 10.5 10.6642 10.5 10.25C10.5 9.83579 10.8358 9.5 11.25 9.5ZM13.75 9.5C14.1642 9.5 14.5 9.83579 14.5 10.25C14.5 10.6642 14.1642 11 13.75 11C13.3358 11 13 10.6642 13 10.25C13 9.83579 13.3358 9.5 13.75 9.5ZM6.25 7C6.66421 7 7 7.33579 7 7.75C7 8.16421 6.66421 8.5 6.25 8.5C5.83579 8.5 5.5 8.16421 5.5 7.75C5.5 7.33579 5.83579 7 6.25 7ZM8.75 7C9.16421 7 9.5 7.33579 9.5 7.75C9.5 8.16421 9.16421 8.5 8.75 8.5C8.33579 8.5 8 8.16421 8 7.75C8 7.33579 8.33579 7 8.75 7ZM11.25 7C11.6642 7 12 7.33579 12 7.75C12 8.16421 11.6642 8.5 11.25 8.5C10.8358 8.5 10.5 8.16421 10.5 7.75C10.5 7.33579 10.8358 7 11.25 7ZM13.75 7C14.1642 7 14.5 7.33579 14.5 7.75C14.5 8.16421 14.1642 8.5 13.75 8.5C13.3358 8.5 13 8.16421 13 7.75C13 7.33579 13.3358 7 13.75 7Z"})}),Ur=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M14.5 2C15.3284 2 16 2.67157 16 3.5V16.5C16 17.3284 15.3284 18 14.5 18H6.375C5.06332 18 4 16.9367 4 15.625V4.375C4 3.06332 5.06332 2 6.375 2H14.5ZM15 13.9121C14.8434 13.9676 14.6756 14 14.5 14H6.375C5.61561 14 5 14.6156 5 15.375V15.625C5 16.3844 5.61561 17 6.375 17H14.5C14.7761 17 15 16.7761 15 16.5V13.9121ZM6.375 3C5.61561 3 5 3.61561 5 4.375V13.4395C5.38814 13.1632 5.86232 13 6.375 13H14.5C14.7761 13 15 12.7761 15 12.5V3.5C15 3.22386 14.7761 3 14.5 3H6.375ZM11.5 5C12.3284 5 13 5.67157 13 6.5V11C13 11.1921 12.8898 11.3669 12.7168 11.4502C12.5436 11.5335 12.3376 11.5107 12.1875 11.3906L10 9.64062L7.8125 11.3906C7.66242 11.5107 7.45644 11.5335 7.2832 11.4502C7.11017 11.3669 7 11.1921 7 11V6.5C7 5.67157 7.67157 5 8.5 5H11.5ZM8.5 6C8.22386 6 8 6.22386 8 6.5V9.95898L9.6875 8.60938L9.75977 8.56152C9.93421 8.46584 10.1528 8.48162 10.3125 8.60938L12 9.95898V6.5C12 6.22386 11.7761 6 11.5 6H8.5Z"})}),Zr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M12.5 17C12.7761 17 13 17.2239 13 17.5C13 17.7761 12.7761 18 12.5 18H7.5C7.22386 18 7 17.7761 7 17.5C7 17.2239 7.22386 17 7.5 17H12.5ZM10 2C13.3137 2 16 4.68629 16 8C16 9.73776 15.2608 11.3033 14.0811 12.3984L13.8389 12.6113C13.3268 13.0382 13 13.5753 13 14.124V15.5C13 15.7761 12.7761 16 12.5 16H7.5C7.22386 16 7 15.7761 7 15.5V14.124C6.99998 13.6438 6.7495 13.1727 6.34375 12.7764L6.16113 12.6113C4.84147 11.5115 4 9.85368 4 8C4 4.68629 6.68629 2 10 2ZM10 3C7.23858 3 5 5.23858 5 8C5 9.5443 5.69948 10.9248 6.80078 11.8428L7.03711 12.0557C7.57356 12.5787 7.99998 13.2899 8 14.124V15H9.5V11.207L7.14648 8.85352L7.08203 8.77539C6.95387 8.58131 6.97562 8.31735 7.14648 8.14648C7.31735 7.97562 7.58131 7.95387 7.77539 8.08203L7.85352 8.14648L10 10.293L12.1465 8.14648L12.2246 8.08203C12.4187 7.95387 12.6827 7.97562 12.8535 8.14648C13.0244 8.31735 13.0461 8.58131 12.918 8.77539L12.8535 8.85352L10.5 11.207V15H12V14.124C12 13.1706 12.5575 12.3776 13.1992 11.8428L13.4004 11.665C14.3848 10.7513 15 9.44786 15 8C15 5.23858 12.7614 3 10 3Z"})}),Wr=e=>he.jsxs(c,{...e,children:[he.jsx("path",{d:"M13.2901 8.80371C13.3987 8.55001 13.6926 8.43174 13.9463 8.54004C14.2 8.64863 14.3183 8.94253 14.21 9.19629C13.8506 10.036 13.1645 10.75 12.2501 10.75C11.6373 10.75 11.1281 10.4289 10.7501 9.96484C10.372 10.4289 9.86281 10.75 9.25006 10.75C8.6373 10.75 8.12807 10.4289 7.75006 9.96484C7.37204 10.4289 6.86281 10.75 6.25005 10.75C5.97391 10.75 5.75004 10.5261 5.75004 10.25C5.75004 9.97386 5.97391 9.75 6.25005 9.75C6.58769 9.75 7.00453 9.47056 7.29009 8.80371L7.32427 8.73731C7.41436 8.59121 7.57495 8.5 7.75006 8.5C7.95016 8.5 8.13128 8.61975 8.21002 8.80371L8.32232 9.03516C8.5981 9.5359 8.95448 9.75 9.25006 9.75C9.5877 9.75 10.0045 9.47056 10.2901 8.80371L10.3243 8.73731C10.4144 8.59121 10.575 8.5 10.7501 8.5C10.9502 8.5 11.1313 8.61975 11.21 8.80371L11.3223 9.03516C11.5981 9.5359 11.9545 9.75 12.2501 9.75C12.5877 9.75 13.0045 9.47056 13.2901 8.80371Z"}),he.jsx("path",{d:"M17.5001 9.5C17.5001 5.35786 14.1422 2 10.0001 2C6.02597 2 2.7738 5.09093 2.51646 8.9999C2.49832 9.27545 2.7239 9.5 3.00005 9.5C3.27619 9.5 3.49804 9.27536 3.51899 9.00001C3.7743 5.64378 6.57844 3 10.0001 3C13.5899 3 16.5001 5.91015 16.5001 9.5C16.5001 13.0899 13.5899 16 10.0001 16L4.14454 16.0039C4.2217 15.9267 4.65715 15.4879 4.97281 15.1696C5.1604 14.9805 5.16561 14.6771 4.98464 14.4817C4.79262 14.2743 4.46658 14.2684 4.26722 14.4687L2.6909 16.0528C2.43618 16.3088 2.43611 16.7225 2.69075 16.9786L4.23274 18.5292C4.43649 18.7341 4.76945 18.7294 4.96735 18.5188C5.15709 18.317 5.15139 18.0007 4.95452 17.8058L4.14454 17.0039L10.0001 17C14.1422 17 17.5001 13.6421 17.5001 9.5Z"})]}),qr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M10 3C12.7614 3 15 5.23858 15 8V9.81543C15 10.5361 15.4709 11.2387 16.1465 11.7832L16.3115 11.9209C17.1376 12.6382 18 13.7991 18 15.5C18 15.7761 17.7761 16 17.5 16H12.4502C12.2186 17.1411 11.2095 18 10 18C8.79051 18 7.78142 17.1411 7.5498 16H2.5C2.22386 16 2 15.7761 2 15.5C2 13.6856 2.98177 12.4857 3.85352 11.7832L4.09668 11.5723C4.63959 11.0632 5 10.4461 5 9.81543V8C5 5.23858 7.23858 3 10 3ZM8.58691 16C8.79297 16.5823 9.34707 17 10 17C10.6529 17 11.207 16.5823 11.4131 16H8.58691ZM10 4C7.79086 4 6 5.79086 6 8V9.81543C6 10.826 5.43779 11.6866 4.77148 12.3096L4.48047 12.5615C3.83983 13.0778 3.18409 13.8648 3.03223 15H16.9678C16.8376 14.0269 16.3367 13.31 15.793 12.7998L15.5195 12.5615C14.7347 11.9291 14 10.9704 14 9.81543V8C14 5.79086 12.2091 4 10 4Z"})}),Gr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M6 5.34256C6.00015 4.15259 7.31959 3.43636 8.31739 4.08474L15.4825 8.74199L15.6426 8.86114C16.3892 9.49703 16.3356 10.703 15.4825 11.2576L8.31739 15.9149C7.31952 16.5634 6 15.8472 6 14.6571V5.34256ZM7.77247 4.92361C7.43991 4.70754 7.00016 4.946 7 5.34256V14.6571C7 15.0538 7.43984 15.2922 7.77247 15.076L14.9375 10.4188C15.2218 10.2339 15.2401 9.83187 14.9912 9.61993L14.9375 9.58087L7.77247 4.92361Z"})}),Jr=e=>he.jsxs(c,{...e,children:[he.jsx("path",{d:"M15.8198 7C16.6885 7.00025 17.3624 7.73158 17.3178 8.57617L17.2993 8.74707L16.1332 15.7471C16.0126 16.4699 15.3865 16.9996 14.6538 17H5.34711C4.6142 16.9998 3.98833 16.47 3.86762 15.7471L2.7016 8.74707C2.54922 7.83277 3.25418 7 4.18109 7H15.8198ZM4.18109 8C3.87216 8 3.63722 8.27731 3.68793 8.58203L4.85394 15.582C4.89413 15.8229 5.10291 15.9998 5.34711 16H14.6538C14.8978 15.9996 15.1068 15.8228 15.1469 15.582L16.3129 8.58203L16.3188 8.46973C16.3036 8.21259 16.0899 8.00023 15.8198 8H4.18109Z"}),he.jsx("path",{d:"M16.0004 5.5C16.0004 5.224 15.7764 5.00024 15.5004 5H4.50043C4.22428 5 4.00043 5.22386 4.00043 5.5C4.00043 5.77614 4.22428 6 4.50043 6H15.5004C15.7764 5.99976 16.0004 5.776 16.0004 5.5Z"}),he.jsx("path",{d:"M14.5004 3.5C14.5004 3.224 14.2764 3.00024 14.0004 3H6.00043C5.72428 3 5.50043 3.22386 5.50043 3.5C5.50043 3.77614 5.72428 4 6.00043 4H14.0004C14.2764 3.99976 14.5004 3.776 14.5004 3.5Z"})]}),Kr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8 14C8 14.5523 8.44772 15 9 15H9.5C9.77614 15 10 15.2239 10 15.5C10 15.7761 9.77614 16 9.5 16H9C8.40169 16 7.86651 15.7357 7.5 15.3193C7.13349 15.7357 6.59831 16 6 16H5.5C5.22386 16 5 15.7761 5 15.5C5 15.2239 5.22386 15 5.5 15H6C6.55228 15 7 14.5523 7 14V13.5L7.00098 6.5H7V6C7 5.44772 6.55228 5 6 5H5.5C5.22386 5 5 4.77614 5 4.5C5 4.22386 5.22386 4 5.5 4H6C6.59805 4 7.1335 4.26363 7.5 4.67969C7.8665 4.26363 8.40195 4 9 4H9.5C9.77614 4 10 4.22386 10 4.5C10 4.77614 9.77614 5 9.5 5H9C8.44772 5 8 5.44772 8 6V6.5H8.00098L8 13.5V14ZM5.5 7C5.77614 7 6 7.22386 6 7.5C6 7.77614 5.77614 8 5.5 8H3.5C3.22386 8 3 8.22386 3 8.5V11.5C3 11.7761 3.22386 12 3.5 12H5.5C5.77614 12 6 12.2239 6 12.5C6 12.7761 5.77614 13 5.5 13H3.5C2.67157 13 2 12.3284 2 11.5V8.5C2 7.67157 2.67157 7 3.5 7H5.5ZM16.5 7C17.3284 7 18 7.67157 18 8.5V11.5C18 12.3284 17.3284 13 16.5 13H9.5C9.22386 13 9 12.7761 9 12.5C9 12.2239 9.22386 12 9.5 12H16.5C16.7761 12 17 11.7761 17 11.5V8.5C17 8.22386 16.7761 8 16.5 8H9.5C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7H16.5Z"})}),Yr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8.5 2C12.0899 2 15 4.91015 15 8.5C15 10.1149 14.4094 11.5908 13.4346 12.7275L17.8535 17.1465L17.918 17.2246C18.0461 17.4187 18.0244 17.6827 17.8535 17.8535C17.6827 18.0244 17.4187 18.0461 17.2246 17.918L17.1465 17.8535L12.7275 13.4346C11.5908 14.4094 10.1149 15 8.5 15C4.91015 15 2 12.0899 2 8.5C2 4.91015 4.91015 2 8.5 2ZM8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C11.5376 14 14 11.5376 14 8.5C14 5.46243 11.5376 3 8.5 3Z"})}),Qr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M5.99999 13.5C6.55227 13.5 6.99998 13.9478 6.99999 14.5V16.5C6.99999 17.0523 6.55228 17.5 5.99999 17.5H3.99999C3.44771 17.5 2.99999 17.0523 2.99999 16.5V14.5C3 13.9478 3.44772 13.5 3.99999 13.5H5.99999ZM3.99999 16.5H5.99999V14.5H3.99999V16.5ZM16.5 15C16.7761 15 17 15.2239 17 15.5C17 15.7762 16.7761 16 16.5 16H9.49999C9.22386 16 8.99999 15.7762 8.99999 15.5C9.00001 15.2239 9.22387 15 9.49999 15H16.5ZM5.99999 8.00002C6.55227 8.00002 6.99998 8.44775 6.99999 9.00002V11C6.99999 11.5523 6.55228 12 5.99999 12H3.99999C3.44771 12 2.99999 11.5523 2.99999 11V9.00002C3 8.44775 3.44772 8.00003 3.99999 8.00002H5.99999ZM3.99999 11H5.99999V9.00002H3.99999V11ZM16.5 9.50002C16.7761 9.50002 17 9.72389 17 10C17 10.2762 16.7761 10.5 16.5 10.5H9.49999C9.22386 10.5 8.99999 10.2762 8.99999 10C9.00001 9.7239 9.22387 9.50003 9.49999 9.50002H16.5ZM6.12597 2.91798C6.30923 2.71156 6.62549 2.69282 6.83202 2.87599C7.03846 3.05925 7.05721 3.37551 6.87402 3.58205L4.65624 6.08205C4.56198 6.18816 4.42708 6.24925 4.28515 6.25002C4.14315 6.25078 4.0075 6.19113 3.9121 6.08596L2.87987 4.94728L2.81932 4.86525C2.701 4.66516 2.7351 4.40248 2.91405 4.24025C3.09293 4.07823 3.35742 4.06993 3.54491 4.20705L3.62011 4.27541L4.27733 5.00002L6.12597 2.91798ZM16.5 4.00002C16.7761 4.00002 17 4.22389 17 4.50002C17 4.77616 16.7761 5.00002 16.5 5.00002H9.49999C9.22386 5.00001 8.99999 4.77615 8.99999 4.50002C9.00001 4.22389 9.22387 4.00002 9.49999 4.00002H16.5Z"})}),Xr=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M12.6699 3C14.2586 3 15.6148 4.14871 15.876 5.71582L16.5566 9.79785C16.836 11.4741 15.5431 13 13.8438 13H11.6094L12.0117 15.0098C12.3211 16.5567 11.1381 17.9999 9.56055 18H9.32324C8.97898 18 8.66235 17.8236 8.48047 17.5391L8.41113 17.4102L6.89746 14.0459C6.59327 13.3699 6.02983 12.847 5.33789 12.5928L5.19824 12.5459L4.05859 12.1953C3.4294 12.0016 3.00013 11.42 3 10.7617V4.5C3 3.67157 3.67157 3 4.5 3H12.6699ZM4.5 4C4.22386 4 4 4.22386 4 4.5V10.7617C4.00013 10.981 4.14305 11.1746 4.35254 11.2393L5.49219 11.5898L5.68359 11.6543C6.62674 12.001 7.39486 12.7133 7.80957 13.6348L9.32324 17H9.56055C10.507 16.9999 11.2167 16.1341 11.0312 15.2061L10.5098 12.5977C10.4805 12.4509 10.5184 12.2984 10.6133 12.1826C10.7083 12.0669 10.8503 12 11 12H13.8438C14.9251 12 15.7481 11.0286 15.5703 9.96191L14.8896 5.87988C14.7087 4.79508 13.7697 4 12.6699 4H4.5Z"})}),es=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M9.56055 2C11.1381 2.00009 12.3211 3.44332 12.0117 4.99023L11.6094 7H13.8438C15.5431 7 16.836 8.52594 16.5566 10.2021L15.876 14.2842C15.6148 15.8513 14.2586 17 12.6699 17H4.5C3.67157 17 3 16.3284 3 15.5V9.23828C3.00013 8.57996 3.4294 7.99838 4.05859 7.80469L5.19824 7.4541L5.33789 7.40723C6.02983 7.15302 6.59327 6.63008 6.89746 5.9541L8.41113 2.58984L8.48047 2.46094C8.66235 2.17643 8.97898 2.00002 9.32324 2H9.56055ZM7.80957 6.36523C7.39486 7.2867 6.62674 7.99897 5.68359 8.3457L5.49219 8.41016L4.35254 8.76074C4.14305 8.82539 4.00013 9.01904 4 9.23828V15.5C4 15.7761 4.22386 16 4.5 16H12.6699C13.7697 16 14.7087 15.2049 14.8896 14.1201L15.5703 10.0381C15.7481 8.97141 14.9251 8 13.8438 8H11C10.8503 8 10.7083 7.9331 10.6133 7.81738C10.5184 7.70164 10.4805 7.54912 10.5098 7.40234L11.0312 4.79395C11.2167 3.86589 10.507 3.00009 9.56055 3H9.32324L7.80957 6.36523Z"})}),ts=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M11.5 2C11.7761 2 12 2.22386 12 2.5C12 2.77614 11.7761 3 11.5 3H10.5V4.01953C12.0566 4.12942 13.4719 4.74753 14.582 5.70996L15.3037 4.98926C15.499 4.79436 15.8156 4.79412 16.0107 4.98926C16.2059 5.1844 16.2056 5.501 16.0107 5.69629L15.2891 6.41699C16.3542 7.64511 17 9.24674 17 11C17 14.866 13.866 18 10 18C6.13401 18 3 14.866 3 11C3 7.30217 5.86743 4.27597 9.5 4.01953V3H8.5C8.22386 3 8 2.77614 8 2.5C8 2.22386 8.22386 2 8.5 2H11.5ZM10 5C6.68629 5 4 7.68629 4 11C4 14.3137 6.68629 17 10 17C13.3137 17 16 14.3137 16 11C16 7.68629 13.3137 5 10 5ZM7.17188 8.17188C7.29007 8.05368 7.45914 8.0024 7.62305 8.03516H7.62695C7.62846 8.03541 7.63045 8.03566 7.63281 8.03613C7.63847 8.03729 7.64687 8.03982 7.65723 8.04199C7.67822 8.04638 7.70875 8.05315 7.74707 8.06152C7.82438 8.07842 7.93535 8.10307 8.07031 8.13574C8.34023 8.20109 8.7112 8.29808 9.11133 8.42383C9.51008 8.54915 9.94691 8.70603 10.3467 8.89258C10.7387 9.07552 11.132 9.30384 11.4141 9.58594C12.1951 10.367 12.1951 11.633 11.4141 12.4141C10.633 13.1951 9.36699 13.1951 8.58594 12.4141C8.30384 12.132 8.07552 11.7387 7.89258 11.3467C7.70603 10.9469 7.54915 10.5101 7.42383 10.1113C7.29808 9.7112 7.20109 9.34023 7.13574 9.07031C7.10307 8.93535 7.07842 8.82438 7.06152 8.74707C7.05315 8.70876 7.04638 8.67822 7.04199 8.65723C7.03982 8.64687 7.03729 8.63847 7.03613 8.63281C7.03566 8.63045 7.03541 8.62846 7.03516 8.62695V8.62305L7.02637 8.56055C7.01616 8.41702 7.06868 8.27507 7.17188 8.17188ZM8.37793 9.81152C8.49565 10.1861 8.63741 10.5779 8.79883 10.9238C8.96389 11.2775 9.13316 11.5472 9.29297 11.707C9.68349 12.0975 10.3165 12.0975 10.707 11.707C11.0975 11.3165 11.0975 10.6835 10.707 10.293C10.5472 10.1332 10.2775 9.96389 9.92383 9.79883C9.57792 9.63741 9.18607 9.49565 8.81152 9.37793C8.59583 9.31014 8.38783 9.25179 8.20215 9.20215C8.25179 9.38783 8.31014 9.59583 8.37793 9.81152Z"})}),ns=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M16.5 13C16.7761 13 17 13.2239 17 13.5V15.5C17 16.3284 16.3284 17 15.5 17H4.5C3.67157 17 3 16.3284 3 15.5V13.5C3 13.2239 3.22386 13 3.5 13C3.77614 13 4 13.2239 4 13.5V15.5C4 15.7761 4.22386 16 4.5 16H15.5C15.7761 16 16 15.7761 16 15.5V13.5C16 13.2239 16.2239 13 16.5 13ZM10 3C10.1428 3 10.2791 3.06122 10.374 3.16797L14.374 7.66797L14.4326 7.75C14.5492 7.95128 14.5127 8.21347 14.332 8.37402C14.1515 8.53433 13.8873 8.53961 13.7012 8.40039L13.626 8.33203L10.5 4.81445V13.5C10.5 13.7761 10.2761 14 10 14C9.72386 14 9.5 13.7761 9.5 13.5V4.81445L6.37402 8.33203C6.19064 8.53834 5.87437 8.55725 5.66797 8.37402C5.46166 8.19064 5.44275 7.87437 5.62598 7.66797L9.62598 3.16797L9.70508 3.09668C9.79001 3.03458 9.89298 3 10 3Z"})}),rs=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8.5 3C8.77614 3 9 3.22386 9 3.5V16.5C9 16.7761 8.77614 17 8.5 17C8.22386 17 8 16.7761 8 16.5V3.5C8 3.22386 8.22386 3 8.5 3ZM14.5 4C14.7761 4 15 4.22386 15 4.5V15.5C15 15.7761 14.7761 16 14.5 16C14.2239 16 14 15.7761 14 15.5V4.5C14 4.22386 14.2239 4 14.5 4ZM5.5 6C5.77614 6 6 6.22386 6 6.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V6.5C5 6.22386 5.22386 6 5.5 6ZM11.5 6C11.7761 6 12 6.22386 12 6.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V6.5C11 6.22386 11.2239 6 11.5 6ZM2.5 8C2.77614 8 3 8.22386 3 8.5V11.5C3 11.7761 2.77614 12 2.5 12C2.22386 12 2 11.7761 2 11.5V8.5C2 8.22386 2.22386 8 2.5 8ZM17.5 8C17.7761 8 18 8.22386 18 8.5V11.5C18 11.7761 17.7761 12 17.5 12C17.2239 12 17 11.7761 17 11.5V8.5C17 8.22386 17.2239 8 17.5 8Z"})}),ss=e=>he.jsx(c,{...e,children:he.jsx("path",{d:"M8.51665 1.74113C10.2884 1.76402 11.9559 2.83955 12.6465 4.59171L12.7628 4.92179C13.2385 6.46783 12.8337 8.10198 11.8067 9.24697L14.1983 15.3183L14.2637 15.5126C14.5194 16.4232 14.0976 17.3932 13.2569 17.827L13.0704 17.912C12.107 18.2912 11.0265 17.871 10.5616 16.9706L10.4766 16.7841L8.08892 10.7235C6.54735 10.595 5.12503 9.67523 4.4141 8.2128L4.2725 7.89053C3.57861 6.12782 4.07535 4.19165 5.37212 2.96769L5.41899 2.92863C5.53445 2.84376 5.68248 2.81213 5.82426 2.84366C5.986 2.87982 6.11982 2.99423 6.18071 3.14835L7.37603 6.18253L7.41802 6.27628C7.65056 6.72664 8.19133 6.93665 8.6729 6.74698L8.76568 6.70499C9.18619 6.48811 9.39763 6.00237 9.26959 5.54678L9.23638 5.45011L8.04497 2.42472C7.98415 2.26984 8.00414 2.0939 8.09868 1.95695C8.1933 1.82013 8.35031 1.73906 8.51665 1.74113ZM10.167 5.08389L10.2325 5.27725C10.4885 6.18804 10.0664 7.15869 9.22564 7.59268L9.03912 7.67764C8.0758 8.05695 6.99532 7.63653 6.53032 6.73624L6.44536 6.54971L5.55473 4.28897C4.93566 5.21146 4.76613 6.41259 5.20317 7.52334L5.31352 7.77432C5.86704 8.9129 6.97569 9.631 8.17974 9.72842L8.43951 9.74014L8.5147 9.746C8.68752 9.77336 8.83579 9.89042 8.90142 10.0565L11.4073 16.4179L11.4493 16.5106C11.6817 16.9612 12.2225 17.171 12.7042 16.9813L12.7979 16.9393C13.2181 16.7223 13.429 16.2366 13.3008 15.7811L13.2686 15.6845L10.7588 9.31436C10.6847 9.12556 10.7314 8.90971 10.878 8.76944C11.8129 7.87446 12.2027 6.50434 11.8057 5.21475L11.7159 4.95792C11.282 3.85784 10.3524 3.09939 9.28326 2.83976L10.167 5.08389Z"})}),is=de.memo(({code:e,codeClassName:n,headerClassName:r})=>he.jsxs("div",{className:"flex flex-col",children:[he.jsxs("div",{className:t("text-xs font-ui p-2 inline-flex items-center gap-2 bg-accent-secondary-900 text-accent-secondary-200 max-h-12 w-full",r),children:[he.jsx($r,{className:"inline flex-shrink-0 mx-2"}),he.jsx("span",{className:"line-clamp-2",children:he.jsx(u,{defaultMessage:"Syntax highlighting has been disabled due to code size.",id:"gRqsbs2s7I"})})]}),he.jsx("pre",{className:t("flex-1 overflow-auto",n),children:he.jsx("code",{children:e})})]}));is.displayName="CodeTooLarge";const as=function(e){if(null==e)return cs;if("function"==typeof e)return ls(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=as(e[n]);return ls(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return ls(n);function n(n){const r=n;let s;for(s in e)if(r[s]!==t[s])return!1;return!0}}(e);if("string"==typeof e)return function(e){return ls(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function ls(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function cs(){return!0}const us=[],ds=!0,hs=!1,ps="skip";function fs(e,t,n,r){let s;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):s=t;const i=as(s),o=r?-1:1;!function e(s,a,l){const c=s&&"object"==typeof s?s:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+s.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=us;if((!t||i(s,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[ds,e];return null==e?us:[e]}(n(s,l)),h[0]===hs))return h;if("children"in s&&s.children){const t=s;if(t.children&&h[0]!==ps)for(u=(r?t.children.length:-1)+o,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===hs)return c;u="number"==typeof c[1]?c[1]:u+o}}return h}}(e,void 0,[])()}function ms(e,t,n,r){let s,i,o;"function"==typeof t&&"function"!=typeof n?(i=void 0,o=t,s=n):(i=t,o=n,s=r),fs(e,i,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return o(e,r,n)},s)}const gs="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ys=globalThis,xs="9.43.0";function vs(){return bs(ys),ys}function bs(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||xs,t[xs]=t[xs]||{}}function Cs(e,t,n=ys){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[xs]=r[xs]||{};return s[e]||(s[e]=t())}const ws={};function ks(){return Ms().enabled}function Ss(e,...t){gs&&ks()&&function(e){if(!("console"in ys))return e();const t=ys.console,n={},r=Object.keys(ws);r.forEach(e=>{const r=ws[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}(()=>{ys.console[e](`Sentry Logger [${e}]:`,...t)})}function Ms(){return gs?Cs("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Ns={enable:function(){Ms().enabled=!0},disable:function(){Ms().enabled=!1},isEnabled:ks,log:function(...e){Ss("log",...e)},warn:function(...e){Ss("warn",...e)},error:function(...e){Ss("error",...e)}},_s=Object.prototype.toString;function js(e){return function(e,t){return _s.call(e)===`[object ${t}]`}(e,"Object")}function Es(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Ts(e=function(){const e=ys;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function As(){return Date.now()/1e3}let Ls;function Os(){return(Ls??(Ls=function(){const{performance:e}=ys;if(!e?.now||!e.timeOrigin)return As;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function Is(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Is(r[s],t[s],n-1));return r}function Ds(){return Ts()}const Rs="_sentrySpan";function Ps(e,t){t?function(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{gs&&Ns.log(`Failed to add non-enumerable property "${t}" to object`,e)}}(e,Rs,t):delete e[Rs]}function zs(e){return e[Rs]}class Fs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Ds(),sampleRand:Math.random()}}clone(){const e=new Fs;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Ps(e,zs(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Os(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Ts()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Fs?t.getScopeData():js(t)?e:void 0,{tags:r,extra:s,user:i,contexts:o,level:a,fingerprint:l=[],propagationContext:c}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},i&&Object.keys(i).length&&(this._user=i),a&&(this._level=a),l.length&&(this._fingerprint=l),c&&(this._propagationContext=c),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Ps(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Ds(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:As(),...e,message:e.message?Es(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:zs(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Is(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||Ts();if(!this._client)return gs&&Ns.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||Ts();if(!this._client)return gs&&Ns.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||Ts();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(gs&&Ns.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class Hs{constructor(e,t){let n,r;n=e||new Fs,r=t||new Fs,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(s){throw this._popScope(),s}return r=n,Boolean(r?.then&&"function"==typeof r.then)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n);var r}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Vs(){const e=bs(vs());return e.stack=e.stack||new Hs(Cs("defaultCurrentScope",()=>new Fs),Cs("defaultIsolationScope",()=>new Fs))}function $s(e){return Vs().withScope(e)}function Bs(e,t){const n=Vs();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Us(e){return Vs().withScope(()=>e(Vs().getIsolationScope()))}function Zs(e){const t=bs(e);return t.acs?t.acs:{withIsolationScope:Us,withScope:$s,withSetScope:Bs,withSetIsolationScope:(e,t)=>Us(t),getCurrentScope:()=>Vs().getScope(),getIsolationScope:()=>Vs().getIsolationScope()}}function Ws(){return Zs(vs()).getCurrentScope()}function qs(e){if(e)return function(e){return e instanceof Fs||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>Gs.includes(e))}(e)?{captureContext:e}:e}const Gs=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Js(e,t){return Ws().captureException(e,qs(t))}const Ks="antCitation",Ys=new RegExp(String.raw`:${Ks}\[\]{.*?}`,"g"),Qs=xt({citations:vt()}),Xs=function(e,t){const n=n=>{ms(n,void 0,n=>{if("textDirective"!==n.type&&"leafDirective"!==n.type&&"containerDirective"!==n.type||n.name!==e)"textDirective"===n.type&&(n.name===e||n.attributes&&0!==Object.keys(n.attributes).length||Object.assign(n,{type:"text",value:":"+n.name}));else{const r=t(n.attributes);if(n.data={hName:e,hProperties:r},"containerDirective"===n.type&&n.children){const e=[...n.children];for(;e.length;){const t=e.shift();t&&(t.data={...t.data,hProperties:{...t.data?.hProperties||null,...r}},"children"in t&&e.push(...t.children))}}}})};return()=>n}(Ks,e=>{try{const t=Qs.parse(e).citations;return{citationUuids:t.split(",")}}catch(t){return Js(t),{citationUuids:[]}}}),ei={'code[class*="language-"]':{background:"hsl(220, 13%, 18%)",color:"hsl(220, 14%, 71%)",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(220, 13%, 18%)",color:"hsl(220, 14%, 71%)",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"] *::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"]::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"] *::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'pre[class*="language-"] *::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},prolog:{color:"hsl(220, 10%, 40%)"},cdata:{color:"hsl(220, 10%, 40%)"},doctype:{color:"hsl(220, 14%, 71%)"},punctuation:{color:"hsl(220, 14%, 71%)"},entity:{color:"hsl(220, 14%, 71%)",cursor:"help"},"attr-name":{color:"hsl(29, 54%, 61%)"},"class-name":{color:"hsl(29, 54%, 61%)"},boolean:{color:"hsl(29, 54%, 61%)"},constant:{color:"hsl(29, 54%, 61%)"},number:{color:"hsl(29, 54%, 61%)"},atrule:{color:"hsl(29, 54%, 61%)"},keyword:{color:"hsl(286, 60%, 67%)"},property:{color:"hsl(355, 65%, 65%)"},tag:{color:"hsl(355, 65%, 65%)"},symbol:{color:"hsl(355, 65%, 65%)"},deleted:{color:"hsl(355, 65%, 65%)"},important:{color:"hsl(355, 65%, 65%)"},selector:{color:"hsl(95, 38%, 62%)"},string:{color:"hsl(95, 38%, 62%)"},char:{color:"hsl(95, 38%, 62%)"},builtin:{color:"hsl(95, 38%, 62%)"},inserted:{color:"hsl(95, 38%, 62%)"},regex:{color:"hsl(95, 38%, 62%)"},"attr-value":{color:"hsl(95, 38%, 62%)"},"attr-value > .token.punctuation":{color:"hsl(95, 38%, 62%)"},variable:{color:"hsl(207, 82%, 66%)"},operator:{color:"hsl(207, 82%, 66%)"},function:{color:"hsl(207, 82%, 66%)"},url:{color:"hsl(187, 47%, 55%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(220, 14%, 71%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(220, 14%, 71%)"},".language-css .token.selector":{color:"hsl(355, 65%, 65%)"},".language-css .token.property":{color:"hsl(220, 14%, 71%)"},".language-css .token.function":{color:"hsl(187, 47%, 55%)"},".language-css .token.url > .token.function":{color:"hsl(187, 47%, 55%)"},".language-css .token.url > .token.string.url":{color:"hsl(95, 38%, 62%)"},".language-css .token.important":{color:"hsl(286, 60%, 67%)"},".language-css .token.atrule .token.rule":{color:"hsl(286, 60%, 67%)"},".language-javascript .token.operator":{color:"hsl(286, 60%, 67%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(5, 48%, 51%)"},".language-json .token.operator":{color:"hsl(220, 14%, 71%)"},".language-json .token.null.keyword":{color:"hsl(29, 54%, 61%)"},".language-markdown .token.url":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url > .token.operator":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url > .token.content":{color:"hsl(207, 82%, 66%)"},".language-markdown .token.url > .token.url":{color:"hsl(187, 47%, 55%)"},".language-markdown .token.url-reference.url":{color:"hsl(187, 47%, 55%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(95, 38%, 62%)"},".language-markdown .token.bold .token.content":{color:"hsl(29, 54%, 61%)"},".language-markdown .token.italic .token.content":{color:"hsl(286, 60%, 67%)"},".language-markdown .token.strike .token.content":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.list.punctuation":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(355, 65%, 65%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.cr:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.lf:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.space:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},".line-highlight.line-highlight":{background:"hsla(220, 100%, 80%, 0.04)"},".line-highlight.line-highlight:before":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 14%, 71%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 14%, 71%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(220, 100%, 80%, 0.04)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(220, 14%, 71%, 0.15)"},".command-line .command-line-prompt":{borderRightColor:"hsla(220, 14%, 71%, 0.15)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(220, 14%, 45%)"},".command-line .command-line-prompt > span:before":{color:"hsl(220, 14%, 45%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(286, 60%, 67%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(286, 60%, 67%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(286, 60%, 67%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(224, 13%, 17%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(224, 13%, 17%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(224, 13%, 17%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(224, 13%, 17%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(219, 13%, 22%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(219, 13%, 22%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(219, 13%, 22%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(220, 14%, 71%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(220, 14%, 71%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(220, 14%, 71%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(220, 14%, 71%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(220, 14%, 71%)"}},ti={'code[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"]::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},prolog:{color:"hsl(230, 4%, 64%)"},cdata:{color:"hsl(230, 4%, 64%)"},doctype:{color:"hsl(230, 8%, 24%)"},punctuation:{color:"hsl(230, 8%, 24%)"},entity:{color:"hsl(230, 8%, 24%)",cursor:"help"},"attr-name":{color:"hsl(35, 99%, 36%)"},"class-name":{color:"hsl(35, 99%, 36%)"},boolean:{color:"hsl(35, 99%, 36%)"},constant:{color:"hsl(35, 99%, 36%)"},number:{color:"hsl(35, 99%, 36%)"},atrule:{color:"hsl(35, 99%, 36%)"},keyword:{color:"hsl(301, 63%, 40%)"},property:{color:"hsl(5, 74%, 59%)"},tag:{color:"hsl(5, 74%, 59%)"},symbol:{color:"hsl(5, 74%, 59%)"},deleted:{color:"hsl(5, 74%, 59%)"},important:{color:"hsl(5, 74%, 59%)"},selector:{color:"hsl(119, 34%, 47%)"},string:{color:"hsl(119, 34%, 47%)"},char:{color:"hsl(119, 34%, 47%)"},builtin:{color:"hsl(119, 34%, 47%)"},inserted:{color:"hsl(119, 34%, 47%)"},regex:{color:"hsl(119, 34%, 47%)"},"attr-value":{color:"hsl(119, 34%, 47%)"},"attr-value > .token.punctuation":{color:"hsl(119, 34%, 47%)"},variable:{color:"hsl(221, 87%, 60%)"},operator:{color:"hsl(221, 87%, 60%)"},function:{color:"hsl(221, 87%, 60%)"},url:{color:"hsl(198, 99%, 37%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(230, 8%, 24%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(230, 8%, 24%)"},".language-css .token.selector":{color:"hsl(5, 74%, 59%)"},".language-css .token.property":{color:"hsl(230, 8%, 24%)"},".language-css .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.string.url":{color:"hsl(119, 34%, 47%)"},".language-css .token.important":{color:"hsl(301, 63%, 40%)"},".language-css .token.atrule .token.rule":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.operator":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(344, 84%, 43%)"},".language-json .token.operator":{color:"hsl(230, 8%, 24%)"},".language-json .token.null.keyword":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.url":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.operator":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.content":{color:"hsl(221, 87%, 60%)"},".language-markdown .token.url > .token.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.url-reference.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(119, 34%, 47%)"},".language-markdown .token.bold .token.content":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.italic .token.content":{color:"hsl(301, 63%, 40%)"},".language-markdown .token.strike .token.content":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.list.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(5, 74%, 59%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.cr:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.lf:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.space:before":{color:"hsla(230, 8%, 24%, 0.2)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},".line-highlight.line-highlight":{background:"hsla(230, 8%, 24%, 0.05)"},".line-highlight.line-highlight:before":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(230, 8%, 24%, 0.05)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".command-line .command-line-prompt":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(230, 1%, 62%)"},".command-line .command-line-prompt > span:before":{color:"hsl(230, 1%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(301, 63%, 40%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(0, 0, 95%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(0, 0, 95%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(0, 0, 95%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(0, 0, 95%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(0, 0%, 100%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(230, 8%, 24%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(230, 8%, 24%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(230, 8%, 24%)"}};function ni({didCopy:e,className:n,...r}){return he.jsxs("div",{className:"relative",children:[he.jsx(Dr,{className:t(n,"transition-all",e?"opacity-0 scale-50":"opacity-100 scale-100"),...r}),he.jsx(f,{className:t(n,"absolute top-0 left-0 transition-all",e?"opacity-100 scale-100":"opacity-0 scale-50"),size:r.size,vectorSizeOverride:r.vectorSizeOverride})]})}const ri=e=>wt.useFeatureGate(e).value;function si(e,t,n,r){const s=wt.useDynamicConfig(e);return de.useMemo(()=>{const i=s.get(t,n),{success:o,data:a,error:l}=r.safeParse(i);return l&&function(e,t,n,r,s){!function(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;Ws().captureMessage(e,n,r)}("Statsig parsing error",{level:"warning",extra:{type:e,configName:t,key:n,value:r,parsingError:s}})}("dynamic_config_value",e,t,i,l),o?a:n},[s,t,n,r,e])}bt(),bt().nullable(),Ct(),Ct().nullable(),vt(),vt().nullable();var ii=Object.getOwnPropertyNames,oi=Object.getOwnPropertySymbols,ai=Object.prototype.hasOwnProperty;function li(e,t){return function(n,r,s){return e(n,r,s)&&t(n,r,s)}}function ci(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);var s=r.cache,i=s.get(t),o=s.get(n);if(i&&o)return i===n&&o===t;s.set(t,n),s.set(n,t);var a=e(t,n,r);return s.delete(t),s.delete(n),a}}function ui(e){return ii(e).concat(oi(e))}var di=Object.hasOwn||function(e,t){return ai.call(e,t)};function hi(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var pi=Object.getOwnPropertyDescriptor,fi=Object.keys;function mi(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function gi(e,t){return hi(e.getTime(),t.getTime())}function yi(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xi(e,t){return e===t}function vi(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s,i,o=new Array(r),a=e.entries(),l=0;(s=a.next())&&!s.done;){for(var c=t.entries(),u=!1,d=0;(i=c.next())&&!i.done;)if(o[d])d++;else{var h=s.value,p=i.value;if(n.equals(h[0],p[0],l,d,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){u=o[d]=!0;break}d++}if(!u)return!1;l++}return!0}var bi=hi;function Ci(e,t,n){var r=fi(e),s=r.length;if(fi(t).length!==s)return!1;for(;s-- >0;)if(!ji(e,t,n,r[s]))return!1;return!0}function wi(e,t,n){var r,s,i,o=ui(e),a=o.length;if(ui(t).length!==a)return!1;for(;a-- >0;){if(!ji(e,t,n,r=o[a]))return!1;if(s=pi(e,r),i=pi(t,r),(s||i)&&(!s||!i||s.configurable!==i.configurable||s.enumerable!==i.enumerable||s.writable!==i.writable))return!1}return!0}function ki(e,t){return hi(e.valueOf(),t.valueOf())}function Si(e,t){return e.source===t.source&&e.flags===t.flags}function Mi(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var s,i,o=new Array(r),a=e.values();(s=a.next())&&!s.done;){for(var l=t.values(),c=!1,u=0;(i=l.next())&&!i.done;){if(!o[u]&&n.equals(s.value,i.value,s.value,i.value,e,t,n)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function Ni(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function _i(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ji(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||di(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Ei=Array.isArray,Ti="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ai=Object.assign,Li=Object.prototype.toString.call.bind(Object.prototype.toString);var Oi=Ii();function Ii(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,s=e.createInternalComparator,i=e.createState,o=e.strict,a=void 0!==o&&o,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,s={areArraysEqual:r?wi:mi,areDatesEqual:gi,areErrorsEqual:yi,areFunctionsEqual:xi,areMapsEqual:r?li(vi,wi):vi,areNumbersEqual:bi,areObjectsEqual:r?wi:Ci,arePrimitiveWrappersEqual:ki,areRegExpsEqual:Si,areSetsEqual:r?li(Mi,wi):Mi,areTypedArraysEqual:r?wi:Ni,areUrlsEqual:_i};if(n&&(s=Ai({},s,n(s))),t){var i=ci(s.areArraysEqual),o=ci(s.areMapsEqual),a=ci(s.areObjectsEqual),l=ci(s.areSetsEqual);s=Ai({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:l})}return s}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,s=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,a=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,p,f){if(e===p)return!0;if(null==e||null==p)return!1;var m=typeof e;if(m!==typeof p)return!1;if("object"!==m)return"number"===m?o(e,p,f):"function"===m&&s(e,p,f);var g=e.constructor;if(g!==p.constructor)return!1;if(g===Object)return a(e,p,f);if(Ei(e))return t(e,p,f);if(null!=Ti&&Ti(e))return d(e,p,f);if(g===Date)return n(e,p,f);if(g===RegExp)return c(e,p,f);if(g===Map)return i(e,p,f);if(g===Set)return u(e,p,f);var y=Li(e);return"[object Date]"===y?n(e,p,f):"[object RegExp]"===y?c(e,p,f):"[object Map]"===y?i(e,p,f):"[object Set]"===y?u(e,p,f):"[object Object]"===y?"function"!=typeof e.then&&"function"!=typeof p.then&&a(e,p,f):"[object URL]"===y?h(e,p,f):"[object Error]"===y?r(e,p,f):"[object Arguments]"===y?a(e,p,f):("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)&&l(e,p,f)}}(l);return function(e){var t=e.circular,n=e.comparator,r=e.createState,s=e.equals,i=e.strict;if(r)return function(e,o){var a=r(),l=a.cache,c=void 0===l?t?new WeakMap:void 0:l,u=a.meta;return n(e,o,{cache:c,equals:s,meta:u,strict:i})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(e,t){return n(e,t,o)}}({circular:r,comparator:c,createState:i,equals:s?s(c):(t=c,function(e,n,r,s,i,o,a){return t(e,n,a)}),strict:a})}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ri(e){return function(e){if(Array.isArray(e))return Di(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Di(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e){var t=function(e,t){if("object"!=Pi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pi(t)?t:t+""}function Fi(e,t,n){return(t=zi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(null,arguments)}function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach(function(t){Fi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({strict:!0}),Ii({circular:!0}),Ii({circular:!0,strict:!0}),Ii({createInternalComparator:function(){return hi}}),Ii({strict:!0,createInternalComparator:function(){return hi}}),Ii({circular:!0,createInternalComparator:function(){return hi}}),Ii({circular:!0,createInternalComparator:function(){return hi},strict:!0});var Bi={};function Ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return function(e){if(0===e.length||1===e.length)return e;var t,n,r=e.join(".");return Bi[r]||(Bi[r]=0===(n=(t=e).length)||1===n?t:2===n?[t[0],t[1],"".concat(t[0],".").concat(t[1]),"".concat(t[1],".").concat(t[0])]:3===n?[t[0],t[1],t[2],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0])]:n>=4?[t[0],t[1],t[2],t[3],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[2],".").concat(t[3]),"".concat(t[3],".").concat(t[0]),"".concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[0]),"".concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[3],".").concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[2],".").concat(t[1],".").concat(t[0])]:void 0),Bi[r]}(e.filter(function(e){return"token"!==e})).reduce(function(e,t){return $i($i({},e),n[t])},t)}function Zi(e){return e.join(" ")}function Wi(e){var t=e.node,n=e.stylesheet,r=e.style,s=void 0===r?{}:r,i=e.useInlineStyles,o=e.key,a=t.properties,l=t.type,c=t.tagName,u=t.value;if("text"===l)return u;if(c){var d,h=function(e,t){var n=0;return function(r){return n+=1,r.map(function(r,s){return Wi({node:r,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(s)})})}}(n,i);if(i){var p=Object.keys(n).reduce(function(e,t){return t.split(".").forEach(function(t){e.includes(t)||e.push(t)}),e},[]),f=a.className&&a.className.includes("token")?["token"]:[],m=a.className&&f.concat(a.className.filter(function(e){return!p.includes(e)}));d=$i($i({},a),{},{className:Zi(m)||void 0,style:Ui(a.className,Object.assign({},a.style,s),n)})}else d=$i($i({},a),{},{className:Zi(a.className)});var g=h(t.children);return xe.createElement(c,Hi({key:o},d),g)}}var qi=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach(function(t){Fi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ki=/\n/g;function Yi(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,s=void 0===r?{float:"left",paddingRight:"10px"}:r,i=e.numberStyle,o=void 0===i?{}:i,a=e.startingLineNumber;return xe.createElement("code",{style:Object.assign({},n,s)},function(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(e,t){var s=t+n;return xe.createElement("span",{key:"line-".concat(t),className:"react-syntax-highlighter-line-number",style:"function"==typeof r?r(s):r},"".concat(s,"\n"))})}({lines:t.replace(/\n$/,"").split("\n"),style:o,startingLineNumber:a}))}function Qi(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function Xi(e,t,n){var r,s={display:"inline-block",minWidth:(r=n,"".concat(r.toString().length,".25em")),paddingRight:"1em",textAlign:"right",userSelect:"none"},i="function"==typeof e?e(t):e;return Ji(Ji({},s),i)}function eo(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,s=e.largestLineNumber,i=e.showInlineLineNumbers,o=e.lineProps,a=void 0===o?{}:o,l=e.className,c=void 0===l?[]:l,u=e.showLineNumbers,d=e.wrapLongLines,h="function"==typeof a?a(n):a;if(h.className=c,n&&i){var p=Xi(r,n,s);t.unshift(Qi(n,p))}return d&u&&(h.style=Ji(Ji({},h.style),{},{display:"flex"})),{type:"element",tagName:"span",properties:h,children:t}}function to(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<e.length;r++){var s=e[r];if("text"===s.type)n.push(eo({children:[s],className:Ri(new Set(t))}));else if(s.children){var i=t.concat(s.properties.className);to(s.children,i).forEach(function(e){return n.push(e)})}}return n}function no(e,t,n,r,s,i,o,a,l){var c,u=to(e.value),d=[],h=-1,p=0;function f(e,i){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t||c.length>0?function(e,t){return eo({children:e,lineNumber:t,lineNumberStyle:a,largestLineNumber:o,showInlineLineNumbers:s,lineProps:n,className:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],showLineNumbers:r,wrapLongLines:l})}(e,i,c):function(e,t){if(r&&t&&s){var n=Xi(a,t,o);e.unshift(Qi(t,n))}return e}(e,i)}for(var m=function(){var e=u[p],t=e.children[0].value;if(t.match(Ki)){var n=t.split("\n");n.forEach(function(t,s){var o=r&&d.length+i,a={type:"text",value:"".concat(t,"\n")};if(0===s){var l=f(u.slice(h+1,p).concat(eo({children:[a],className:e.properties.className})),o);d.push(l)}else if(s===n.length-1){var c=u[p+1]&&u[p+1].children&&u[p+1].children[0],m={type:"text",value:"".concat(t)};if(c){var g=eo({children:[m],className:e.properties.className});u.splice(p+1,0,g)}else{var y=f([m],o,e.properties.className);d.push(y)}}else{var x=f([a],o,e.properties.className);d.push(x)}}),h=p}p++};p<u.length;)m();if(h!==u.length-1){var g=u.slice(h+1,u.length);if(g&&g.length){var y=f(g,r&&d.length+i);d.push(y)}}return t?d:(c=[]).concat.apply(c,d)}function ro(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(e,t){return Wi({node:e,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(t)})})}function so(e){return e&&void 0!==e.highlightAuto}function io(e,t){return function(n){var r=n.language,s=n.children,i=n.style,o=void 0===i?t:i,a=n.customStyle,l=void 0===a?{}:a,c=n.codeTagProps,u=void 0===c?{className:r?"language-".concat(r):void 0,style:Ji(Ji({},o['code[class*="language-"]']),o['code[class*="language-'.concat(r,'"]')])}:c,d=n.useInlineStyles,h=void 0===d||d,p=n.showLineNumbers,f=void 0!==p&&p,m=n.showInlineLineNumbers,g=void 0===m||m,y=n.startingLineNumber,x=void 0===y?1:y,v=n.lineNumberContainerStyle,b=n.lineNumberStyle,C=void 0===b?{}:b,w=n.wrapLines,k=n.wrapLongLines,S=void 0!==k&&k,M=n.lineProps,N=void 0===M?{}:M,_=n.renderer,j=n.PreTag,E=void 0===j?"pre":j,T=n.CodeTag,A=void 0===T?"code":T,L=n.code,O=void 0===L?(Array.isArray(s)?s[0]:s)||"":L,I=n.astGenerator,D=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(n,qi);I=I||e;var R=f?xe.createElement(Yi,{containerStyle:v,codeStyle:u.style||{},numberStyle:C,startingLineNumber:x,codeString:O}):null,P=o.hljs||o['pre[class*="language-"]']||{backgroundColor:"#fff"},z=so(I)?"hljs":"prismjs",F=h?Object.assign({},D,{style:Object.assign({},P,l)}):Object.assign({},D,{className:D.className?"".concat(z," ").concat(D.className):z,style:Object.assign({},l)});if(u.style=Ji(Ji({},u.style),{},S?{whiteSpace:"pre-wrap"}:{whiteSpace:"pre"}),!I)return xe.createElement(E,F,R,xe.createElement(A,u,O));(void 0===w&&_||S)&&(w=!0),_=_||ro;var H=[{type:"text",value:O}],V=function(e){var t=e.astGenerator,n=e.language,r=e.code,s=e.defaultCodeValue;if(so(t)){var i=function(e,t){return-1!==e.listLanguages().indexOf(t)}(t,n);return"text"===n?{value:s,language:"text"}:i?t.highlight(n,r):t.highlightAuto(r)}try{return n&&"text"!==n?{value:t.highlight(r,n)}:{value:s}}catch(o){return{value:s}}}({astGenerator:I,language:r,code:O,defaultCodeValue:H});null===V.language&&(V.value=H);var $=no(V,w,N,f,g,x,V.value.length+x,C,S);return xe.createElement(E,F,xe.createElement(A,u,!g&&R,_({rows:$,stylesheet:o,useInlineStyles:h})))}}function oo(e,t,n,r,s,i,o){try{var a=e[i](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,s)}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zi(r.key),r)}}function lo(e,t){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function co(e,t){if(t&&("object"==Pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ho,po,fo,mo,go={exports:{}},yo={exports:{}};function xo(){return po||(po=1,function(e){var t=(ho||(ho=1,function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(yo)),yo.exports).default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(D){h=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var s=t&&t.prototype instanceof b?t:b,i=Object.create(s.prototype),o=new O(r||[]);return a(i,"_invoke",{value:E(e,n,o)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}s.wrap=p;var m="suspendedStart",g="suspendedYield",y="executing",x="completed",v={};function b(){}function C(){}function w(){}var k={};h(k,c,function(){return this});var S=Object.getPrototypeOf,M=S&&S(S(I([])));M&&M!==i&&o.call(M,c)&&(k=M);var N=w.prototype=b.prototype=Object.create(k);function _(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function j(e,n){function r(s,i,a,l){var c=f(e[s],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==t(d)&&o.call(d,"__await")?n.resolve(d.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):n.resolve(d).then(function(e){u.value=e,a(u)},function(e){return r("throw",e,a,l)})}l(c.arg)}var s;a(this,"_invoke",{value:function(e,t){function i(){return new n(function(n,s){r(e,t,n,s)})}return s=s?s.then(i,i):i()}})}function E(e,t,n){var s=m;return function(i,o){if(s===y)throw Error("Generator is already running");if(s===x){if("throw"===i)throw o;return{value:r,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=T(a,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===m)throw s=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=y;var c=f(e,t,n);if("normal"===c.type){if(s=n.done?x:g,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=x,n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,s=e.iterator[n];if(s===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(s,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,i=function t(){for(;++s<e.length;)if(o.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return C.prototype=w,a(N,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:C,configurable:!0}),C.displayName=h(w,d,"GeneratorFunction"),s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,d,"GeneratorFunction")),e.prototype=Object.create(N),e},s.awrap=function(e){return{__await:e}},_(j.prototype),h(j.prototype,u,function(){return this}),s.AsyncIterator=j,s.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var o=new j(p(e,t,n,r),i);return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},_(N),h(N,d,"Generator"),h(N,c,function(){return this}),h(N,"toString",function(){return"[object Generator]"}),s.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},s.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,s){return a.type="throw",a.arg=e,t.next=n,s&&(t.method="next",t.arg=r),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;L(n)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(go)),go.exports}const vo=ve(function(){if(mo)return fo;mo=1;var e=xo()();fo=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return fo}());function bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=uo(e);if(t){var s=uo(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return co(this,n)}}const Co=(ko=(wo={loader:function(){return ye(()=>import("./index-B1WmHw2Q.js").then(e=>e.i),__vite__mapDeps([0,1])).then(function(e){return e.default||e})},supportedLanguages:["abap","abnf","actionscript","ada","agda","al","antlr4","apacheconf","apex","apl","applescript","aql","arduino","arff","asciidoc","asm6502","asmatmel","aspnet","autohotkey","autoit","avisynth","avro-idl","bash","basic","batch","bbcode","bicep","birb","bison","bnf","brainfuck","brightscript","bro","bsl","c","cfscript","chaiscript","cil","clike","clojure","cmake","cobol","coffeescript","concurnas","coq","cpp","crystal","csharp","cshtml","csp","css-extras","css","csv","cypher","d","dart","dataweave","dax","dhall","diff","django","dns-zone-file","docker","dot","ebnf","editorconfig","eiffel","ejs","elixir","elm","erb","erlang","etlua","excel-formula","factor","false","firestore-security-rules","flow","fortran","fsharp","ftl","gap","gcode","gdscript","gedcom","gherkin","git","glsl","gml","gn","go-module","go","graphql","groovy","haml","handlebars","haskell","haxe","hcl","hlsl","hoon","hpkp","hsts","http","ichigojam","icon","icu-message-format","idris","iecst","ignore","inform7","ini","io","j","java","javadoc","javadoclike","javascript","javastacktrace","jexl","jolie","jq","js-extras","js-templates","jsdoc","json","json5","jsonp","jsstacktrace","jsx","julia","keepalived","keyman","kotlin","kumir","kusto","latex","latte","less","lilypond","liquid","lisp","livescript","llvm","log","lolcode","lua","magma","makefile","markdown","markup-templating","markup","matlab","maxscript","mel","mermaid","mizar","mongodb","monkey","moonscript","n1ql","n4js","nand2tetris-hdl","naniscript","nasm","neon","nevod","nginx","nim","nix","nsis","objectivec","ocaml","opencl","openqasm","oz","parigp","parser","pascal","pascaligo","pcaxis","peoplecode","perl","php-extras","php","phpdoc","plsql","powerquery","powershell","processing","prolog","promql","properties","protobuf","psl","pug","puppet","pure","purebasic","purescript","python","q","qml","qore","qsharp","r","racket","reason","regex","rego","renpy","rest","rip","roboconf","robotframework","ruby","rust","sas","sass","scala","scheme","scss","shell-session","smali","smalltalk","smarty","sml","solidity","solution-file","soy","sparql","splunk-spl","sqf","sql","squirrel","stan","stylus","swift","systemd","t4-cs","t4-templating","t4-vb","tap","tcl","textile","toml","tremor","tsx","tt2","turtle","twig","typescript","typoscript","unrealscript","uorazor","uri","v","vala","vbnet","velocity","verilog","vhdl","vim","visual-basic","warpscript","wasm","web-idl","wiki","wolfram","wren","xeora","xml-doc","xojo","xquery","yaml","yang","zig"]}).loader,So=wo.registerLanguage,Mo=wo.languageLoaders,Fi(No=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(o,xe.PureComponent);var e,t,n,r,s,i=bo(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return e=o,t=[{key:"componentDidUpdate",value:function(){!o.isRegistered(this.props.language)&&Mo&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var e=this;o.astGeneratorPromise||o.loadAstGenerator(),o.astGenerator||o.astGeneratorPromise.then(function(){e.forceUpdate()}),!o.isRegistered(this.props.language)&&Mo&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var e=this,t=this.props.language;"text"!==t&&o.loadLanguage(t).then(function(){return e.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(e){return o.isSupportedLanguage(e)?e:"text"}},{key:"render",value:function(){return xe.createElement(o.highlightInstance,Hi({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:o.astGenerator}))}}],n=[{key:"preload",value:function(){return o.loadAstGenerator()}},{key:"loadLanguage",value:(r=vo.mark(function e(t){var n;return vo.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof(n=Mo[t])){e.next=5;break}return e.abrupt("return",n(o.registerLanguage));case 5:throw new Error("Language ".concat(t," not supported"));case 6:case"end":return e.stop()}},e)}),s=function(){var e=this,t=arguments;return new Promise(function(n,s){var i=r.apply(e,t);function o(e){oo(i,n,s,o,a,"next",e)}function a(e){oo(i,n,s,o,a,"throw",e)}o(void 0)})},function(e){return s.apply(this,arguments)})},{key:"isSupportedLanguage",value:function(e){return o.isRegistered(e)||"function"==typeof Mo[e]}},{key:"loadAstGenerator",value:function(){return o.astGeneratorPromise=ko().then(function(e){o.astGenerator=e,So&&o.languages.forEach(function(t,n){return So(e,n,t)})}),o.astGeneratorPromise}}],t&&ao(e.prototype,t),n&&ao(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),"astGenerator",null),Fi(No,"highlightInstance",io(null,{})),Fi(No,"astGeneratorPromise",null),Fi(No,"languages",new Map),Fi(No,"supportedLanguages",wo.supportedLanguages||Object.keys(Mo||{})),Fi(No,"isRegistered",function(e){return!0}),Fi(No,"registerLanguage",function(e,t){if(!So)throw new Error("Current syntax highlighter doesn't support registration of languages");if(No.astGenerator)return So(No.astGenerator,e,t);No.languages.set(e,t)}),No);var wo,ko,So,Mo,No;const _o=de.memo(({node:e,stylesheet:t,useInlineStyles:n,index:r})=>Wi({node:e,stylesheet:t,useInlineStyles:n,key:r}),(e,t)=>Oi(e.node,t.node)&&Oi(e.stylesheet,t.stylesheet));_o.displayName="Row";const jo=({rows:e,stylesheet:t,useInlineStyles:n})=>e.map((e,r)=>he.jsx(_o,{index:r,node:e,stylesheet:t,useInlineStyles:n},r)),Eo=[],To=kt(vt()),Ao={p:e=>he.jsx("p",{className:"whitespace-pre-wrap break-words",...e}),li:e=>he.jsx("li",{className:"whitespace-normal break-words",...e}),ul:e=>he.jsx("ul",{className:"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-disc space-y-2.5 pl-7",...e}),ol:e=>he.jsx("ol",{className:"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-decimal space-y-2.5 pl-7",...e}),blockQuote:e=>he.jsx("blockquote",{className:"border-l-2 border-border-100 pl-2",...e}),pre:({className:e,children:n,flagShowCodeHeader:r=!0})=>{!function(e){if(!e)throw new Error("Invariant failed")}("string"==typeof n);const s=/language-(\w+)/.exec(e||""),i=s?.[1]?.toLowerCase()||"";let o=n.trimEnd();o=o.replace(Ys,"");const{didCopy:c,copyToClipboard:f}=function(){const[e,t]=de.useState(!1),[n,r]=de.useState(void 0);return{didCopy:e,copyToClipboard:de.useCallback(async e=>{const s=()=>{t(!0),r(setTimeout(()=>t(!1),2e3))};let i,o;if(n&&clearTimeout(n),"string"==typeof e)i=e.trim();else{if(!e||"object"!=typeof e)throw new Error("Invalid clipboard input; no plain text provided");i=e.text.trim(),o=e.html}try{if(o)try{return await navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([i],{type:"text/plain"}),"text/html":new Blob([o],{type:"text/html"})})]),void s()}catch(a){try{const e=new ClipboardEvent("copy",{bubbles:!0,cancelable:!0}),t=new DataTransfer;if(t.setData("text/plain",i),t.setData("text/html",o),Object.defineProperty(e,"clipboardData",{value:t,writable:!1}),document.dispatchEvent(e),e.defaultPrevented)return void s()}catch(l){}}await navigator.clipboard.writeText(i),s()}catch(c){h.error(p.CLIPBOARD,"Clipboard copy failed",c)}},[n])}}(),{codeStyle:y}=(()=>{const{resolvedMode:e}=d();return{codeStyle:de.useMemo(()=>{const t="dark"===e?ei:ti;return{...t,'pre[class*="language-"]':{...t['pre[class*="language-"]'],background:"transparent",fontFamily:"var(--font-mono)"},'code[class*="language-"]':{...t['code[class*="language-"]'],background:"transparent",fontFamily:"var(--font-mono)"}}},[e])}})(),x=m(),{exceedsSizeLimit:v}=(e=>({exceedsSizeLimit:de.useMemo(()=>e?new Blob([e]).size:0,[e])>204800}))(o),b=si("claude_code_spotlight_code_viewed_signal","languages",Eo,To),[,C]=g("claude-code-view-timestamp",null);de.useEffect(()=>{i&&b.includes(i)&&C(Date.now())},[]);const w="code-block__code !my-0 !rounded-lg !text-sm !leading-relaxed";return he.jsxs("div",{className:"relative group/copy bg-bg-000/50 border-0.5 border-border-400 rounded-lg",children:[!0===r?he.jsxs(he.Fragment,{children:[he.jsx("div",{className:"sticky opacity-0 group-hover/copy:opacity-100 top-2 py-2 h-12 w-0 float-right",children:he.jsx("div",{className:"absolute right-0 h-8 px-2 items-center inline-flex z-10",children:he.jsx(a,{side:"bottom",disableHoverableContent:!0,delayDuration:0,tooltipContent:he.jsx(u,{defaultMessage:"Copy",id:"4l6vz1/eZ5"}),children:he.jsx(l,{"aria-label":x.formatMessage({defaultMessage:"Copy to clipboard",id:"aCdAsIsVv0"}),variant:"ghost",size:"icon_sm",className:"backdrop-blur-md",onClick:()=>{f(o)},children:he.jsx(ni,{didCopy:c})})})})}),s&&he.jsx("div",{className:"text-text-500 font-small p-3.5 pb-0",children:s[1]})]}):null,he.jsx("div",{children:v?he.jsx(is,{code:o,headerClassName:t(s?"mt-3.5":"rounded-t-lg h-12","px-1.5"),codeClassName:t(w,"p-3.5")}):he.jsx(Co,{className:w,language:s?s[1]:"",style:y,renderer:jo,wrapLongLines:!s,children:o})})]})},code:({className:e,children:n})=>e?.includes("math")?he.jsx("span",{className:e,children:n}):he.jsx("code",{className:t("bg-text-200/5 border border-0.5 border-border-300 text-danger-000 whitespace-pre-wrap rounded-[0.4rem] px-1 py-px text-[0.9rem]",e),children:n})},Lo=/(#[0-9a-fA-F]{6})\b/,Oo=({color:e})=>he.jsx("span",{className:"inline-block w-3 h-3 border-[0.5px] border-border-200 rounded flex-shrink-0 shadow-sm mr-1 align-middle",style:{backgroundColor:e}}),Io=(e,t,n)=>e.split(Lo).map((e,r)=>r%2==1?t?((e,t)=>he.jsxs(xe.Fragment,{children:[he.jsx(Oo,{color:e}),e]},t))(e,r):n(e,r):e),Do=(e,t)=>he.jsxs(Ao.code,{className:"inline-flex items-center h-5",children:[he.jsx(Oo,{color:e}),e]},t),Ro=(e,t=!1)=>xe.Children.map(e,e=>"string"==typeof e?Io(e,t,Do):e),Po=(e,t)=>{let n="v";"__lib_version__"===t&&(n="");const r=`${n}${t}`;if("undefined"!=typeof globalThis){var s;globalThis.__perseus_debug__=null!=(s=globalThis.__perseus_debug__)?s:{};const t=globalThis.__perseus_debug__[e];if(t){if(t!==r){const n=Array.isArray(t)?t:[t];n.push(r),globalThis.__perseus_debug__[e]=n}}else globalThis.__perseus_debug__[e]=r}};Po("@khanacademy/perseus-core","1.4.2");Po("@khanacademy/simple-markdown","0.11.4");var zo,Fo,Ho,Vo,$o,Bo,Uo,Zo,Wo=/\r\n?/g,qo=/\t/g,Go=/\f/g,Jo=function(e,t){var n=e||{};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},Ko=function(e,t){var n,r=Object.keys(e).filter(function(t){var n=e[t];if(null==n||null==n.match)return!1;var r=n.order;return"number"!=typeof r||isFinite(r),!0});r.sort(function(t,n){var r=e[t],s=e[n],i=r.order,o=s.order;if(i!==o)return i-o;var a=r.quality?0:1,l=s.quality?0:1;return a!==l?a-l:t<n?-1:t>n?1:0});var s=function t(s,i){var o=[];for(n=i=i||n;s;){var a=null,l=null,c=null,u=NaN,d=0,h=r[0],p=e[h];do{var f=p.order,m=null==i.prevCapture?"":i.prevCapture[0],g=p.match(s,i,m);if(g){var y=p.quality?p.quality(g,i,m):0;y<=u||(a=h,l=p,c=g,u=y)}d++,h=r[d],p=e[h]}while(p&&(!c||p.order===f&&p.quality));if(null==l||null==c)throw new Error("Could not find a matching rule for the below content. The rule with highest `order` should always match content provided to it. Check the definition of `match` for '"+r[r.length-1]+"'. It seems to not match the following source:\n"+s);if(c.index)throw new Error("`match` must return a capture starting at index 0 (the current parse index). Did you forget a ^ at the start of the RegExp?");var x=l.parse(c,t,i);if(Array.isArray(x))Array.prototype.push.apply(o,x);else{if(null==x||"object"!=typeof x)throw new Error(`parse() function returned invalid parse result: '${x}'`);null==x.type&&(x.type=a),o.push(x)}i.prevCapture=c,s=s.substring(i.prevCapture[0].length)}return o};return function(e,r){return(n=Jo(r,t)).inline||n.disableAutoBlockNewlines||(e+="\n\n"),n.prevCapture=null,s(function(e){return e.replace(Wo,"\n").replace(Go,"").replace(qo,"    ")}(e),n)}},Yo=function(e){var t=function(t,n,r){return n.inline?e.exec(t):null};return t.regex=e,t},Qo=function(e){var t=function(t,n){return n.inline?null:e.exec(t)};return t.regex=e,t},Xo=function(e){var t=function(t,n){return e.exec(t)};return t.regex=e,t},ea="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ta=function(e,t,n){return{$$typeof:ea,type:e,key:null==t?void 0:t,ref:null,props:n,_owner:null}},na=function(e,t,n,r){n=n||{},r=void 0===r||r;var s="";for(var i in n){var o=n[i];Object.prototype.hasOwnProperty.call(n,i)&&o&&(s+=" "+aa(i)+'="'+aa(o)+'"')}var a="<"+e+s+">";return r?a+t+"</"+e+">":a},ra={},sa=function(e){if(null==e)return null;try{var t=new URL(e,"https://localhost").protocol;if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}catch(n){return null}return e},ia=/[<>&"']/g,oa={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#96;"},aa=function(e){return String(e).replace(ia,function(e){return oa[e]})},la=/\\([^0-9A-Za-z\s])/g,ca=function(e){return e.replace(la,"$1")},ua=function(e,t,n){var r=n.inline||!1;n.inline=!0;var s=e(t,n);return n.inline=r,s},da=function(e,t,n){return{content:ua(t,e[1],n)}},ha=function(){return{}},pa="(?:[*+-]|\\d+\\.)",fa="( *)("+pa+") +",ma=new RegExp("^"+fa),ga=new RegExp(fa+"[^\\n]*(?:\\n(?!\\1"+pa+" )[^\\n]*)*(\n|$)","gm"),ya=/^ (?= *`)|(` *) $/g,xa=/\n{2,}$/,va=/ *\n+$/,ba=new RegExp("^( *)("+pa+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+pa+" )\\n*|\\s*\n*$)"),Ca=/(?:^|\n)( *)$/,wa=(zo=/^ *\| *| *\| *$/g,Fo=/ *$/,Ho=/^ *-+: *$/,Vo=/^ *:-+: *$/,$o=/^ *:-+ *$/,Bo=function(e){return Ho.test(e)?"right":Vo.test(e)?"center":$o.test(e)?"left":null},Uo=function(e,t,n,r){var s=n.inTable;n.inTable=!0;var i=t(e.trim(),n);n.inTable=s;var o=[[]];return i.forEach(function(e,t){"tableSeparator"===e.type?(!r||0!==t&&t!==i.length-1)&&o.push([]):("text"!==e.type||null!=i[t+1]&&"tableSeparator"!==i[t+1].type||(e.content=e.content.replace(Fo,"")),o[o.length-1].push(e))}),o},{parseTable:(Zo=function(e){return function(t,n,r){r.inline=!0;var s=Uo(t[1],n,r,e),i=function(e,t,n,r){return r&&(e=e.replace(zo,"")),e.trim().split("|").map(Bo)}(t[2],0,0,e),o=function(e,t,n,r){return e.trim().split("\n").map(function(e){return Uo(e,t,n,r)})}(t[3],n,r,e);return r.inline=!1,{type:"table",header:s,align:i,cells:o}}})(!0),parseNpTable:Zo(!1),TABLE_REGEX:/^ *(\|.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/}),ka="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",Sa="\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",Ma=/mailto:/i,Na=function(e,t,n){var r=(e[2]||e[1]).replace(/\s+/g," ").toLowerCase();if(t._defs&&t._defs[r]){var s=t._defs[r];n.target=s.target,n.title=s.title}return t._refs=t._refs||{},t._refs[r]=t._refs[r]||[],t._refs[r].push(n),n},_a=0,ja={Array:{react:function(e,t,n){for(var r=n.key,s=[],i=0,o=0;i<e.length;i++,o++){n.key=""+i;var a=e[i];if("text"===a.type)for(a={type:"text",content:a.content};i+1<e.length&&"text"===e[i+1].type;i++)a.content+=e[i+1].content;s.push(t(a,n))}return n.key=r,s},html:function(e,t,n){for(var r="",s=0;s<e.length;s++){var i=e[s];if("text"===i.type)for(i={type:"text",content:i.content};s+1<e.length&&"text"===e[s+1].type;s++)i.content+=e[s+1].content;r+=t(i,n)}return r}},heading:{order:_a++,match:Qo(/^ *(#{1,6})([^\n]+?)#* *(?:\n *)+\n/),parse:function(e,t,n){return{level:e[1].length,content:ua(t,e[2].trim(),n)}},react:function(e,t,n){return ta("h"+e.level,n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("h"+e.level,t(e.content,n))}},nptable:{order:_a++,match:Qo(wa.NPTABLE_REGEX),parse:wa.parseNpTable,react:null,html:null},lheading:{order:_a++,match:Qo(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(e,t,n){return{type:"heading",level:"="===e[2]?1:2,content:ua(t,e[1],n)}},react:null,html:null},hr:{order:_a++,match:Qo(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:ha,react:function(e,t,n){return ta("hr",n.key,ra)},html:function(e,t,n){return"<hr>"}},codeBlock:{order:_a++,match:Qo(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(e,t,n){return{lang:void 0,content:e[0].replace(/^    /gm,"").replace(/\n+$/,"")}},react:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0;return ta("pre",n.key,{children:ta("code",null,{className:r,children:e.content})})},html:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0,s=na("code",aa(e.content),{class:r});return na("pre",s)}},fence:{order:_a++,match:Qo(/^ *(`{3,}|~{3,}) *(?:(\S+) *)?\n([\s\S]+?)\n?\1 *(?:\n *)+\n/),parse:function(e,t,n){return{type:"codeBlock",lang:e[2]||void 0,content:e[3]}},react:null,html:null},blockQuote:{order:_a++,match:Qo(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(e,t,n){return{content:t(e[0].replace(/^ *> ?/gm,""),n)}},react:function(e,t,n){return ta("blockquote",n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("blockquote",t(e.content,n))}},list:{order:_a++,match:function(e,t){var n=null==t.prevCapture?"":t.prevCapture[0],r=Ca.exec(n),s=t._list||!t.inline;return r&&s?(e=r[1]+e,ba.exec(e)):null},parse:function(e,t,n){var r=e[2],s=r.length>1,i=s?+r:void 0,o=e[0].replace(xa,"\n").match(ga),a=!1,l=o.map(function(e,r){var s=ma.exec(e),i=s?s[0].length:0,l=new RegExp("^ {1,"+i+"}","gm"),c=e.replace(l,"").replace(ma,""),u=r===o.length-1,d=-1!==c.indexOf("\n\n")||u&&a;a=d;var h,p=n.inline,f=n._list;n._list=!0,d?(n.inline=!1,h=c.replace(va,"\n\n")):(n.inline=!0,h=c.replace(va,""));var m=t(h,n);return n.inline=p,n._list=f,m});return{ordered:s,start:i,items:l}},react:function(e,t,n){var r=e.ordered?"ol":"ul";return ta(r,n.key,{start:e.start,children:e.items.map(function(e,r){return ta("li",""+r,{children:t(e,n)})})})},html:function(e,t,n){var r=e.items.map(function(e){return na("li",t(e,n))}).join(""),s=e.ordered?"ol":"ul",i={start:e.start};return na(s,r,i)}},def:{order:_a++,match:Qo(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)*/),parse:function(e,t,n){var r=e[1].replace(/\s+/g," ").toLowerCase(),s=e[2],i=e[3];return n._refs&&n._refs[r]&&n._refs[r].forEach(function(e){e.target=s,e.title=i}),n._defs=n._defs||{},n._defs[r]={target:s,title:i},{def:r,target:s,title:i}},react:function(){return null},html:function(){return""}},table:{order:_a++,match:Qo(wa.TABLE_REGEX),parse:wa.parseTable,react:function(e,t,n){var r=function(t){return null==e.align[t]?{}:{textAlign:e.align[t]}},s=e.header.map(function(e,s){return ta("th",""+s,{style:r(s),scope:"col",children:t(e,n)})}),i=e.cells.map(function(e,s){return ta("tr",""+s,{children:e.map(function(e,s){return ta("td",""+s,{style:r(s),children:t(e,n)})})})});return ta("table",n.key,{children:[ta("thead","thead",{children:ta("tr",null,{children:s})}),ta("tbody","tbody",{children:i})]})},html:function(e,t,n){var r=function(t){return null==e.align[t]?"":"text-align:"+e.align[t]+";"},s=e.header.map(function(e,s){return na("th",t(e,n),{style:r(s),scope:"col"})}).join(""),i=e.cells.map(function(e){var s=e.map(function(e,s){return na("td",t(e,n),{style:r(s)})}).join("");return na("tr",s)}).join(""),o=na("thead",na("tr",s)),a=na("tbody",i);return na("table",o+a)}},newline:{order:_a++,match:Qo(/^(?:\n *)*\n/),parse:ha,react:function(e,t,n){return"\n"},html:function(e,t,n){return"\n"}},paragraph:{order:_a++,match:Qo(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:da,react:function(e,t,n){return ta("div",n.key,{className:"paragraph",children:t(e.content,n)})},html:function(e,t,n){return na("div",t(e.content,n),{class:"paragraph"})}},escape:{order:_a++,match:Yo(/^\\([^0-9A-Za-z\s])/),parse:function(e,t,n){return{type:"text",content:e[1]}},react:null,html:null},tableSeparator:{order:_a++,match:function(e,t){return t.inTable?/^ *\| */.exec(e):null},parse:function(){return{type:"tableSeparator"}},react:function(){return" | "},html:function(){return" &vert; "}},autolink:{order:_a++,match:Yo(/^<([^: >]+:\/[^ >]+)>/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1]}},react:null,html:null},mailto:{order:_a++,match:Yo(/^<([^ >]+@[^ >]+)>/),parse:function(e,t,n){var r=e[1],s=e[1];return Ma.test(s)||(s="mailto:"+s),{type:"link",content:[{type:"text",content:r}],target:s}},react:null,html:null},url:{order:_a++,match:Yo(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1],title:void 0}},react:null,html:null},link:{order:_a++,match:Yo(new RegExp("^\\[("+ka+")\\]\\("+Sa+"\\)")),parse:function(e,t,n){return{content:t(e[1],n),target:ca(e[2]),title:e[3]}},react:function(e,t,n){return ta("a",n.key,{href:sa(e.target),title:e.title,children:t(e.content,n)})},html:function(e,t,n){var r={href:sa(e.target),title:e.title};return na("a",t(e.content,n),r)}},image:{order:_a++,match:Yo(new RegExp("^!\\[("+ka+")\\]\\("+Sa+"\\)")),parse:function(e,t,n){return{alt:e[1],target:ca(e[2]),title:e[3]}},react:function(e,t,n){return ta("img",n.key,{src:sa(e.target),alt:e.alt,title:e.title})},html:function(e,t,n){var r={src:sa(e.target),alt:e.alt,title:e.title};return na("img","",r,!1)}},reflink:{order:_a++,match:Yo(new RegExp("^\\[("+ka+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return Na(e,n,{type:"link",content:t(e[1],n)})},react:null,html:null},refimage:{order:_a++,match:Yo(new RegExp("^!\\[("+ka+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return Na(e,n,{type:"image",alt:e[1]})},react:null,html:null},em:{order:_a,match:Yo(new RegExp("^\\b_((?:__|\\\\[\\s\\S]|[^\\\\_])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\\\[\\s\\S]|\\s+(?:\\\\[\\s\\S]|[^\\s\\*\\\\]|\\*\\*)|[^\\s\\*\\\\])+?)\\*(?!\\*)")),quality:function(e){return e[0].length+.2},parse:function(e,t,n){return{content:t(e[2]||e[1],n)}},react:function(e,t,n){return ta("em",n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("em",t(e.content,n))}},strong:{order:_a,match:Yo(/^\*\*((?:\\[\s\S]|[^\\])+?)\*\*(?!\*)/),quality:function(e){return e[0].length+.1},parse:da,react:function(e,t,n){return ta("strong",n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("strong",t(e.content,n))}},u:{order:_a++,match:Yo(/^__((?:\\[\s\S]|[^\\])+?)__(?!_)/),quality:function(e){return e[0].length},parse:da,react:function(e,t,n){return ta("u",n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("u",t(e.content,n))}},del:{order:_a++,match:Yo(/^~~(?=\S)((?:\\[\s\S]|~(?!~)|[^\s~\\]|\s(?!~~))+?)~~/),parse:da,react:function(e,t,n){return ta("del",n.key,{children:t(e.content,n)})},html:function(e,t,n){return na("del",t(e.content,n))}},inlineCode:{order:_a++,match:Yo(/^(`+)([\s\S]*?[^`])\1(?!`)/),parse:function(e,t,n){return{content:e[2].replace(ya,"$1")}},react:function(e,t,n){return ta("code",n.key,{children:e.content})},html:function(e,t,n){return na("code",aa(e.content))}},br:{order:_a++,match:Xo(/^ {2,}\n/),parse:ha,react:function(e,t,n){return ta("br",n.key,ra)},html:function(e,t,n){return"<br>"}},text:{order:_a++,match:Xo(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(e,t,n){return{content:e[0]}},react:function(e,t,n){return e.content},html:function(e,t,n){return aa(e.content)}}},Ea=function(e,t,n={}){if(!t)throw new Error("simple-markdown: outputFor: `property` must be defined. if you just upgraded, you probably need to replace `outputFor` with `reactFor`");var r,s=(e.Array||ja.Array)[t];if(!s)throw new Error("simple-markdown: outputFor: to join nodes of type `"+t+"` you must provide an `Array:` joiner rule with that type, Please see the docs for details on specifying an Array rule.");var i=s,o=function n(s,o){return r=o=o||r,Array.isArray(s)?i(s,n,o):e[s.type][t](s,n,o)};return function(e,t){return r=Jo(t,n),o(e,r)}};Ko(ja),Ea(ja,"react"),Ea(ja,"html");var Ta={defaultRules:ja,parserFor:Ko,outputFor:Ea};const Aa=Ta.defaultRules,La=Ta.parserFor,Oa=Ta.outputFor,Ia=e=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(Ia);if(xe.isValidElement(e)){if(e.props&&"object"==typeof e.props&&"children"in e.props){const t=e.props.children,n=Ia(t);if(n!==t)return xe.cloneElement(e,void 0,n)}return e}if("object"==typeof(t=e)&&null!==t&&"$$typeof"in t&&"type"in t&&"props"in t){const{type:t,props:n,key:r}=e,s={};return n&&"object"==typeof n&&(Object.assign(s,n),"children"in n&&(s.children=Ia(n.children))),null!=r&&(s.key=r),xe.createElement(t,s)}var t;return e},Da=e=>((e,t,n)=>{const r=Oa(e,t,n),s=(e,t)=>{const n=r(e,t);return Ia(n)};return s.displayName=`OutputFor_${String(t)}`,s})(e,"react"),Ra={fence:{...Aa.fence,parse:(e,t,n)=>({lang:e[2]||void 0,content:e[3]}),react:e=>he.jsx(Ao.pre,{flagShowCodeHeader:!1,children:e.content})},blockQuote:{...Aa.blockQuote,react:(e,t,n)=>he.jsx(Ao.blockQuote,{children:t(e.content,n)})},list:{...Aa.list,react:(e,t,n)=>{const r=e.ordered?Ao.ol:Ao.ul;return he.jsx(r,{children:e.items.map((e,r)=>he.jsx(Ao.li,{children:t(e,n)},r))},n.key)}},newline:Aa.newline,paragraph:{...Aa.paragraph,react:(e,t,n)=>he.jsx(Ao.p,{children:t(e.content,n)},n.key)},del:Aa.del,inlineCode:{...Aa.inlineCode,react:e=>{const t=e.content;return t&&Lo.test(t)&&t.match(Lo)?.[0]===t?he.jsxs(Ao.code,{children:[he.jsx("span",{style:{display:"inline-block",verticalAlign:"middle",position:"relative",top:"-0.15em"},children:he.jsx(Oo,{color:t})}),t]}):he.jsx(Ao.code,{children:t})}},text:{...Aa.text,react:e=>((e,t=!1)=>"string"!=typeof e?e:Io(e,t,Do))(e.content)},url:Aa.url,link:{...Aa.link,match:(e,t)=>null,react:e=>{const t=e.target;return he.jsx("a",{href:t,target:"_blank",className:"underline",children:t})}}},Pa=de.memo(({text:e})=>{const t=(n=e,La(Ra)(n,{inline:!1}));var n;return Da(Ra)(t)});Pa.displayName="AnthropicMarkDown";var za=(e=>(e.Text="text/plain",e.Markdown="text/markdown",e.Html="text/html",e.Code="application/vnd.ant.code",e.Svg="image/svg+xml",e.Mermaid="application/vnd.ant.mermaid",e.React="application/vnd.ant.react",e))(za||{});const Fa=vt().nullish().transform(e=>e??void 0);xt({version_uuid:Fa,command:Mt(["create","update","rewrite"]).optional().catch(void 0),id:Fa,title:Fa,type:Nt(za).optional().catch(void 0),language:Fa,content:Fa,old_str:Fa,new_str:Fa,source:Mt(["c","w"]).optional().catch(void 0),md_citations:St()});const Ha="ANTARTIFACTLINK";function Va(e){const t=e.match(/identifier="([^"]*)"/),n=t?t[1]:"",r=e.match(/type="([^"]*)"/),s=r?(i=r[1],Object.values(za).includes(i)?i:"text/plain"):"text/plain";var i;const o=e.match(/title="([^"]*)"/),a=o?o[1]:"Untitled artifact",l=e.match(/language="([^"]*)"/),c=l?l[1]:void 0,u=e.match(/isClosed="(true|false)"/);return{id:n,type:s,title:a,language:c,isClosed:u?"true"===u[1]:void 0}}const $a=new RegExp(`<${Ha}\\s+(.*?)\\s*\\/>`,"g"),Ba=()=>e=>{ms(e,"html",(e,t,n)=>{const r=e.value.match($a);if(r){const e=r.map(e=>{const t=e.replace(`<${Ha} `,"").replace(/\s*\/>/,"").trim(),{id:n,type:r,title:s,language:i,isClosed:o}=Va(t),a={id:n,title:s,type:r,isClosed:o};return i&&(a.language=i),{type:"artifactComponent",data:{hName:"artifactComponent",hProperties:a}}});n.children.splice(t,1,...e)}})};function Ua(e){return xe.Children.map(e,(e,t)=>{if("string"!=typeof e)return e;if(!/<br\s*\/?>/i.test(e))return e;const n=e.split(/<br\s*\/?>/gi),r=[];return n.forEach((e,s)=>{e&&r.push(e),s<n.length-1&&r.push(xe.createElement("br",{key:`br-${t}-${s}`}))}),xe.createElement(xe.Fragment,{},...r)})}const Za=()=>e=>{ms(e,"list",e=>{e.spread=!1}),ms(e,"listItem",e=>{e.spread=!1})};function Wa(){return function(e,t){const n=Buffer.isBuffer(t.value)?t.value.toString("utf8"):"string"==typeof t.value?t.value:String(t.value);ms(e,(e,t,r)=>{if(void 0===t||void 0===r)return;if(void 0===e.children||0===e.children.length)return;let s=!1;const i=[],o=e.children.some(e=>"emphasis"===e.type),a=e.children[0].position,l=e.children[e.children.length-1].position;if(o&&a&&l){const[e,t]=Ja(n.slice(a.start.offset,l.end.offset));e&&(s=!0,i.push(...t))}else for(const c of e.children)if("text"===c.type){const[e,t]=Ja(c.position?n.slice(c.position.start.offset,c.position.end.offset):c.value);e?(s=!0,i.push(...t)):i.push(c)}else i.push(c);if(!s)return;if(i.some(e=>"math"===e.type)){const e=function(e){let t=[];const n=[],r=()=>{const e={type:"paragraph",children:t};n.push(e)};for(const s of e)"math"===s.type?(t.length>0&&(r(),t=[]),n.push(s)):t.push(s);t.length>0&&(r(),t=[]);return n}(i);r.children.splice(t,1,...e)}else e.children=i})}}const qa=/^\s*\$\$/,Ga=/\$\$\s*$/;function Ja(e){let t=!1;const n=[],r=e.split("\n");let s=!1,i=[];for(const o of r)if(Ka(o))n.push({type:"math",meta:null,value:o.slice(2,-2),data:{hName:"div",hProperties:{className:["math","math-display"]},hChildren:[{type:"text",value:o.slice(2,-2)}]}}),t=!0;else if(s||!qa.test(o))if(s&&qa.test(o)){if(s=!1,i){const e=i.join("\n");n.push({type:"math",meta:null,value:e,data:{hName:"div",hProperties:{className:["math","math-display"]},hChildren:[{type:"text",value:e}]}}),t=!0,i=[]}}else if(s)i.push(o);else for(let e=0;e<o.length;e++){const r=Ya(o,e),s=r>-1?Qa(o,r+1):-1;if(!(r>-1&&s>-1)){e<o.length&&n.push({type:"text",value:o.substring(e)+"\n"});break}{r>e&&n.push({type:"text",value:o.substring(e,r)});const i=o.substring(r+1,s);n.push({type:"inlineMath",value:i,data:{hName:"span",hProperties:{className:["math","math-inline"]},hChildren:[{type:"text",value:i+"\n"}]}}),e=s,t=!0}}else s=!0;return[t,n]}function Ka(e){return qa.test(e)&&Ga.test(e)&&e.trim().length>4}function Ya(e,t){let n=!1;do{n=(t=e.indexOf("$",t))>-1&&Xa(e,t);const r=n?el(e,t):-1;r>-1&&r>t?(n=!1,t=r+1):!n&&t>-1&&(t+=1)}while(t>-1&&!n);return t}function Qa(e,t){let n=!1;do{n=(t=e.indexOf("$",t))>-1&&tl(e,t),!n&&t>-1&&(t+=1)}while(t>-1&&!n);return t}function Xa(e,t){const n=!nl(e,t-1,"$"),r=!rl(e,t+1),s=!nl(e,t+1,"$");return!sl(e,t)&&n&&r&&s}function el(e,t){const n=function(e,t){if(t<=0)return t;const n=e.lastIndexOf(" ",t);return n>-1?n+1:0}(e,t),r=/^(\$\w+!?)?\$?[A-Z]+\$?[0-9]+(:(\$\w+!?)?\$?[A-Z]+\$?[0-9]+)?/g.exec(e.slice(n)),s=r?n+r[0].length-1:-1;return s>-1&&nl(e,n,"$")&&nl(e,s+1,"$")?-1:s}function tl(e,t){const n=!rl(e,t-1),r=!function(e,t){if(t<0||t>=e.length)return!1;return e[t]>="0"&&e[t]<="9"}(e,t+1);return!sl(e,t)&&n&&r}function nl(e,t,n){return!(t<0||t>=e.length)&&e[t]===n}function rl(e,t){return nl(e,t," ")}function sl(e,t){return nl(e,t-1,"\\")&&!sl(e,t-1)}function il(){}function ol(){}function al(e){const t=[],n=String(e||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){-1===r&&(r=n.length,i=!0);const e=n.slice(s,r).trim();!e&&i||t.push(e),s=r+1,r=n.indexOf(",",s)}return t}const ll=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cl=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ul={};function dl(e,t){return(ul.jsx?cl:ll).test(e)}const hl=/[ \t\n\f\r]/g;function pl(e){return""===e.replace(hl,"")}let fl=class{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}};function ml(e,t){const n={},r={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(r,e[s].normal);return new fl(n,r,t)}function gl(e){return e.toLowerCase()}fl.prototype.property={},fl.prototype.normal={},fl.prototype.space=null;let yl=class{constructor(e,t){this.property=e,this.attribute=t}};yl.prototype.space=null,yl.prototype.boolean=!1,yl.prototype.booleanish=!1,yl.prototype.overloadedBoolean=!1,yl.prototype.number=!1,yl.prototype.commaSeparated=!1,yl.prototype.spaceSeparated=!1,yl.prototype.commaOrSpaceSeparated=!1,yl.prototype.mustUseProperty=!1,yl.prototype.defined=!1;let xl=0;const vl=Nl(),bl=Nl(),Cl=Nl(),wl=Nl(),kl=Nl(),Sl=Nl(),Ml=Nl();function Nl(){return 2**++xl}const _l=Object.freeze(Object.defineProperty({__proto__:null,boolean:vl,booleanish:bl,commaOrSpaceSeparated:Ml,commaSeparated:Sl,number:wl,overloadedBoolean:Cl,spaceSeparated:kl},Symbol.toStringTag,{value:"Module"})),jl=Object.keys(_l);class El extends yl{constructor(e,t,n,r){let s=-1;if(super(e,t),Tl(this,"space",r),"number"==typeof n)for(;++s<jl.length;){const e=jl[s];Tl(this,jl[s],(n&_l[e])===_l[e])}}}function Tl(e,t,n){n&&(e[t]=n)}El.prototype.defined=!0;const Al={}.hasOwnProperty;function Ll(e){const t={},n={};let r;for(r in e.properties)if(Al.call(e.properties,r)){const s=e.properties[r],i=new El(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[gl(r)]=r,n[gl(i.attribute)]=r}return new fl(t,n,e.space)}const Ol=Ll({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Il=Ll({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Dl(e,t){return t in e?e[t]:t}function Rl(e,t){return Dl(e,t.toLowerCase())}const Pl=Ll({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Rl,properties:{xmlns:null,xmlnsXLink:null}}),zl=Ll({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:bl,ariaAutoComplete:null,ariaBusy:bl,ariaChecked:bl,ariaColCount:wl,ariaColIndex:wl,ariaColSpan:wl,ariaControls:kl,ariaCurrent:null,ariaDescribedBy:kl,ariaDetails:null,ariaDisabled:bl,ariaDropEffect:kl,ariaErrorMessage:null,ariaExpanded:bl,ariaFlowTo:kl,ariaGrabbed:bl,ariaHasPopup:null,ariaHidden:bl,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:kl,ariaLevel:wl,ariaLive:null,ariaModal:bl,ariaMultiLine:bl,ariaMultiSelectable:bl,ariaOrientation:null,ariaOwns:kl,ariaPlaceholder:null,ariaPosInSet:wl,ariaPressed:bl,ariaReadOnly:bl,ariaRelevant:null,ariaRequired:bl,ariaRoleDescription:kl,ariaRowCount:wl,ariaRowIndex:wl,ariaRowSpan:wl,ariaSelected:bl,ariaSetSize:wl,ariaSort:null,ariaValueMax:wl,ariaValueMin:wl,ariaValueNow:wl,ariaValueText:null,role:null}}),Fl=Ll({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Rl,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Sl,acceptCharset:kl,accessKey:kl,action:null,allow:null,allowFullScreen:vl,allowPaymentRequest:vl,allowUserMedia:vl,alt:null,as:null,async:vl,autoCapitalize:null,autoComplete:kl,autoFocus:vl,autoPlay:vl,capture:vl,charSet:null,checked:vl,cite:null,className:kl,cols:wl,colSpan:null,content:null,contentEditable:bl,controls:vl,controlsList:kl,coords:wl|Sl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vl,defer:vl,dir:null,dirName:null,disabled:vl,download:Cl,draggable:bl,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vl,formTarget:null,headers:kl,height:wl,hidden:vl,high:wl,href:null,hrefLang:null,htmlFor:kl,httpEquiv:kl,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:vl,itemId:null,itemProp:kl,itemRef:kl,itemScope:vl,itemType:kl,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vl,low:wl,manifest:null,max:null,maxLength:wl,media:null,method:null,min:null,minLength:wl,multiple:vl,muted:vl,name:null,nonce:null,noModule:vl,noValidate:vl,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vl,optimum:wl,pattern:null,ping:kl,placeholder:null,playsInline:vl,poster:null,preload:null,readOnly:vl,referrerPolicy:null,rel:kl,required:vl,reversed:vl,rows:wl,rowSpan:wl,sandbox:kl,scope:null,scoped:vl,seamless:vl,selected:vl,shape:null,size:wl,sizes:null,slot:null,span:wl,spellCheck:bl,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wl,step:null,style:null,tabIndex:wl,target:null,title:null,translate:null,type:null,typeMustMatch:vl,useMap:null,value:bl,width:wl,wrap:null,align:null,aLink:null,archive:kl,axis:null,background:null,bgColor:null,border:wl,borderColor:null,bottomMargin:wl,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vl,declare:vl,event:null,face:null,frame:null,frameBorder:null,hSpace:wl,leftMargin:wl,link:null,longDesc:null,lowSrc:null,marginHeight:wl,marginWidth:wl,noResize:vl,noHref:vl,noShade:vl,noWrap:vl,object:null,profile:null,prompt:null,rev:null,rightMargin:wl,rules:null,scheme:null,scrolling:bl,standby:null,summary:null,text:null,topMargin:wl,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wl,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vl,disableRemotePlayback:vl,prefix:null,property:null,results:wl,security:null,unselectable:null}}),Hl=Ll({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Dl,properties:{about:Ml,accentHeight:wl,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wl,amplitude:wl,arabicForm:null,ascent:wl,attributeName:null,attributeType:null,azimuth:wl,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wl,by:null,calcMode:null,capHeight:wl,className:kl,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wl,diffuseConstant:wl,direction:null,display:null,dur:null,divisor:wl,dominantBaseline:null,download:vl,dx:null,dy:null,edgeMode:null,editable:null,elevation:wl,enableBackground:null,end:null,event:null,exponent:wl,externalResourcesRequired:null,fill:null,fillOpacity:wl,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Sl,g2:Sl,glyphName:Sl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wl,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wl,horizOriginX:wl,horizOriginY:wl,id:null,ideographic:wl,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wl,k:wl,k1:wl,k2:wl,k3:wl,k4:wl,kernelMatrix:Ml,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wl,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wl,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wl,overlineThickness:wl,paintOrder:null,panose1:null,path:null,pathLength:wl,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:kl,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wl,pointsAtY:wl,pointsAtZ:wl,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ml,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ml,rev:Ml,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ml,requiredFeatures:Ml,requiredFonts:Ml,requiredFormats:Ml,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wl,specularExponent:wl,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wl,strikethroughThickness:wl,string:null,stroke:null,strokeDashArray:Ml,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wl,strokeOpacity:wl,strokeWidth:null,style:null,surfaceScale:wl,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ml,tabIndex:wl,tableValues:null,target:null,targetX:wl,targetY:wl,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ml,to:null,transform:null,u1:null,u2:null,underlinePosition:wl,underlineThickness:wl,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wl,values:null,vAlphabetic:wl,vMathematical:wl,vectorEffect:null,vHanging:wl,vIdeographic:wl,version:null,vertAdvY:wl,vertOriginX:wl,vertOriginY:wl,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wl,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Vl=/^data[-\w.:]+$/i,$l=/-[a-z]/g,Bl=/[A-Z]/g;function Ul(e,t){const n=gl(t);let r=t,s=yl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Vl.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace($l,Wl);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!$l.test(e)){let n=e.replace(Bl,Zl);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}s=El}return new s(r,t)}function Zl(e){return"-"+e.toLowerCase()}function Wl(e){return e.charAt(1).toUpperCase()}const ql={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Gl=ml([Il,Ol,Pl,zl,Fl],"html"),Jl=ml([Il,Ol,Pl,zl,Hl],"svg");function Kl(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}var Yl,Ql,Xl,ec={};var tc=function(){if(Xl)return ec;Xl=1;var e=ec&&ec.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ec,"__esModule",{value:!0});var t=e(function(){if(Ql)return Yl;Ql=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l="";function c(e){return e?e.replace(a,l):l}return Yl=function(a,u){if("string"!=typeof a)throw new TypeError("First argument must be a string");if(!a)return[];u=u||{};var d=1,h=1;function p(e){var n=e.match(t);n&&(d+=n.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new m(e),x(),t}}function m(e){this.start=e,this.end={line:d,column:h},this.source=u.source}function g(e){var t=new Error(u.source+":"+d+":"+h+": "+e);if(t.reason=e,t.filename=u.source,t.line=d,t.column=h,t.source=a,!u.silent)throw t}function y(e){var t=e.exec(a);if(t){var n=t[0];return p(n),a=a.slice(n.length),t}}function x(){y(n)}function v(e){var t;for(e=e||[];t=b();)!1!==t&&e.push(t);return e}function b(){var e=f();if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var t=2;l!=a.charAt(t)&&("*"!=a.charAt(t)||"/"!=a.charAt(t+1));)++t;if(t+=2,l===a.charAt(t-1))return g("End of comment missing");var n=a.slice(2,t-2);return h+=2,p(n),a=a.slice(t),h+=2,e({type:"comment",comment:n})}}function C(){var t=f(),n=y(r);if(n){if(b(),!y(s))return g("property missing ':'");var a=y(i),u=t({type:"declaration",property:c(n[0].replace(e,l)),value:a?c(a[0].replace(e,l)):l});return y(o),u}}return m.prototype.content=a,x(),function(){var e,t=[];for(v(t);e=C();)!1!==e&&(t.push(e),v(t));return t}()},Yl}());return ec.default=function(e,n){var r=null;if(!e||"string"!=typeof e)return r;var s=(0,t.default)(e),i="function"==typeof n;return s.forEach(function(e){if("declaration"===e.type){var t=e.property,s=e.value;i?n(t,s,e):s&&((r=r||{})[t]=s)}}),r},ec}();const nc=ve(tc),rc=nc.default||nc,sc=oc("end"),ic=oc("start");function oc(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function ac(e){return e&&"object"==typeof e?"position"in e||"type"in e?cc(e.position):"start"in e||"end"in e?cc(e):"line"in e||"column"in e?lc(e):"":""}function lc(e){return uc(e&&e.line)+":"+uc(e&&e.column)}function cc(e){return lc(e&&e.start)+"-"+lc(e&&e.end)}function uc(e){return e&&"number"==typeof e?e:1}class dc extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",s={},i=!1;if(t&&(s="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!s.cause&&e&&(i=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?s.ruleId=n:(s.source=n.slice(0,e),s.ruleId=n.slice(e+1))}if(!s.place&&s.ancestors&&s.ancestors){const e=s.ancestors[s.ancestors.length-1];e&&(s.place=e.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=ac(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=i&&s.cause&&"string"==typeof s.cause.stack?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}dc.prototype.file="",dc.prototype.name="",dc.prototype.reason="",dc.prototype.message="",dc.prototype.stack="",dc.prototype.column=void 0,dc.prototype.line=void 0,dc.prototype.ancestors=void 0,dc.prototype.cause=void 0,dc.prototype.fatal=void 0,dc.prototype.place=void 0,dc.prototype.ruleId=void 0,dc.prototype.source=void 0;const hc={}.hasOwnProperty,pc=new Map,fc=/[A-Z]/g,mc=/-([a-z])/g,gc=new Set(["table","tbody","thead","tfoot","tr"]),yc=new Set(["td","th"]),xc="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vc(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,s,i){const o=Array.isArray(s.children),a=ic(n);return t(r,s,i,o,{columnNumber:a?a.column-1:void 0,fileName:e,lineNumber:a?a.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,s,i){const o=Array.isArray(s.children)?n:t;return i?o(r,s,i):o(r,s)}}(0,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Jl:Gl,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},i=bc(s,e,void 0);return i&&"string"!=typeof i?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function bc(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(s=Jl,e.schema=s);e.ancestors.push(t);const i=Mc(e,t.tagName,!1),o=function(e,t){const n={};let r,s;for(s in t.properties)if("children"!==s&&hc.call(t.properties,s)){const i=Sc(e,s,t.properties[s]);if(i){const[s,o]=i;e.tableCellAlignToStyle&&"align"===s&&"string"==typeof o&&yc.has(t.tagName)?r=o:n[s]=o}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let a=kc(e,t);gc.has(t.tagName)&&(a=a.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&pl(t.value):pl(t));var t}));return Cc(e,o,i,t),wc(o,a),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Nc(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let s=r;"svg"===t.name&&"html"===r.space&&(s=Jl,e.schema=s);e.ancestors.push(t);const i=null===t.name?e.Fragment:Mc(e,t.name,!0),o=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];il(t.type);const s=t.expression;il(s.type);const i=s.properties[0];il(i.type),Object.assign(n,e.evaluater.evaluateExpression(i.argument))}else Nc(e,t.position);else{const s=r.name;let i;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];il(t.type),i=e.evaluater.evaluateExpression(t.expression)}else Nc(e,t.position);else i=null===r.value||r.value;n[s]=i}return n}(e,t),a=kc(e,t);return Cc(e,o,i,t),wc(o,a),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Nc(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return wc(r,kc(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Cc(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function wc(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function kc(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:pc;for(;++r<t.children.length;){const i=t.children[r];let o;if(e.passKeys){const e="element"===i.type?i.tagName:"mdxJsxFlowElement"===i.type||"mdxJsxTextElement"===i.type?i.name:void 0;if(e){const t=s.get(e)||0;o=e+"-"+t,s.set(e,t+1)}}const a=bc(e,i,o);void 0!==a&&n.push(a)}return n}function Sc(e,t,n){const r=Ul(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"==typeof n?n:function(e,t){const n={};try{rc(t,r)}catch(s){if(!e.ignoreInvalidStyle){const t=s,n=new dc("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=xc+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(mc,jc)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)hc.call(e,n)&&(t[_c(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?ql[r.property]||r.property:r.attribute,n]}}function Mc(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,s=-1;for(;++s<e.length;){const t=dl(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(s&&"Literal"===t.type),optional:!1}:t}r=n}else r=dl(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return hc.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);Nc(e)}function Nc(e,t){const n=new dc("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=xc+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _c(e){let t=e.replace(fc,Ec);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function jc(e,t){return t.toUpperCase()}function Ec(e){return"-"+e.toLowerCase()}const Tc={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ac={};function Lc(e,t){return Oc(e,"boolean"!=typeof Ac.includeImageAlt||Ac.includeImageAlt,"boolean"!=typeof Ac.includeHtml||Ac.includeHtml)}function Oc(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ic(e.children,t,n)}return Array.isArray(e)?Ic(e,t,n):""}function Ic(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Oc(e[s],t,n);return r.join("")}const Dc=document.createElement("i");function Rc(e){const t="&"+e+";";Dc.innerHTML=t;const n=Dc.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function Pc(e,t,n,r){const s=e.length;let i,o=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)i=r.slice(o,o+1e4),i.unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function zc(e,t){return e.length>0?(Pc(e,e.length,0,t),e):t}const Fc={}.hasOwnProperty;function Hc(e){const t={};let n=-1;for(;++n<e.length;)Vc(t,e[n]);return t}function Vc(e,t){let n;for(n in t){const r=(Fc.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let i;if(s)for(i in s){Fc.call(r,i)||(r[i]=[]);const e=s[i];$c(r[i],Array.isArray(e)?e:e?[e]:[])}}}function $c(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Pc(e,0,0,r)}function Bc(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function Uc(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zc=ru(/[A-Za-z]/),Wc=ru(/[\dA-Za-z]/),qc=ru(/[#-'*+\--9=?A-Z^-~]/);function Gc(e){return null!==e&&(e<32||127===e)}const Jc=ru(/\d/),Kc=ru(/[\dA-Fa-f]/),Yc=ru(/[!-/:-@[-`{-~]/);function Qc(e){return null!==e&&e<-2}function Xc(e){return null!==e&&(e<0||32===e)}function eu(e){return-2===e||-1===e||32===e}const tu=ru(new RegExp("\\p{P}|\\p{S}","u")),nu=ru(/\s/);function ru(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function su(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(37===i&&Wc(e.charCodeAt(n+1))&&Wc(e.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(o=String.fromCharCode(i,t),s=1):o="�"}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function iu(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(eu(r))return e.enter(n),o(r);return t(r)};function o(r){return eu(r)&&i++<s?(e.consume(r),o):(e.exit(n),t(r))}}const ou={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),iu(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,s(t)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Qc(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}};const au={tokenize:function(e){const t=this,n=[];let r,s,i,o=0;return a;function a(r){if(o<n.length){const s=n[o];return t.containerState=s[1],e.attempt(s[0].continuation,l,c)(r)}return c(r)}function l(e){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&x();const n=t.events.length;let s,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){s=t.events[i][1].end;break}y(o);let a=n;for(;a<t.events.length;)t.events[a][1].end=Object.assign({},s),a++;return Pc(t.events,i+1,0,t.events.slice(n)),t.events.length=a,c(e)}return a(e)}function c(s){if(o===n.length){if(!r)return h(s);if(r.currentConstruct&&r.currentConstruct.concrete)return f(s);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lu,u,d)(s)}function u(e){return r&&x(),y(o),h(e)}function d(e){return t.parser.lazy[t.now().line]=o!==n.length,i=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(lu,p,f)(n)}function p(e){return o++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&x(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Qc(n)?(e.consume(n),g(e.exit("chunkFlow")),o=0,t.interrupt=void 0,a):(e.consume(n),m)}function g(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=s,s&&(s.next=e),s=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let s,a,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(s){a=t.events[l][1].end;break}s=!0}for(y(o),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},a),e++;Pc(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let s=n.length;for(;s-- >r;){const r=n[s];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function x(){r.write([null]),s=void 0,r=void 0,t.containerState._closeFlow=void 0}}},lu={tokenize:function(e,t,n){return iu(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function cu(e){return null===e||Xc(e)||nu(e)?1:tu(e)?2:void 0}function uu(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const du={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=cu(r);let i;return function(t){return i=t,e.enter("attentionSequence"),o(t)};function o(a){if(a===i)return e.consume(a),o;const l=e.exit("attentionSequence"),c=cu(a),u=!c||2===c&&s||n.includes(a),d=!s||2===s&&c||n.includes(r);return l._open=Boolean(42===i?u:u&&(s||!d)),l._close=Boolean(42===i?d:d&&(c||!u)),t(a)}},resolveAll:function(e,t){let n,r,s,i,o,a,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),h=Object.assign({},e[u][1].start);hu(d,-a),hu(h,a),i={type:a>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},o={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:h},s={type:a>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},o.end)},e[n][1].end=Object.assign({},i.start),e[u][1].start=Object.assign({},o.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=zc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=zc(l,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",s,t]]),l=zc(l,uu(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=zc(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=zc(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Pc(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function hu(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pu={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s};function s(t){return Zc(t)?(e.consume(t),i):l(t)}function i(e){return 43===e||45===e||46===e||Wc(e)?(r=1,o(e)):l(e)}function o(t){return 58===t?(e.consume(t),r=0,a):(43===t||45===t||46===t||Wc(t))&&r++<32?(e.consume(t),o):(r=0,l(t))}function a(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Gc(r)?n(r):(e.consume(r),a)}function l(t){return 64===t?(e.consume(t),c):qc(t)?(e.consume(t),l):n(t)}function c(e){return Wc(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Wc(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const fu={tokenize:function(e,t,n){return function(t){return eu(t)?iu(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Qc(e)?t(e):n(e)}},partial:!0};const mu={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),s}return n(t)};function s(n){return eu(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(eu(t))return iu(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return s(t)};function s(r){return e.attempt(mu,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};const gu={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Yc(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const yu={name:"characterReference",tokenize:function(e,t,n){const r=this;let s,i,o=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,i=Wc,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,i=Kc,c):(e.enter("characterReferenceValue"),s=7,i=Jc,c(t))}function c(a){if(59===a&&o){const s=e.exit("characterReferenceValue");return i!==Wc||Rc(r.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)}return i(a)&&o++<s?(e.consume(a),c):n(a)}}};const xu={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},vu={name:"codeFenced",tokenize:function(e,t,n){const r=this,s={tokenize:function(e,t,n){let s=0;return o;function o(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),eu(t)?iu(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===i?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===i?(s++,e.consume(t),u):s>=a?(e.exit("codeFencedFenceSequence"),eu(t)?iu(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Qc(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let i,o=0,a=0;return function(t){return function(t){const n=r.events[r.events.length-1];return o=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===i?(a++,e.consume(t),l):a<3?n(t):(e.exit("codeFencedFenceSequence"),eu(t)?iu(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Qc(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(xu,p,x)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Qc(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):eu(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),iu(e,d,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),u)}function d(t){return null===t||Qc(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Qc(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===i?n(t):(e.consume(t),h)}function p(t){return e.attempt(s,x,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return o>0&&eu(t)?iu(e,g,"linePrefix",o+1)(t):g(t)}function g(t){return null===t||Qc(t)?e.check(xu,p,x)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Qc(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function x(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const bu={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),iu(e,s,"linePrefix",5)(t)};function s(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?a(t):Qc(t)?e.attempt(Cu,i,a)(t):(e.enter("codeFlowValue"),o(t))}function o(t){return null===t||Qc(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),o)}function a(n){return e.exit("codeIndented"),t(n)}}},Cu={tokenize:function(e,t,n){const r=this;return s;function s(t){return r.parser.lazy[r.now().line]?n(t):Qc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):iu(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):Qc(e)?s(e):n(e)}},partial:!0};const wu={name:"codeText",tokenize:function(e,t,n){let r,s,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),i++,o):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(s=e.enter("codeTextSequence"),r=0,c(t)):Qc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Qc(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(s.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,s=3;if(!("lineEnding"!==e[s][1].type&&"space"!==e[s][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=s;++t<r;)if("codeTextData"===e[t][1].type){e[s][1].type="codeTextPadding",e[r][1].type="codeTextPadding",s+=2,r-=2;break}t=s-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};function ku(e){const t={};let n,r,s,i,o,a,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(a=n[1]._tokenizer.events,s=0,s<a.length&&"lineEndingBlank"===a[s][1].type&&(s+=2),s<a.length&&"content"===a[s][1].type))for(;++s<a.length&&"content"!==a[s][1].type;)"chunkText"===a[s][1].type&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Su(e,c)),c=t[c],l=!0);else if(n[1]._container){for(s=c,r=void 0;s--&&(i=e[s],"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(r&&(e[r][1].type="lineEndingBlank"),i[1].type="lineEnding",r=s);r&&(n[1].end=Object.assign({},e[r][1].start),o=e.slice(r,c),o.unshift(n),Pc(e,r,c-r+1,o))}}return!l}function Su(e,t){const n=e[t][1],r=e[t][2];let s=t-1;const i=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],c={};let u,d,h=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e[++s][1]!==p;);i.push(s),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<a.length;)"exit"===a[h][0]&&"enter"===a[h-1][0]&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=a.slice(g[h],g[h+1]),n=i.pop();l.unshift([n,n+t.length-1]),Pc(e,n,2,t)}for(h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const Mu={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?s(t):Qc(t)?e.check(Nu,i,s)(t):(e.consume(t),r)}function s(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return ku(e),e}},Nu={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),iu(e,s,"linePrefix")};function s(s){if(null===s||Qc(s))return n(s);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}},partial:!0};function _u(e,t,n,r,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(s),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||Gc(t))return n(t);return e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(s),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||Qc(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(s){return u||null!==s&&41!==s&&!Xc(s)?u<c&&40===s?(e.consume(s),u++,f):41===s?(e.consume(s),u--,f):null===s||32===s||40===s||Gc(s)?n(s):(e.consume(s),92===s?m:f):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(s))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function ju(e,t,n,r,s,i){const o=this;let a,l=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(i),c};function c(d){return l>999||null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):93===d?(e.exit(i),e.enter(s),e.consume(d),e.exit(s),e.exit(r),t):Qc(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Qc(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!eu(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function Eu(e,t,n,r,s,i){let o;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(s),e.consume(t),e.exit(s),o=40===t?41:t,a;return n(t)};function a(n){return n===o?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(i),l(n))}function l(t){return t===o?(e.exit(i),a(o)):null===t?n(t):Qc(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),iu(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===o||null===t||Qc(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===o||92===t?(e.consume(t),c):c(t)}}function Tu(e,t){let n;return function r(s){if(Qc(s))return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r;if(eu(s))return iu(e,r,n?"linePrefix":"lineSuffix")(s);return t(s)}}const Au={name:"definition",tokenize:function(e,t,n){const r=this;let s;return function(t){return e.enter("definition"),function(t){return ju.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return s=Uc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o):n(t)}function o(t){return Xc(t)?Tu(e,a)(t):a(t)}function a(t){return _u(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Lu,c,c)(t)}function c(t){return eu(t)?iu(e,u,"whitespace")(t):u(t)}function u(i){return null===i||Qc(i)?(e.exit("definition"),r.parser.defined.push(s),t(i)):n(i)}}},Lu={tokenize:function(e,t,n){return function(t){return Xc(t)?Tu(e,r)(t):n(t)};function r(t){return Eu(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function s(t){return eu(t)?iu(e,i,"whitespace")(t):i(t)}function i(e){return null===e||Qc(e)?t(e):n(e)}},partial:!0};const Ou={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Qc(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Iu={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),s(t)}(t)};function s(t){return 35===t&&r++<6?(e.consume(t),s):null===t||Xc(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),o(n)):null===n||Qc(n)?(e.exit("atxHeading"),t(n)):eu(n)?iu(e,i,"whitespace")(n):(e.enter("atxHeadingText"),a(n))}function o(t){return 35===t?(e.consume(t),o):(e.exit("atxHeadingSequence"),i(t))}function a(t){return null===t||35===t||Xc(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),a)}},resolve:function(e,t){let n,r,s=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);s-2>i&&"whitespace"===e[s][1].type&&(s-=2);"atxHeadingSequence"===e[s][1].type&&(i===s-1||s-4>i&&"whitespace"===e[s-2][1].type)&&(s-=i+1===s?2:4);s>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[s][1].end},r={type:"chunkText",start:e[i][1].start,end:e[s][1].end,contentType:"text"},Pc(e,i,s-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const Du=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ru=["pre","script","style","textarea"],Pu={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let s,i,o,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),i=!0,p):63===a?(e.consume(a),s=3,r.interrupt?t:I):Zc(a)?(e.consume(a),o=String.fromCharCode(a),f):n(a)}function u(i){return 45===i?(e.consume(i),s=2,d):91===i?(e.consume(i),s=5,a=0,h):Zc(i)?(e.consume(i),s=4,r.interrupt?t:I):n(i)}function d(s){return 45===s?(e.consume(s),r.interrupt?t:I):n(s)}function h(s){const i="CDATA[";return s===i.charCodeAt(a++)?(e.consume(s),6===a?r.interrupt?t:N:h):n(s)}function p(t){return Zc(t)?(e.consume(t),o=String.fromCharCode(t),f):n(t)}function f(a){if(null===a||47===a||62===a||Xc(a)){const l=47===a,c=o.toLowerCase();return l||i||!Ru.includes(c)?Du.includes(o.toLowerCase())?(s=6,l?(e.consume(a),m):r.interrupt?t(a):N(a)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):i?g(a):y(a)):(s=1,r.interrupt?t(a):N(a))}return 45===a||Wc(a)?(e.consume(a),o+=String.fromCharCode(a),f):n(a)}function m(s){return 62===s?(e.consume(s),r.interrupt?t:N):n(s)}function g(t){return eu(t)?(e.consume(t),g):S(t)}function y(t){return 47===t?(e.consume(t),S):58===t||95===t||Zc(t)?(e.consume(t),x):eu(t)?(e.consume(t),y):S(t)}function x(t){return 45===t||46===t||58===t||95===t||Wc(t)?(e.consume(t),x):v(t)}function v(t){return 61===t?(e.consume(t),b):eu(t)?(e.consume(t),v):y(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,C):eu(t)?(e.consume(t),b):w(t)}function C(t){return t===l?(e.consume(t),l=null,k):null===t||Qc(t)?n(t):(e.consume(t),C)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Xc(t)?v(t):(e.consume(t),w)}function k(e){return 47===e||62===e||eu(e)?y(e):n(e)}function S(t){return 62===t?(e.consume(t),M):n(t)}function M(t){return null===t||Qc(t)?N(t):eu(t)?(e.consume(t),M):n(t)}function N(t){return 45===t&&2===s?(e.consume(t),T):60===t&&1===s?(e.consume(t),A):62===t&&4===s?(e.consume(t),D):63===t&&3===s?(e.consume(t),I):93===t&&5===s?(e.consume(t),O):!Qc(t)||6!==s&&7!==s?null===t||Qc(t)?(e.exit("htmlFlowData"),_(t)):(e.consume(t),N):(e.exit("htmlFlowData"),e.check(zu,R,_)(t))}function _(t){return e.check(Fu,j,R)(t)}function j(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),E}function E(t){return null===t||Qc(t)?_(t):(e.enter("htmlFlowData"),N(t))}function T(t){return 45===t?(e.consume(t),I):N(t)}function A(t){return 47===t?(e.consume(t),o="",L):N(t)}function L(t){if(62===t){const n=o.toLowerCase();return Ru.includes(n)?(e.consume(t),D):N(t)}return Zc(t)&&o.length<8?(e.consume(t),o+=String.fromCharCode(t),L):N(t)}function O(t){return 93===t?(e.consume(t),I):N(t)}function I(t){return 62===t?(e.consume(t),D):45===t&&2===s?(e.consume(t),I):N(t)}function D(t){return null===t||Qc(t)?(e.exit("htmlFlowData"),R(t)):(e.consume(t),D)}function R(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},zu={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(fu,t,n)}},partial:!0},Fu={tokenize:function(e,t,n){const r=this;return function(t){if(Qc(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s;return n(t)};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const Hu={name:"htmlText",tokenize:function(e,t,n){const r=this;let s,i,o;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),x):Zc(t)?(e.consume(t),k):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),i=0,p):Zc(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Qc(t)?(o=u,L(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?A(e):45===e?d(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):Qc(t)?(o=f,L(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?A(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?A(t):Qc(t)?(o=y,L(t)):(e.consume(t),y)}function x(t){return null===t?n(t):63===t?(e.consume(t),v):Qc(t)?(o=x,L(t)):(e.consume(t),x)}function v(e){return 62===e?A(e):x(e)}function b(t){return Zc(t)?(e.consume(t),C):n(t)}function C(t){return 45===t||Wc(t)?(e.consume(t),C):w(t)}function w(t){return Qc(t)?(o=w,L(t)):eu(t)?(e.consume(t),w):A(t)}function k(t){return 45===t||Wc(t)?(e.consume(t),k):47===t||62===t||Xc(t)?S(t):n(t)}function S(t){return 47===t?(e.consume(t),A):58===t||95===t||Zc(t)?(e.consume(t),M):Qc(t)?(o=S,L(t)):eu(t)?(e.consume(t),S):A(t)}function M(t){return 45===t||46===t||58===t||95===t||Wc(t)?(e.consume(t),M):N(t)}function N(t){return 61===t?(e.consume(t),_):Qc(t)?(o=N,L(t)):eu(t)?(e.consume(t),N):S(t)}function _(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),s=t,j):Qc(t)?(o=_,L(t)):eu(t)?(e.consume(t),_):(e.consume(t),E)}function j(t){return t===s?(e.consume(t),s=void 0,T):null===t?n(t):Qc(t)?(o=j,L(t)):(e.consume(t),j)}function E(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Xc(t)?S(t):(e.consume(t),E)}function T(e){return 47===e||62===e||Xc(e)?S(e):n(e)}function A(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function L(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return eu(t)?iu(e,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):I(t)}function I(t){return e.enter("htmlTextData"),o(t)}}};const Vu={name:"labelEnd",tokenize:function(e,t,n){const r=this;let s,i,o=r.events.length;for(;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){s=r.events[o][1];break}return function(t){if(!s)return n(t);if(s._inactive)return u(t);return i=r.parser.defined.includes(Uc(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt($u,c,i?c:u)(t):91===t?e.attempt(Bu,c,i?l:u)(t):i?c(t):u(t)}function l(t){return e.attempt(Uu,c,u)(t)}function c(e){return t(e)}function u(e){return s._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,s,i,o=e.length,a=0;for(;o--;)if(n=e[o][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(s){if("enter"===e[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=o,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(s=o);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[s][1].end)},u={type:"labelText",start:Object.assign({},e[r+a+2][1].end),end:Object.assign({},e[s-2][1].start)};return i=[["enter",l,t],["enter",c,t]],i=zc(i,e.slice(r+1,r+a+3)),i=zc(i,[["enter",u,t]]),i=zc(i,uu(t.parser.constructs.insideSpan.null,e.slice(r+a+4,s-3),t)),i=zc(i,[["exit",u,t],e[s-2],e[s-1],["exit",c,t]]),i=zc(i,e.slice(s+1)),i=zc(i,[["exit",l,t]]),Pc(e,r,e.length,i),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},$u={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Xc(t)?Tu(e,s)(t):s(t)}function s(t){return 41===t?c(t):_u(e,i,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return Xc(t)?Tu(e,a)(t):c(t)}function o(e){return n(e)}function a(t){return 34===t||39===t||40===t?Eu(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Xc(t)?Tu(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Bu={tokenize:function(e,t,n){const r=this;return function(t){return ju.call(r,e,s,i,"reference","referenceMarker","referenceString")(t)};function s(e){return r.parser.defined.includes(Uc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},Uu={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Zu={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),s};function s(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Vu.resolveAll};const Wu={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),s};function s(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Vu.resolveAll};const qu={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),iu(e,t,"linePrefix")}}};const Gu={name:"thematicBreak",tokenize:function(e,t,n){let r,s=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),o(i)):s>=3&&(null===i||Qc(i))?(e.exit("thematicBreak"),t(i)):n(i)}function o(t){return t===r?(e.consume(t),s++,o):(e.exit("thematicBreakSequence"),eu(t)?iu(e,i,"whitespace")(t):i(t))}}};const Ju={name:"list",tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1];let i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,o=0;return function(t){const s=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===s?!r.containerState.marker||t===r.containerState.marker:Jc(t)){if(r.containerState.type||(r.containerState.type=s,e.enter(s,{_container:!0})),"listUnordered"===s)return e.enter("listItemPrefix"),42===t||45===t?e.check(Gu,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return Jc(t)&&++o<10?(e.consume(t),a):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(fu,r.interrupt?n:c,e.attempt(Ku,d,u))}function c(e){return r.containerState.initialBlankLine=!0,i++,d(e)}function u(t){return eu(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(fu,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,iu(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){if(r.containerState.furtherBlankLines||!eu(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Yu,t,s)(n)});function s(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,iu(e,e.attempt(Ju,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}},exit:function(e){e.exit(this.containerState.type)}},Ku={tokenize:function(e,t,n){const r=this;return iu(e,function(e){const s=r.events[r.events.length-1];return!eu(e)&&s&&"listItemPrefixWhitespace"===s[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},Yu={tokenize:function(e,t,n){const r=this;return iu(e,function(e){const s=r.events[r.events.length-1];return s&&"listItemIndent"===s[1].type&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)},partial:!0};const Qu={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let s;return function(t){let o,a=r.events.length;for(;a--;)if("lineEnding"!==r.events[a][1].type&&"linePrefix"!==r.events[a][1].type&&"content"!==r.events[a][1].type){o="paragraph"===r.events[a][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||o))return e.enter("setextHeadingLine"),s=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===s?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),eu(t)?iu(e,o,"lineSuffix")(t):o(t))}function o(r){return null===r||Qc(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,s,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),s||"definition"!==e[i][1].type||(s=i);const o={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",s?(e.splice(r,0,["enter",o,t]),e.splice(s+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[s][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};const Xu={tokenize:function(e){const t=this,n=e.attempt(fu,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,iu(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Mu,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const ed={resolveAll:sd()},td=rd("string"),nd=rd("text");function rd(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],s=t.attempt(r,i,o);return i;function i(e){return l(e)?s(e):o(e)}function o(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),s(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=r[e];let s=-1;if(t)for(;++s<t.length;){const e=t[s];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:sd("text"===e?id:void 0)}}function sd(e){return function(t,n){let r,s=-1;for(;++s<=t.length;)void 0===r?t[s]&&"data"===t[s][1].type&&(r=s,s++):t[s]&&"data"===t[s][1].type||(s!==r+2&&(t[r][1].end=t[s-1][1].end,t.splice(r+2,s-r-2),s=r+2),r=void 0);return e?e(t,n):t}}function id(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],s=t.sliceStream(r);let i,o=s.length,a=-1,l=0;for(;o--;){const e=s[o];if("string"==typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)i=!0,l++;else if(-1!==e){o++;break}}if(l){const s={type:n===e.length||i||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},s.start),r.start.offset===r.end.offset?Object.assign(r,s):(e.splice(n,0,["enter",s,t],["exit",s,t]),n+=2)}n++}return e}function od(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let o=[],a=[];const l={consume:function(e){Qc(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,x()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),a.push(n),n},exit:function(e){const t=a.pop();return t.end=h(),c.events.push(["exit",t,c]),t},attempt:g(function(e,t){y(e,t.from)}),check:g(m),interrupt:g(m,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:d,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const i=e[n];let o;if("string"==typeof i)o=i;else switch(i){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=t?" ":"\t";break;case-1:if(!t&&s)continue;o=" ";break;default:o=String.fromCharCode(i)}s=-2===i,r.push(o)}return r.join("")}(d(e),t)},now:h,defineSkip:function(e){s[e.line]=e.column,x()},write:function(e){if(o=zc(o,e),p(),null!==o[o.length-1])return[];return y(t,0),c.events=uu(i,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function d(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,i)];else{if(o=e.slice(n,s),r>-1){const e=o[0];"string"==typeof e?o[0]=e.slice(r):o.shift()}i>0&&o.push(e[s].slice(0,i))}return o}(o,e)}function h(){const{line:e,column:t,offset:n,_index:s,_bufferIndex:i}=r;return{line:e,column:t,offset:n,_index:s,_bufferIndex:i}}function p(){let e;for(;r._index<o.length;){const t=o[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)f(t.charCodeAt(r._bufferIndex));else f(t)}}function f(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,s,i){let o,u,d,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return f([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function f(e){return o=e,u=0,0===e.length?i:m(e[u])}function m(e){return function(n){p=function(){const e=h(),t=c.previous,n=c.currentConstruct,s=c.events.length,i=Array.from(a);return{restore:o,from:s};function o(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=s,a=i,x()}}(),d=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(d,p),s}function y(e){return p.restore(),++u<o.length?m(o[u]):i}}}function y(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&Pc(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function x(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}const ad={42:Ju,43:Ju,45:Ju,48:Ju,49:Ju,50:Ju,51:Ju,52:Ju,53:Ju,54:Ju,55:Ju,56:Ju,57:Ju,62:mu},ld={91:Au},cd={[-2]:bu,[-1]:bu,32:bu},ud={35:Iu,42:Gu,45:[Qu,Gu],60:Pu,61:Qu,95:Gu,96:vu,126:vu},dd={38:yu,92:gu},hd={[-5]:qu,[-4]:qu,[-3]:qu,33:Zu,38:yu,42:du,60:[pu,Hu],91:Wu,92:[Ou,gu],93:Vu,95:du,96:wu},pd={null:[du,ed]},fd=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:ld,disable:{null:[]},document:ad,flow:ud,flowInitial:cd,insideSpan:pd,string:dd,text:hd},Symbol.toStringTag,{value:"Module"}));const md=/[\0\t\n\r]/g;const gd=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function yd(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Bc(n.slice(t?2:1),t?16:10)}return Rc(n)||e}const xd={}.hasOwnProperty;function vd(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ee),autolinkProtocol:M,autolinkEmail:M,atxHeading:i(K),blockQuote:i(Z),characterEscape:M,characterReference:M,codeFenced:i(W),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(W,o),codeText:i(q,o),codeTextData:M,data:M,codeFlowValue:M,definition:i(G),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(J),hardBreakEscape:i(Y),hardBreakTrailing:i(Y),htmlFlow:i(Q,o),htmlFlowData:M,htmlText:i(Q,o),htmlTextData:M,image:i(X),label:o,link:i(ee),listItem:i(ne),listItemValue:h,listOrdered:i(te,d),listUnordered:i(te),paragraph:i(re),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(K),strong:i(se),thematicBreak:i(oe)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:U,autolinkProtocol:B,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:$,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:N,codeIndented:l(y),codeText:l(A),codeTextData:N,data:N,definition:l(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(j),hardBreakTrailing:l(j),htmlFlow:l(E),htmlFlowData:N,htmlText:l(T),htmlTextData:N,image:l(O),label:D,labelText:I,lineEnding:_,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:H,resourceDestinationString:R,resourceTitleString:P,resource:z,setextHeading:l(S),setextHeadingLineSequence:k,setextHeadingText:w,strong:l(),thematicBreak:l()}};Cd(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const i={stack:[r],tokenStack:[],config:t,enter:a,exit:c,buffer:o,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=s(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];xd.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},i),e[d][1])}if(i.tokenStack.length>0){const e=i.tokenStack[i.tokenStack.length-1];(e[1]||kd).call(i,void 0,e[0])}for(r.position={start:bd(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:bd(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function s(e,t,n){let r,s,i,o,a=t-1,l=-1,c=!1;for(;++a<=n;){const t=e[a];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,o=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||o||l||i||(i=a),o=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:o=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=a;for(s=void 0;o--;){const t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;s&&(e[s][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",s=o}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!s||i<s)&&(r._spread=!0),r.end=Object.assign({},s?e[s][1].start:t[1].end),e.splice(s||a,0,["exit",r,t[2]]),a++,n++}if("listItemPrefix"===t[1].type){const s={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=s,e.splice(a,0,["enter",s,t[2]]),a++,n++,i=void 0,o=!0}}}return e[t][1]._spread=c,n}function i(e,t){return n;function n(n){a.call(this,e(n),n),t&&t.call(this,n)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:bd(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+ac({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||kd).call(this,e,r[0])}n.position.end=bd(e.end)}function u(){return Lc(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function x(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Uc(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function C(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function M(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:bd(e.start),end:void 0},t.push(n)),this.stack.push(n)}function N(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=bd(e.end)}function _(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=bd(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(M.call(this,e),N.call(this,e))}function j(){this.data.atHardBreak=!0}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(gd,yd)}(t),n.identifier=Uc(t).toLowerCase()}function D(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function R(){const e=this.resume();this.stack[this.stack.length-1].url=e}function P(){const e=this.resume();this.stack[this.stack.length-1].title=e}function z(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function H(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Uc(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function V(e){this.data.characterReferenceType=e.type}function $(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=Bc(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Rc(t)}const s=this.stack.pop();s.value+=r,s.position.end=bd(e.end)}function B(e){N.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function U(e){N.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function Z(){return{type:"blockquote",children:[]}}function W(){return{type:"code",lang:null,meta:null,value:""}}function q(){return{type:"inlineCode",value:""}}function G(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function K(){return{type:"heading",depth:0,children:[]}}function Y(){return{type:"break"}}function Q(){return{type:"html",value:""}}function X(){return{type:"image",title:null,url:"",alt:null}}function ee(){return{type:"link",title:null,url:"",children:[]}}function te(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ne(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function re(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!ku(e););return e}(function(e){const t={defined:[],lazy:{},constructs:Hc([fd,...(e||{}).extensions||[]]),content:n(ou),document:n(au),flow:n(Xu),string:n(td),text:n(nd)};return t;function n(e){return function(n){return od(t,e,n)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(s,i,o){const a=[];let l,c,u,d,h;for(s=n+("string"==typeof s?s.toString():new TextDecoder(i||void 0).decode(s)),u=0,n="",r&&(65279===s.charCodeAt(0)&&u++,r=void 0);u<s.length;){if(md.lastIndex=u,l=md.exec(s),d=l&&void 0!==l.index?l.index:s.length,h=s.charCodeAt(d),!l){n=s.slice(u);break}if(10===h&&u===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<d&&(a.push(s.slice(u,d)),t+=d-u),h){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return o&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(e,t,!0))))}function bd(e){return{line:e.line,column:e.column,offset:e.offset}}function Cd(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Cd(e,r):wd(e,r)}}function wd(e,t){let n;for(n in t)if(xd.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function kd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ac({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ac({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ac({start:t.start,end:t.end})+") is still open")}function Sd(e){const t=this;t.parser=function(n){return vd(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Md(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),i=s[0];i&&"text"===i.type?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&"text"===o.type?o.value+=r:s.push({type:"text",value:r}),s}function Nd(e){const t=e.spread;return null==t?e.children.length>1:t}function _d(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const i=[];for(;r;)i.push(jd(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return i.push(jd(t.slice(s),s>0,!1)),i.join("")}function jd(e,t,n){let r=0,s=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(s-1);for(;9===t||32===t;)s--,t=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}const Ed={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={},s=t.lang?t.lang.split(/\s+/):[];s.length>0&&(r.className=["language-"+s[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=su(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);void 0===a?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=i+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Md(e,t);const s={src:su(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)},image:function(e,t){const n={src:su(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Md(e,t);const s={href:su(r.url||"")};null!==r.title&&void 0!==r.title&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},link:function(e,t){const n={href:su(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),s=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Nd(n[r])}return t}(n):Nd(t),i={},o=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const e=r[a];(s||0!==a||"element"!==e.type||"p"!==e.tagName)&&o.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||s?o.push(e):o.push(...e.children)}const l=r[r.length-1];l&&(s||"element"!==l.type||"p"!==l.tagName)&&o.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let s=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++s<r.length;){const e=r[s];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),s.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=ic(t.children[1]),o=sc(t.children[t.children.length-1]);i&&o&&(r.position={start:i,end:o}),s.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,s=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,o=i?i.length:t.children.length;let a=-1;const l=[];for(;++a<o;){const n=t.children[a],r={},o=i?i[a]:void 0;o&&(r.align=o);let c={type:"element",tagName:s,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:_d(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Td,yaml:Td,definition:Td,footnoteDefinition:Td};function Td(){}const Ad="object"==typeof self?self:globalThis,Ld=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[i,o]=t[s];switch(i){case 0:case-1:return n(o,s);case 1:{const e=n([],s);for(const t of o)e.push(r(t));return e}case 2:{const e=n({},s);for(const[t,n]of o)e[r(t)]=r(n);return e}case 3:return n(new Date(o),s);case 4:{const{source:e,flags:t}=o;return n(new RegExp(e,t),s)}case 5:{const e=n(new Map,s);for(const[t,n]of o)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,s);for(const t of o)e.add(r(t));return e}case 7:{const{name:e,message:t}=o;return n(new Ad[e](t),s)}case 8:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s)}return n(new Ad[i](o),s)};return r})(new Map,e)(0),Od="",{toString:Id}={},{keys:Dd}=Object,Rd=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Id.call(e).slice(8,-1);switch(n){case"Array":return[1,Od];case"Object":return[2,Od];case"Date":return[3,Od];case"RegExp":return[4,Od];case"Map":return[5,Od];case"Set":return[6,Od]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Pd=([e,t])=>0===e&&("function"===t||"symbol"===t),zd=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},i=r=>{if(n.has(r))return n.get(r);let[o,a]=Rd(r);switch(o){case 0:{let t=r;switch(a){case"bigint":o=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+a);t=null;break;case"undefined":return s([-1],r)}return s([o,t],r)}case 1:{if(a)return s([a,[...r]],r);const e=[],t=s([o,e],r);for(const n of r)e.push(i(n));return t}case 2:{if(a)switch(a){case"BigInt":return s([a,r.toString()],r);case"Boolean":case"Number":case"String":return s([a,r.valueOf()],r)}if(t&&"toJSON"in r)return i(r.toJSON());const n=[],l=s([o,n],r);for(const t of Dd(r))!e&&Pd(Rd(r[t]))||n.push([i(t),i(r[t])]);return l}case 3:return s([o,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return s([o,{source:e,flags:t}],r)}case 5:{const t=[],n=s([o,t],r);for(const[s,o]of r)(e||!Pd(Rd(s))&&!Pd(Rd(o)))&&t.push([i(s),i(o)]);return n}case 6:{const t=[],n=s([o,t],r);for(const s of r)!e&&Pd(Rd(s))||t.push(i(s));return n}}const{message:l}=r;return s([o,{name:a,message:l}],r)};return i})(!(t||n),!!t,new Map,r)(e),r},Fd="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Ld(zd(e,t)):structuredClone(e):(e,t)=>Ld(zd(e,t));function Hd(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Vd(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const $d={}.hasOwnProperty,Bd={};function Ud(e,t){e.position&&(t.position=function(e){const t=ic(e),n=sc(e);if(t&&n)return{start:t,end:n}}(e))}function Zd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,s=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&s&&Object.assign(n.properties,Fd(s)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function Wd(e,t){const n=t.data||{},r=!("value"in t)||$d.call(n,"hProperties")||$d.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function qd(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Gd(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Jd(e,t){const n=function(e,t){const n=t||Bd,r=new Map,s=new Map,i=new Map,o={...Ed,...n.handlers},a={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const s=a.one(n[r],e);if(s){if(r&&"break"===n[r-1].type&&(Array.isArray(s)||"text"!==s.type||(s.value=Gd(s.value)),!Array.isArray(s)&&"element"===s.type)){const e=s.children[0];e&&"text"===e.type&&(e.value=Gd(e.value))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t},applyData:Zd,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:function(e,t){const n=e.type,r=a.handlers[n];if($d.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=Fd(n);return r.children=a.all(e),r}return Fd(e)}return(a.options.unknownHandler||Wd)(a,e,t)},options:n,patch:Ud,wrap:qd};return ms(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:s,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),a}(e,t),r=n.one(e,void 0),s=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Hd,r=e.options.footnoteBackLabel||Vd,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const s=e.footnoteById.get(e.footnoteOrder[l]);if(!s)continue;const i=e.all(s),o=String(s.identifier).toUpperCase(),c=su(o.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(o);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=i[i.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else i.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(i,!0)};e.patch(s,f),a.push(f)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Fd(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:"\n"}]}}(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:"\n"},s),i}function Kd(e,t){return e&&"run"in e?async function(n,r){const s=Jd(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Jd(n,{file:r,...t||e})}}function Yd(e){if(e)throw e}var Qd,Xd;var eh=function(){if(Xd)return Qd;Xd=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===t.call(e)},i=function(n){if(!n||"[object Object]"!==t.call(n))return!1;var r,s=e.call(n,"constructor"),i=n.constructor&&n.constructor.prototype&&e.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!s&&!i)return!1;for(r in n);return void 0===r||e.call(n,r)},o=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},a=function(t,n){if("__proto__"===n){if(!e.call(t,n))return;if(r)return r(t,n).value}return t[n]};return Qd=function e(){var t,n,r,l,c,u,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=a(d,n),d!==(l=a(t,n))&&(f&&l&&(i(l)||(c=s(l)))?(c?(c=!1,u=r&&s(r)?r:[]):u=r&&i(r)?r:{},o(d,{name:n,newValue:e(f,u,l)})):void 0!==l&&o(d,{name:n,newValue:l}));return d},Qd}();const th=ve(eh);function nh(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function rh(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function s(i,...o){const a=e[++n];let l=-1;if(i)r(i);else{for(;++l<t.length;)null!==o[l]&&void 0!==o[l]||(o[l]=t[l]);t=o,a?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let a;r&&t.push(s);try{a=e.apply(this,t)}catch(i){if(r&&n)throw i;return s(i)}r||(a instanceof Promise?a.then(o,s):a instanceof Error?s(a):o(a))}function s(e,...r){n||(n=!0,t(e,...r))}function o(e){s(null,e)}}(a,s)(...o):r(null,...o)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const sh={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');ih(e);let n,r=0,s=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else s<0&&(n=!0,s=i+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(47===e.codePointAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(s=i):(a=-1,s=o));r===s?s=o:s<0&&(s=e.length);return e.slice(r,s)},dirname:function(e){if(ih(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){ih(e);let t,n=e.length,r=-1,s=0,i=-1,o=0;for(;n--;){const a=e.codePointAt(n);if(47!==a)r<0&&(t=!0,r=n+1),46===a?i<0?i=n:1!==o&&(o=1):i>-1&&(o=-1);else if(t){s=n+1;break}}if(i<0||r<0||0===o||1===o&&i===r-1&&i===s+1)return"";return e.slice(i,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)ih(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){ih(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,s="",i=0,o=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===a);else if(o!==l-1&&2===a){if(s.length<2||2!==i||46!==s.codePointAt(s.length-1)||46!==s.codePointAt(s.length-2))if(s.length>2){if(r=s.lastIndexOf("/"),r!==s.length-1){r<0?(s="",i=0):(s=s.slice(0,r),i=s.length-1-s.lastIndexOf("/")),o=l,a=0;continue}}else if(s.length>0){s="",i=0,o=l,a=0;continue}t&&(s=s.length>0?s+"/..":"..",i=2)}else s.length>0?s+="/"+e.slice(o+1,l):s=e.slice(o+1,l),i=l-o-1;o=l,a=0}else 46===n&&a>-1?a++:a=-1}return s}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function ih(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const oh={cwd:function(){return"/"}};function ah(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function lh(e){if("string"==typeof e)e=new URL(e);else if(!ah(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const ch=["history","path","basename","stem","extname","dirname"];class uh{constructor(e){let t;t=e?ah(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd=oh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<ch.length;){const e=ch[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)ch.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?sh.basename(this.path):void 0}set basename(e){hh(e,"basename"),dh(e,"basename"),this.path=sh.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?sh.dirname(this.path):void 0}set dirname(e){ph(this.basename,"dirname"),this.path=sh.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?sh.extname(this.path):void 0}set extname(e){if(dh(e,"extname"),ph(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ah(e)&&(e=lh(e)),hh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?sh.basename(this.path,this.extname):void 0}set stem(e){hh(e,"stem"),dh(e,"stem"),this.path=sh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new dc(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function dh(e,t){if(e&&e.includes(sh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+sh.sep+"`")}function hh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ph(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const fh=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},mh={}.hasOwnProperty;class gh extends fh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=rh()}copy(){const e=new gh;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(th(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(bh("data",this.frozen),this.namespace[e]=t,this):mh.call(this.namespace,e)&&this.namespace[e]||void 0:e?(bh("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=kh(e),n=this.parser||this.Parser;return xh("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),xh("process",this.parser||this.Parser),vh("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,s){const i=kh(e),o=n.parse(i);function a(e,n){e||!n?s(e):r?r(n):t(void 0,n)}n.run(o,i,function(e,t,r){if(e||!t||!r)return a(e);const s=t,i=n.stringify(s,r);var o;"string"==typeof(o=i)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(o)?r.value=i:r.result=i,a(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),xh("processSync",this.parser||this.Parser),vh("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,Yd(e),t=r}),wh("processSync","process",n),t}run(e,t,n){Ch(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?s(void 0,n):new Promise(s);function s(s,i){const o=kh(t);r.run(e,o,function(t,r,o){const a=r||e;t?i(t):s?s(a):n(void 0,a,o)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){Yd(e),n=t,r=!0}),wh("runSync","run",r),n}stringify(e,t){this.freeze();const n=kh(t),r=this.compiler||this.Compiler;return vh("stringify",r),Ch(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(bh("use",this.frozen),null==e);else if("function"==typeof e)a(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?o(e):i(e)}return this;function s(e){if("function"==typeof e)a(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;a(t,n)}else i(e)}}function i(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(e.plugins),e.settings&&(r.settings=th(!0,r.settings,e.settings))}function o(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function a(e,t){let r=-1,s=-1;for(;++r<n.length;)if(n[r][0]===e){s=r;break}if(-1===s)n.push([e,...t]);else if(t.length>0){let[r,...i]=t;const o=n[s][1];nh(o)&&nh(r)&&(r=th(!0,o,r)),n[s]=[e,r,...i]}}}}const yh=(new gh).freeze();function xh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function vh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function bh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ch(e){if(!nh(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function wh(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function kh(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new uh(e)}const Sh=[],Mh={allowDangerousHtml:!0},Nh=/^(https?|ircs?|mailto|xmpp)$/i,_h=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function jh(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",s=e.className,i=e.components,o=e.disallowedElements,a=e.rehypePlugins||Sh,l=e.remarkPlugins||Sh,c=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Mh}:Mh,u=e.skipHtml,d=e.unwrapDisallowed,h=e.urlTransform||Eh,p=yh().use(Sd).use(l).use(Kd,c).use(a),f=new uh;"string"==typeof r&&(f.value=r);for(const y of _h)Object.hasOwn(e,y.from)&&ol((y.from,y.to&&y.to,y.id));const m=p.parse(f);let g=p.runSync(m,f);return s&&(g={type:"element",tagName:"div",properties:{className:s},children:"root"===g.type?g.children:[g]}),ms(g,function(e,r,s){if("raw"===e.type&&s&&"number"==typeof r)return u?s.children.splice(r,1):s.children[r]={type:"text",value:e.value},r;if("element"===e.type){let t;for(t in Tc)if(Object.hasOwn(Tc,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Tc[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=h(String(n||""),t,e))}}if("element"===e.type){let i=t?!t.includes(e.tagName):!!o&&o.includes(e.tagName);if(!i&&n&&"number"==typeof r&&(i=!n(e,r,s)),i&&s&&"number"==typeof r)return d&&e.children?s.children.splice(r,1,...e.children):s.children.splice(r,1),r}}),vc(g,{Fragment:he.Fragment,components:i,ignoreInvalidStyle:!0,jsx:he.jsx,jsxs:he.jsxs,passKeys:!0,passNode:!0})}function Eh(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return-1===t||-1!==s&&t>s||-1!==n&&t>n||-1!==r&&t>r||Nh.test(e.slice(0,t))?e:""}const Th=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Ah={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};function Lh(e){const t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}function Oh(e){const t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=102||t>=65&&t<=70||t>=48&&t<=57}function Ih(e){return function(e){const t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}(e)||Lh(e)}const Dh=String.fromCharCode,Rh=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function Ph(e,t={}){const n="string"==typeof t.additional?t.additional.charCodeAt(0):t.additional,r=[];let s,i,o=0,a=-1,l="";t.position&&("start"in t.position||"indent"in t.position?(i=t.position.indent,s=t.position.start):s=t.position);let c,u=(s?s.line:0)||1,d=(s?s.column:0)||1,h=p();for(o--;++o<=e.length;)if(10===c&&(d=(i?i[a]:0)||1),c=e.charCodeAt(o),38===c){const s=e.charCodeAt(o+1);if(9===s||10===s||12===s||32===s||38===s||60===s||Number.isNaN(s)||n&&s===n){l+=Dh(c),d++;continue}const i=o+1;let a,u=i,g=i;if(35===s){g=++u;const t=e.charCodeAt(g);88===t||120===t?(a="hexadecimal",g=++u):a="decimal"}else a="named";let y="",x="",v="";const b="named"===a?Ih:"decimal"===a?Lh:Oh;for(g--;++g<=e.length;){const t=e.charCodeAt(g);if(!b(t))break;v+=Dh(t),"named"===a&&Th.includes(v)&&(y=v,x=Rc(v))}let C=59===e.charCodeAt(g);if(C){g++;const e="named"===a&&Rc(v);e&&(y=v,x=e)}let w=1+g-i,k="";if(C||!1!==t.nonTerminated)if(v)if("named"===a){if(C&&!x)f(5,1);else if(y!==v&&(g=u+y.length,w=1+g-u,C=!1),!C){const n=y?1:3;if(t.attribute){const t=e.charCodeAt(g);61===t?(f(n,w),x=""):Ih(t)?x="":f(n,w)}else f(n,w)}k=x}else{C||f(2,w);let e=Number.parseInt(v,"hexadecimal"===a?16:10);if(zh(e))f(7,w),k=Dh(65533);else if(e in Ah)f(6,w),k=Ah[e];else{let t="";Fh(e)&&f(6,w),e>65535&&(e-=65536,t+=Dh(e>>>10|55296),e=56320|1023&e),k=t+Dh(e)}}else"named"!==a&&f(4,w);else;if(k){m(),h=p(),o=g-1,d+=g-i+1,r.push(k);const n=p();n.offset++,t.reference&&t.reference.call(t.referenceContext,k,{start:h,end:n},e.slice(i-1,g)),h=n}else v=e.slice(i-1,g),l+=v,d+=v.length,o=g-1}else 10===c&&(u++,a++,d=0),Number.isNaN(c)?m():(l+=Dh(c),d++);return r.join("");function p(){return{line:u,column:d,offset:o+((s?s.offset:0)||0)}}function f(e,n){let r;t.warning&&(r=p(),r.column+=n,r.offset+=n,t.warning.call(t.warningContext,Rh[e],r,e))}function m(){l&&(r.push(l),t.text&&t.text.call(t.textContext,l,{start:h,end:p()}),l="")}}function zh(e){return e>=55296&&e<=57343||e>1114111}function Fh(e){return e>=1&&e<=8||11===e||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||!(65535&~e)||65534==(65535&e)}function Hh(e,t){return e=e.replace(t.subset?function(e){const t=[];let n=-1;for(;++n<e.length;)t.push(e[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(t.subset):/["&'<>`]/g,n),t.subset||t.escapeOnly?e:e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(e,n,r){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,r.charCodeAt(n+2),t)}).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,n);function n(e,n,r){return t.format(e.charCodeAt(0),r.charCodeAt(n+1),t)}}function Vh(e){return"&#x"+e.toString(16).toUpperCase()+";"}const $h={}.hasOwnProperty,Bh=/^[^\t\n\r "#'.<=>`}]+$/;function Uh(e){qh.call(this,"containerDirective",e)}function Zh(e){qh.call(this,"leafDirective",e)}function Wh(e){qh.call(this,"textDirective",e)}function qh(e,t){this.enter({type:e,name:"",attributes:{},children:[]},t)}function Gh(e){const t=this.stack[this.stack.length-1];"containerDirective"===t.type||"leafDirective"===t.type||t.type,t.name=this.sliceSerialize(e)}function Jh(e){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},e)}function Kh(e){this.exit(e)}function Yh(){this.data.directiveAttributes=[],this.buffer()}function Qh(e){this.data.directiveAttributes.push(["id",Ph(this.sliceSerialize(e),{attribute:!0})])}function Xh(e){this.data.directiveAttributes.push(["class",Ph(this.sliceSerialize(e),{attribute:!0})])}function ep(e){const t=this.data.directiveAttributes;t[t.length-1][1]=Ph(this.sliceSerialize(e),{attribute:!0})}function tp(e){this.data.directiveAttributes.push([this.sliceSerialize(e),""])}function np(){const e=this.data.directiveAttributes,t={};let n=-1;for(;++n<e.length;){const r=e[n];"class"===r[0]&&t.class?t.class+=" "+r[1]:t[r[0]]=r[1]}this.data.directiveAttributes=void 0,this.resume();const r=this.stack[this.stack.length-1];"containerDirective"===r.type||"leafDirective"===r.type||r.type,r.attributes=t}function rp(e){this.exit(e)}function sp(e,t,n,r){const s=n.createTracker(r),i=function(e){let t=0;"containerDirective"===e.type?(fs(e,function(e,n){if("containerDirective"===e.type){let e=n.length,r=0;for(;e--;)"containerDirective"===n[e].type&&r++;r>t&&(t=r)}}),t+=3):t="leafDirective"===e.type?2:1;return":".repeat(t)}(e),o=n.enter(e.type);let a,l=s.move(i+(e.name||""));if("containerDirective"===e.type){const t=(e.children||[])[0];a=ip(t)?t:void 0}else a=e;if(a&&a.children&&a.children.length>0){const t=n.enter("label"),r=`${e.type}Label`,i=n.enter(r);l+=s.move("["),l+=s.move(n.containerPhrasing(a,{...s.current(),before:l,after:"]"})),l+=s.move("]"),i(),t()}if(l+=s.move(function(e,t){const n=t.options.quote||'"',r="textDirective"===e.type?[n]:[n,"\n","\r"],s=e.attributes||{},i=[];let o,a,l,c;for(c in s)if($h.call(s,c)&&void 0!==s[c]&&null!==s[c]){const e=String(s[c]);if("id"===c)l=Bh.test(e)?"#"+e:u("id",e);else if("class"===c){const t=e.split(/[\t\n\r ]+/g),n=[],r=[];let s=-1;for(;++s<t.length;)(Bh.test(t[s])?r:n).push(t[s]);o=n.length>0?u("class",n.join(" ")):"",a=r.length>0?"."+r.join("."):""}else i.push(u(c,e))}o&&i.unshift(o);a&&i.unshift(a);l&&i.unshift(l);return i.length>0?"{"+i.join(" ")+"}":"";function u(e,t){return e+(t?"="+n+function(e,t){return Hh(e,Object.assign({format:Vh},t))}(t,{subset:r})+n:"")}}(e,n)),"containerDirective"===e.type){let t=e;ip((e.children||[])[0])&&(t=Object.assign({},e,{children:e.children.slice(1)})),t&&t.children&&t.children.length>0&&(l+=s.move("\n"),l+=s.move(n.containerFlow(t,s.current()))),l+=s.move("\n"+i)}return o(),l}function ip(e){return Boolean(e&&"paragraph"===e.type&&e.data&&e.data.directiveLabel)}function op(e,t,n,r,s,i,o,a,l,c,u,d,h,p,f){let m,g;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),y};function y(t){return 35===t?(m=o,x(t)):46===t?(m=a,x(t)):f&&eu(t)?iu(e,y,"whitespace")(t):!f&&Xc(t)?Tu(e,y)(t):null===t||Qc(t)||nu(t)||tu(t)&&45!==t&&95!==t?E(t):(e.enter(i),e.enter(l),e.consume(t),C)}function x(t){const n=m+"Marker";return e.enter(i),e.enter(m),e.enter(n),e.consume(t),e.exit(n),v}function v(t){if(null===t||34===t||35===t||39===t||46===t||60===t||61===t||62===t||96===t||125===t||Xc(t))return n(t);const r=m+"Value";return e.enter(r),e.consume(t),b}function b(t){if(null===t||34===t||39===t||60===t||61===t||62===t||96===t)return n(t);if(35===t||46===t||125===t||Xc(t)){const n=m+"Value";return e.exit(n),e.exit(m),e.exit(i),y(t)}return e.consume(t),b}function C(t){return null===t||Qc(t)||nu(t)||tu(t)&&45!==t&&46!==t&&58!==t&&95!==t?(e.exit(l),f&&eu(t)?iu(e,w,"whitespace")(t):!f&&Xc(t)?Tu(e,w)(t):w(t)):(e.consume(t),C)}function w(t){return 61===t?(e.enter(c),e.consume(t),e.exit(c),k):(e.exit(i),y(t))}function k(t){return null===t||60===t||61===t||62===t||96===t||125===t||f&&Qc(t)?n(t):34===t||39===t?(e.enter(u),e.enter(h),e.consume(t),e.exit(h),g=t,M):f&&eu(t)?iu(e,k,"whitespace")(t):!f&&Xc(t)?Tu(e,k)(t):(e.enter(d),e.enter(p),e.consume(t),g=void 0,S)}function S(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t?n(t):125===t||Xc(t)?(e.exit(p),e.exit(d),e.exit(i),y(t)):(e.consume(t),S)}function M(t){return t===g?(e.enter(h),e.consume(t),e.exit(h),e.exit(u),e.exit(i),j):(e.enter(d),N(t))}function N(t){return t===g?(e.exit(d),M(t)):null===t?n(t):Qc(t)?f?n(t):Tu(e,N)(t):(e.enter(p),e.consume(t),_)}function _(t){return t===g||null===t||Qc(t)?(e.exit(p),N(t)):(e.consume(t),_)}function j(e){return 125===e||Xc(e)?y(e):E(e)}function E(i){return 125===i?(e.enter(s),e.consume(i),e.exit(s),e.exit(r),t):n(i)}}function ap(e,t,n,r,s,i,o){let a,l=0,c=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),u};function u(n){return 93===n?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(i),d(n))}function d(t){if(93===t&&!c)return f(t);const n=e.enter("chunkText",{_contentTypeTextTrailing:!0,contentType:"text",previous:a});return a&&(a.next=n),a=n,h(t)}function h(t){return null===t||l>999||91===t&&++c>32?n(t):93!==t||c--?Qc(t)?o?n(t):(e.consume(t),e.exit("chunkText"),d):(e.consume(t),92===t?p:h):(e.exit("chunkText"),f(t))}function p(t){return 91===t||92===t||93===t?(e.consume(t),l++,h):h(t)}function f(n){return e.exit(i),e.enter(s),e.consume(n),e.exit(s),e.exit(r),t}}function lp(e,t,n,r){const s=this;return function(t){if(null===t||Qc(t)||tu(t)||nu(t))return n(t);return e.enter(r),e.consume(t),i};function i(o){return null===o||Qc(o)||nu(o)||tu(o)&&45!==o&&95!==o?(e.exit(r),45===s.previous||95===s.previous?n(o):t(o)):(e.consume(o),i)}}sp.peek=function(){return":"};const cp={tokenize:function(e,t,n){const r=this,s=r.events[r.events.length-1],i=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0;let o,a=0;return function(t){return e.enter("directiveContainer"),e.enter("directiveContainerFence"),e.enter("directiveContainerSequence"),l(t)};function l(t){return 58===t?(e.consume(t),a++,l):a<3?n(t):(e.exit("directiveContainerSequence"),lp.call(r,e,c,n,"directiveContainerName")(t))}function c(t){return 91===t?e.attempt(up,u,u)(t):u(t)}function u(t){return 123===t?e.attempt(dp,d,d)(t):d(t)}function d(t){return iu(e,h,"whitespace")(t)}function h(s){return e.exit("directiveContainerFence"),null===s?w(s):Qc(s)?r.interrupt?t(s):e.attempt(hp,p,w)(s):n(s)}function p(t){return null===t?w(t):Qc(t)?e.check(hp,x,w)(t):(e.enter("directiveContainerContent"),f(t))}function f(t){return e.attempt({tokenize:k,partial:!0},C,i?iu(e,m,"linePrefix",i+1):m)(t)}function m(t){return null===t?C(t):Qc(t)?e.check(hp,y,C)(t):y(t)}function g(t){if(null===t){const n=e.exit("chunkDocument");return r.parser.lazy[n.start.line]=!1,C(t)}return Qc(t)?e.check(hp,v,b)(t):(e.consume(t),g)}function y(t){const n=e.enter("chunkDocument",{contentType:"document",previous:o});return o&&(o.next=n),o=n,g(t)}function x(t){return e.enter("directiveContainerContent"),f(t)}function v(t){e.consume(t);const n=e.exit("chunkDocument");return r.parser.lazy[n.start.line]=!1,f}function b(t){const n=e.exit("chunkDocument");return r.parser.lazy[n.start.line]=!1,C(t)}function C(t){return e.exit("directiveContainerContent"),w(t)}function w(n){return e.exit("directiveContainer"),t(n)}function k(e,t,n){let s=0;return iu(e,function(t){return e.enter("directiveContainerFence"),e.enter("directiveContainerSequence"),i(t)},"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function i(t){return 58===t?(e.consume(t),s++,i):s<a?n(t):(e.exit("directiveContainerSequence"),iu(e,o,"whitespace")(t))}function o(r){return null===r||Qc(r)?(e.exit("directiveContainerFence"),t(r)):n(r)}}},concrete:!0},up={tokenize:function(e,t,n){return ap(e,t,n,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)},partial:!0},dp={tokenize:function(e,t,n){return op(e,t,n,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)},partial:!0},hp={tokenize:function(e,t,n){const r=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s};function s(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const pp={tokenize:function(e,t,n){const r=this;return function(t){return e.enter("directiveLeaf"),e.enter("directiveLeafSequence"),e.consume(t),s};function s(t){return 58===t?(e.consume(t),e.exit("directiveLeafSequence"),lp.call(r,e,i,n,"directiveLeafName")):n(t)}function i(t){return 91===t?e.attempt(fp,o,o)(t):o(t)}function o(t){return 123===t?e.attempt(mp,a,a)(t):a(t)}function a(t){return iu(e,l,"whitespace")(t)}function l(r){return null===r||Qc(r)?(e.exit("directiveLeaf"),t(r)):n(r)}}},fp={tokenize:function(e,t,n){return ap(e,t,n,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)},partial:!0},mp={tokenize:function(e,t,n){return op(e,t,n,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)},partial:!0};const gp={tokenize:function(e,t,n){const r=this;return function(t){return e.enter("directiveText"),e.enter("directiveTextMarker"),e.consume(t),e.exit("directiveTextMarker"),lp.call(r,e,s,n,"directiveTextName")};function s(t){return 58===t?n(t):91===t?e.attempt(yp,i,i)(t):i(t)}function i(t){return 123===t?e.attempt(xp,o,o)(t):o(t)}function o(n){return e.exit("directiveText"),t(n)}},previous:function(e){return 58!==e||"characterEscape"===this.events[this.events.length-1][1].type}},yp={tokenize:function(e,t,n){return ap(e,t,n,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")},partial:!0},xp={tokenize:function(e,t,n){return op(e,t,n,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")},partial:!0};function vp(){const e=this.data(),t=e.micromarkExtensions||(e.micromarkExtensions=[]),n=e.fromMarkdownExtensions||(e.fromMarkdownExtensions=[]),r=e.toMarkdownExtensions||(e.toMarkdownExtensions=[]);t.push({text:{58:gp},flow:{58:[cp,pp]}}),n.push({canContainEols:["textDirective"],enter:{directiveContainer:Uh,directiveContainerAttributes:Yh,directiveContainerLabel:Jh,directiveLeaf:Zh,directiveLeafAttributes:Yh,directiveText:Wh,directiveTextAttributes:Yh},exit:{directiveContainer:rp,directiveContainerAttributeClassValue:Xh,directiveContainerAttributeIdValue:Qh,directiveContainerAttributeName:tp,directiveContainerAttributeValue:ep,directiveContainerAttributes:np,directiveContainerLabel:Kh,directiveContainerName:Gh,directiveLeaf:rp,directiveLeafAttributeClassValue:Xh,directiveLeafAttributeIdValue:Qh,directiveLeafAttributeName:tp,directiveLeafAttributeValue:ep,directiveLeafAttributes:np,directiveLeafName:Gh,directiveText:rp,directiveTextAttributeClassValue:Xh,directiveTextAttributeIdValue:Qh,directiveTextAttributeName:tp,directiveTextAttributeValue:ep,directiveTextAttributes:np,directiveTextName:Gh}}),r.push({unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:"\n",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}],handlers:{containerDirective:sp,leafDirective:sp,textDirective:sp}})}function bp(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;-1!==s;)r++,s=n.indexOf(t,s+t.length);return r}function Cp(e,t,n){const r=as((n||{}).ignore||[]),s=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([wp(e[0]),kp(e[1])])}return t}(t);let i=-1;for(;++i<s.length;)fs(e,"text",o);function o(e,t){let n,o=-1;for(;++o<t.length;){const e=t[o],s=n?n.children:void 0;if(r(e,s?s.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=s[i][0],o=s[i][1];let a=0;const l=n.children.indexOf(e);let c=!1,u=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){const n=d.index,s={index:d.index,input:d.input,stack:[...t,e]};let i=o(...d,s);if("string"==typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?r.lastIndex=n+1:(a!==n&&u.push({type:"text",value:e.value.slice(a,n)}),Array.isArray(i)?u.push(...i):i&&u.push(i),a=n+d[0].length,c=!0),!r.global)break;d=r.exec(e.value)}c?(a<e.value.length&&u.push({type:"text",value:e.value.slice(a)}),n.children.splice(l,1,...u)):u=[e];return l+u.length}(e,t)}}function wp(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function kp(e){return"function"==typeof e?e:function(){return e}}const Sp="phrasing",Mp=["autolink","link","image","label"];function Np(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function _p(e){this.config.enter.autolinkProtocol.call(this,e)}function jp(e){this.config.exit.autolinkProtocol.call(this,e)}function Ep(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Tp(e){this.config.exit.autolinkEmail.call(this,e)}function Ap(e){this.exit(e)}function Lp(e){Cp(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Op],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Ip]],{ignore:["link","linkReference"]})}function Op(e,t,n,r,s){let i="";if(!Dp(s))return!1;if(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const o=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=bp(e,"(");let i=bp(e,")");for(;-1!==r&&s>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Ip(e,t,n,r){return!(!Dp(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Dp(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||nu(n)||tu(n))&&(!t||47!==n)}function Rp(){this.buffer()}function Pp(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function zp(){this.buffer()}function Fp(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Hp(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Uc(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Vp(e){this.exit(e)}function $p(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Uc(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Bp(e){this.exit(e)}function Up(e,t,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return i+=s.move(n.safe(n.associationId(e),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function Zp(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,s){const i=r.createTracker(s);let o=i.move("[^");const a=r.enter("footnoteDefinition"),l=r.enter("label");o+=i.move(r.safe(r.associationId(e),{before:o,after:"]"})),l(),o+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),o+=i.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,i.current()),t?qp:Wp)));return a(),o},footnoteReference:Up},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function Wp(e,t,n){return 0===t?e:qp(e,t,n)}function qp(e,t,n){return(n?"":"    ")+e}Up.peek=function(){return"["};const Gp=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function Jp(e){this.enter({type:"delete",children:[]},e)}function Kp(e){this.exit(e)}function Yp(e,t,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(e,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function Qp(e){return null==e?"":String(e)}function Xp(e){return e.length}function ef(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function tf(e,t,n){return">"+(n?"":" ")+e}function nf(e,t){return rf(e,t.inConstruct,!0)&&!rf(e,t.notInConstruct,!1)}function rf(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function sf(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if("\n"===n.unsafe[s].character&&nf(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function of(e,t){const n=String(e);let r=n.indexOf(t),s=r,i=0,o=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===s?++i>o&&(o=i):i=1,s=r+t.length,r=n.indexOf(t,s);return o}function af(e,t,n){return(n?"":"    ")+e}function lf(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function cf(e,t,n,r){const s=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),i=n.enter("emphasis"),o=n.createTracker(r);let a=o.move(s);return a+=o.move(n.containerPhrasing(e,{before:a,after:s,...o.current()})),a+=o.move(s),i(),a}function uf(e){return e.value||""}function df(e,t,n,r){const s=lf(n),i='"'===s?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function hf(e,t,n,r){const s=e.referenceType,i=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=a.move("]"):l+=a.move(d+"]"),l}function pf(e,t,n){let r=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=n.compilePattern(e);let s;if(e.atBreak)for(;s=t.exec(r);){let e=s.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(s.index+1)}}return s+r+s}function ff(e,t){const n=Lc(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function mf(e,t,n,r){const s=lf(n),i='"'===s?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(ff(e,n)){const t=n.stack;n.stack=[],a=n.enter("autolink");let r=o.move("<");return r+=o.move(n.containerPhrasing(e,{before:r,after:">",...o.current()})),r+=o.move(">"),a(),n.stack=t,r}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=n.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(n.safe(e.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function gf(e,t,n,r){const s=e.referenceType,i=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),"full"!==s&&c&&c===d?"shortcut"===s?l=l.slice(0,-1):l+=a.move("]"):l+=a.move(d+"]"),l}function yf(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function xf(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}Yp.peek=function(){return"~"},cf.peek=function(e,t,n){return n.options.emphasis||"*"},uf.peek=function(){return"<"},df.peek=function(){return"!"},hf.peek=function(){return"!"},pf.peek=function(){return"`"},mf.peek=function(e,t,n){return ff(e,n)?"<":"["},gf.peek=function(){return"["};const vf=as(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function bf(e,t,n,r){const s=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),i=n.enter("strong"),o=n.createTracker(r);let a=o.move(s+s);return a+=o.move(n.containerPhrasing(e,{before:a,after:s,...o.current()})),a+=o.move(s+s),i(),a}bf.peek=function(e,t,n){return n.options.strong||"*"};const Cf={blockquote:function(e,t,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(e,i.current()),tf);return s(),o},break:sf,code:function(e,t,n,r){const s=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),i=e.value||"",o="`"===s?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(i,af);return e(),t}const a=n.createTracker(r),l=s.repeat(Math.max(of(i,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(e.lang){const t=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...a.current()})),t()}if(e.lang&&e.meta){const t=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(e.meta,{before:u,after:"\n",encode:["`"],...a.current()})),t()}return u+=a.move("\n"),i&&(u+=a.move(i+"\n")),u+=a.move(l),c(),u},definition:function(e,t,n,r){const s=lf(n),i='"'===s?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),a(),e.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(e.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c},emphasis:cf,hardBreak:sf,heading:function(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(function(e,t){let n=!1;return ms(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,hs}),Boolean((!e.depth||e.depth<3)&&Lc(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),o=n.containerPhrasing(e,{...i.current(),before:"\n",after:"\n"});return r(),t(),o+"\n"+(1===s?"=":"-").repeat(o.length-(Math.max(o.lastIndexOf("\r"),o.lastIndexOf("\n"))+1))}const o="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(o+" ");let c=n.containerPhrasing(e,{before:"# ",after:"\n",...i.current()});return/^[\t ]/.test(c)&&(c="&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c},html:uf,image:df,imageReference:hf,inlineCode:pf,link:mf,linkReference:gf,list:function(e,t,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):yf(n);const a=e.ordered?"."===o?")":".":function(e){const t=yf(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&o===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==o&&"-"!==o||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),xf(n)===o&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),c},listItem:function(e,t,n,r){const s=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||yf(n);t&&"list"===t.type&&t.ordered&&(i=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let o=i.length+1;("tab"===s||"mixed"===s&&(t&&"list"===t.type&&t.spread||e.spread))&&(o=4*Math.ceil(o/4));const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(e,a.current()),function(e,t,n){if(t)return(n?"":" ".repeat(o))+e;return(n?i:i+" ".repeat(o-i.length))+e});return l(),c},paragraph:function(e,t,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(e,r);return i(),s(),o},root:function(e,t,n,r){return(e.children.some(function(e){return vf(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:bf,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(xf(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function wf(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function kf(e){this.exit(e),this.data.inTable=void 0}function Sf(e){this.enter({type:"tableRow",children:[]},e)}function Mf(e){this.exit(e)}function Nf(e){this.enter({type:"tableCell",children:[]},e)}function _f(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,jf));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function jf(e,t){return"|"===t?t:e}function Ef(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Cf.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return a(function(e,t,n){const r=e.children;let s=-1;const i=[],o=t.enter("table");for(;++s<r.length;)i[s]=l(r[s],t,n);return o(),i}(e,n,r),e.align)},tableCell:o,tableRow:function(e,t,n,r){const s=a([l(e,n,r)]);return s.slice(0,s.indexOf("\n"))}}};function o(e,t,n,r){const s=n.enter("tableCell"),o=n.enter("phrasing"),a=n.containerPhrasing(e,{...r,before:i,after:i});return o(),s(),a}function a(e,t){return function(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||Xp,s=[],i=[],o=[],a=[];let l=0,c=-1;for(;++c<e.length;){const n=[],s=[];let u=-1;for(e[c].length>l&&(l=e[c].length);++u<e[c].length;){const i=Qp(e[c][u]);if(!1!==t.alignDelimiters){const e=r(i);s[u]=e,(void 0===a[u]||e>a[u])&&(a[u]=e)}n.push(i)}i[c]=n,o[c]=s}let u=-1;if("object"==typeof n&&"length"in n)for(;++u<l;)s[u]=ef(n[u]);else{const e=ef(n);for(;++u<l;)s[u]=e}u=-1;const d=[],h=[];for(;++u<l;){const e=s[u];let n="",r="";99===e?(n=":",r=":"):108===e?n=":":114===e&&(r=":");let i=!1===t.alignDelimiters?1:Math.max(1,a[u]-n.length-r.length);const o=n+"-".repeat(i)+r;!1!==t.alignDelimiters&&(i=n.length+i+r.length,i>a[u]&&(a[u]=i),h[u]=i),d[u]=o}i.splice(1,0,d),o.splice(1,0,h),c=-1;const p=[];for(;++c<i.length;){const e=i[c],n=o[c];u=-1;const r=[];for(;++u<l;){const i=e[u]||"";let o="",c="";if(!1!==t.alignDelimiters){const e=a[u]-(n[u]||0),t=s[u];114===t?o=" ".repeat(e):99===t?e%2?(o=" ".repeat(e/2+.5),c=" ".repeat(e/2-.5)):(o=" ".repeat(e/2),c=o):c=" ".repeat(e)}!1===t.delimiterStart||u||r.push("|"),!1===t.padding||!1===t.alignDelimiters&&""===i||!1===t.delimiterStart&&!u||r.push(" "),!1!==t.alignDelimiters&&r.push(o),r.push(i),!1!==t.alignDelimiters&&r.push(c),!1!==t.padding&&r.push(" "),!1===t.delimiterEnd&&u===l-1||r.push("|")}p.push(!1===t.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return p.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:s})}function l(e,t,n){const r=e.children;let s=-1;const i=[],a=t.enter("tableRow");for(;++s<r.length;)i[s]=o(r[s],0,t,n);return a(),i}}function Tf(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function Af(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let s,i=-1;for(;++i<r.length;){const e=r[i];if("paragraph"===e.type){s=e;break}}s===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function Lf(e,t,n,r){const s=e.children[0],i="boolean"==typeof e.checked&&s&&"paragraph"===s.type,o="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(o);let l=Cf.listItem(e,t,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+o})),l}const Of={tokenize:function(e,t,n){let r=0;return function t(i){if((87===i||119===i)&&r<3)return r++,e.consume(i),t;if(46===i&&3===r)return e.consume(i),s;return n(i)};function s(e){return null===e?n(e):t(e)}},partial:!0},If={tokenize:function(e,t,n){let r,s,i;return o;function o(t){return 46===t||95===t?e.check(Rf,l,a)(t):null===t||Xc(t)||nu(t)||45!==t&&tu(t)?l(t):(i=!0,e.consume(t),o)}function a(t){return 95===t?r=!0:(s=r,r=void 0),e.consume(t),o}function l(e){return s||r||!i?n(e):t(e)}},partial:!0},Df={tokenize:function(e,t){let n=0,r=0;return s;function s(o){return 40===o?(n++,e.consume(o),s):41===o&&r<n?i(o):33===o||34===o||38===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||60===o||63===o||93===o||95===o||126===o?e.check(Rf,t,i)(o):null===o||Xc(o)||nu(o)?t(o):(e.consume(o),s)}function i(t){return 41===t&&r++,e.consume(t),s}},partial:!0},Rf={tokenize:function(e,t,n){return r;function r(o){return 33===o||34===o||39===o||41===o||42===o||44===o||46===o||58===o||59===o||63===o||95===o||126===o?(e.consume(o),r):38===o?(e.consume(o),i):93===o?(e.consume(o),s):60===o||null===o||Xc(o)||nu(o)?t(o):n(o)}function s(e){return null===e||40===e||91===e||Xc(e)||nu(e)?t(e):r(e)}function i(e){return Zc(e)?o(e):n(e)}function o(t){return 59===t?(e.consume(t),r):Zc(t)?(e.consume(t),o):n(t)}},partial:!0},Pf={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Wc(e)?n(e):t(e)}},partial:!0},zf={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!Bf.call(r,r.previous)||qf(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Of,e.attempt(If,e.attempt(Df,s),n),n)(t)};function s(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Bf},Ff={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let s="",i=!1;return function(t){if((72===t||104===t)&&Uf.call(r,r.previous)&&!qf(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),o;return n(t)};function o(t){if(Zc(t)&&s.length<5)return s+=String.fromCodePoint(t),e.consume(t),o;if(58===t){const n=s.toLowerCase();if("http"===n||"https"===n)return e.consume(t),a}return n(t)}function a(t){return 47===t?(e.consume(t),i?l:(i=!0,a)):n(t)}function l(t){return null===t||Gc(t)||Xc(t)||nu(t)||tu(t)?n(t):e.attempt(If,e.attempt(Df,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Uf},Hf={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let s,i;return function(t){if(!Wf(t)||!Zf.call(r,r.previous)||qf(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(t)};function o(t){return Wf(t)?(e.consume(t),o):64===t?(e.consume(t),a):n(t)}function a(t){return 46===t?e.check(Pf,c,l)(t):45===t||95===t||Wc(t)?(i=!0,e.consume(t),a):c(t)}function l(t){return e.consume(t),s=!0,a}function c(o){return i&&s&&Zc(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(o)):n(o)}},previous:Zf},Vf={};let $f=48;for(;$f<123;)Vf[$f]=Hf,$f++,58===$f?$f=65:91===$f&&($f=97);function Bf(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Xc(e)}function Uf(e){return!Zc(e)}function Zf(e){return!(47===e||Wf(e))}function Wf(e){return 43===e||45===e||46===e||95===e||Wc(e)}function qf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}Vf[43]=Hf,Vf[45]=Hf,Vf[46]=Hf,Vf[95]=Hf,Vf[72]=[Hf,Ff],Vf[104]=[Hf,Ff],Vf[87]=[Hf,zf],Vf[119]=[Hf,zf];const Gf={tokenize:function(e,t,n){const r=this;return iu(e,function(e){const s=r.events[r.events.length-1];return s&&"gfmFootnoteDefinitionIndent"===s[1].type&&4===s[2].sliceSerialize(s[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function Jf(e,t,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const e=r.events[s][1];if("labelImage"===e.type){o=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(s){if(!o||!o._balanced)return n(s);const a=Uc(r.sliceSerialize({start:o.end,end:r.now()}));if(94!==a.codePointAt(0)||!i.includes(a.slice(1)))return n(s);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s)}}function Kf(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function Yf(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),a};function a(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(a){if(o>999||93===a&&!i||null===a||91===a||Xc(a))return n(a);if(93===a){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return s.includes(Uc(r.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(a)}return Xc(a)||(i=!0),o++,e.consume(a),92===a?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),o++,l):l(t)}}function Qf(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o,a=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(a>999||93===t&&!o||null===t||91===t||Xc(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return i=Uc(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Xc(t)||(o=!0),a++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s.includes(i)||s.push(i),iu(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function Xf(e,t,n){return e.check(fu,t,e.attempt(Gf,t,n))}function em(e){e.exit("gfmFootnoteDefinition")}function tm(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const s=this.previous,i=this.events;let o=0;return function(t){if(126===s&&"characterEscape"!==i[i.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),a(t)};function a(i){const l=cu(s);if(126===i)return o>1?r(i):(e.consume(i),o++,a);if(o<2&&!t)return r(i);const c=e.exit("strikethroughSequenceTemporary"),u=cu(i);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(i)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const s={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},i={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},o=[["enter",s,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",i,t]],a=t.parser.constructs.insideSpan.null;a&&Pc(o,o.length,0,uu(a,e.slice(r+1,n),t)),Pc(o,o.length,0,[["exit",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",s,t]]),Pc(e,r-1,n-r+3,o),n=r+o.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class nm{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let s=0;if(0===n&&0===r.length)return;for(;s<e.map.length;){if(e.map[s][0]===t)return e.map[s][1]+=n,void e.map[s][2].push(...r);s+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push([...e]),e.length=0;let r=n.pop();for(;r;)e.push(...r),r=n.pop();this.map.length=0}}function rm(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if("enter"===s[0])"tableContent"===s[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===s[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===s[1].type)break}else"enter"===s[0]&&"tableDelimiterRow"===s[1].type&&(n=!0);t+=1}return r}function sm(e,t,n){const r=this;let s,i=0,o=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const s=t>-1?r.events[t][1].type:null,i="tableHead"===s||"tableRow"===s?b:a;if(i===b&&r.parser.lazy[r.now().line])return n(e);return i(e)};function a(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return s=!0,o+=1,l(e)}(t)}function l(t){return null===t?n(t):Qc(t)?o>1?(o=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):eu(t)?iu(e,l,"whitespace")(t):(o+=1,s&&(s=!1,i+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),s=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||Xc(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),s=!1,eu(t)?iu(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(s=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):v(t)}function p(t){return eu(t)?iu(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(o+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(o+=1,m(t)):null===t||Qc(t)?x(t):v(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):v(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return eu(t)?iu(e,x,"whitespace")(t):x(t)}function x(n){return 124===n?h(n):(null===n||Qc(n))&&s&&i===o?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):v(n)}function v(e){return n(e)}function b(t){return e.enter("tableRow"),C(t)}function C(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),C):null===n||Qc(n)?(e.exit("tableRow"),t(n)):eu(n)?iu(e,C,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||Xc(t)?(e.exit("data"),C(t)):(e.consume(t),92===t?k:w)}function k(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function im(e,t){let n,r,s,i=-1,o=!0,a=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const h=new nm;for(;++i<e.length;){const p=e[i],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==d&&(am(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(i,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(o=!0,s=void 0,l=[0,0,0,0],c=[0,i+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(i,0,[["enter",r,t]])),a="tableDelimiterRow"===f.type?2:r?3:1):!a||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(o?o=!1:(0!==l[1]&&(c[0]=c[1],s=om(h,t,l,a,void 0,s)),l=c,c=[l[1],i,0,0])):(o=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],s=om(h,t,l,a,void 0,s),l=[0,0,0,0]),c[2]=i)):"tableHead"===f.type?(u=!0,d=i):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=i,0!==l[1]?(c[0]=c[1],s=om(h,t,l,a,i,s)):0!==c[1]&&(s=om(h,t,c,a,i,s)),a=0):!a||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=i)}for(0!==d&&am(h,t,d,n,r),h.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=rm(t.events,i))}return e}function om(e,t,n,r,s,i){const o=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(i.end=Object.assign({},lm(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const a=lm(t.events,n[1]);if(i={type:o,start:Object.assign({},a),end:Object.assign({},a)},e.add(n[1],0,[["enter",i,t]]),0!==n[2]){const s=lm(t.events,n[2]),i=lm(t.events,n[3]),o={type:"tableContent",start:Object.assign({},s),end:Object.assign({},i)};if(e.add(n[2],0,[["enter",o,t]]),2!==r){const r=t.events[n[2]],s=t.events[n[3]];if(r[1].end=Object.assign({},s[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",o,t]])}return void 0!==s&&(i.end=Object.assign({},lm(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function am(e,t,n,r,s){const i=[],o=lm(t.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,t])),r.end=Object.assign({},o),i.push(["exit",r,t]),e.add(n+1,0,i)}function lm(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const cm={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),s};function s(t){return Xc(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):n(t)}function i(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),o):n(t)}function o(r){return Qc(r)?t(r):eu(r)?e.check({tokenize:um},t,n)(r):n(r)}}};function um(e,t,n){return iu(e,function(e){return null===e?n(e):t(e)},"whitespace")}const dm={};function hm(e){const t=e||dm,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),s=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),i=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return Hc([{text:Vf},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Qf,continuation:{tokenize:Xf},exit:em}},text:{91:{name:"gfmFootnoteCall",tokenize:Yf},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Jf,resolveTo:Kf}}},tm(e),{flow:{null:{name:"table",tokenize:sm,resolveAll:im}}},{text:{91:cm}}])}(t)),s.push([{transforms:[Lp],enter:{literalAutolink:Np,literalAutolinkEmail:_p,literalAutolinkHttp:_p,literalAutolinkWww:_p},exit:{literalAutolink:Ap,literalAutolinkEmail:Tp,literalAutolinkHttp:jp,literalAutolinkWww:Ep}},{enter:{gfmFootnoteCallString:Rp,gfmFootnoteCall:Pp,gfmFootnoteDefinitionLabelString:zp,gfmFootnoteDefinition:Fp},exit:{gfmFootnoteCallString:Hp,gfmFootnoteCall:Vp,gfmFootnoteDefinitionLabelString:$p,gfmFootnoteDefinition:Bp}},{canContainEols:["delete"],enter:{strikethrough:Jp},exit:{strikethrough:Kp}},{enter:{table:wf,tableData:Nf,tableHeader:Nf,tableRow:Sf},exit:{codeText:_f,table:kf,tableData:Mf,tableHeader:Mf,tableRow:Mf}},{exit:{taskListCheckValueChecked:Tf,taskListCheckValueUnchecked:Tf,paragraph:Af}}]),i.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Sp,notInConstruct:Mp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Sp,notInConstruct:Mp},{character:":",before:"[ps]",after:"\\/",inConstruct:Sp,notInConstruct:Mp}]},Zp(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Gp}],handlers:{delete:Yp}},Ef(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Lf}}]}}(t))}const pm=({children:e,colorOverrides:n,className:r,speed:s=2.25,...i})=>he.jsx("span",{...i,className:t("text-center text-always-white/0 bg-gradient-to-r bg-[length:400%_100%] from-30% via-always-white/70 to-80% bg-clip-text bg-no-repeat","animate-[shimmertext_2.25s_infinite]",n||"bg-text-400 from-text-400 to-text-400",r),style:{...i.style,animationName:"shimmertext",animationDuration:`${s}s`,animationIterationCount:"infinite"},children:e});const fm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M204,64V168a12,12,0,0,1-24,0V93L72.49,200.49a12,12,0,0,1-17-17L163,76H88a12,12,0,0,1,0-24H192A12,12,0,0,1,204,64Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M192,64V168L88,64Z",opacity:"0.2"}),de.createElement("path",{d:"M192,56H88a8,8,0,0,0-5.66,13.66L128.69,116,58.34,186.34a8,8,0,0,0,11.32,11.32L140,127.31l46.34,46.35A8,8,0,0,0,200,168V64A8,8,0,0,0,192,56Zm-8,92.69-38.34-38.34h0L107.31,72H184Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,64V168a8,8,0,0,1-13.66,5.66L140,127.31,69.66,197.66a8,8,0,0,1-11.32-11.32L128.69,116,82.34,69.66A8,8,0,0,1,88,56H192A8,8,0,0,1,200,64Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M198,64V168a6,6,0,0,1-12,0V78.48L68.24,196.24a6,6,0,0,1-8.48-8.48L177.52,70H88a6,6,0,0,1,0-12H192A6,6,0,0,1,198,64Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,64V168a8,8,0,0,1-16,0V83.31L69.66,197.66a8,8,0,0,1-11.32-11.32L172.69,72H88a8,8,0,0,1,0-16H192A8,8,0,0,1,200,64Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M196,64V168a4,4,0,0,1-8,0V73.66L66.83,194.83a4,4,0,0,1-5.66-5.66L182.34,68H88a4,4,0,0,1,0-8H192A4,4,0,0,1,196,64Z"}))]]),mm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M156,92a12,12,0,0,1,12-12h64a12,12,0,0,1,0,24H168A12,12,0,0,1,156,92Zm76,28H168a12,12,0,0,0,0,24h64a12,12,0,0,0,0-24Zm0,40H80a12,12,0,0,0,0,24H232a12,12,0,0,0,0-24Zm0,40H80a12,12,0,0,0,0,24H232a12,12,0,0,0,0-24ZM96,144a12,12,0,0,0,0-24H92V68h24v4a12,12,0,0,0,24,0V56a12,12,0,0,0-12-12H32A12,12,0,0,0,20,56V72a12,12,0,0,0,24,0V68H68v52H64a12,12,0,0,0,0,24Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M232,104v96H80V168h48V104Z",opacity:"0.2"}),de.createElement("path",{d:"M128,96H232a8,8,0,0,1,0,16H128a8,8,0,0,1,0-16Zm104,32H128a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm0,32H80a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm0,32H80a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16ZM96,144a8,8,0,0,0,0-16H88V64h32v8a8,8,0,0,0,16,0V56a8,8,0,0,0-8-8H32a8,8,0,0,0-8,8V72a8,8,0,0,0,16,0V64H72v64H64a8,8,0,0,0,0,16Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM64,92a8,8,0,0,1-16,0V80a8,8,0,0,1,8-8h72a8,8,0,0,1,8,8V92a8,8,0,0,1-16,0V88H100v48h4a8,8,0,0,1,0,16H80a8,8,0,0,1,0-16h4V88H64Zm136,92H80a8,8,0,0,1,0-16H200a8,8,0,0,1,0,16Zm0-32H136a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Zm0-32H152a8,8,0,0,1,0-16h48a8,8,0,0,1,0,16Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,98H232a6,6,0,0,1,0,12H128a6,6,0,0,1,0-12Zm104,32H128a6,6,0,0,0,0,12H232a6,6,0,0,0,0-12Zm0,32H80a6,6,0,0,0,0,12H232a6,6,0,0,0,0-12Zm0,32H80a6,6,0,0,0,0,12H232a6,6,0,0,0,0-12ZM96,142a6,6,0,0,0,0-12H86V62h36V72a6,6,0,0,0,12,0V56a6,6,0,0,0-6-6H32a6,6,0,0,0-6,6V72a6,6,0,0,0,12,0V62H74v68H64a6,6,0,0,0,0,12Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,96H232a8,8,0,0,1,0,16H128a8,8,0,0,1,0-16Zm104,32H128a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm0,32H80a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16Zm0,32H80a8,8,0,0,0,0,16H232a8,8,0,0,0,0-16ZM96,144a8,8,0,0,0,0-16H88V64h32v8a8,8,0,0,0,16,0V56a8,8,0,0,0-8-8H32a8,8,0,0,0-8,8V72a8,8,0,0,0,16,0V64H72v64H64a8,8,0,0,0,0,16Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,100H232a4,4,0,0,1,0,8H128a4,4,0,0,1,0-8Zm104,32H128a4,4,0,0,0,0,8H232a4,4,0,0,0,0-8Zm0,32H80a4,4,0,0,0,0,8H232a4,4,0,0,0,0-8Zm0,32H80a4,4,0,0,0,0,8H232a4,4,0,0,0,0-8ZM96,140a4,4,0,0,0,0-8H84V60h40V72a4,4,0,0,0,8,0V56a4,4,0,0,0-4-4H32a4,4,0,0,0-4,4V72a4,4,0,0,0,8,0V60H76v72H64a4,4,0,0,0,0,8Z"}))]]),gm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M219.23,159.2a196.66,196.66,0,0,0-18-31.2,196.66,196.66,0,0,0,18-31.2c11.84-26.31,11.69-47.48-.43-59.6s-33.29-12.27-59.6-.43a196.66,196.66,0,0,0-31.2,18,196.66,196.66,0,0,0-31.2-18c-26.31-11.84-47.48-11.69-59.6.43s-12.27,33.29-.43,59.6a196.66,196.66,0,0,0,18,31.2,196.66,196.66,0,0,0-18,31.2c-11.84,26.31-11.69,47.48.43,59.6h0C43.33,224.93,51.78,228,62,228c10,0,21.77-2.92,34.76-8.77a196.66,196.66,0,0,0,31.2-18,196.66,196.66,0,0,0,31.2,18c13,5.85,24.74,8.77,34.76,8.77,10.26,0,18.71-3.07,24.84-9.2h0C230.92,206.68,231.07,185.51,219.23,159.2Zm-17.41-105c5.25,5.26,1.79,26-16,53.78-5.61-6.66-11.65-13.25-18.07-19.67S154.7,75.83,148,70.22C175.82,52.39,196.56,48.93,201.82,54.18ZM171.24,128a288.6,288.6,0,0,1-20.51,22.73A288.6,288.6,0,0,1,128,171.24a288.6,288.6,0,0,1-22.73-20.51A288.6,288.6,0,0,1,84.76,128,298.55,298.55,0,0,1,128,84.76a286.83,286.83,0,0,1,22.73,20.51A286.83,286.83,0,0,1,171.24,128ZM54.18,54.18c1.46-1.45,4.1-2.24,7.75-2.24,9.53,0,25.94,5.39,46,18.28-6.66,5.61-13.25,11.65-19.67,18.07S75.83,101.3,70.22,108C52.39,80.18,48.93,59.44,54.18,54.18Zm0,147.64c-5.25-5.26-1.79-26,16-53.78,5.61,6.66,11.65,13.25,18.07,19.67s13,12.46,19.67,18.07C80.18,203.61,59.44,207.07,54.18,201.82Zm147.64,0c-5.26,5.25-26,1.79-53.78-16,6.66-5.61,13.25-11.65,19.67-18.07s12.46-13,18.07-19.67C203.61,175.82,207.07,196.56,201.82,201.82ZM144,128a16,16,0,1,1-16-16A16,16,0,0,1,144,128Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M210.26,210.26c-17.23,17.23-68-5.63-113.46-51.06S28.51,63,45.74,45.74s68,5.63,113.46,51.06S227.49,193,210.26,210.26Z",opacity:"0.2"}),de.createElement("path",{d:"M196.12,128c24.65-34.61,37.22-70.38,19.74-87.86S162.61,35.23,128,59.88C93.39,35.23,57.62,22.66,40.14,40.14S35.23,93.39,59.88,128c-24.65,34.61-37.22,70.38-19.74,87.86h0c5.63,5.63,13.15,8.14,21.91,8.14,18.48,0,42.48-11.17,66-27.88C151.47,212.83,175.47,224,194,224c8.76,0,16.29-2.52,21.91-8.14h0C233.34,198.38,220.77,162.61,196.12,128Zm8.43-76.55c7.64,7.64,2.48,32.4-18.52,63.28a300.33,300.33,0,0,0-21.19-23.57A300.33,300.33,0,0,0,141.27,70C172.15,49,196.91,43.8,204.55,51.45ZM176.29,128a289.14,289.14,0,0,1-22.76,25.53A289.14,289.14,0,0,1,128,176.29a289.14,289.14,0,0,1-25.53-22.76A289.14,289.14,0,0,1,79.71,128,298.62,298.62,0,0,1,128,79.71a289.14,289.14,0,0,1,25.53,22.76A289.14,289.14,0,0,1,176.29,128ZM51.45,51.45c2.2-2.21,5.83-3.35,10.62-3.35C73.89,48.1,92.76,55,114.72,70A304,304,0,0,0,91.16,91.16,300.33,300.33,0,0,0,70,114.73C49,83.85,43.81,59.09,51.45,51.45Zm0,153.1C43.81,196.91,49,172.15,70,141.27a300.33,300.33,0,0,0,21.19,23.57A304.18,304.18,0,0,0,114.73,186C83.85,207,59.09,212.2,51.45,204.55Zm153.1,0c-7.64,7.65-32.4,2.48-63.28-18.52a304.18,304.18,0,0,0,23.57-21.19A300.33,300.33,0,0,0,186,141.27C207,172.15,212.19,196.91,204.55,204.55ZM140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M196.12,128c24.65-34.61,37.22-70.38,19.74-87.86S162.61,35.23,128,59.88C93.39,35.23,57.62,22.66,40.14,40.14S35.23,93.39,59.88,128c-24.65,34.61-37.22,70.38-19.74,87.86h0c5.63,5.63,13.15,8.14,21.91,8.14,18.47,0,42.48-11.17,66-27.88C151.47,212.83,175.47,224,194,224c8.76,0,16.29-2.52,21.91-8.14h0C233.34,198.38,220.77,162.61,196.12,128Zm8.43-76.55c7.64,7.64,2.48,32.4-18.52,63.28a300.33,300.33,0,0,0-21.19-23.57A302.47,302.47,0,0,0,141.27,70C172.15,49,196.91,43.81,204.55,51.45Zm-153.1,0c2.2-2.21,5.83-3.35,10.62-3.35C73.89,48.1,92.76,55,114.72,70A304,304,0,0,0,91.16,91.16,300.33,300.33,0,0,0,70,114.73C49,83.85,43.81,59.09,51.45,51.45Zm0,153.1C43.81,196.91,49,172.15,70,141.27a300.33,300.33,0,0,0,21.19,23.57A304.18,304.18,0,0,0,114.73,186C83.85,207,59.09,212.19,51.45,204.55ZM128,140a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm76.55,64.56c-7.64,7.65-32.4,2.48-63.28-18.52a304.18,304.18,0,0,0,23.57-21.19A300.33,300.33,0,0,0,186,141.27C207,172.15,212.19,196.91,204.55,204.55Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M193.83,128a195.73,195.73,0,0,0,19.9-33.65c10.74-23.88,11-42.66.8-52.88s-29-9.94-52.88.8A195.73,195.73,0,0,0,128,62.17a195.73,195.73,0,0,0-33.65-19.9c-23.88-10.74-42.66-11-52.88-.8s-9.94,29,.8,52.88A195.73,195.73,0,0,0,62.17,128a195.73,195.73,0,0,0-19.9,33.65c-10.74,23.88-11,42.66-.8,52.88h0c5,5,12,7.47,20.63,7.47,9.1,0,20-2.76,32.25-8.27A195.73,195.73,0,0,0,128,193.83a195.73,195.73,0,0,0,33.65,19.9C173.9,219.24,184.8,222,193.9,222c8.64,0,15.65-2.49,20.63-7.47h0c10.23-10.22,9.94-29-.8-52.88A195.73,195.73,0,0,0,193.83,128ZM206,50c9.28,9.28,2.36,36.29-19.8,68a306.2,306.2,0,0,0-22.78-25.45A306.2,306.2,0,0,0,138,69.76C169.75,47.61,196.77,40.68,206,50Zm-27.19,78A289.17,289.17,0,0,1,155,155a289.17,289.17,0,0,1-27,23.88A289.17,289.17,0,0,1,101,155a290.62,290.62,0,0,1-23.88-27A297.06,297.06,0,0,1,128,77.14,290.74,290.74,0,0,1,155,101,289.17,289.17,0,0,1,178.85,128ZM50,50c2.68-2.69,6.84-4,12.17-4,13.11,0,33.3,8,55.87,23.81A302.94,302.94,0,0,0,92.54,92.54,306.2,306.2,0,0,0,69.76,118C47.6,86.25,40.68,59.24,50,50ZM50,206h0c-9.28-9.28-2.35-36.29,19.8-68a306.2,306.2,0,0,0,22.78,25.45A306.2,306.2,0,0,0,118,186.24C86.25,208.4,59.24,215.32,50,206ZM206,206c-9.28,9.28-36.29,2.35-68-19.81a304.26,304.26,0,0,0,25.45-22.77A306.2,306.2,0,0,0,186.24,138C208.4,169.75,215.32,196.76,206,206Zm-68-78a10,10,0,1,1-10-10A10,10,0,0,1,138,128Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M196.12,128c24.65-34.61,37.22-70.38,19.74-87.86S162.61,35.23,128,59.88C93.39,35.23,57.62,22.66,40.14,40.14S35.23,93.39,59.88,128c-24.65,34.61-37.22,70.38-19.74,87.86h0c5.63,5.63,13.15,8.14,21.91,8.14,18.48,0,42.48-11.17,66-27.88C151.47,212.83,175.47,224,194,224c8.76,0,16.29-2.52,21.91-8.14h0C233.34,198.38,220.77,162.61,196.12,128Zm8.43-76.55c7.64,7.64,2.48,32.4-18.52,63.28a300.33,300.33,0,0,0-21.19-23.57A300.33,300.33,0,0,0,141.27,70C172.15,49,196.91,43.8,204.55,51.45ZM176.29,128a289.14,289.14,0,0,1-22.76,25.53A289.14,289.14,0,0,1,128,176.29a289.14,289.14,0,0,1-25.53-22.76A289.14,289.14,0,0,1,79.71,128,298.62,298.62,0,0,1,128,79.71a289.14,289.14,0,0,1,25.53,22.76A289.14,289.14,0,0,1,176.29,128ZM51.45,51.45c2.2-2.21,5.83-3.35,10.62-3.35C73.89,48.1,92.76,55,114.72,70A304,304,0,0,0,91.16,91.16,300.33,300.33,0,0,0,70,114.73C49,83.85,43.81,59.09,51.45,51.45Zm0,153.1C43.81,196.91,49,172.15,70,141.27a300.33,300.33,0,0,0,21.19,23.57A304.18,304.18,0,0,0,114.73,186C83.85,207,59.09,212.2,51.45,204.55Zm153.1,0c-7.64,7.65-32.4,2.48-63.28-18.52a304.18,304.18,0,0,0,23.57-21.19A300.33,300.33,0,0,0,186,141.27C207,172.15,212.19,196.91,204.55,204.55ZM140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M211.89,162.47A195.58,195.58,0,0,0,191.36,128a195.58,195.58,0,0,0,20.53-34.47c10.38-23.06,10.81-41,1.21-50.63s-27.57-9.17-50.63,1.21A195.58,195.58,0,0,0,128,64.64,195.58,195.58,0,0,0,93.53,44.11C70.47,33.73,52.49,33.3,42.9,42.9s-9.17,27.57,1.21,50.63A195.58,195.58,0,0,0,64.64,128a195.58,195.58,0,0,0-20.53,34.47c-10.38,23.06-10.81,41-1.21,50.63h0C47.5,217.7,54,220,62.12,220c8.78,0,19.41-2.71,31.41-8.11A195.58,195.58,0,0,0,128,191.36a195.58,195.58,0,0,0,34.47,20.53c12,5.4,22.63,8.11,31.41,8.11,8.09,0,14.62-2.3,19.22-6.9h0C222.7,203.51,222.27,185.53,211.89,162.47ZM207.45,48.55c10.27,10.28,3.14,39.05-21.1,72.84A301,301,0,0,0,162,94a301,301,0,0,0-27.43-24.31C168.4,45.4,197.17,38.27,207.45,48.55Zm-26,79.45a293.16,293.16,0,0,1-25,28.38,291.82,291.82,0,0,1-28.38,25,291.82,291.82,0,0,1-28.38-25,293.16,293.16,0,0,1-25-28.38A302.36,302.36,0,0,1,128,74.58a295.83,295.83,0,0,1,28.37,25A293.16,293.16,0,0,1,181.41,128ZM48.55,48.55c3.05-3,7.71-4.55,13.64-4.55,14.11,0,35.41,8.59,59.19,25.65a304.89,304.89,0,0,0-51.73,51.74C45.41,87.6,38.28,58.83,48.55,48.55Zm0,158.9c-10.27-10.28-3.14-39,21.1-72.84A301,301,0,0,0,94,162a301,301,0,0,0,27.43,24.31C87.6,210.59,58.83,217.72,48.55,207.45Zm158.9,0c-10.28,10.27-39,3.14-72.84-21.1A301,301,0,0,0,162,162a301,301,0,0,0,24.31-27.43C210.59,168.4,217.72,197.17,207.45,207.45ZM136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Z"}))]]),ym=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M71.68,97.22,34.74,128l36.94,30.78a12,12,0,1,1-15.36,18.44l-48-40a12,12,0,0,1,0-18.44l48-40A12,12,0,0,1,71.68,97.22Zm176,21.56-48-40a12,12,0,1,0-15.36,18.44L221.26,128l-36.94,30.78a12,12,0,1,0,15.36,18.44l48-40a12,12,0,0,0,0-18.44ZM164.1,28.72a12,12,0,0,0-15.38,7.18l-64,176a12,12,0,0,0,7.18,15.37A11.79,11.79,0,0,0,96,228a12,12,0,0,0,11.28-7.9l64-176A12,12,0,0,0,164.1,28.72Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M240,128l-48,40H64L16,128,64,88H192Z",opacity:"0.2"}),de.createElement("path",{d:"M69.12,94.15,28.5,128l40.62,33.85a8,8,0,1,1-10.24,12.29l-48-40a8,8,0,0,1,0-12.29l48-40a8,8,0,0,1,10.24,12.3Zm176,27.7-48-40a8,8,0,1,0-10.24,12.3L227.5,128l-40.62,33.85a8,8,0,1,0,10.24,12.29l48-40a8,8,0,0,0,0-12.29ZM162.73,32.48a8,8,0,0,0-10.25,4.79l-64,176a8,8,0,0,0,4.79,10.26A8.14,8.14,0,0,0,96,224a8,8,0,0,0,7.52-5.27l64-176A8,8,0,0,0,162.73,32.48Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM92.8,145.6a8,8,0,1,1-9.6,12.8l-32-24a8,8,0,0,1,0-12.8l32-24a8,8,0,0,1,9.6,12.8L69.33,128Zm58.89-71.4-32,112a8,8,0,1,1-15.38-4.4l32-112a8,8,0,0,1,15.38,4.4Zm53.11,60.2-32,24a8,8,0,0,1-9.6-12.8L186.67,128,163.2,110.4a8,8,0,1,1,9.6-12.8l32,24a8,8,0,0,1,0,12.8Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M67.84,92.61,25.37,128l42.47,35.39a6,6,0,1,1-7.68,9.22l-48-40a6,6,0,0,1,0-9.22l48-40a6,6,0,0,1,7.68,9.22Zm176,30.78-48-40a6,6,0,1,0-7.68,9.22L230.63,128l-42.47,35.39a6,6,0,1,0,7.68,9.22l48-40a6,6,0,0,0,0-9.22Zm-81.79-89A6,6,0,0,0,154.36,38l-64,176A6,6,0,0,0,94,221.64a6.15,6.15,0,0,0,2,.36,6,6,0,0,0,5.64-3.95l64-176A6,6,0,0,0,162.05,34.36Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M69.12,94.15,28.5,128l40.62,33.85a8,8,0,1,1-10.24,12.29l-48-40a8,8,0,0,1,0-12.29l48-40a8,8,0,0,1,10.24,12.3Zm176,27.7-48-40a8,8,0,1,0-10.24,12.3L227.5,128l-40.62,33.85a8,8,0,1,0,10.24,12.29l48-40a8,8,0,0,0,0-12.29ZM162.73,32.48a8,8,0,0,0-10.25,4.79l-64,176a8,8,0,0,0,4.79,10.26A8.14,8.14,0,0,0,96,224a8,8,0,0,0,7.52-5.27l64-176A8,8,0,0,0,162.73,32.48Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M66.56,91.07,22.25,128l44.31,36.93A4,4,0,0,1,64,172a3.94,3.94,0,0,1-2.56-.93l-48-40a4,4,0,0,1,0-6.14l48-40a4,4,0,0,1,5.12,6.14Zm176,33.86-48-40a4,4,0,1,0-5.12,6.14L233.75,128l-44.31,36.93a4,4,0,1,0,5.12,6.14l48-40a4,4,0,0,0,0-6.14ZM161.37,36.24a4,4,0,0,0-5.13,2.39l-64,176a4,4,0,0,0,2.39,5.13A4.12,4.12,0,0,0,96,220a4,4,0,0,0,3.76-2.63l64-176A4,4,0,0,0,161.37,36.24Z"}))]]),xm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,96a16,16,0,1,1,16,16A16,16,0,0,1,144,96Zm92-40V200a20,20,0,0,1-20,20H40a20,20,0,0,1-20-20V56A20,20,0,0,1,40,36H216A20,20,0,0,1,236,56ZM44,60v79.72l33.86-33.86a20,20,0,0,1,28.28,0L147.31,147l17.18-17.17a20,20,0,0,1,28.28,0L212,149.09V60Zm0,136H162.34L92,125.66l-48,48Zm168,0V183l-33.37-33.37L164.28,164l32,32Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M224,56V178.06l-39.72-39.72a8,8,0,0,0-11.31,0L147.31,164,97.66,114.34a8,8,0,0,0-11.32,0L32,168.69V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z",opacity:"0.2"}),de.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM156,88a12,12,0,1,1-12,12A12,12,0,0,1,156,88Zm60,112H40V160.69l46.34-46.35a8,8,0,0,1,11.32,0h0L165,181.66a8,8,0,0,0,11.32-11.32l-17.66-17.65L173,138.34a8,8,0,0,1,11.31,0L216,170.07V200Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,42H40A14,14,0,0,0,26,56V200a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM40,54H216a2,2,0,0,1,2,2V163.57L188.53,134.1a14,14,0,0,0-19.8,0l-21.42,21.42L101.9,110.1a14,14,0,0,0-19.8,0L38,154.2V56A2,2,0,0,1,40,54ZM38,200V171.17l52.58-52.58a2,2,0,0,1,2.84,0L176.83,202H40A2,2,0,0,1,38,200Zm178,2H193.8l-38-38,21.41-21.42a2,2,0,0,1,2.83,0l38,38V200A2,2,0,0,1,216,202ZM146,100a10,10,0,1,1,10,10A10,10,0,0,1,146,100Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,16V158.75l-26.07-26.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L40,149.37V56ZM40,172l52-52,80,80H40Zm176,28H194.63l-36-36,20-20L216,181.38V200ZM144,100a12,12,0,1,1,12,12A12,12,0,0,1,144,100Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,44H40A12,12,0,0,0,28,56V200a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44ZM40,52H216a4,4,0,0,1,4,4V168.4l-32.89-32.89a12,12,0,0,0-17,0l-22.83,22.83-46.82-46.83a12,12,0,0,0-17,0L36,159V56A4,4,0,0,1,40,52ZM36,200V170.34l53.17-53.17a4,4,0,0,1,5.66,0L181.66,204H40A4,4,0,0,1,36,200Zm180,4H193l-40-40,22.83-22.83a4,4,0,0,1,5.66,0L220,179.71V200A4,4,0,0,1,216,204ZM148,100a8,8,0,1,1,8,8A8,8,0,0,1,148,100Z"}))]]),vm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M56.88,39.93A12,12,0,1,0,39.12,56.07L76,96.64V128a52,52,0,0,0,72.11,48l11.26,12.39A67.34,67.34,0,0,1,128,196a68.07,68.07,0,0,1-68-68,12,12,0,0,0-24,0,92.14,92.14,0,0,0,80,91.22V240a12,12,0,0,0,24,0V219.23a90.39,90.39,0,0,0,35.92-12.68l23.2,25.52a12,12,0,0,0,17.76-16.14ZM128,156a28,28,0,0,1-28-28v-5l29.9,32.89C129.27,156,128.64,156,128,156Zm63-2.42A67.63,67.63,0,0,0,196,128a12,12,0,0,1,24,0,91.48,91.48,0,0,1-6.74,34.61,12,12,0,0,1-22.23-9ZM85.7,33.75A52,52,0,0,1,180,64v56.54a12,12,0,0,1-24,0V64a28,28,0,0,0-50.79-16.28,12,12,0,0,1-19.51-14Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M168,64v64a40,40,0,0,1-40,40h0a40,40,0,0,1-40-40V64a40,40,0,0,1,40-40h0A40,40,0,0,1,168,64Z",opacity:"0.2"}),de.createElement("path",{d:"M213.92,218.62l-160-176A8,8,0,0,0,42.08,53.38L80,95.09V128a48,48,0,0,0,69.11,43.12l11.1,12.2A63.41,63.41,0,0,1,128,192a64.07,64.07,0,0,1-64-64,8,8,0,0,0-16,0,80.11,80.11,0,0,0,72,79.6V240a8,8,0,0,0,16,0V207.59a78.83,78.83,0,0,0,35.16-12.22l30.92,34a8,8,0,1,0,11.84-10.76ZM128,160a32,32,0,0,1-32-32V112.69l41.66,45.82A32,32,0,0,1,128,160Zm57.52-3.91A63.32,63.32,0,0,0,192,128a8,8,0,0,1,16,0,79.16,79.16,0,0,1-8.11,35.12,8,8,0,0,1-7.19,4.49,7.88,7.88,0,0,1-3.51-.82A8,8,0,0,1,185.52,156.09ZM84,44.87A48,48,0,0,1,176,64v64a49.19,49.19,0,0,1-.26,5,8,8,0,0,1-8,7.17,8.13,8.13,0,0,1-.84,0,8,8,0,0,1-7.12-8.79c.11-1.1.17-2.24.17-3.36V64A32,32,0,0,0,98.64,51.25,8,8,0,1,1,84,44.87Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M213.38,229.92a8,8,0,0,1-11.3-.54l-30.92-34A78.83,78.83,0,0,1,136,207.59V240a8,8,0,0,1-16,0V207.6A80.11,80.11,0,0,1,48,128a8,8,0,0,1,16,0,64.07,64.07,0,0,0,64,64,63.41,63.41,0,0,0,32.21-8.68l-11.1-12.2A48,48,0,0,1,80,128V95.09L42.08,53.38A8,8,0,0,1,53.92,42.62l160,176A8,8,0,0,1,213.38,229.92Zm-24.19-63.13a7.88,7.88,0,0,0,3.51.82,8,8,0,0,0,7.19-4.49A79.16,79.16,0,0,0,208,128a8,8,0,0,0-16,0,63.32,63.32,0,0,1-6.48,28.09A8,8,0,0,0,189.19,166.79Zm-27.33-29.22A8,8,0,0,0,175.74,133a49.49,49.49,0,0,0,.26-5V64A48,48,0,0,0,84,44.87a8,8,0,0,0,1.41,8.57Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M212.44,220,52.44,44A6,6,0,0,0,43.56,52L82,94.32V128a46,46,0,0,0,67.56,40.64l13.75,15.12A65.26,65.26,0,0,1,128,194a66.08,66.08,0,0,1-66-66,6,6,0,0,0-12,0,78.09,78.09,0,0,0,72,77.75V240a6,6,0,0,0,12,0V205.77a76.93,76.93,0,0,0,37.48-13L203.56,228a6,6,0,0,0,8.88-8.08ZM128,162a34,34,0,0,1-34-34V107.52l47.12,51.84A33.82,33.82,0,0,1,128,162Zm59.32-5A65.38,65.38,0,0,0,194,128a6,6,0,0,1,12,0,77.33,77.33,0,0,1-7.9,34.25A6,6,0,1,1,187.32,157ZM85.8,45.67A46,46,0,0,1,174,64v64a45.17,45.17,0,0,1-.25,4.81,6,6,0,0,1-6,5.38q-.31,0-.63,0a6,6,0,0,1-5.34-6.59A35.41,35.41,0,0,0,162,128V64A34,34,0,0,0,96.8,50.45a6,6,0,0,1-11-4.78Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M213.92,218.62l-160-176A8,8,0,0,0,42.08,53.38L80,95.09V128a48,48,0,0,0,69.11,43.12l11.1,12.2A63.41,63.41,0,0,1,128,192a64.07,64.07,0,0,1-64-64,8,8,0,0,0-16,0,80.11,80.11,0,0,0,72,79.6V240a8,8,0,0,0,16,0V207.59a78.83,78.83,0,0,0,35.16-12.22l30.92,34a8,8,0,1,0,11.84-10.76ZM128,160a32,32,0,0,1-32-32V112.69l41.66,45.82A32,32,0,0,1,128,160Zm57.52-3.91A63.32,63.32,0,0,0,192,128a8,8,0,0,1,16,0,79.16,79.16,0,0,1-8.11,35.12,8,8,0,0,1-7.19,4.49,7.88,7.88,0,0,1-3.51-.82A8,8,0,0,1,185.52,156.09ZM84,44.87A48,48,0,0,1,176,64v64a49.19,49.19,0,0,1-.26,5,8,8,0,0,1-8,7.17,8.13,8.13,0,0,1-.84,0,8,8,0,0,1-7.12-8.79c.11-1.1.17-2.24.17-3.36V64A32,32,0,0,0,98.64,51.25,8,8,0,1,1,84,44.87Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M211,221.31,51,45.31A4,4,0,0,0,45,50.69L84,93.55V128a44,44,0,0,0,66,38.12l16.38,18A67.21,67.21,0,0,1,128,196a68.07,68.07,0,0,1-68-68,4,4,0,0,0-8,0,76.09,76.09,0,0,0,72,75.89V240a4,4,0,0,0,8,0V203.89a75.1,75.1,0,0,0,39.79-13.77L205,226.69a4,4,0,1,0,5.92-5.38ZM128,164a36,36,0,0,1-36-36V102.35L144.43,160A35.83,35.83,0,0,1,128,164Zm61.12-6.15A67.44,67.44,0,0,0,196,128a4,4,0,0,1,8,0,75.28,75.28,0,0,1-7.7,33.37,4,4,0,0,1-7.18-3.52ZM87.63,46.46A44,44,0,0,1,172,64v64a44.2,44.2,0,0,1-.24,4.61,4,4,0,0,1-4,3.58l-.42,0a4,4,0,0,1-3.57-4.39A36.67,36.67,0,0,0,164,128V64A36,36,0,0,0,95,49.66a4,4,0,0,1-7.34-3.2Z"}))]]),bm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,12H112A68.07,68.07,0,0,0,44,80v96a68.07,68.07,0,0,0,68,68h32a68.07,68.07,0,0,0,68-68V80A68.07,68.07,0,0,0,144,12Zm44,68v20H140V36h4A44.05,44.05,0,0,1,188,80ZM112,36h4v64H68V80A44.05,44.05,0,0,1,112,36Zm32,184H112a44.05,44.05,0,0,1-44-44V124H188v52A44.05,44.05,0,0,1,144,220Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,112v64a56,56,0,0,1-56,56H112a56,56,0,0,1-56-56V112Z",opacity:"0.2"}),de.createElement("path",{d:"M144,16H112A64.07,64.07,0,0,0,48,80v96a64.07,64.07,0,0,0,64,64h32a64.07,64.07,0,0,0,64-64V80A64.07,64.07,0,0,0,144,16Zm48,64v24H136V32h8A48.05,48.05,0,0,1,192,80ZM112,32h8v72H64V80A48.05,48.05,0,0,1,112,32Zm32,192H112a48.05,48.05,0,0,1-48-48V120H192v56A48.05,48.05,0,0,1,144,224Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,16H112A64.07,64.07,0,0,0,48,80v96a64.07,64.07,0,0,0,64,64h32a64.07,64.07,0,0,0,64-64V80A64.07,64.07,0,0,0,144,16Zm48,64v24H136V32h8A48.05,48.05,0,0,1,192,80ZM112,32h8v72H64V80A48.05,48.05,0,0,1,112,32Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,18H112A62.07,62.07,0,0,0,50,80v96a62.07,62.07,0,0,0,62,62h32a62.07,62.07,0,0,0,62-62V80A62.07,62.07,0,0,0,144,18Zm50,62v26H134V30h10A50.06,50.06,0,0,1,194,80ZM112,30h10v76H62V80A50.06,50.06,0,0,1,112,30Zm32,196H112a50.06,50.06,0,0,1-50-50V118H194v58A50.06,50.06,0,0,1,144,226Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,16H112A64.07,64.07,0,0,0,48,80v96a64.07,64.07,0,0,0,64,64h32a64.07,64.07,0,0,0,64-64V80A64.07,64.07,0,0,0,144,16Zm48,64v24H136V32h8A48.05,48.05,0,0,1,192,80ZM112,32h8v72H64V80A48.05,48.05,0,0,1,112,32Zm32,192H112a48.05,48.05,0,0,1-48-48V120H192v56A48.05,48.05,0,0,1,144,224Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M144,20H112A60.07,60.07,0,0,0,52,80v96a60.07,60.07,0,0,0,60,60h32a60.07,60.07,0,0,0,60-60V80A60.07,60.07,0,0,0,144,20Zm52,60v28H132V28h12A52.06,52.06,0,0,1,196,80ZM112,28h12v80H60V80A52.06,52.06,0,0,1,112,28Zm32,200H112a52.06,52.06,0,0,1-52-52V116H196v60A52.06,52.06,0,0,1,144,228Z"}))]]),Cm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,28H160a20,20,0,0,0-20,20V208a20,20,0,0,0,20,20h40a20,20,0,0,0,20-20V48A20,20,0,0,0,200,28Zm-4,176H164V52h32ZM96,28H56A20,20,0,0,0,36,48V208a20,20,0,0,0,20,20H96a20,20,0,0,0,20-20V48A20,20,0,0,0,96,28ZM92,204H60V52H92Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M208,48V208a8,8,0,0,1-8,8H160a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8h40A8,8,0,0,1,208,48ZM96,40H56a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8H96a8,8,0,0,0,8-8V48A8,8,0,0,0,96,40Z",opacity:"0.2"}),de.createElement("path",{d:"M200,32H160a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V48A16,16,0,0,0,200,32Zm0,176H160V48h40ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Zm0,176H56V48H96Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,48V208a16,16,0,0,1-16,16H160a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h40A16,16,0,0,1,216,48ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,34H160a14,14,0,0,0-14,14V208a14,14,0,0,0,14,14h40a14,14,0,0,0,14-14V48A14,14,0,0,0,200,34Zm2,174a2,2,0,0,1-2,2H160a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2h40a2,2,0,0,1,2,2ZM96,34H56A14,14,0,0,0,42,48V208a14,14,0,0,0,14,14H96a14,14,0,0,0,14-14V48A14,14,0,0,0,96,34Zm2,174a2,2,0,0,1-2,2H56a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H96a2,2,0,0,1,2,2Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,32H160a16,16,0,0,0-16,16V208a16,16,0,0,0,16,16h40a16,16,0,0,0,16-16V48A16,16,0,0,0,200,32Zm0,176H160V48h40ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Zm0,176H56V48H96Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M200,36H160a12,12,0,0,0-12,12V208a12,12,0,0,0,12,12h40a12,12,0,0,0,12-12V48A12,12,0,0,0,200,36Zm4,172a4,4,0,0,1-4,4H160a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4h40a4,4,0,0,1,4,4ZM96,36H56A12,12,0,0,0,44,48V208a12,12,0,0,0,12,12H96a12,12,0,0,0,12-12V48A12,12,0,0,0,96,36Zm4,172a4,4,0,0,1-4,4H56a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H96a4,4,0,0,1,4,4Z"}))]]),wm=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm52-84a12,12,0,0,1-12,12H140v28a12,12,0,0,1-24,0V140H88a12,12,0,0,1,0-24h28V88a12,12,0,0,1,24,0v28h28A12,12,0,0,1,180,128Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),de.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24Zm40,112H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32a8,8,0,0,1,0,16Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm46-90a6,6,0,0,1-6,6H134v34a6,6,0,0,1-12,0V134H88a6,6,0,0,1,0-12h34V88a6,6,0,0,1,12,0v34h34A6,6,0,0,1,174,128Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm44-92a4,4,0,0,1-4,4H132v36a4,4,0,0,1-8,0V132H88a4,4,0,0,1,0-8h36V88a4,4,0,0,1,8,0v36h36A4,4,0,0,1,172,128Z"}))]]),km=new Map([["bold",de.createElement(de.Fragment,null,de.createElement("path",{d:"M156,40a12,12,0,0,1-12,12H112a12,12,0,0,1,0-24h32A12,12,0,0,1,156,40ZM144,204H112a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24ZM204,52V72a12,12,0,0,0,24,0V48a20,20,0,0,0-20-20H184a12,12,0,0,0,0,24Zm12,48a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V112A12,12,0,0,0,216,100ZM40,156a12,12,0,0,0,12-12V112a12,12,0,0,0-24,0v32A12,12,0,0,0,40,156Zm32,48H52V184a12,12,0,0,0-24,0v24a20,20,0,0,0,20,20H72a12,12,0,0,0,0-24ZM72,28H48A20,20,0,0,0,28,48V72a12,12,0,0,0,24,0V52H72a12,12,0,0,0,0-24ZM240,204H228V192a12,12,0,0,0-24,0v12H192a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V228h12a12,12,0,0,0,0-24Z"}))],["duotone",de.createElement(de.Fragment,null,de.createElement("path",{d:"M216,40V216H40V40Z",opacity:"0.2"}),de.createElement("path",{d:"M152,40a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h32A8,8,0,0,1,152,40Zm-8,168H112a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16ZM208,48V72a8,8,0,0,0,16,0V48a16,16,0,0,0-16-16H184a8,8,0,0,0,0,16Zm8,56a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V112A8,8,0,0,0,216,104ZM40,152a8,8,0,0,0,8-8V112a8,8,0,0,0-16,0v32A8,8,0,0,0,40,152Zm32,56H48V184a8,8,0,0,0-16,0v24a16,16,0,0,0,16,16H72a8,8,0,0,0,0-16ZM72,32H48A16,16,0,0,0,32,48V72a8,8,0,0,0,16,0V48H72a8,8,0,0,0,0-16ZM240,208H224V192a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"}))],["fill",de.createElement(de.Fragment,null,de.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM56,72A16,16,0,0,1,72,56H96a8,8,0,0,1,0,16H72V96a8,8,0,0,1-16,0Zm56,112H72a16,16,0,0,1-16-16V136a8,8,0,0,1,16,0v32h40a8,8,0,0,1,0,16ZM128,64a8,8,0,0,1,8-8h32a16,16,0,0,1,16,16v40a8,8,0,0,1-16,0V72H136A8,8,0,0,1,128,64Zm72,120H184v16a8,8,0,0,1-16,0V184H152a8,8,0,0,1,0-16h16V152a8,8,0,0,1,16,0v16h16a8,8,0,0,1,0,16Z"}))],["light",de.createElement(de.Fragment,null,de.createElement("path",{d:"M150,40a6,6,0,0,1-6,6H112a6,6,0,0,1,0-12h32A6,6,0,0,1,150,40Zm-6,170H112a6,6,0,0,0,0,12h32a6,6,0,0,0,0-12ZM210,48V72a6,6,0,0,0,12,0V48a14,14,0,0,0-14-14H184a6,6,0,0,0,0,12h24A2,2,0,0,1,210,48Zm6,58a6,6,0,0,0-6,6v32a6,6,0,0,0,12,0V112A6,6,0,0,0,216,106ZM40,150a6,6,0,0,0,6-6V112a6,6,0,0,0-12,0v32A6,6,0,0,0,40,150Zm32,60H48a2,2,0,0,1-2-2V184a6,6,0,0,0-12,0v24a14,14,0,0,0,14,14H72a6,6,0,0,0,0-12ZM72,34H48A14,14,0,0,0,34,48V72a6,6,0,0,0,12,0V48a2,2,0,0,1,2-2H72a6,6,0,0,0,0-12ZM240,210H222V192a6,6,0,0,0-12,0v18H192a6,6,0,0,0,0,12h18v18a6,6,0,0,0,12,0V222h18a6,6,0,0,0,0-12Z"}))],["regular",de.createElement(de.Fragment,null,de.createElement("path",{d:"M152,40a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h32A8,8,0,0,1,152,40Zm-8,168H112a8,8,0,0,0,0,16h32a8,8,0,0,0,0-16ZM208,48V72a8,8,0,0,0,16,0V48a16,16,0,0,0-16-16H184a8,8,0,0,0,0,16Zm8,56a8,8,0,0,0-8,8v32a8,8,0,0,0,16,0V112A8,8,0,0,0,216,104ZM40,152a8,8,0,0,0,8-8V112a8,8,0,0,0-16,0v32A8,8,0,0,0,40,152Zm32,56H48V184a8,8,0,0,0-16,0v24a16,16,0,0,0,16,16H72a8,8,0,0,0,0-16ZM72,32H48A16,16,0,0,0,32,48V72a8,8,0,0,0,16,0V48H72a8,8,0,0,0,0-16ZM240,208H224V192a8,8,0,0,0-16,0v16H192a8,8,0,0,0,0,16h16v16a8,8,0,0,0,16,0V224h16a8,8,0,0,0,0-16Z"}))],["thin",de.createElement(de.Fragment,null,de.createElement("path",{d:"M148,40a4,4,0,0,1-4,4H112a4,4,0,0,1,0-8h32A4,4,0,0,1,148,40Zm-4,172H112a4,4,0,0,0,0,8h32a4,4,0,0,0,0-8ZM212,48V72a4,4,0,0,0,8,0V48a12,12,0,0,0-12-12H184a4,4,0,0,0,0,8h24A4,4,0,0,1,212,48Zm4,60a4,4,0,0,0-4,4v32a4,4,0,0,0,8,0V112A4,4,0,0,0,216,108ZM40,148a4,4,0,0,0,4-4V112a4,4,0,0,0-8,0v32A4,4,0,0,0,40,148Zm32,64H48a4,4,0,0,1-4-4V184a4,4,0,0,0-8,0v24a12,12,0,0,0,12,12H72a4,4,0,0,0,0-8ZM72,36H48A12,12,0,0,0,36,48V72a4,4,0,0,0,8,0V48a4,4,0,0,1,4-4H72a4,4,0,0,0,0-8ZM240,212H220V192a4,4,0,0,0-8,0v20H192a4,4,0,0,0,0,8h20v20a4,4,0,0,0,8,0V220h20a4,4,0,0,0,0-8Z"}))]]),Sm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:fm}));Sm.displayName="ArrowUpRightIcon";const Mm=Sm,Nm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:mm}));Nm.displayName="ArticleNyTimesIcon";const _m=Nm,jm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:gm}));jm.displayName="AtomIcon";const Em=jm,Tm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:ym}));Tm.displayName="CodeIcon";const Am=Tm,Lm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:xm}));Lm.displayName="ImageIcon";const Om=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:vm}));Om.displayName="MicrophoneSlashIcon";const Im=Om,Dm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:bm}));Dm.displayName="MouseIcon";const Rm=Dm,Pm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:Cm}));Pm.displayName="PauseIcon";const zm=Pm,Fm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:wm}));Fm.displayName="PlusCircleIcon";const Hm=Fm,Vm=de.forwardRef((e,t)=>de.createElement(y,{ref:t,...e,weights:km}));Vm.displayName="SelectionPlusIcon";const $m=Vm;function Bm(e){const{properties:n,isStreaming:r,isEdit:s,isNotLastEdit:i,onOpenArtifact:o,preview:a,icon:l,isExpanded:c,actions:d,className:h,textContainerClassName:p}=e,[f,y]=de.useState(Boolean(e.displayType||n.type));de.useEffect(()=>{(e.displayType||n.type)&&y(!0)},[n.type,e.displayType]);const x=m(),v=function(){const e=m();return de.useMemo(()=>({[za.Text]:e.formatMessage({defaultMessage:"Text",id:"aA8bDwsPeJ"}),[za.Markdown]:e.formatMessage({defaultMessage:"Document",id:"wmirkPk7bp"}),[za.Html]:e.formatMessage({defaultMessage:"Interactive artifact",id:"zfnwA1wU0m"}),[za.Svg]:e.formatMessage({defaultMessage:"Image",id:"+0zv6gS/c6"}),[za.Code]:e.formatMessage({defaultMessage:"Code",id:"h2vipunVVd"}),[za.Mermaid]:e.formatMessage({defaultMessage:"Diagram",id:"PBUs06BBR7"}),[za.React]:e.formatMessage({defaultMessage:"Interactive artifact",id:"zfnwA1wU0m"})}),[e])}(),b=e.displayType??(n.type?v[n.type]:null),C=e.versionNum&&e.versionCount&&e.versionNum>1&&e.versionCount>1,w=n.title&&n.id&&!r?"generated":s&&r?"editing":n.title&&n.id?"partial":"generating",[,k]=g("claude-code-view-timestamp",null);de.useEffect(()=>{n.type===za.Code&&k(Date.now())},[]);const S=he.jsx(Um,{layoutVariant:d?"alternate":"default",hasOffset:f,properties:n,icon:l,preview:a});return he.jsx("div",{className:t("flex text-left font-ui rounded-lg overflow-hidden border-0.5 transition duration-300 w-full hover:bg-bg-000/50 px-4",i&&s&&"opacity-0 pointer-events-none transition-none",c?"border-accent-secondary-200 duration-500":"border-border-300/15 hover:border-border-200",o&&n.id&&!d&&"cursor-pointer",h),onClick:()=>{o&&n.id&&o(n.id)},role:o&&n.id?"button":void 0,tabIndex:0,onKeyDown:e=>{o&&n.id&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(n.id))},"aria-label":x.formatMessage({defaultMessage:"Preview contents",id:"hmKJSoIQ4a"}),children:he.jsxs("div",{className:"artifact-block-cell group/artifact-block flex flex-1 align-start justify-between w-full",children:[he.jsxs("div",{className:"flex flex-1 gap-2 min-w-0",children:[d?S:null,he.jsxs("div",{className:t("flex flex-col gap-1 py-4 min-w-0 flex-1",p),children:[he.jsx("div",{className:t("leading-tight text-sm line-clamp-1","generating"===w?"text-text-500":null),children:"generated"===w?he.jsx(he.Fragment,{children:n.title}):"editing"===w?he.jsx(u,{defaultMessage:"Making edits...",id:"0HUNCOubmp"}):"partial"===w?he.jsx(he.Fragment,{children:n.title}):he.jsx(pm,{children:he.jsx(u,{defaultMessage:"Drafting artifact...",id:"8NQAeTqGOl"})})}),he.jsxs("div",{className:t("text-xs line-clamp-1","generating"===w?"text-text-500":"text-text-400",b?"opacity-100":"opacity-0","transition-opacity duration-200"),children:[b,b&&C?he.jsx("span",{className:"opacity-50",children:" ∙ "}):null,C?he.jsx(u,{defaultMessage:"Version {versionNum}",id:"iMMX+ZCJ/I",values:{versionNum:e.versionNum}}):null," "]})]})]}),d||S]})})}function Um({hasOffset:e,properties:n,icon:r,preview:s,layoutVariant:i}){const o=n.type===za.Markdown||n.type===za.Text,a=o||n.type===za.Code;return he.jsx("div",{className:"flex items-end w-[68px] relative shrink-0",children:he.jsx("div",{className:t("absolute right-2 flex flex-1 overflow-hidden w-[52px] h-[71px]","rounded-t-lg border-0.5 border-border-200 select-none","scale-[1] group-hover/artifact-block:scale-[1.035]","alternate"===i?"-rotate-[0.1rad] group-hover/artifact-block:-rotate-[0.065rad]":"rotate-[0.1rad] group-hover/artifact-block:rotate-[0.065rad]","duration-300 ease-out group-hover/artifact-block:duration-400 group-hover/artifact-block:ease-[cubic-bezier(0,0.9,0.5,1.35)]","transition-transform backface-hidden will-change-transform",e?"translate-y-[19%]":"translate-y-[120%]",n.type===za.Code?"bg-always-black text-always-white":o?"bg-bg-000 text-text-500":"bg-gradient-to-b from-bg-000 to-bg-000/0",a?"whitespace-pre-wrap text-[0.3rem] leading-none p-2 font-mono wrap-break-word hyphens-auto":"pt-4 items-start justify-center h-full"),children:r||(a?s:n.type===za.Svg?he.jsx(Lm,{size:20,weight:"light"}):n.type===za.React||n.type===za.Html?he.jsx(Em,{size:20,weight:"light"}):n.type===za.Code?he.jsx(Am,{size:20,weight:"light"}):he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"20",height:"20",children:he.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M2 8a5 5 0 0 0 4-2 5 5 0 0 0 4 2 5 5 0 0 0 4-2 5 5 0 0 0 4 2 5 5 0 0 0 4-2M2 18a5 5 0 0 0 4-2 5 5 0 0 0 4 2 5 5 0 0 0 4-2 5 5 0 0 0 4 2 5 5 0 0 0 4-2"})}))})})}const Zm=["gmail.com","googlemail.com","yahoo.com","hotmail.com","outlook.com","aol.com","icloud.com","me.com","mac.com","live.com","msn.com","yahoo.co.uk","yahoo.fr","yahoo.es","yahoo.de","yahoo.it","yahoo.ca","yahoo.com.au","yahoo.co.jp","yahoo.co.in","yahoo.com.br","yahoo.com.ar","yahoo.com.mx","yahoo.com.sg","yahoo.co.id","yahoo.com.tw","hotmail.fr","hotmail.co.uk","hotmail.de","hotmail.it","hotmail.es","hotmail.nl","hotmail.be","hotmail.se","hotmail.dk","live.fr","live.co.uk","live.nl","live.it","live.se","live.de","live.dk","live.no","live.com.au","live.com.pt","ymail.com","rocketmail.com","privaterelay.appleid.com","proton.me","pm.me","hey.com","passmail.net","qq.com","163.com","126.com","139.com","188.com","sina.com","sohu.com","simplelogin.com","aliyun.com","naver.com","daum.net","hanmail.net","nate.com","docomo.ne.jp","rediffmail.com","web.de","gmx.de","gmx.com","gmx.net","gmx.at","gmx.ch","gmx.fr","t-online.de","freenet.de","arcor.de","orange.fr","wanadoo.fr","free.fr","sfr.fr","laposte.net","neuf.fr","voila.fr","club-internet.fr","aliceadsl.fr","bbox.fr","libero.it","virgilio.it","alice.it","tiscali.it","tin.it","email.it","mail.ru","yandex.ru","yandex.com","rambler.ru","terra.es","home.nl","planet.nl","zonnet.nl","hetnet.nl","kpnmail.nl","ziggo.nl","telenet.be","skynet.be","btinternet.com","virginmedia.com","blueyonder.co.uk","sky.com","tiscali.co.uk","ntlworld.com","talktalk.net","bluewin.ch","uol.com.br","bol.com.br","terra.com.br","ig.com.br","shaw.ca","sympatico.ca","rogers.com","bigpond.com","bigpond.net.au","optusnet.com.au","comcast.net","verizon.net","att.net","cox.net","charter.net","sbcglobal.net","bellsouth.net","earthlink.net","optonline.net","frontiernet.net","juno.com","posteo.de","mailbox.org","mail.com","email.com","protonmail.com","protonmail.ch","passmail.com","posteo.net","tutanota.com","tutanota.de","zoho.com","fastmail.com","hushmail.com","mailinator.com","yopmail.com","duck.com","hotmail.co.jp","gmx.ie","gmx.tm","seznam.cz","tuta.io","tutamail.com","tuta.com","kakao.com","gmx.it","gmx.li","gmx.ca","gmx.sg","gmx.co.in","gmx.co.uk","gmx.es","gmx.hk","gmx.se","wp.pl","pobox.com","live.ca","windowslive.com","live.at","live.be","live.co.za","live.com.mx","live.in","live.jp","o2.pl","iki.fi","ukr.net","abv.bg","email.cz","centrum.cz","post.cz","interia.pl","onet.pl","op.pl","poczta.fm","gazeta.pl","tlen.pl","hotmail.ca","hotmail.ch","hotmail.com.br","hotmail.com.tr","hotmail.gr","hotmail.no","yahoo.com.hk","yahoo.dk","yahoo.gr","yahoo.ie","yahoo.in","yandex.kz","foxmail.com","zohomail.com","zohomail.in","nifty.com","ezweb.ne.jp","i.softbank.jp","inbox.lv","mail.de","usa.net","fastmail.fm","vivaldi.net","slmail.me","slmails.com","passfwd.com","8shield.net","ik.me","simplelogin.fr","relay.firefox.com","addy.io","dralias.com","keemail.me","nym.hush.com","riseup.net","disroot.org","posteo.com","mailfence.com","runbox.com","startmail.com","use.startmail.com","mailo.com","sent.com","eml.cc","gtempaccount.com","silomails.com","8alias.com","linkidmail.com","wbox.pro","swapped.com","pox.me"];var Wm={};xt({type:jt("knowledge"),title:vt(),url:vt().nullable(),metadata:_t("type",[xt({type:jt("google_doc_metadata"),doc_uuid:vt(),owner:vt().nullable()}),xt({type:jt("webpage_metadata"),favicon_url:vt().nullable(),site_name:vt().nullable(),site_domain:vt()})]),is_missing:Ct().optional()}),xt({type:jt("text"),text:vt()}),xt({error_type:Mt(["INVALID_URL","URL_NOT_FOUND","RATE_LIMIT_EXCEEDED","SERVER_ERROR","CLIENT_ERROR","ROBOTS_DISALLOWED","UNKNOWN_ERROR","URL_TOO_LONG","SITE_BLOCKED","PERMISSIONS_ERROR"]),error_message:vt()});const qm=Mt(["extended"]);kt(xt({model:vt(),name:vt(),name_i18n_key:vt().optional(),description:vt().optional(),description_i18n_key:vt().optional(),notice_text:vt().optional(),notice_text_i18n_key:vt().optional(),inactive:Ct().optional(),overflow:Ct().optional(),knowledgeCutoff:vt().optional(),slow_kb_warning_threshold:bt().optional(),paprika_modes:kt(qm).optional(),capabilities:xt({mm_pdf:Ct().optional(),mm_images:Ct().optional(),web_search:Ct().optional(),gsuite_tools:Ct().optional(),compass:Ct().optional()}).optional()}));const Gm=de.createContext(void 0),Jm=()=>{const e=de.useContext(Gm);if(!e)throw new Error("useConfiguration must be called from within ConfigurationProvider");return e},Km={analytics:!1,marketing:!1},Ym={analytics:!0,marketing:!0};class Qm extends Error{constructor(e,t){super(t),this.name=e}}class Xm extends Qm{constructor(e,t){2===arguments.length&&(e+=` (Received: ${JSON.stringify(t)})`),super("ValidationError",`[Validation] ${e}`)}}function eg(e,t){if("function"!=typeof e)throw new Xm(`${t} is not a function`,e)}function tg(e,t){if(null===e||"object"!=typeof e)throw new Xm(`${t} is not an object`,e)}function ng(e){let t=!0;if(e&&"object"==typeof e&&!Array.isArray(e)){t=!1;for(const n in e)if("boolean"!=typeof e[n]){t=!0;break}}if(t)throw new Xm("Consent Categories should be {[categoryName: string]: boolean}",e)}const rg=(e,...t)=>{const n=t.reduce((e,t)=>n=>t(e(n)),e=>e);return(...t)=>n(e(...t))};class sg extends Qm{constructor(e){super("AbortLoadError",""),this.loadSegmentNormally=e}}class ig{abort(e){if("object"!=typeof e)throw new Xm("arg should be an object",e);throw new sg(e.loadSegmentNormally)}}const og=async(e,t,n)=>{let r;var s;if(n?(s=Object.values(n).reduce((e,t)=>e.concat(t)),r=Array.from(new Set(s))):r=t.consentSettings?.allCategories||[],!r.length)throw new Xm("Invariant: No consent categories defined in Segment",[]);const i=await e();return o=i,r.reduce((e,t)=>(t in o&&(e[t]=o[t]),e),{});var o};class ag{get analytics(){return lg(this._uninitializedAnalytics)}constructor(e){!function(e){if(tg(e,"analytics"),!("load"in e&&"on"in e&&"addSourceMiddleware"in e))throw new Xm("analytics is not an Analytics instance",e)}(e),this._uninitializedAnalytics=e,this.loadNormally=e.load.bind(this._uninitializedAnalytics),this.cdnSettings=new Promise(e=>this.analytics.on("initialize",e))}replaceLoadMethod(e){this.analytics.load=e}page(){this.analytics.page()}configureConsentStampingMiddleware({getCategories:e,pruneUnmappedCategories:t,integrationCategoryMappings:n}){const r=(e=>async({payload:t,next:n})=>{const r=await e();ng(r),t.obj.context.consent={...t.obj.context.consent,categoryPreferences:r},n(t)})(async()=>t?og(e,await this.cdnSettings,n):e());return this.analytics.addSourceMiddleware(r)}consentChange(e){try{ng(e)}catch(t){return}this.analytics.track("Segment Consent Preference",void 0,{consent:{categoryPreferences:e}})}}const lg=e=>{if(Array.isArray(e)){const t=e._loadOptions??{},n=window[t?.globalAnalyticsKey??"analytics"];if(n?.initialized)return n}return e},cg=(...[e])=>{!function(e){if("object"!=typeof e||!e)throw new Xm("Options should be an object",e);eg(e.getCategories,"getCategories"),e.shouldLoadSegment&&eg(e.shouldLoadSegment,"shouldLoadSegment"),e.shouldEnableIntegration&&eg(e.shouldEnableIntegration,"shouldEnableIntegration"),e.shouldDisableSegment&&eg(e.shouldDisableSegment,"shouldDisableSegment"),e.integrationCategoryMappings&&tg(e.integrationCategoryMappings,"integrationCategoryMappings"),e.registerOnConsentChanged&&eg(e.registerOnConsentChanged,"registerOnConsentChanged")}(e);const{shouldDisableSegment:t,getCategories:n,shouldLoadSegment:r,integrationCategoryMappings:s,pruneUnmappedCategories:i,shouldEnableIntegration:o,registerOnConsentChanged:a,shouldLoadWrapper:l}=e;return e=>{const c=new ag(e),u=l?.()||Promise.resolve();u.then(()=>{a?.(e=>c.consentChange(e))});return c.replaceLoadMethod(async(e,a)=>{if(a?.initialPageview&&(c.page(),a={...a,initialPageview:!1}),await(t?.()))return;let l;try{await u,l=await(r?.(new ig))||await n()}catch(d){if(d instanceof sg)return void(!0===d.loadSegmentNormally&&c.loadNormally(e,a));throw d}ng(l),c.configureConsentStampingMiddleware({getCategories:n,integrationCategoryMappings:s,pruneUnmappedCategories:i});return c.loadNormally(e,{...a,updateCDNSettings:rg(e=>e.remotePlugins?ug(e,l,s,o):e,a?.updateCDNSettings||(e=>e)),disable:dg(l,a?.disable)})}),e}},ug=(e,t,n,r)=>{const{remotePlugins:s,integrations:i}=e,o=e=>{const s=n?n[e]:(e=>{if(e&&"object"==typeof e&&"consentSettings"in e&&"object"==typeof e.consentSettings&&e.consentSettings&&"categories"in e.consentSettings&&Array.isArray(e.consentSettings.categories))return e.consentSettings.categories||void 0})(i[e]);if(r)return r(s||[],t,{creationName:e});if(!s||!s.length)return!0;return s.every(e=>t[e])};return Object.keys(i).reduce((e,t)=>(o(t)||(e.remotePlugins=e.remotePlugins&&e.remotePlugins.filter(e=>e.creationName!==t),delete e.integrations[t]),e),{...e,remotePlugins:s,integrations:{...i}})},dg=(e,t)=>!0===t||(n=>{return r=e,!(!(s=n.consentSettings)||s.hasUnmappedDestinations)&&Object.keys(r).filter(e=>r[e]).every(e=>!s.allCategories.includes(e))||"function"==typeof t&&t(n);var r,s});let hg;const pg=new Uint8Array(16);function fg(){if(!hg&&(hg="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hg(pg)}const mg=[];for(let os=0;os<256;++os)mg.push((os+256).toString(16).slice(1));const gg={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function yg(e,t,n){if(gg.randomUUID&&!e)return gg.randomUUID();const r=(e=e||{}).random||(e.rng||fg)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return mg[e[t+0]]+mg[e[t+1]]+mg[e[t+2]]+mg[e[t+3]]+"-"+mg[e[t+4]]+mg[e[t+5]]+"-"+mg[e[t+6]]+mg[e[t+7]]+"-"+mg[e[t+8]]+mg[e[t+9]]+"-"+mg[e[t+10]]+mg[e[t+11]]+mg[e[t+12]]+mg[e[t+13]]+mg[e[t+14]]+mg[e[t+15]]}(r)}const xg="claudeai.v1";class vg{constructor(){this.name="RemoveUserAgent",this.version="1.0.0",this.type="before",this.isLoaded=()=>!0,this.load=()=>Promise.resolve(),this.redactPiiFromContext=e=>(e?.event?.context&&(delete e.event.context.userAgent,delete e.event.context.email,e.event.context.ip="REDACTED"),e),this.track=this.redactPiiFromContext,this.identify=this.redactPiiFromContext,this.page=this.redactPiiFromContext,this.group=this.redactPiiFromContext,this.alias=this.redactPiiFromContext,this.screen=this.redactPiiFromContext}}const bg=e=>({marketing:e.marketing,analytics:e.analytics,necessary:!0});const Cg={}.NEXT_PUBLIC_EXCLUDE_SEGMENT?new class{constructor(){this.loadIfNecessary=()=>null,this.registerOnConsentChanged=x.noop,this.getCategories=()=>({analytics:!1,marketing:!1,necessary:!0}),this.updateCategories=x.noop,this.reset=x.noop,this.anonymousId=""}}:new class{constructor(){if(this.consentChangedCallback=x.noop,this.preferences=bg(Km),this.analyticsBrowser=null,this.anonymousId=`${xg}.${yg()}`,this.segmentConfig=null,this.loadIfNecessary=({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:r,gpcDetected:s})=>{if(this.segmentConfig={segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:r,gpcDetected:s},!this.analyticsBrowser){if("undefined"!=typeof window&&(this.loadInitialConsentPreferences({requiresExplicitConsent:r,gpcDetected:s}),!this.preferences.analytics))return null;this.analyticsBrowser=new v,"undefined"!=typeof window&&(this.analyticsBrowser.setAnonymousId(this.anonymousId),this.wrapAnalyticsWithConsent(this.analyticsBrowser).load({writeKey:e,cdnURL:`https://${t}`,plugins:[new vg]},{disableClientPersistence:!0,cookie:"undefined"!=typeof window?{domain:b(window.location.hostname)||void 0}:void 0,integrations:{"Segment.io":{apiHost:`${n}/v1`,protocol:"https"},"Facebook Pixel":!1,"DoubleClick Floodlight":!1}}).catch(e=>{Js(e,{extra:{message:"Failed to load analytics"}})})),this.syncAnonymousId()}return this.analyticsBrowser},this.registerOnConsentChanged=e=>{this.consentChangedCallback=t=>{t.analytics?(!this.analyticsBrowser&&this.segmentConfig&&this.loadIfNecessary(this.segmentConfig),this.syncAnonymousId()):this.deleteCookie(),e(t)}},this.getCategories=()=>this.preferences,this.loadInitialConsentPreferences=({requiresExplicitConsent:e,gpcDetected:t})=>{if(t)return void(this.preferences=bg(Km));let n;try{n=C.get(w.CONSENT_PREFERENCES)}catch(r){Js(r,{extra:{message:"Failed to get consent preferences cookie"}})}if(n)try{const e=JSON.parse(n);this.preferences=bg(e)}catch(r){h.debug(p.LOCAL_DEV,"Malformed consent preferences cookie",n)}else e||(this.preferences=bg(Ym))},this.syncAnonymousId=()=>{this.analyticsBrowser&&this.anonymousId&&this.preferences.analytics&&C.set(w.SEGMENT_ANONYMOUS_ID,this.anonymousId)},this.deleteCookie=()=>{C.delete(w.SEGMENT_ANONYMOUS_ID)},this.reset=()=>{this.deleteCookie(),this.analyticsBrowser?.reset().then(()=>{this.anonymousId=`${xg}.${yg()}`,this.syncAnonymousId()})},this.updateCategories=e=>{this.preferences=bg(e),this.consentChangedCallback(this.preferences)},this.wrapAnalyticsWithConsent=e=>cg({registerOnConsentChanged:this.registerOnConsentChanged,getCategories:this.getCategories})(e),"undefined"!=typeof window){const e=C.get(w.SEGMENT_ANONYMOUS_ID);e&&(this.anonymousId=e)}}},wg=de.createContext({showConsentBanner:!1,openConsentBanner:x.noop,preferences:Km,savePreferences:x.noop,requiresExplicitConsent:!1,gpcStatus:{detected:!1,source:"none"}});function kg(){return de.useContext(wg)}const Sg=de.createContext(null),Mg=de.createContext(null);var Ng={};const _g={snippets_command_used:{version:1},file_upload_too_large:{version:1},sse_interrupted:{version:1},snippets_suggestion_selected:{version:1},payment_modal_open:{version:1},pro_waitlist_requested:{version:1},payment_state_poll_for_invoice:{version:1},payment_state_poll_for_payment:{version:1},payment_state_poll_for_capability:{version:1},payment_state_payment_requires_confirmation:{version:1},payment_state_payment_failed:{version:1},payment_state_success:{version:1},payment_state_timed_out:{version:1},"onboarding.pubsec_system_use.started":{version:1},"onboarding.phone_verification.start":{version:1},"onboarding.phone_verification.sent_code":{version:1},"onboarding.phone_verification.invalid_code":{version:1},"onboarding.phone_verification.verified_code":{version:1},"onboarding.age_verification.start":{version:1},"onboarding.age_verification.complete":{version:1},"onboarding.name_input.started":{version:1},"onboarding.name_input.finished":{version:1},"onboarding.acceptable_use.started":{version:1},"onboarding.acceptable_use.finished":{version:1},"onboarding.disclaimers.started":{version:1},"onboarding.disclaimers.finished":{version:1},"onboarding.started":{version:1},"onboarding.completed":{version:1},"extended_onboarding.started":{version:1},"extended_onboarding.disclaimer.completed":{version:1},"extended_onboarding.name_input.completed":{version:1},"extended_onboarding.work_function.completed":{version:1},"extended_onboarding.drive_integration.started":{version:1},"extended_onboarding.drive_integration.skipped":{version:1},"extended_onboarding.drive_integration.completed":{version:1},"extended_onboarding.gmail_integration.started":{version:1},"extended_onboarding.gmail_integration.skipped":{version:1},"extended_onboarding.gmail_integration.completed":{version:1},"extended_onboarding.gcal_integration.started":{version:1},"extended_onboarding.gcal_integration.skipped":{version:1},"extended_onboarding.gcal_integration.completed":{version:1},"extended_onboarding.topics.completed":{version:1},"extended_onboarding.example_prompts.completed":{version:1},"extended_onboarding.completed":{version:1},"extended_onboarding.hear_about.completed":{version:1},"extended_onboarding.hear_about.source_selected":{version:1},"extended_onboarding.hear_about.skipped":{version:1},"extended_onboarding.code_upgrade.completed":{version:1},"extended_onboarding.code_intro.completed":{version:1},"extended_onboarding.code_install.completed":{version:1},"claudeai.onboarding.guest_pass_install.completed":{version:1},"claudeai.onboarding.gift_redeem.completed":{version:1},"claudeai.onboarding.guest_pass_install.command_copied":{version:1},"claudeai.onboarding.guest_pass_install.documentation_clicked":{version:1},"claudeai.onboarding.guest_pass_install.link_clicked":{version:1},"pro_subscription.upgraded_to_annual":{version:1},"pro_subscription.upgraded_to_max":{version:1},"max_subscription.downgraded_to_max":{version:1},"max_subscription.downgraded_to_pro":{version:1},"chat.conversation.first_conversation_created":{version:1},"chat.conversation.token_limit_exceeded":{version:1},"chat.conversation.token_limit_will_exceed":{version:1},"chat.conversation.too_long_prompt:loaded":{version:1},"chat.conversation.too_long_prompt:accepted":{version:1},"chat.conversation.too_long_prompt:dismissed":{version:1},"chat.conversation.too_long_prompt_warning:loaded":{version:1},"chat.conversation.too_long_prompt_warning:accepted":{version:1},"chat.conversation.too_long_prompt_warning:dismissed":{version:1},"chat.conversation.after_completion_invalidation":{version:1},"chat.conversations.force_refresh":{version:1},"chat.conversations.invalidate":{version:1},"chat.messages.force_refresh":{version:1},"claudeai.chat.sync_message_loss":{version:1},"chat.share.button.clicked":{version:1},"chat.share.modal.share_button.clicked":{version:1},"chat.share.modal.unshare_button.clicked":{version:1},"chat.share.open_link.clicked":{version:1},"chat.share.copy_link.clicked":{version:1},"code.share.modal.share_button.clicked":{version:1},"code.share.modal.unshare_button.clicked":{version:1},"code.share.open_link.clicked":{version:1},"code.share.copy_link.clicked":{version:1},"code.share.secrets_detected":{version:1},"code.share.secrets_warning_confirmed":{version:1},"code.share.secrets_warning_cancelled":{version:1},"code.share.login_redirect":{version:1},"code.share.page.viewed":{version:1},"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"claudeai.overages.enabled":{version:1},"claudeai.overages.disabled":{version:1},"claudeai.overages.monthly_limit_updated":{version:1},"claudeai.overages.monthly_limit_set":{version:1},"claudeai.overages.auto_reload_enabled":{version:1},"claudeai.overages.auto_reload_disabled":{version:1},"claudeai.overages.auto_reload_updated":{version:1},"claudeai.overages_or_upgrades_upsell_modal.viewed":{version:1},"claudeai.overages_or_upgrades_upsell_modal.overages_clicked":{version:1},"claudeai.overages_or_upgrades_upsell_modal.upgrade_clicked":{version:1},"claudeai.overages_or_upgrades_upsell_modal.closed":{version:1},"console.feedback.opened":{version:1},"console.feedback.submitted":{version:1},"claudeai.experiment.feedback_submitted":{version:1},"claudeai.experiment.feedback_buttons_rendered":{version:1},"claudeai.command_palette.opened":{version:1},"claudeai.command_palette.item_selected":{version:1},"claudeai.mini_claude.tooltip_impression":{version:1},"claudeai.mini_claude.selection_action":{version:1},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.show_golden_answers.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.run_all.stopped":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:2},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.prompt.new":{version:1},"workbench.completion.started":{version:2},"workbench.completion.finished":{version:2},"workbench.completion_stream.started":{version:1},"workbench.completion_stream.finished":{version:1},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"workbench.examples.pane.loaded":{version:1},"workbench.examples.example.added":{version:2},"workbench.examples.example.deleted":{version:1},"workbench.examples.converted_to_raw_text":{version:1},"workbench.code_modal.opened":{version:1},"workbench.code_modal.code_copied":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.artifacts.execution.error":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.session.recent.opened":{version:1},"claudeai.session.load_latency":{version:1},"claudeai.session.response_delayed":{version:1},"claudeai.session.user_message_sent":{version:1},"claudeai.session.response_received":{version:1},"claudeai.yukon_gold.session_created":{version:2},"claudeai.session.connecting":{version:1},"claudeai.session.connected":{version:1},"claudeai.session.disconnecting":{version:1},"claudeai.session.reconnecting":{version:1},"claudeai.session.reconnection_failed":{version:1},"claudeai.session.disconnected_due_to_error":{version:1},"claudeai.message.edited":{version:1},"claudeai.message.user_triggered_retry":{version:3},"claudeai.message.sent":{version:1},"claudeai.message.perceived_ttft":{version:1},"claudeai.message.streaming_abandoned":{version:1},"claudeai.mentions.dropdown.opened":{version:1},"claudeai.mentions.option.selected":{version:1},"claudeai.conversation_tree.navigated":{version:1},"claudeai.conversation.starred":{version:1},"claudeai.conversation.unstarred":{version:1},"claudeai.safety.self_harm_banner.viewed":{version:1},"claudeai.safety.self_harm_banner.resources_clicked":{version:1},"claudeai.safety.self_harm_banner.dismissed":{version:1},"claudeai.safety.self_harm_banner.dropdown_opened":{version:1},"claudeai.safety.self_harm_banner.chat_clicked":{version:1},"claudeai.safety.self_harm_banner.call_clicked":{version:1},"claudeai.safety.self_harm_banner.browse_clicked":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.projects.project_starter.clicked":{version:1},"claudeai.projects.chat_starter.clicked":{version:1},"claudeai.projects.starred":{version:1},"claudeai.projects.unstarred":{version:1},"claudeai.conversation.artifact.vscode_exported":{version:1},"claudeai.television.viewed":{version:1},"claudeai.television.onboarding_placeholder.viewed":{version:1},"claudeai.television.signup_placeholder.viewed":{version:1},"claudeai.code.onboarding.github_auth.viewed":{version:1},"claudeai.code.onboarding.github_auth.connect_clicked":{version:1},"claudeai.code.onboarding.env_setup.viewed":{version:1},"claudeai.code.onboarding.env_setup.option_selected":{version:1},"claudeai.code.onboarding.env_setup.completed":{version:1},"claudeai.code.onboarding.env_setup.error":{version:1},"claudeai.code.onboarding.github_app.viewed":{version:1},"claudeai.code.onboarding.github_app.already_installed":{version:1},"claudeai.code.onboarding.github_app.install_button.clicked":{version:1},"claudeai.code.onboarding.github_app.completed":{version:1},"claudeai.code.onboarding.github_app.installation.completed":{version:1},"claudeai.code.onboarding.github_app.check_status.clicked":{version:1},"claudeai.code.onboarding.github_app.not_installed_yet":{version:1},"claudeai.code.onboarding.github_app.skipped":{version:1},"claudeai.code.composer.repository_selected":{version:1},"claudeai.code.composer.environment_selected":{version:1},"claudeai.code.composer.session_creation_started":{version:1},"claudeai.code.composer.default_model_missing_from_config":{version:1},"claudeai.code.message.submitted":{version:1},"claudeai.code.session.stopped":{version:1},"claudeai.code.repos.page_viewed":{version:1},"claudeai.code.repos.github_auth_clicked":{version:1},"claudeai.code.repos.repository_selected":{version:1},"claudeai.code.repos.repository_deselected":{version:1},"claudeai.code.repos.repository_synced":{version:1},"claudeai.code.repos.setup_completed":{version:1},"claudeai.code.environment_modal.viewed":{version:1},"claudeai.code.environment.created":{version:1},"claudeai.code.environment.updated":{version:1},"claudeai.code.environment.creation_error":{version:1},"claudeai.code.environment.update_error":{version:1},"claudeai.code.environment.token_generated":{version:1},"claudeai.code.environment.token_generation_error":{version:1},"claudeai.code.environment.token_revoked":{version:1},"claudeai.code.environment.token_revoke_error":{version:1},"claudeai.code.github_app.repo_dropdown.opened":{version:1},"claudeai.code.github_app.install_button.clicked":{version:1},"claudeai.code.github_app.install_modal.viewed":{version:1},"claudeai.code.github_app.install_modal.install_button.clicked":{version:1},"claudeai.code.github_app.install_modal.check_status.clicked":{version:1},"claudeai.code.github_app.install_modal.done.clicked":{version:1},"claudeai.code.github_app.install_modal.cancel.clicked":{version:1},"claudeai.code.github_app.installation.completed":{version:1},"claudeai.code.github_app.status_check.error":{version:1},"claudeai.code.starter_task.clicked":{version:1},"claudeai.code.starter_task.session_created":{version:1},"claudeai.desktop.code.landing.page_viewed":{version:1},"claudeai.desktop.code.landing.folder_selected":{version:1},"claudeai.desktop.code.landing.model_selected":{version:1},"claudeai.desktop.code.landing.session_created":{version:1},"claudeai.desktop.code.landing.session_creation_error":{version:1},"claudeai.desktop.code.landing.trust_modal_viewed":{version:1},"claudeai.desktop.code.landing.trust_modal_accepted":{version:1},"claudeai.desktop.code.landing.trust_modal_declined":{version:1},"claudeai.desktop.code.cli.opened":{version:1},"claudeai.desktop.code.cli.closed":{version:1},"claudeai.desktop.code.onboarding.page_viewed":{version:1},"claudeai.desktop.code.onboarding.install_clicked":{version:1},"claudeai.desktop.code.onboarding.install_completed":{version:1},"claudeai.desktop.code.onboarding.install_error":{version:1},"claudeai.desktop.code.landing.environment_selected":{version:1},"claudeai.desktop.code.landing.quick_action_clicked":{version:1},"claudeai.desktop.code.landing.image_added":{version:1},"claudeai.television.session.created":{version:1},"claudeai.television.session.viewed":{version:1},"claudeai.television.github_actions_job.viewed":{version:1},"claudeai.television.notification_modal.viewed":{version:1},"claudeai.television.followup.submitted":{version:1},"claudeai.television.session.shared":{version:1},"claudeai.television.pr.create_clicked":{version:1},"claudeai.television.pr.view_clicked":{version:1},"claudeai.television.teleport.copied":{version:1},"claudeai.television.session.rename_clicked":{version:1},"claudeai.television.session.archived":{version:1},"claudeai.television.session.deleted":{version:1},"claudeai.television.session.retry_clicked":{version:1},"claudeai.television.diff_button.clicked":{version:1},"claudeai.television.diff_panel.minimized":{version:1},"claudeai.television.diff_view_mode.changed":{version:1},"claudeai.television.diff_comment.submitted":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.settings.capabilities.opened":{version:1},"claudeai.settings.export_data.submitted":{version:1},"claudeai.settings.export_audit_logs.submitted":{version:1},"claudeai.settings.referral_section.shown":{version:1},"claudeai.settings.referral_section.link_copied":{version:1},"claudeai.support.opened":{version:1},"claudeai.get_help.clicked":{version:1},"claudeai.conversation.feedback.sent":{version:1},"claudeai.conversation.setting.toggled":{version:1},"claudeai.thinking_cell.clicked":{version:1},"ccos.chatsuggestion.clicked":{version:1},"ccos.chatsuggestions.loaded":{version:1},"ccos.chatsuggestions.feedback":{version:1},"styles.selector.clicked":{version:1},"styles.modal":{version:1},"styles.nux.create_clicked":{version:1},"styles.custom.create_clicked":{version:1},"styles.custom.describe_clicked":{version:1},"styles.custom.describe_selected":{version:1},"styles.selected":{version:1},"artifact.feedback.sentiment":{version:1},"artifact.feedback.note":{version:1},"artifact.share_button_clicked":{version:1},"artifact.publish_button_clicked":{version:1},"artifact.share.modal.share_button_clicked":{version:1},"artifact.publish.modal.publish_button_clicked":{version:1},"artifact.studio.create_button_clicked":{version:1},"artifact.studio.create_mode_selected":{version:1},"artifact.studio.remix":{version:1},"artifact.studio.view_full_chat":{version:1},"artifact.studio.copy_prompt":{version:1},"artifact.popover.artifacts_tab_clicked":{version:1},"artifact.popover.dismiss_button_clicked":{version:1},"artifact.popover.dismiss_x_clicked":{version:1},"artifact.interaction.click":{version:1},"artifact.callout.learn_more_clicked":{version:1},"artifact.callout.enable_clicked":{version:1},"artifact.callout.dismissed":{version:1},"artifact.public.remix":{version:1},"artifact.public.share":{version:1},"claudeai.mcp.tool.toggled":{version:1},"claudeai.mcp.create_server":{version:1},"claudeai.mcp.auth.init":{version:1},"claudeai.mcp.auth.completed":{version:1},"claudeai.mcp.directory.page_view":{version:1},"claudeai.mcp.registry.searched":{version:1},"claudeai.mcp.registry.suggestion.viewed":{version:1},"claudeai.mcp.registry.suggestion.connect_clicked":{version:1},"mcp.servers.listed":{version:1},"mcp.servers.connected":{version:1},"mcp.resources.listed":{version:1},"mcp.resources.read":{version:1},"mcp.prompts.listed":{version:1},"mcp.prompts.used":{version:1},"mcp.tools.listed":{version:1},"mcp.tools.called":{version:1},"mcp.sampling.requested":{version:1},"mcp.websocket.transport.connection.failed":{version:1},"mcp.websocket.authfailure":{version:1},"mcp.shadow.comparison":{version:1},"claudeai.mcp_app.client_not_found":{version:1,server_uuid:"",tool_name:"",tool_use_id:"",chat_message_uuid:""},"claudeai.mcp_app.error":{version:1,server_uuid:"",tool_name:"",tool_use_id:"",chat_message_uuid:"",error_message:""},"harmony.file.saved":{version:1},"harmony.suggestion.accepted":{version:1},"harmony.suggestion.rejected":{version:1},"hfi.comparative_model.selected":{version:1},"hfi.comparative_model.selection_cleared":{version:1},"hfi.comparative_model.streaming.started":{version:1},"hfi.comparative_model.streaming.finished":{version:1},"hfi.comparative_model.feedback_bar.switch_response.clicked":{version:1},"hfi.comparative_model.feedback_bar.prefer_response.clicked":{version:1},"apps.download_button_clicked":{version:2},"apps.nudge_banner_shown":{version:1},"apps.nudge_banner_clicked":{version:1},"apps.harmony_directory_synced":{version:1},"console.onboarding.name_and_legal.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.name_and_legal.submitted":{version:1,data_team_tag:"onboarding_funnel"},"tengu.waitlist.update":{version:1},"tengu.waitlist.details":{version:1},"oauth.authorize.approved":{version:1},"oauth.authorize.denied":{version:1},"oauth.authorize.success":{version:1},"oauth.authorize.failure":{version:1},"sheets.oauth_error.upgrade_clicked":{version:1},"console.onboarding.account_type.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.individual_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.organization_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.submitted":{version:1,data_team_tag:"onboarding_funnel"},"console.navigation.nav_item.clicked":{version:1},"console.get_help.clicked":{version:1},"console.login.code.chat_account_link_clicked":{version:1},"console.login.page_viewed":{version:1},"console.environment_profiles.list.viewed":{version:1},"console.environment_profiles.create_modal.opened":{version:1},"console.environment_profiles.created":{version:1},"console.environment_profiles.create_error":{version:1},"console.environment_profiles.detail.viewed":{version:1},"console.environment_profiles.updated":{version:1},"console.environment_profiles.update_error":{version:1},"console.environment_profiles.archived":{version:1},"console.environment_profiles.archive_error":{version:1},"console.environment_profiles.deleted":{version:1},"console.environment_profiles.delete_error":{version:1},"console.environment_profiles.filter.changed":{version:1},"console.environment_profiles.token.generated":{version:1},"console.environment_profiles.token.revoked":{version:1},"console.docs.page_viewed":{version:1},"login.account.created":{version:1},"login.email.sending_magic_link":{version:1},"login.email.magic_link_sent":{version:1},"login.email.magic_link_send_error":{version:1},"login.email.verifying_magic_link":{version:1},"login.email.magic_link_success":{version:1},"login.email.magic_link_verification_error":{version:1},"login.email.sso_initiated":{version:1},"login.email.sso_success":{version:1},"login.email.sso_verifying_callback":{version:1},"login.email.sso_verification_error":{version:1},"login.email.verifying_code":{version:1},"login.email.code_verification_error":{version:1},"login.email.finished":{version:1},"login.google.started":{version:1},"login.google.error":{version:1},"login.google.verifying":{version:1},"login.google.verification_error":{version:1},"login.google.finished":{version:1},"login.email.error":{version:1},"landing.section.features.viewed":{version:1},"landing.section.pricing.viewed":{version:1},"spotlight.shown":{version:1},"spotlight.dismissed":{version:1},"spotlight.action_clicked":{version:1},"claudeai.conversation.citation_clicked":{version:1},"claudeai.in_chat_upsell.connect_gdrive.displayed":{version:1},"claudeai.in_chat_upsell.connect_gdrive.start":{version:1},"claudeai.in_chat_upsell.dismiss":{version:1},"claudeai.cardamom_prompts.category_displayed":{version:1},"claudeai.cardamom_prompts.prompt_displayed":{version:1},"claudeai.cardamom_prompts.prompt_used":{version:1},"claudeai.skills_prompts.prompt_used":{version:1},"claudeai.skills_prompts.skill_enable_modal_shown":{version:1},"claudeai.skills_prompts.skill_enable_modal_canceled":{version:1},"claudeai.memory_themes.themes_displayed":{version:1},"claudeai.memory_themes.theme_used":{version:1},"claudeai.yukon_gold.mode_selected":{version:1},"claudeai.yukon_gold.mode_removed":{version:1},"claudeai.yukon_gold.skill_selected":{version:1},"claudeai.yukon_gold.skill_removed":{version:1},"claudeai.yukon_gold.browse_more_opened":{version:1},"claudeai.yukon_gold.browse_more_skill_selected":{version:1},"claudeai.yukon_gold.sub_option_changed":{version:1},"claudeai.memory_themes.fallback_triggered":{version:1},"claudeai.memory.org_setting_toggled":{version:1},"claudeai.memory.account_setting_toggled":{version:1},"claudeai.memory.memory_reset":{version:1},"claudeai.memory.edit_modal_opened":{version:1},"claudeai.memory.edit_memory":{version:1},"claudeai.memory.skipped_spotlight_summary":{version:1},"claudeai.conversation_search.account_setting_toggled":{version:1},"claudeai.incognito_mode.toggled":{version:1},"claudeai.skills.file_save_skill.clicked":{version:1},"claudeai.skills.upload_failed":{version:1},"claudeai.skills.skill.toggled":{version:1},"claudeai.skills.skill.try_in_chat_clicked":{version:1},"claudeai.skills.skill.deleted":{version:1},"claudeai.skills.preview_modal.opened":{version:1},"claudeai.skills.tab_switched":{version:1},"claudeai.skills.add_skill.modal.opened":{version:1},"claudeai.skills.add_skill.with_claude.clicked":{version:1},"claudeai.skills.add_skill.quick_create.clicked":{version:1},"claudeai.skills.add_skill.upload.clicked":{version:1},"claudeai.skills.skill.quick_create.succeeded":{version:1},"claudeai.skills.skill.upload.succeeded":{version:1},"claudeai.skills.skill.downloaded":{version:1},"claudeai.skills.skill.replace_started":{version:1},"claudeai.skills.skill.edit_with_claude_clicked":{version:1},"artifactinlinefeedback.selection.clicked":{version:1},"claudeai.toast.shown":{version:1},"claudeai.toast.dismissed":{version:1},"claudeai.toast.cta_clicked":{version:1},"claudeai.claude_code_nudge.shown":{version:1},"claudeai.claude_code_nudge.dismissed":{version:1},"claudeai.claude_code_nudge.hovered":{version:1},"claudeai.claude_code_nudge.clicked":{version:1},"claudeai.promo.claude_code_banner.viewed":{version:1},"claudeai.promo.claude_code_banner.dismissed":{version:1},"claudeai.promo.claude_code_banner.join.clicked":{version:1},"claudeai.desktop_upsell_nudge.shown":{version:1},"claudeai.desktop_upsell_nudge.dismissed":{version:1},"claudeai.desktop_upsell_nudge.hovered":{version:1},"claudeai.desktop_upsell_nudge.clicked":{version:1},"claudeai.invite_contest.clicked":{version:1},"claudeai.invite_contest.dismissed":{version:1},"claudeai.notification.permission.request_started":{version:1},"claudeai.notification.permission.result":{version:1},"claudeai.notification.clicked":{version:1},"claudeai.pricing.plan_toggled":{version:1},"claudeai.pricing.max_plan_toggled":{version:1},"claudeai.pricing.promo_applied":{version:1},"claudeai.pricing.payment_modal.viewed":{version:1},"claudeai.pricing.payment_form_submitted":{version:1},"claudeai.pricing.payment_failed":{version:1},"claudeai.pricing.claude_code_tooltip.hovered":{version:1},"claudeai.pricing.claude_code_tooltip.learn_more.clicked":{version:1},"claudeai.teams.existing_subscription_warning_modal.viewed":{version:1},"claudeai.teams.name_entered":{version:1},"claudeai.login.resend_requested":{version:1},"claudeai.login.email_submitted":{version:1},desktop_dxt_installed:{version:1},"marketing.consent.updated":{version:1},"claudeai.upgrade.pro_page_viewed":{version:1},"claudeai.upgrade.max_page_viewed":{version:1},"claudeai.recordplayer.viewed":{version:1},"claudeai.recordplayer.sidebar.toggled":{version:1},"claudeai.recordplayer.session.created":{version:1},"claudeai.recordplayer.session.selected":{version:1},"claudeai.recordplayer.session.viewed":{version:1},"claudeai.recordplayer.prompt.submitted":{version:1},"claudeai.recordplayer.environment.selected":{version:1},"claudeai.recordplayer.elicitation.responded":{version:1},"claudeai.model_upsell.tooltip.viewed":{version:1},"claudeai.model_upsell.tooltip.clicked":{version:1},"claudeai.model_upsell.tooltip.dismissed":{version:1},"wiggle.file.created":{version:1},"wiggle.file.downloaded":{version:1},"wiggle.file.downloaded_all":{version:1},"wiggle.file.copy_to_clipboard":{version:1},"wiggle.file.add_to_project":{version:1},"wiggle.file.download_as_pdf":{version:1},"wiggle.file.share_artifact":{version:1},"wiggle.file.publish_artifact":{version:1},"wiggle.file.gdrive_export.attempted":{version:1},"wiggle.file.gdrive_export.success":{version:1},"wiggle.file.gdrive_export.failed":{version:1},"wiggle.gdrive.connection.modal_shown":{version:1},"wiggle.gdrive.connection.initiated":{version:1},"wiggle.gdrive.connection.success":{version:1},"wiggle_egress_spotlight.viewed":{version:1},"wiggle_egress_spotlight.toggle_changed":{version:1},"wiggle_egress_spotlight.cta_clicked":{version:1},"activity_panel.toggle_opened":{version:1},"activity_panel.toggle_closed":{version:1},"activity_panel.resource_opened":{version:1},"activity_panel.resource_closed":{version:1},"activity_panel.resources_appeared":{version:1},"activity_panel.todos_appeared":{version:1},"activity_panel.feedback":{version:1},"claudeai.plus_menu.opened":{version:1},"claudeai.plus_menu.screenshot_clicked":{version:1},"claudeai.slash_command_menu.opened":{version:1},"claudeai.slash_command_menu.item_selected":{version:1,item_label:"",item_type:""},"claude_code_install_page.get_started_clicked":{version:1},"claude_code_install_page.upgrade_clicked":{version:1},"claude_code_install_page.command_copied":{version:1},"claude_code_install_page.documentation_clicked":{version:1},"claude_code_install_page.advanced_setup_clicked":{version:1},"claude_code_install_page.troubleshooting_clicked":{version:1},"claude_code_install_page.done_clicked":{version:1},"claude_code_upgrade_page.viewed":{version:1},"claude_code_upgrade_page.upgrade_clicked":{version:1},grove_policy_viewed:{version:1},grove_policy_toggled:{version:1},grove_policy_submitted:{version:1},grove_policy_dismissed:{version:1},grove_policy_details_clicked:{version:1},"crochet.landing.page_viewed":{version:1},"crochet.install.page_viewed":{version:1},"crochet.landing.join_preview.clicked":{version:1},"crochet.landing.install_extension.clicked":{version:1},"crochet.landing.watch_demo.clicked":{version:1},"crochet.install.challenge.started":{version:1},"crochet.install.try_usecase.clicked":{version:1},"claudeai.user_facing_error.shown":{version:1},"claudeai.cumulative_error_count":{version:1,num_errors:!0},"claudeai.unhandled_error_code":{version:1},"claudeai.yukon_gold.enabled":{version:1},"claudeai.yukon_gold.prompt_clicked":{version:2},"claudeai.yukon_gold.nudge_clicked":{version:1},"claudeai.yukon_silver.select_folders.open":{version:1},"claudeai.haystack.page_viewed":{version:1},"claudeai.haystack.owner.landing.next.clicked":{version:1},"claudeai.haystack.owner.tools.next.clicked":{version:1},"claudeai.haystack.owner.name.next.clicked":{version:1},"claudeai.haystack.user.landing.next.clicked":{version:1},"claudeai.haystack.user.tool.skip.clicked":{version:1},"claudeai.haystack.user.request.clicked":{version:1},"claudeai.haystack.project.created":{version:1},"claudeai.haystack.project.creation_error":{version:1},"television.redirected_to_waitlist":{version:1},"television.redirected_from_waitlist":{version:1},"television.waitlist.viewed":{version:1},"television.cli_command_copied":{version:1},"television.claude_code_web_admin_toggle":{version:1},"claude_code_web.disabled.viewed":{version:1},"claude_code_web.disabled.cli_command_copied":{version:1},"claudeai.storage.error":{version:1},"claudeai.sidebar.state_set":{version:1},"claude_code_web.family_app.viewed":{version:1},"claude_code_web.family_app.cli_command.copied":{version:1},"claude_code_web.family_app.upgrade.clicked":{version:1},"claude_code_web.sidebar.code_clicked":{version:1},"claudeai.upgrade.enterprise_contact_sales.click":{version:1},"interview.modal.opened":{version:1},"interview.started":{version:1},"interview.message.sent":{version:1},"interview.completed":{version:1},"interview.dismissed":{version:1},"interview.modal.closed":{version:1},"interview.start.failed":{version:1},"interview.end.failed":{version:1},"claudeai.mcp_app.bridge_event":{version:1,server_uuid:"",tool_name:"",tool_use_id:"",chat_message_uuid:"",event_type:"",sandbox_url:""},"image_search.malformed_images":{version:1,conversation_uuid:"",malformed_count:0,valid_count:0},"image_search.image_clicked":{version:1,conversation_uuid:""},"docs.scroll.depth_reached":{version:1},"docs.time_on_page.milestone":{version:1},"docs.toc.clicked":{version:1},"docs.link.clicked":{version:1},"docs.code_block.copied":{version:1},"docs.nav.clicked":{version:1}};function jg(e,t,n){const r={..."undefined"!=typeof window?{userAgent:window.navigator?.userAgent,fbc:C.get(w.FBCLID),gclid:C.get(w.GOOGLE_GCL_AW),ttclid:C.get(w.TTCLID),rdt_cid:C.get(w.RDT_CID)}:{}};if(n&&(r.country=n),e?.email_address&&(r.email=e.email_address),r.is_personal_email=(e=>{if(!e)return"unknown";const t=e.split("@")[1]?.toLowerCase();return t?Zm.includes(t)?"personal":"work":"unknown"})(e?.email_address),e){r.account_created_at=Date.parse(e.created_at),r.account_uuid=e.uuid;const n=t||e.memberships?.[0]?.organization;if(n){r.organization_uuid=n.uuid,r.billing_type=n.billing_type;const e=(e=>{const t=e.capabilities;if(t.includes("api")&&t.includes("chat"))return"unknown";if(t.includes("api"))return t.includes("api_individual")?"api_individual":"api_team";if(t.includes("chat")){if(t.includes("raven")){const t=e.raven_type;return t?"enterprise"===t?"claude_enterprise":"claude_team":"unknown"}return t.includes("claude_max")?"claude_max":t.includes("claude_pro")?"claude_pro":"claude_free"}return"unknown"})(n),t=(e=>"default_claude_max_5x"===e.rate_limit_tier?"5x":"default_claude_max_20x"===e.rate_limit_tier?"20x":void 0)(n);r.org_type=e,r.subscription_plan="claude_max"===e&&t?`${e} ${t}`:e}}return r}const Eg={highlightedCitation:null,setHighlightedCitation:x.noop},Tg=de.createContext(Eg);function Ag({children:e,blockCitations:t}){const[n,r]=de.useState(null);return he.jsx(Tg.Provider,{value:{highlightedCitation:n,setHighlightedCitation:r,blockCitations:t},children:e})}function Lg({citations:e,citation:t,isOpen:n,setIsOpen:r,trackCitationClick:s,tagText:i,url:o}){return he.jsx(a,{tooltipContent:he.jsx(Rg,{citations:e,handleClick:s}),className:"!w-[337px]",open:n,onOpenChange:()=>r(e=>!e),contentStyle:"citation",side:"top",delayDuration:0,children:he.jsx("span",{className:"inline-flex",children:he.jsx(Dg,{isStreaming:!1,tagText:i,url:o,handleClick:()=>t&&s(t)})})})}const Og="undefined"!=typeof window&&window.self!==window.top?()=>({track:()=>Promise.resolve()}):()=>{const{analytics:e}=(()=>{const{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=Jm(),{requiresExplicitConsent:r,gpcStatus:s}=kg(),i=de.useCallback(()=>{Cg.reset()},[]);return{analytics:Cg.loadIfNecessary({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:r,gpcDetected:s.detected}),reset:i}})(),t=de.useContext(Mg),{preferences:n}=kg(),r=ri("log_segment_events"),s=(()=>{const e=ri("claude_ai_segment_enabled");return!Wm.NEXT_PUBLIC_EXCLUDE_SEGMENT&&e})(),i=de.useMemo(()=>r&&!Ng.NEXT_PUBLIC_EXCLUDE_SEGMENT,[r]),o=k.useSearchParams().has(S),{account:a,activeOrganization:l,isLoading:c}=(()=>{const e=de.useContext(Sg);if(!e)throw new Error("Must call inside CurrentAccountProvider");return e})(),u=(()=>{const{applicationType:e}=Jm();return"claude-dot"===e})(),{ipCountry:d}=Jm(),f=a?.uuid,m=l?.uuid,g=l?.billing_type,y=de.useRef([]),x=de.useRef(!1),v=c&&!x.current,b=de.useCallback(t=>e&&s&&(!(!t&&!a)||n.analytics),[e,s,a,n.analytics]),C=de.useCallback(e=>jg(e??a,l,d),[a,l,d]),w=de.useCallback(async(n,r)=>{if(v)return void y.current.push(()=>{w(n,r)});const{event_key:s,...a}=n,l={account_uuid:r?.uuid??f,organization_uuid:m,billing_type:g,surface:u?"claude-ai":"console",...o?{incognito_mode:!0}:null,..._g[s],...a},c={context:{traits:C(r)}};i&&h.info(p.SEGMENT_EVENT,`track: ${s}`,l,c),b(r)?(await(e?.track(s,l,c)),t?.track(s,l,c)):i&&h.info(p.SEGMENT_EVENT,`DROPPED track: ${s} (shouldSendToSegment=false)`)},[e,t,f,m,g,u,i,b,C,o,v]),M=de.useCallback(async(n,r)=>{i&&h.info(p.SEGMENT_EVENT,`identify: ${n}`,r),b()&&(await(e?.identify(n,r)),t?.identify(n,r))},[e,t,b,i]),N=de.useCallback(async(t,n)=>{i&&h.info(p.SEGMENT_EVENT,`alias: ${n} -> ${t}`),b()&&await(e?.alias(t,n))},[e,b,i]),_=de.useCallback(async(t,n)=>{if(v)return void y.current.push(()=>{_(t,n)});if(i&&h.info(p.SEGMENT_EVENT,`page_view: ${t}`,n),!b())return;const r=(await(e?.user()))?.id()??void 0,s=a?.uuid??void 0;s&&r!==s||await(e?.page(t,n))},[e,b,a,i,v]);de.useEffect(()=>{const e=e=>{if(y.current.length>0&&!x.current){const t=[...y.current];y.current=[],x.current=!0,i&&h.info(p.SEGMENT_EVENT,`Flushing ${t.length} queued events (${e})`),t.forEach(e=>e())}};if(!c)return void e("loaded");const t=setTimeout(()=>e("timeout"),5e3);return()=>clearTimeout(t)},[c,i]);return de.useMemo(()=>({track:w,identify:M,page:_,alias:N,getTraitsWithContext:C}),[w,M,_,N,C])};function Ig({citationUuids:e,messageUuid:t}){const n=!1,[r,s]=de.useState(!1),i=m(),{blockCitations:o}=de.useContext(Tg),l=function(e,t){return e.map(e=>t?.find(t=>t.uuid===e)).filter(e=>!!e&&"metadata"in e)}(e,o),c=e=>{switch(e.metadata.type){case"webpage_metadata":return e.metadata.site_name??i.formatMessage({defaultMessage:"Untitled",id:"3kbIhS7KZS"});case"google_doc_metadata":return i.formatMessage({defaultMessage:"Google Doc",id:"7qYF66c9/s"});default:return e.title}},u=Og(),d=de.useCallback(e=>{let n,r;"google_doc_metadata"===e.metadata.type?(n="drive_search",r=""):"webpage_metadata"===e.metadata.type?(n="web_search",r=e.metadata.site_domain):(n=e.origin_tool_name??e.metadata.source,r=""),u.track({event_key:"claudeai.conversation.citation_clicked",messageUuid:t,citationSourceTool:n,webDomainName:r})},[u,t]);if(!l.length)return null;if(1===l.length&&l[0].sources&&l[0].sources.length>0){const e=l[0],t=e.sources?.map(t=>function(e,t,n){return{uuid:e.uuid,title:e.title,url:e.url,metadata:{type:"generic_metadata",uuid:e.uuid,icon_url:e.icon_url,preview_title:e.title,source:e.source??""},origin_tool_name:null,start_index:t,end_index:n??0}}(t,e.start_index,e.end_index))||[];return he.jsx(Lg,{citations:t,citation:e,isStreaming:n,isOpen:r,setIsOpen:s,trackCitationClick:d,tagText:c(e),url:e.url})}if(l.length>=3){const e=l[0];return he.jsx(Lg,{citations:l,citation:e,isStreaming:n,isOpen:r,setIsOpen:s,trackCitationClick:d,tagText:`${c(e)} + ${l.length-1}`,url:e.url})}return l.map((e,t)=>he.jsxs(de.Fragment,{children:[t>0&&he.jsx("span",{className:"inline-flex w-1"}),he.jsx(a,{tooltipContent:he.jsx(Pg,{citation:e,handleClick:d}),className:"!max-w-[310px]",open:void 0,contentStyle:"citation",side:"top",delayDuration:0,children:he.jsx("span",{className:"inline-flex",children:he.jsx(Dg,{tagText:c(e),url:e.url,isStreaming:n,handleClick:()=>d(e)})})})]},e.uuid))}const Dg=({tagText:e,url:n,isStreaming:r,handleClick:s})=>{const i="group/tag relative h-[18px] rounded-full inline-flex items-center overflow-hidden -translate-y-px",o=he.jsxs(he.Fragment,{children:[he.jsx("span",{className:t("relative transition-colors h-full max-w-[180px] overflow-hidden px-1.5 inline-flex items-center font-small rounded-full border-0.5 border-border-300 bg-bg-200",!!n&&!r&&"group-hover/tag:bg-accent-secondary-900 group-hover/tag:border-accent-secondary-100/60"),children:he.jsx("span",{className:t("text-nowrap text-text-300 break-all truncate font-normal",!r&&"group-hover/tag:text-text-200"),children:e})}),!!n&&he.jsx("span",{className:t("transition-all opacity-[0%] h-[17px] absolute right-[0.5px] inline rounded-r-full flex items-center px-1.5 bg-gradient-to-r from-accent-secondary-900/0 via-accent-secondary-900/100 via-30% to-accent-secondary-900/100",!r&&"group-hover/tag:opacity-[100%]"),children:he.jsx(Mm,{size:14,className:"transition-all group-hover/tag:ease-out duration-[500ms] ease-in text-accent-secondary-100 group-hover/tag:scale-[100%] scale-[80%] group-hover/tag:opacity-[100%] opacity-[0%] -mr-[2px]"})})]});return n?he.jsx("a",{href:n,target:"_blank",className:t(i,"cursor-pointer"),onClick:s,children:o}):he.jsx("button",{className:t(i,"cursor-default"),children:o})};function Rg({citations:e,handleClick:t}){const n=e.filter(e=>!!e.url),r=e.filter(e=>!e.url);return he.jsxs("div",{className:"flex flex-col p-1 gap-0.5",children:[n.map(e=>he.jsx(Pg,{citation:e,handleClick:t,isHoverable:!0},e.uuid)),n.length>0&&r.length>0&&he.jsx("div",{className:"w-full border-t-0.5 border-border-300 h-0 min-h-0 my-2"}),r.map(e=>he.jsx(Pg,{citation:e,handleClick:t,isHoverable:!0},e.uuid))]})}function Pg({citation:e,handleClick:n,isHoverable:r}){let s,i,o;switch(e.metadata.type){case"webpage_metadata":s=he.jsx(Ot,{url:e.metadata.favicon_url,size:12}),i=e.metadata.site_name,o=e.title;break;case"google_doc_metadata":s=he.jsx(At,{size:14,variant:Lt.DOCS}),i=he.jsx(u,{defaultMessage:"Google Doc",id:"7qYF66c9/s"}),o=e.title;break;default:{const t=he.jsx(Et,{size:14,letter:e.metadata.source});s=e.metadata.icon_url?he.jsx(Tt,{style:{maxWidth:14,maxHeight:14},className:"object-contain",width:14,height:14,src:e.metadata.icon_url,fallbackSvg:t,alt:"favicon"}):t,i=e.metadata.source,o=e.metadata.preview_title}}const a=he.jsxs(he.Fragment,{children:[he.jsx("h3",{className:"font-base-bold",children:o}),he.jsxs("span",{className:"flex flex-row items-center gap-1 text-text-500 font-small",children:[s,he.jsx("p",{className:"!text-[0.6875rem]",children:i})]})]});return e.url?he.jsx("a",{href:e.url??"",target:"_blank",className:t("transition-all flex flex-col gap-1 px-2 py-1.5 rounded-md",r&&"hover:border-transparent hover:bg-bg-300"),onClick:()=>n(e),children:a}):he.jsx("div",{className:"transition-all flex flex-col gap-1 px-2 py-1.5 rounded-md cursor-default",children:a})}const zg=de.memo(({isOpen:e,onClose:t,onConfirm:n,title:r,message:s,confirmText:i="Confirm",cancelText:o="Cancel",variant:a="primary",isLoading:c,disabled:u=!1,autoFocus:d=!0,testId:h,children:p,size:f="sm"})=>{const[m,g]=de.useState(!1),y=c??m,x=de.useCallback(async()=>{if(!u&&!y){g(!0);try{const e=n();e&&"function"==typeof e.then&&await e,t()}finally{g(!1)}}},[n,t,u,y]),v=de.useCallback(()=>{y||t()},[t,y]);return he.jsxs(M,{isOpen:e,onClose:v,title:r,modalSize:f,closeOnEscapeKeydown:!y,children:[he.jsxs("div",{className:"mt-1 mb-2",children:[s&&he.jsx("div",{className:"text-text-300 whitespace-pre-line",children:s}),p]}),he.jsxs(N,{children:[he.jsx(l,{variant:"secondary",onClick:v,disabled:y,children:o}),he.jsx(l,{variant:"danger"===a?"danger":"primary",onClick:x,disabled:u||y,loading:y,autoFocus:d,"data-testid":h||"confirmation-modal-confirm",children:i})]})]})});zg.displayName="ConfirmationModal";const Fg=({isOpen:e=!1,url:t,onClose:n,onConfirm:r})=>{const s=m(),i=s.formatMessage({defaultMessage:"Open external link",id:"cSp9Qor4f4"}),o=s.formatMessage({defaultMessage:"You're leaving Claude to visit an external link:",id:"syL/4bL0LR"}),a=s.formatMessage({defaultMessage:"Open link",id:"YtFTtANjPw"}),l=s.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),c=s.formatMessage({defaultMessage:"This link contains an internationalized domain name that may be deceptive. The domain appears as:",id:"n2uO4zTmwR"}),u=de.useMemo(()=>function(e){try{const t=new URL(e);return t.hostname.split(".").some(e=>e.toLowerCase().startsWith("xn--"))?{hasPunycode:!0,decodedHostname:Un(t.hostname)}:{hasPunycode:!1,decodedHostname:null}}catch{return{hasPunycode:!1,decodedHostname:null}}}(t),[t]),d=de.useMemo(()=>function(e){try{return new URL(e).href}catch{return e}}(t),[t]);return he.jsxs(zg,{isOpen:e,title:i,message:o,size:"md",confirmText:a,cancelText:l,onClose:n,onConfirm:r,autoFocus:!0,children:[he.jsx("div",{className:"break-all bg-bg-000 border-0.5 border-border-300 rounded-lg text-text-100 max-h-40 overflow-y-scroll py-3 px-4 mt-3",children:d}),u.hasPunycode&&he.jsx("div",{className:"mt-3 p-3 bg-danger-900 border-0.5 border-danger-200 rounded-lg",children:he.jsxs("div",{className:"flex items-start gap-2",children:[he.jsx(_,{size:16,className:"text-danger-000 mt-0.5 flex-shrink-0"}),he.jsxs("div",{className:"text-sm text-danger-000",children:[he.jsx("p",{className:"font-medium",children:c}),he.jsx("p",{className:"mt-1 font-mono break-all",children:u.decodedHostname})]})]})})]})},Hg=de.memo(({text:e,blockCitations:n=[],onLinkDetected:r,onCodeDetected:s,normalizationMode:i="code-in-markdown",hasLinkRef:o,hasCodeRef:a,className:l,linkTarget:c="_blank",isStreaming:u=!1,flagShowCodeHeader:d,unsafeAllowNavigationWithoutConfirmation:h,onOpenArtifact:p,isLastMessage:f,messageUuid:m,onLinkClick:g,chatUiCore:y=!1})=>{const x=de.useRef(null),v=!0;de.useEffect(()=>{const e=e=>{const t=window.getSelection();if(t&&x.current?.contains(t.anchorNode)){const n=t.getRangeAt(0).cloneContents(),r=document.createElement("div");r.appendChild(n);const s=r.getElementsByTagName("*");for(const e of s)e.removeAttribute("color"),e.removeAttribute("fontFamily");e.clipboardData?.setData("text/html",r.innerHTML),e.clipboardData?.setData("text/plain",r.textContent||""),e.preventDefault()}};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]);const b=!!p,{remarkMath:C,rehypeKatex:w,inHouseLatexPlugin:k}=(()=>{const[e,t]=de.useState({remarkMath:void 0,rehypeKatex:void 0,inHouseLatexPlugin:Wa});return de.useEffect(()=>{(async()=>{const[e,n]=await Promise.all([ye(()=>import("./index-4VhcIbAZ.js"),__vite__mapDeps([2,3,1,4,5,6,7,8,9,10])),ye(()=>import("./index-B7-_3Ura.js"),__vite__mapDeps([11,3,1,4,5,6,7,8,9,10]))]);t({remarkMath:e.default,rehypeKatex:n.default,inHouseLatexPlugin:Wa})})()},[]),e})(),S=ri("claudeai_disable_markdown_backslash_escaping"),M=de.useMemo(()=>{let t=function(e){return e.replace(/(^|\n)(\s?)•(\s?)/g,"$1$2- ")}(e);return S||(t=function(e){return e.replace(/\\/g,"\\\\")}(t)),t=function(e,t="markdown-document"){const n=e.indexOf("```");if(-1===n||-1===e.indexOf("```",n+3))return e;const r=[...e.matchAll(/^(\s*)(```+)(.*)$/gm)];if(0===r.length)return e;const s=new Map,i=e=>{let t=s.get(e);return void 0===t&&(t="`".repeat(e),s.set(e,t)),t},o=[];for(const f of r){const[e,t,n,r]=f,s=f.index??0;o.push({index:s,length:e.length,backtickCount:n.length,indent:t,info:r.trim(),depth:0})}const a=[];for(let f=0;f<o.length;f++){const e=o[f];if(""!==e.info){e.depth=a.length,a.push(f);continue}if(0===a.length){e.depth=0,a.push(f);continue}const n=o[a[a.length-1]];if(e.backtickCount<n.backtickCount){e.depth=a.length,a.push(f);continue}let r=!0;if("code-in-markdown"===t&&1===a.length&&""!==n.info){let t=-1;for(let n=f+1;n<o.length&&""===o[n].info;n++)if(o[n].backtickCount===e.backtickCount){t=n;break}if(-1!==t)for(let e=t+1;e<o.length;e++)if(o[e].backtickCount>=n.backtickCount){r=!1;break}}r?(e.depth=a.length-1,n.closingFenceIndex=f,a.pop()):(e.depth=a.length,a.push(f))}const l=new Map;let c=0;for(const f of o){const e=l.get(f.depth)||3;l.set(f.depth,Math.max(e,f.backtickCount)),c=Math.max(c,f.depth)}for(let f=c-1;f>=0;f--){const e=l.get(f)||3,t=l.get(f+1)||0;t>=e&&l.set(f,t+1)}const u=new Map;for(const f of o){const e=l.get(f.depth)||3;if(e>f.backtickCount&&u.set(f.index,{index:f.index,length:f.length,replacement:`${f.indent}${i(e)}${f.info}`}),void 0!==f.closingFenceIndex){const t=o[f.closingFenceIndex];t.backtickCount!==e&&u.set(t.index,{index:t.index,length:t.length,replacement:`${t.indent}${i(e)}`})}}if(0===u.size)return e;if(1===u.size){const[{index:t,length:n,replacement:r}]=u.values();return e.slice(0,t)+r+e.slice(t+n)}const d=Array.from(u.values()).sort((e,t)=>e.index-t.index),h=[];let p=0;for(const{index:f,length:m,replacement:g}of d)h.push(e.slice(p,f)),h.push(g),p=f+m;return h.push(e.slice(p)),h.join("")}(t,i),t=t.replace(/^(\s*)(```+)/gm,"$2"),t},[e,S,i]),N=de.useMemo(()=>({h1:({node:e,children:t,...n})=>he.jsx("h1",{className:y?"text-text-100 mt-3 -mb-1 text-[1.375rem] font-bold":"font-claude-response-title mt-1 text-text-100",...n,children:Ro(t)}),h2:({node:e,children:t,...n})=>he.jsx("h2",{className:y?"text-text-100 mt-3 -mb-1 text-[1.125rem] font-bold":"font-claude-response-heading text-text-100 mt-1 -mb-0.5",...n,children:Ro(t)}),h3:({node:e,children:t,...n})=>he.jsx("h3",{className:y?"text-text-100 mt-2 -mb-1 text-base font-bold":"font-claude-response-subheading text-text-100 mt-1 -mb-1.5",...n,children:Ro(t)}),h4:({node:e,children:t,...n})=>he.jsx("h4",{className:y?"text-text-100 mt-2 -mb-1 text-base font-bold":"font-claude-response-body-bold text-text-100 mt-1",...n,children:Ro(t)}),p:({node:e,children:t,...n})=>{const r=de.Children.toArray(t),s=y?"leading-[1.7]":"",i=1===r.length&&"string"==typeof r[0]&&r[0].includes("\n")?"whitespace-pre-wrap":"whitespace-normal";return he.jsx(Ao.p,{className:`font-claude-response-body break-words ${i} ${s}`,...n,children:Ro(t)})},blockquote:({node:e,children:t,...n})=>he.jsx("blockquote",{className:y?"ml-2 border-l-4 border-border-300/10 pl-4 text-text-300":"border-border-200 border-l-4 pl-4",...n,children:Ro(t)}),li:({node:e,children:t,...n})=>he.jsx("li",{className:y?"whitespace-normal break-words pl-2":"whitespace-normal break-words",...n,children:Ro(t)}),ul:({node:e,...t})=>he.jsx("ul",{className:y?"[li_&]:mb-0 [li_&]:mt-1 [li_&]:gap-1 [&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-disc flex flex-col gap-1 pl-8 mb-3":"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-disc space-y-2.5 pl-7",...t}),ol:({node:e,...t})=>he.jsx("ol",{className:y?"[li_&]:mb-0 [li_&]:mt-1 [li_&]:gap-1 [&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-decimal flex flex-col gap-1 pl-8 mb-3":"[&:not(:last-child)_ul]:pb-1 [&:not(:last-child)_ol]:pb-1 list-decimal space-y-2.5 pl-7",...t}),img:({node:e,...t})=>h?he.jsx("img",{...t}):he.jsx(Vg,{...t}),pre({node:e,children:t,...n}){s&&queueMicrotask(()=>s()),a&&(a.current=!0);const r=de.Children.only(t);if(de.isValidElement(r)){const e=de.Children.toArray(r.props.children);if(1===e.length){const t=e[0];if("string"==typeof t)return he.jsx(Ao.pre,{...n,...r.props,flagShowCodeHeader:d,children:t})}}return u||Js(new Error("Unexpected <pre> in markdown that did not contain <code> with single string child")),he.jsx("pre",{...n,children:t})},code({node:e,...n}){const r=de.Children.toArray(n.children)[0];return"string"==typeof r&&r===r.trim()&&Lo.test(r)&&r.match(Lo)?.[0]===r?he.jsxs(Ao.code,{...n,className:t(n.className,"inline-flex items-center h-5"),children:[he.jsx(Oo,{color:r}),r]}):he.jsx(Ao.code,{...n})},a({node:e,...t}){r&&queueMicrotask(()=>r()),o&&(o.current=!0);const n=e=>{g&&t.href&&g(e,t.href)},s=y?"underline underline-offset-2 decoration-1 decoration-current/40 hover:decoration-current focus:decoration-current":void 0;return h?he.jsx("a",{target:c,className:s,...t,onClick:n}):he.jsx($g,{linkTarget:c,className:s,...t,onLinkClick:n})},table:({node:e,...t})=>y?he.jsx("div",{className:"overflow-x-auto w-full px-2 mb-6",children:he.jsx("table",{className:"min-w-full border-collapse text-sm leading-[1.7] whitespace-normal",...t})}):he.jsx("pre",{className:"font-ui border-border-100/50 overflow-x-scroll w-full rounded border-[0.5px] shadow-[0_2px_12px_hsl(var(--always-black)/5%)]",children:he.jsx("table",{className:"bg-bg-100 min-w-full border-separate border-spacing-0 text-sm leading-[1.88888] whitespace-normal",...t})}),thead:({node:e,...t})=>he.jsx("thead",{className:"text-left",...t}),tr:({node:e,...t})=>he.jsx("tr",{...t}),td({node:e,children:t,...n}){const r=Ua(t);return he.jsx("td",{className:y?"border-b-0.5 border-border-300/30 py-2 pr-4 align-top":"border-t-border-100/50 [&:not(:first-child)]:-x-[hsla(var(--border-100)/0.5)] border-t-[0.5px] px-2 [&:not(:first-child)]:border-l-[0.5px]",...n,children:Ro(r)})},th({node:e,children:t,...n}){const r=Ua(t);return he.jsx("th",{className:y?"text-text-100 border-b-0.5 border-border-300/60 py-2 pr-4 align-top font-bold":"text-text-000 [&:not(:first-child)]:-x-[hsla(var(--border-100)/0.5)] px-2 [&:not(:first-child)]:border-l-[0.5px]",...n,children:Ro(r)})},hr:({node:e,...t})=>he.jsx("hr",{className:y?"border-border-200 border-t-0.5 my-3 mx-1.5":"border-border-300 my-4",...t}),artifactComponent:({node:e})=>he.jsx(Bm,{properties:e.properties,isStreaming:u,isLastMessage:f,onOpenArtifact:p}),[Ks]:({node:e,...t})=>he.jsx(Ig,{...t,isStreaming:u,citationUuids:e.properties.citationUuids,messageUuid:m})}),[y,v,h,s,a,u,d,r,o,c,g,f,p,m]),_=de.useMemo(()=>{const e=[hm,Za];return b&&e.push(Ba),C&&e.push(k),e.push(vp),e.push(Xs),e},[b,C,v,k]),j=de.useMemo(()=>{const e=[];return w&&e.push([w,{errorColor:"inherit"}]),e},[w]);return he.jsx("div",{ref:x,children:he.jsx(Ag,{blockCitations:n,children:he.jsx(jh,{className:t("standard-markdown grid-cols-1 grid gap-3 [&_>_*]:min-w-0",l),remarkPlugins:_,rehypePlugins:j,components:N,urlTransform:(e,t,n)=>{if("img"===n.tagName&&"src"===t)return e;if("a"!==n.tagName||"href"!==t)return;return e.startsWith("computer://"),e},children:M})})})});Hg.displayName="StandardMarkDown";const Vg=({src:e,...t})=>{const[n,r]=de.useState(!1);if(!e||"string"!=typeof e)return he.jsx("img",{...t,src:e});const s=()=>{window.open(e,"_blank")};return he.jsxs(he.Fragment,{children:[he.jsx("button",{onClick:e=>{e.shiftKey||e.ctrlKey||e.metaKey?s():r(!0)},className:"bg-bg-300 border-border-300 font-ui text-text-300 inline-block grid h-32 w-40 items-center justify-items-center rounded-xl border p-4",children:he.jsx(u,{defaultMessage:"Show Image",id:"eFsJ8k8yFm"})}),he.jsx(Fg,{isOpen:n,url:e,onClose:()=>r(!1),onConfirm:()=>{s(),r(!1)}})]})},$g=({linkTarget:e,href:n,className:r,onLinkClick:s,...i})=>{const[o,a]=de.useState(!1),l=()=>{window.open(n,e)};if(!n)return he.jsx("a",{...i});const c=(e=>{try{if(e.startsWith("/"))return!0;const t=new URL(e),n="undefined"!=typeof window?window.location.origin:"";return t.origin===n}catch{return!1}})(n);return he.jsxs(he.Fragment,{children:[he.jsx("a",{className:t("underline",r),onClick:e=>{if(!(s&&(s(e),e.defaultPrevented)||c)){if(e.shiftKey||e.ctrlKey||e.metaKey)return e.preventDefault(),void l();e.preventDefault(),a(!0)}},href:n,...i}),he.jsx(Fg,{isOpen:o,url:n,onClose:()=>a(!1),onConfirm:()=>{l(),a(!1)}})]})};const Bg=de.memo(function({text:e,variant:t="assistant",onComputerFileClick:n}){const r=de.useCallback((e,t)=>{if(t?.startsWith("computer://")&&n){e.preventDefault();const r=t.replace("computer://","");n(r)}},[n]);return"user"===t?he.jsx("div",{className:"font-base",children:he.jsx(Pa,{text:e})}):he.jsx("div",{className:"font-claude-response text-sm leading-[1.65rem] text-text-100 [&_a]:!underline [&_a]:text-accent-main-100 [&_p]:!text-sm [&_p]:text-text-100 [&_ul]:text-sm [&_ol]:text-sm",children:he.jsx(Hg,{text:e,className:"[&_>_*]:min-w-0",onLinkClick:r})})}),Ug=e=>he.jsx(j,{...e,children:he.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.56055 2C11.1381 2.00009 12.3211 3.44332 12.0117 4.99023L11.6094 7H13.8438C15.5431 7 16.836 8.52594 16.5566 10.2021L15.876 14.2842C15.6148 15.8513 14.2586 17 12.6699 17H4.5C3.67157 17 3 16.3284 3 15.5V9.23828C3.00013 8.57996 3.4294 7.99838 4.05859 7.80469L5.19824 7.4541L5.33789 7.40723C6.02983 7.15302 6.59327 6.63008 6.89746 5.9541L8.41113 2.58984L8.48047 2.46094C8.66235 2.17643 8.97898 2.00002 9.32324 2H9.56055Z"})}),Zg=e=>he.jsx(j,{...e,children:he.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.56055 17C11.1381 16.9999 12.3211 15.5567 12.0117 14.0098L11.6094 12H13.8438C15.5431 12 16.836 10.4741 16.5566 8.79785L15.876 4.71582C15.6148 3.14873 14.2586 2 12.6699 2H4.5C3.67157 2 3 2.67157 3 3.5V9.76172C3.00013 10.42 3.4294 11.0016 4.05859 11.1953L5.19824 11.5459L5.33789 11.5928C6.02983 11.847 6.59327 12.3699 6.89746 13.0459L8.41113 16.4102L8.48047 16.5391C8.66235 16.8236 8.97898 17 9.32324 17H9.56055Z"})}),Wg=/\[\[shortcut:([^:]+):([^\]]+)\]\]/g;async function qg(e){if(!e.some(e=>"string"==typeof e.content?e.content.includes("[[shortcut:"):!!Array.isArray(e.content)&&e.content.some(e=>"object"==typeof e&&null!==e&&"type"in e&&"text"===e.type&&"text"in e&&"string"==typeof e.text&&e.text.includes("[[shortcut:"))))return e;const t=await be.getAllPrompts(),n=new Map(t.map(e=>[e.id,e]));return Promise.all(e.map(async e=>{if("string"==typeof e.content)return{...e,content:Gg(e.content,n)};if(Array.isArray(e.content)){const t=e.content.map(e=>"object"==typeof e&&null!==e&&"type"in e&&"text"===e.type&&"text"in e&&"string"==typeof e.text?{...e,text:Gg(e.text,n)}:e);return{...e,content:t}}return e}))}function Gg(e,t){return e.includes("[[shortcut:")?e.replace(Wg,(e,n,r)=>{const s=t.get(n);return s?.prompt?s.prompt:`/${r}`}):e}const Jg=e=>!!["tool_use","tool_result"].includes(e.type),Kg=e=>"tool_result"!==e.type,Yg=.2,Qg=.15,Xg=.3,ey=.5,ty=.2,ny={EASE_OUT:"easeOut",EASE_IN:"easeIn",SNAPPY_OUT:[.19,1,.22,1]},ry="duration-150",sy=de.createContext({}),iy=()=>de.useContext(sy),oy=e=>{const[t,n]=de.useState(void 0),r=de.useMemo(()=>({expandedItemKey:t,setExpandedItemKey:n,hasCollapseHeader:e.hasCollapseHeader,variant:e.variant}),[t,n,e.hasCollapseHeader,e.variant]);return he.jsx(sy.Provider,{value:r,children:e.children})};var ay=(e=>(e.Standard="Standard",e.TimelineGroup="TimelineGroup",e))(ay||{});const ly=({color:e="default",size:n="default",children:r,className:s,uppercase:i})=>he.jsx("span",{className:t("inline-flex items-center align-middle leading-none flex-shrink-0","default"===e&&"bg-gradient-to-bl  from-bg-500/30  to-bg-500/70 text-text-300","flat"===e&&"bg-bg-500/40 text-text-200","secondary"===e&&"bg-accent-secondary-900/40 text-accent-secondary-200","pro"===e&&"bg-gradient-to-bl  from-accent-pro-200  to-accent-pro-100  text-oncolor-100","main"===e&&"bg-gradient-to-bl  from-accent-main-200/70  to-accent-main-100  text-oncolor-100","danger"===e&&"bg-danger-900 text-danger-200","default"===n&&"h-5 px-1.5 rounded-md text-[0.625rem]","sm"===n&&"h-4 px-1 rounded text-[0.625rem]","lg"===n&&"h-6 px-2 rounded-lg text-xs",i&&"uppercase",s),children:r}),cy=de.forwardRef(({className:e,children:t,disabled:n,noDefaultScroll:r,initialScrollState:s,onScrollChange:i},o)=>{const a=de.useRef(s?.scrollTop??0),l=de.useRef(s?.isPinned??!0),c=de.useRef(!1),u=de.useRef(null),d=de.useCallback((e="auto")=>{u.current&&l.current&&(u.current.scrollHeight-u.current.clientHeight<u.current.scrollTop||u.current&&"function"==typeof u.current.scrollTo&&u.current?.scrollTo({top:u.current?.scrollHeight-u.current?.clientHeight+5,behavior:e}))},[]),h=de.useCallback(e=>{u.current&&u.current&&"function"==typeof u.current.scrollTo&&(u.current.style.overflow="hidden",u.current?.scrollTo({top:u.current?.scrollHeight*e-u.current?.clientHeight/2,behavior:"auto"}))},[]),p=de.useCallback(()=>{u.current&&(u.current.style.overflow="")},[]);de.useImperativeHandle(o,()=>({reset(){a.current=0,l.current=!0,r||d()},scrollToBottomIfPinned:d,scrollToPercentage:h,enableScrolling:p,getScrollContainer:()=>u.current}),[d,h,p,r]),de.useLayoutEffect(()=>{if(!n&&t&&!r)if(s&&!c.current){if(!u.current)return;const e=u.current.scrollHeight-u.current.clientHeight;s.isPinned?e>0&&(c.current=!0,d()):e>=s.scrollTop&&(c.current=!0,u.current.scrollTo({top:s.scrollTop,behavior:"auto"}))}else d()},[t,n,d,r,s]);return he.jsx("div",{className:e,onScroll:e=>{if(n)return;const t=e.currentTarget.scrollTop,r=function(e,t){if(e){const n=e.scrollHeight-8;return Math.ceil(t+e.offsetHeight)>=Math.floor(n)}return!1}(u.current,t),s=t>a.current;r&&s?l.current=!0:r||s||(l.current=!1),a.current=t,i&&i({scrollTop:t,isPinned:l.current})},ref:u,children:t})});cy.displayName="AutoScroll";const uy=de.memo(({icon:e,header:n,isExpanded:r,isFirstItem:s,isLastItem:i,isActive:o,showDotFallback:a=!0,children:l})=>{const{hasCollapseHeader:c}=iy(),u=!c&&s;return he.jsxs(E.div,{initial:!1,animate:{opacity:1},transition:{opacity:{duration:Qg}},className:"flex flex-col shrink-0",children:[he.jsx("div",{className:"flex flex-row h-[8px]",children:he.jsx("div",{className:"w-[20px] flex justify-center",children:he.jsx("div",{className:t("w-[1px] h-full",ry,{"bg-border-300":!u})})})}),he.jsxs("div",{className:t("transition-colors rounded-lg",ry,{"bg-bg-000":r}),children:[n&&he.jsxs("div",{className:"flex flex-row items-center py-1",children:[he.jsx("div",{className:"w-[20px] flex justify-center shrink-0 text-text-500",children:e??(a&&he.jsx("div",{className:"size-[8px] rounded-full bg-border-100 mt-0.5"}))}),he.jsx("div",{className:"flex-1 min-w-0",children:n})]}),l&&he.jsxs("div",{className:"flex flex-row",children:[he.jsx("div",{className:"w-[20px] flex justify-center shrink-0",children:n?he.jsx("div",{className:t("w-[1px] h-full",ry,{"bg-border-300":!i})}):he.jsxs("div",{className:"flex flex-col items-center pt-1",children:[e??(a&&he.jsx("div",{className:"size-[8px] rounded-full bg-border-100 mt-0.5"})),he.jsx("div",{className:t("w-[1px] flex-1 mt-1",ry,{"bg-border-300":!(a&&i)})})]})}),he.jsx("div",{className:"flex-1 min-w-0",children:l})]})]}),he.jsx("div",{className:"flex flex-row h-[8px]",children:he.jsx("div",{className:"w-[20px] flex justify-center",children:he.jsx("div",{className:t("w-[1px] h-full",ry,{"bg-border-300":!i})})})})]})},(e,t)=>e.isActive===t.isActive&&(!t.isActive&&(e.icon===t.icon&&e.header===t.header&&e.children===t.children&&e.isExpanded===t.isExpanded&&e.isFirstItem===t.isFirstItem&&e.isLastItem===t.isLastItem&&e.showDotFallback===t.showDotFallback)));uy.displayName="TimelineGroupItem";const dy=({isExpanded:e,children:n,className:r})=>he.jsx(E.div,{className:t("overflow-clip shrink-0",r),tabIndex:-1,initial:!1,animate:e?"expanded":"collapsed",variants:{expanded:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{ease:ny.SNAPPY_OUT,duration:Yg},style:{willChange:e?"height":"auto"},children:he.jsx("div",{className:"h-full",children:n})}),hy=de.memo(({handleClick:e,isDisabled:n,isExpanded:r,isStreaming:s,icon:i,text:o,secondaryText:a,isFirstBlockOfMessage:l,isLastBlockOfMessage:c,className:u,wrapperClassName:d,children:h,renderMode:p=ay.Standard,isFirstItemInGroup:f,isLastItemInGroup:m,secondaryElement:g,secondaryIcon:y,hideCaret:x})=>{const{variant:v="default"}=iy(),b=n||!e,C=he.jsxs("button",{onClick:b?void 0:e,className:t("group/row flex flex-row items-center rounded-lg px-2.5 w-full",g?"gap-2":"justify-between",p!==ay.TimelineGroup&&(g?"py-1":"py-2"),"todoList"===v?"text-text-500":"text-text-300",b?"!cursor-default":"cursor-pointer transition-colors duration-200 hover:text-text-200 hover:text-text-000",u),children:[he.jsxs("div",{className:"flex flex-row items-center gap-2 min-w-0 flex-1",children:[i&&p!==ay.TimelineGroup&&he.jsx("div",{className:"flex items-center justify-center text-text-500 shrink-0",children:i}),he.jsx("div",{className:t("text-sm text-text-500 text-left truncate",!g&&"w-0 flex-grow"),children:s?he.jsx(pm,{children:o}):o}),g&&he.jsx("div",{className:"flex items-center shrink-0 ml-2",children:g})]}),he.jsxs("div",{className:"flex flex-row items-center gap-1.5 shrink-0",children:[!!a&&he.jsx("p",{className:"pl-1 text-text-500 font-small shrink-0 whitespace-nowrap",children:a}),y&&he.jsx("span",{className:"inline-flex",children:y}),!b&&!x&&!y&&he.jsx("span",{className:t("inline-flex transition-transform",ry,r?"rotate-180":"rotate-0"),children:he.jsx(T,{className:"text-text-300",size:16})})]})]}),w=he.jsxs(he.Fragment,{children:[C,h]});return p===ay.TimelineGroup?he.jsx(uy,{icon:i,header:C,isExpanded:r,isFirstItem:!!f,isLastItem:!!m,isActive:s&&c&&m,showDotFallback:!1,children:h}):he.jsx(E.div,{initial:!1,animate:{opacity:1},transition:{duration:ey,ease:ny.EASE_IN},className:t("ease-out rounded-lg border-[0.5px] flex flex-col font-ui leading-normal my-3 border-border-300",!n&&!r&&"hover:bg-bg-200",l?"mt-2":"mt-3",c?"mb-2":"mb-3",r&&"bg-bg-000 shadow-sm",d),children:w})});hy.displayName="ToolUseRow";const py=de.memo(({isExpandingDisabled:e,setIsExpanded:t,...n})=>{const{isExpanded:r}=n,s=e;return he.jsx(hy,{...n,isDisabled:s,handleClick:s?void 0:()=>t(!r)})});py.displayName="CollapsibleToolUseRow";const fy=de.memo(({action:e,path:t,fileText:n,displayText:r,icon:s,iconSize:i=16,files:o,isStreaming:a,isComplete:l=!1,renderMode:c=ay.Standard,isFirstBlockOfMessage:u,isLastBlockOfMessage:d,isFirstItemInGroup:h,isLastItemInGroup:p,renderCode:f,handleClick:g})=>{const y=m(),x=t.split("/").pop()||t,v=(e=>({js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",rb:"ruby",java:"java",c:"c",cpp:"cpp",h:"c",hpp:"cpp",cs:"csharp",go:"go",rs:"rust",php:"php",swift:"swift",kt:"kotlin",scala:"scala",html:"html",css:"css",scss:"scss",less:"less",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",md:"markdown",sql:"sql",sh:"bash",bash:"bash",zsh:"bash",ps1:"powershell",dockerfile:"dockerfile"}[e.split(".").pop()?.toLowerCase()||""]||"text"))(t),b=r||((e,t,n,r)=>{switch(e){case"create":return n?r.formatMessage({defaultMessage:"Creating {fileName}",id:"cuaMuzr//N"},{fileName:t}):r.formatMessage({defaultMessage:"Created {fileName}",id:"5CvLCHBlfQ"},{fileName:t});case"read":return n?r.formatMessage({defaultMessage:"Reading {fileName}",id:"9fXfauBZpW"},{fileName:t}):r.formatMessage({defaultMessage:"Read {fileName}",id:"bApErctxyt"},{fileName:t});case"edit":return n?r.formatMessage({defaultMessage:"Editing {fileName}",id:"O2hMrU1FI9"},{fileName:t}):r.formatMessage({defaultMessage:"Edited {fileName}",id:"V+jPyROpXb"},{fileName:t});case"present":return n?r.formatMessage({defaultMessage:"Presenting file(s)...",id:"Lkp0F6AHBT"}):r.formatMessage({defaultMessage:"Presented file(s)",id:"YD+KHgvA3S"});case"skill":return n?r.formatMessage({defaultMessage:"Loading skill",id:"YBctaBAMh/"}):r.formatMessage({defaultMessage:"Loaded skill",id:"/ly4NRQA83"});default:return t}})(e,x,!(l||!a),y),C=s||((e,t,n=16)=>t.includes("SKILL.md")||"skill"===e?he.jsx(Sr,{size:n,className:"text-text-500"}):he.jsx(Hr,{size:n,className:"text-text-500"}))(e,t,i),w=n&&!l,k=a&&!l;return he.jsxs(hy,{icon:C,text:he.jsx("span",{className:"truncate",children:b}),isStreaming:k,hideCaret:!0,handleClick:g,renderMode:c,isFirstBlockOfMessage:u,isLastBlockOfMessage:d,isFirstItemInGroup:h,isLastItemInGroup:p,children:[("create"===e||"edit"===e)&&n&&he.jsx(A,{mode:"wait",initial:!1,children:l?he.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},className:"mx-2.5 mt-1",children:he.jsx("button",{onClick:g,className:"cursor-pointer transition-colors text-text-500 hover:text-text-200",children:he.jsx(ly,{color:"flat",size:"default",className:"!text-inherit",children:x})})},"file-pill"):he.jsx(E.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"mx-2.5 mt-1 mb-2",children:he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-xl overflow-hidden bg-bg-000/30 text-xs",children:he.jsx(cy,{className:"max-h-[150px] overflow-y-auto",noDefaultScroll:!a,children:f?f(n,v):he.jsx("pre",{className:"p-3 text-text-300 whitespace-pre-wrap overflow-x-auto",children:he.jsx("code",{children:n})})})})},"file-content")}),"create"!==e&&"edit"!==e&&w&&he.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{ease:"easeOut",duration:.3},className:"overflow-hidden",children:he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-xl mx-2.5 mt-1 mb-2 overflow-hidden bg-bg-000/30",children:he.jsx(cy,{className:"max-h-[150px] overflow-y-auto",noDefaultScroll:!a,children:f?f(n,v):he.jsx("pre",{className:"p-3 text-sm text-text-300 whitespace-pre-wrap overflow-x-auto",children:he.jsx("code",{children:n})})})})}),"present"===e&&o&&o.length>0&&he.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{ease:"easeOut",duration:.3},className:"overflow-hidden",children:he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-xl mx-2.5 mt-1 mb-2 max-h-[150px] overflow-y-auto bg-bg-000/30 p-2",children:he.jsx("div",{className:"flex flex-col gap-1",children:o.map((e,t)=>he.jsx("div",{className:"text-sm text-text-300 truncate",children:e},t))})})})]})});const my=de.memo(({toolName:e,toolDisplayName:t,renderMode:n=ay.Standard,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,icon:l,iconSize:c=16,integrationIconUrl:u,integrationName:d,isExpandable:h=!1,expandedContent:p,children:f})=>{const m=t||(e=>{const t=(e=>{const t=e.split("__");if(t.length>=3)return t[2];const n=e.split(":");return n.length>=2?n[n.length-1]:e})(e);return t.split("_").map((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()).join(" ")})(e),g=((e,t=16)=>{const n=function(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}(e);switch(n){case"bash":case"bash_tool":return he.jsx(Or,{size:t,className:"text-text-500"});case"read":return he.jsx(Sr,{size:t,className:"text-text-500"});case"write":case"create_file":case"open_file":case"update_file":return he.jsx(Hr,{size:t,className:"text-text-500"});case"edit":case"str_replace":case"str_replace_editor":return he.jsx(L,{size:t,className:"text-text-500"});case"glob":case"grep":return he.jsx(Yr,{size:t,className:"text-text-500"});case"repl":return he.jsx(Ar,{size:t,className:"text-text-500"});case"web_search":case"web_fetch":return he.jsx(Vr,{size:t,className:"text-text-500"});case"todo_write":return he.jsx(Qr,{size:t,className:"text-text-500"});case"task":return he.jsx(vr,{size:t,className:"text-text-500"});case"ask_user_question":return he.jsx(Zr,{size:t,className:"text-text-500"});case"recent_chats":case"conversation_search":return he.jsx(Wr,{size:t,className:"text-text-500"});case"project_knowledge_search":return he.jsx(Jr,{size:t,className:"text-text-500"});case"drive_search":return he.jsx(It,{type:Dt.GDRIVE,size:t});default:return null}})(e,c),y=he.jsx(Et,{letter:d||m,size:c,hideBorder:!0}),x=l??g??(u?he.jsx(Ot,{url:u,size:c,fadeInOnLoad:!0,fallbackSvg:y}):d?y:he.jsx(ss,{size:c,className:"text-text-500"}));return h&&p?he.jsx(py,{isExpanded:!1,setIsExpanded:()=>{},isStreaming:a,icon:x,text:m,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,renderMode:n,isFirstItemInGroup:i,isLastItemInGroup:o,children:he.jsx(dy,{isExpanded:!1,children:p})}):he.jsx(hy,{icon:x,text:m,isStreaming:a,hideCaret:!0,renderMode:n,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,isFirstItemInGroup:i,isLastItemInGroup:o,children:f})});my.displayName="GenericToolCell";de.memo(({toolName:e,message:t,resultMessage:n,resultCount:r=0,renderMode:s=ay.Standard,isFirstBlockOfMessage:i,isLastBlockOfMessage:o,isFirstItemInGroup:a,isLastItemInGroup:l,isStreaming:c,iconSize:u=16,children:d})=>{const h=m(),p=r>0||!c,f=n||t||(p?h.formatMessage({defaultMessage:"Searched",id:"0ZuuhwjU4n"}):h.formatMessage({defaultMessage:"Searching",id:"IfE0if3ytt"})),g=p&&r>0?h.formatMessage({defaultMessage:"{count, plural, one {# result} other {# results}}",id:"s88ium+h8p"},{count:r}):void 0,y=(e=>"project_knowledge_search"===e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase())(e),x=y?he.jsx(Jr,{size:u,className:"text-text-500"}):he.jsx(Wr,{size:u,className:"text-text-500"});return he.jsx(hy,{icon:x,text:f,secondaryText:g,isStreaming:!p,hideCaret:!0,renderMode:s,isFirstBlockOfMessage:i,isLastBlockOfMessage:o,isFirstItemInGroup:a,isLastItemInGroup:l,children:d&&p&&he.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{ease:"easeOut",duration:.3},className:"overflow-hidden",children:he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-lg mx-2.5 mt-1 mb-2 max-h-[200px] overflow-y-auto bg-bg-000/50",children:d})})})});const gy=({title:e,url:n,faviconUrl:r,className:s,onClick:i})=>{const o=(e=>{try{return new URL(e).hostname}catch{return e}})(n);return he.jsxs("div",{className:t("flex flex-row gap-3 items-center px-2 py-1.5 w-full","rounded-md cursor-pointer transition-colors hover:bg-bg-200",s),onClick:()=>{i?i(n):window.open(n,"_blank","noopener,noreferrer")},children:[he.jsx("div",{className:"flex-shrink-0",children:he.jsx(Ot,{url:r||n,size:12,fadeInOnLoad:!0})}),he.jsx("div",{className:"w-0 flex-grow font-small text-text-300 truncate",children:e}),he.jsx("div",{className:"text-xs text-text-400 shrink-0",children:o})]})};de.memo(function({statusText:e,isVisible:t,isExpanded:n=!1,onToggle:r}){const s=de.useCallback(()=>{r?.()},[r]);if(!t||!e)return null;const i=n?Lr:Pr,o=he.jsxs(he.Fragment,{children:[he.jsxs("div",{className:"relative w-5 h-5 flex items-center justify-center shrink-0",children:[he.jsx(mr,{state:"writing",className:"!w-5 !text-accent-main-200 group-hover/status:opacity-0 transition-opacity duration-100 mt-1",isInteractive:!1}),r&&he.jsx(i,{size:16,className:"absolute opacity-0 group-hover/status:opacity-100 transition-opacity duration-100 text-text-500"})]}),he.jsx(A,{mode:"wait",initial:!1,children:he.jsx(E.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:Xg,ease:ny.EASE_OUT},className:"flex-1",children:he.jsx(pm,{className:"text-left font-base",children:e})},e)})]});return r?he.jsx("button",{onClick:s,className:"group/status flex items-start gap-2 py-2 text-text-300 text-sm hover:text-text-200 transition-colors cursor-pointer w-full text-left","data-status-display":"true",children:o}):he.jsx("div",{className:"flex items-start gap-2 py-2 text-text-300 text-sm","data-status-display":"true",children:o})}).displayName="StatusDisplay";const yy=de.memo(function({isWorking:e,statusText:n,stepCount:r,isTimelineExpanded:s=!1,onToggleTimeline:i,sparkLayoutId:o,className:a,stepsDisplayText:l,children:c}){const[d,h]=de.useState(!1),p=de.useCallback(()=>{h(e=>!e)},[]),f=de.useCallback(()=>{i?.()},[i]),m=s?Nr:jr,g=i?he.jsxs("button",{onClick:f,className:"group/status flex items-center gap-2 py-2 text-text-300 text-sm hover:text-text-200 transition-colors cursor-pointer w-full text-left",children:[he.jsxs("div",{className:"relative w-5 h-5 flex items-center justify-center shrink-0",children:[he.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"pt-1",children:he.jsx(mr,{state:"writing",className:"!w-5 !text-accent-main-200 group-hover/status:opacity-0 transition-opacity duration-100",isInteractive:!1})}),he.jsx(m,{size:16,className:"absolute opacity-0 group-hover/status:opacity-100 transition-opacity duration-100 text-text-500"})]}),he.jsx(A,{mode:"wait",initial:!1,children:he.jsx(E.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:Xg,ease:ny.EASE_OUT},className:"flex-1",children:he.jsx(pm,{className:"text-left font-base",children:n})},n)})]}):he.jsxs("div",{className:"flex items-center gap-2 py-2 text-text-300 text-sm",children:[he.jsx("div",{className:"relative w-5 h-5 flex items-center justify-center shrink-0",children:o?he.jsx(E.div,{layoutId:o,layoutDependency:e,transition:{type:"spring",stiffness:400,damping:30},className:"pt-1",children:he.jsx(mr,{state:"writing",className:"!w-5 !text-accent-main-200",isInteractive:!1})}):he.jsx("div",{className:"pt-1",children:he.jsx(mr,{state:"writing",className:"!w-5 !text-accent-main-200",isInteractive:!1})})}),he.jsx(pm,{className:"text-left font-base",children:n})]}),y=he.jsxs(he.Fragment,{children:[he.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 text-text-500 font-base text-sm transition-colors hover:text-text-300 py-2",children:[he.jsx(A,{mode:"wait",initial:!1,children:he.jsx(E.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:Qg,ease:ny.EASE_OUT},children:l||he.jsx(u,{defaultMessage:"{count, plural, one {# step} other {# steps}}",id:"vAKAnIbJ4M",values:{count:r}})},l||"steps")}),he.jsx("span",{className:t("inline-flex transition-transform duration-200",!d&&"-rotate-90"),children:he.jsx(T,{size:12})})]}),he.jsx(A,{children:d&&he.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:Yg,ease:ny.EASE_OUT},style:{overflow:"hidden"},children:c})})]});return he.jsx("div",{className:t("min-h-[36px] grid",a),children:he.jsx(A,{mode:"sync",initial:!1,children:e&&n?he.jsx(E.div,{className:"row-start-1 col-start-1",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:Qg,ease:ny.SNAPPY_OUT},children:g},"working"):he.jsx(E.div,{className:"row-start-1 col-start-1 pb-1",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:Qg,ease:ny.SNAPPY_OUT},children:y},"done")})})});yy.displayName="StatusPill";const xy=de.memo(({children:e,isFirstBlockOfMessage:n,isLastBlockOfMessage:r,isStreaming:s,className:i,borderless:o=!1,autoCollapse:a=!1,variant:l="default",animateEntrance:c=!1})=>{const[d,h]=de.useState(!1),[p,f]=de.useState(!1);de.useEffect(()=>{s&&!d&&h(!0)},[s,d]);const m=de.Children.toArray(e),g=m.length,y=a&&g>=3,x=Math.max(0,g-2);return he.jsx(E.div,{initial:!1,animate:{opacity:1},layout:!s&&!y,transition:{opacity:{duration:Xg,ease:ny.EASE_OUT},layout:{duration:ty,ease:ny.EASE_OUT}},className:t("flex flex-col font-ui leading-normal",!o&&"rounded-lg border-0.5 border-border-300 my-3",!o&&(n?"mt-2":"mt-3"),!o&&(r?"mb-2":"mb-3"),i),children:he.jsx(oy,{hasCollapseHeader:y&&x>0,variant:l,children:he.jsxs(A,{initial:c,children:[y&&x>0&&he.jsx(uy,{icon:he.jsx(T,{size:16,className:t("transition-transform text-text-300",p?"rotate-0":"rotate-180")}),isFirstItem:!0,isLastItem:!1,isActive:!1,showDotFallback:!1,children:he.jsx("button",{onClick:()=>f(!p),className:"px-3 py-2 w-full text-left text-sm text-text-300",children:p?he.jsx(u,{defaultMessage:"Hide steps",id:"Iufn28MeR1"}):he.jsx(u,{defaultMessage:"{collapsedCount, plural, one {# step} other {# steps}}",id:"dS6ebV+vpY",values:{collapsedCount:x}})})}),m.map((e,t)=>{const n=de.isValidElement(e)?e.key:t,r=y&&!p&&t<g-2;return he.jsx(E.div,{className:"overflow-hidden shrink-0",initial:!!c&&{opacity:0,height:0},animate:r?"collapsed":"expanded",variants:{expanded:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{ease:ny.SNAPPY_OUT,duration:Yg},style:{pointerEvents:r?"none":"auto",willChange:"height, opacity"},children:e},n)})]})})})});xy.displayName="TimelineGroup";de.memo(function({description:e,isStreaming:n,isComplete:r=!1,renderMode:s=ay.Standard,isFirstBlockOfMessage:i=!1,isLastBlockOfMessage:o=!1,isFirstItemInGroup:a,isLastItemInGroup:l,subagentBlocks:c,renderSubagentBlock:d}){const h=m(),[p,f]=de.useState(!1),g=de.useCallback(()=>{f(e=>!e)},[]),y=c&&c.length>0&&d,x=c?.length??0,v=n&&!r,b=e||h.formatMessage({defaultMessage:"Running subagent",id:"XGkVpOO9dA"}),C=x>0?he.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[he.jsx(u,{defaultMessage:"{stepCount, plural, one {# step} other {# steps}}",id:"DNlRq2D8lw",values:{stepCount:x}}),he.jsx(Rt,{size:16,className:t("transition-transform duration-200",p&&"rotate-45")})]}):void 0,w=p&&y?c:[];return he.jsx(hy,{icon:he.jsx(vr,{size:16,className:"text-text-500"}),text:b,secondaryText:C,isStreaming:v,hideCaret:!0,handleClick:y?g:void 0,renderMode:s,isFirstBlockOfMessage:i,isLastBlockOfMessage:o,isFirstItemInGroup:a,isLastItemInGroup:l,children:he.jsx(A,{children:w.length>0&&he.jsx(E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:Yg,ease:ny.EASE_OUT},style:{overflow:"hidden"},children:he.jsx("div",{className:"mt-1",children:he.jsx(xy,{isStreaming:v,isFirstBlockOfMessage:!1,isLastBlockOfMessage:!1,borderless:!0,autoCollapse:!1,children:c?.map((e,t)=>{const n=e.id??`block-${t}`,r=w.includes(e),s=w.indexOf(e);return he.jsx(E.div,{initial:!1,animate:{opacity:r?1:0,height:r?"auto":0},transition:{ease:ny.SNAPPY_OUT,duration:.2,delay:r?0:.15},className:"overflow-hidden",children:d?.(e,t,{isFirstItem:0===s,isLastItem:s===w.length-1,isInExpandedTimeline:p,isTimelineExpanded:p})},n)})})})},"nested-timeline")})})}).displayName="TaskToolCell";class vy{constructor(){this.inCodeBlock=!1,this.codeBlockDelimiter="",this.inList=!1,this.inTable=!1,this.inBlockquote=!1,this.lastLineWasEmpty=!0}isInsideStructure(){return this.inCodeBlock||this.inList||this.inTable||this.inBlockquote}processLine(e){const t=e.trim(),n=this.isInsideStructure();(t.startsWith("```")||t.startsWith("~~~"))&&(this.inCodeBlock?t.startsWith(this.codeBlockDelimiter)&&(this.inCodeBlock=!1,this.codeBlockDelimiter=""):(this.inCodeBlock=!0,this.codeBlockDelimiter=t.substring(0,3)));/^[-*+]|\d+\./.test(t)&&!this.inCodeBlock?this.inList=!0:this.inList&&""===t&&(this.inList=!1);t.includes("|")&&!this.inCodeBlock?this.inTable=!0:this.inTable&&""===t&&(this.inTable=!1);const r=t.startsWith(">");r&&!this.inCodeBlock?this.inBlockquote=!0:this.inBlockquote&&""===t&&!r&&(this.inBlockquote=!1);const s=this.lastLineWasEmpty;this.lastLineWasEmpty=""===t;const i=n&&!this.isInsideStructure();return{insideStructure:this.isInsideStructure(),structureJustClosed:i,previousLineWasEmpty:s}}reset(){this.inCodeBlock=!1,this.codeBlockDelimiter="",this.inList=!1,this.inTable=!1,this.inBlockquote=!1,this.lastLineWasEmpty=!0}}const by=de.memo(({text:e,blockCitations:t=[],onLinkDetected:n,onCodeDetected:r,hasLinkRef:s,hasCodeRef:i,className:o,linkTarget:a="_blank",flagShowCodeHeader:l,unsafeAllowNavigationWithoutConfirmation:c,onOpenArtifact:u,isLastMessage:d,messageUuid:h,onLinkClick:p,chatUiCore:f})=>he.jsx(Hg,{text:e,blockCitations:t,onLinkDetected:n,onCodeDetected:r,hasLinkRef:s,hasCodeRef:i,className:o,linkTarget:a,isStreaming:!1,flagShowCodeHeader:l,unsafeAllowNavigationWithoutConfirmation:c,onOpenArtifact:u,isLastMessage:d,messageUuid:h,onLinkClick:p,chatUiCore:f}),(e,t)=>e.text===t.text);by.displayName="MemoizedMarkdownChunk";const Cy=de.memo(({text:e,blockCitations:n=[],onLinkDetected:r,onCodeDetected:s,hasLinkRef:i,hasCodeRef:o,className:a,linkTarget:l="_blank",isStreaming:c=!1,flagShowCodeHeader:u,unsafeAllowNavigationWithoutConfirmation:d,onOpenArtifact:h,isLastMessage:p,messageUuid:f,onLinkClick:m,chatUiCore:g=!1})=>{const{completedChunks:y,streamingChunk:x}=((e,t)=>{const n=de.useMemo(()=>t?null:{completedChunks:e?[e]:[],streamingChunk:""},[e,t]),[r,s]=de.useState({completedChunks:[],streamingChunk:""}),i=de.useRef(null);return de.useEffect(()=>{if(!t)return;if(!e)return void s({completedChunks:[],streamingChunk:""});i.current||(i.current=new vy);const n=e.split("\n"),r=[];let o=[],a=-1;i.current.reset();for(let e=0;e<n.length;e++){const t=n[e],{insideStructure:s,structureJustClosed:l,previousLineWasEmpty:c}=i.current.processLine(t);if(o.push(t),l||!s&&""===t.trim()&&o.length>1&&!c){for(;o.length>0&&""===o[o.length-1].trim();)o.pop();o.length>0&&(r.push(o.join("\n")),a=e,o=[])}}const l=n.slice(a+1).join("\n");s({completedChunks:r,streamingChunk:l})},[e,t]),n??r})(e,c);return 1!==y.length||x?he.jsxs("div",{className:t("progressive-markdown grid-cols-1 grid [&_>_*]:min-w-0",g?"gap-4":"gap-2.5",a),children:[y.map((e,t)=>{const a=t>0?"\n\n"+e:e;return he.jsx(by,{text:a,blockCitations:n,onLinkDetected:r,onCodeDetected:s,hasLinkRef:i,hasCodeRef:o,className:"",linkTarget:l,flagShowCodeHeader:u,unsafeAllowNavigationWithoutConfirmation:d,onOpenArtifact:h,isLastMessage:p,messageUuid:f,onLinkClick:m,chatUiCore:g},t)}),x&&he.jsx(Hg,{text:y.length>0?"\n\n"+x:x,blockCitations:n,onLinkDetected:r,onCodeDetected:s,hasLinkRef:i,hasCodeRef:o,className:"",linkTarget:l,isStreaming:!0,flagShowCodeHeader:u,unsafeAllowNavigationWithoutConfirmation:d,onOpenArtifact:h,isLastMessage:p,messageUuid:f,onLinkClick:m,chatUiCore:g})]}):he.jsx(Hg,{text:e,blockCitations:n,onLinkDetected:r,onCodeDetected:s,hasLinkRef:i,hasCodeRef:o,className:a,linkTarget:l,isStreaming:!1,flagShowCodeHeader:u,unsafeAllowNavigationWithoutConfirmation:d,onOpenArtifact:h,isLastMessage:p,messageUuid:f,onLinkClick:m,chatUiCore:g})});Cy.displayName="ProgressiveStandardMarkDown";const wy=({children:e,isStreaming:t=!1})=>{const n=de.useRef(null),[r,s]=de.useState(!1),[i,o]=de.useState(!1),[a,l]=de.useState(0);return de.useLayoutEffect(()=>{if(n.current&&!t){const e=n.current.scrollHeight;l(e),o(e>200)}},[t,e]),t?he.jsx("div",{className:"px-2.5 text-text-300 !font-base [&_p]:!font-base [&_p]:!m-0 [&_p]:!p-0",children:e}):he.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:.3},className:"px-2.5 text-text-300 !font-base [&_p]:!font-base [&_p]:!m-0 [&_p]:!p-0",children:[he.jsxs("div",{ref:n,className:"relative overflow-hidden transition-[max-height] duration-300 ease-out",style:{maxHeight:r?`${a}px`:"200px"},children:[e,i&&!r&&he.jsx("div",{className:"absolute inset-x-0 bottom-0 h-10 bg-gradient-to-t from-bg-100 to-transparent pointer-events-none"})]}),i&&he.jsx("button",{onClick:()=>s(e=>!e),className:"text-xs text-text-500/80 hover:text-text-100 transition",children:r?he.jsx(u,{defaultMessage:"Show less",id:"qyJtWyZ0yt"}):he.jsx(u,{defaultMessage:"Show more",id:"aWpBzjCXKS"})})]})};de.memo(({text:e,isStreaming:t,isFirstItemInGroup:n,isLastItemInGroup:r})=>e?he.jsx(uy,{icon:he.jsx(zr,{size:16,className:"text-text-500"}),isFirstItem:!!n,isLastItem:!!r,isActive:t,showDotFallback:!1,children:he.jsx("div",{className:"pt-0.5",children:he.jsx(wy,{isStreaming:t,children:he.jsx(Cy,{text:e,isStreaming:t})})})}):null);const ky=de.memo(function({blocks:e,isStreaming:t,statusText:n,turnIsOver:r,renderBlock:s,onStatusDisplayVisibilityChange:i,blocksAfterTimeline:o=[],renderBlockAfterTimeline:a,childrenAfterTimeline:l,fadeToolsOnStatusChange:c=!1,statusPillClassName:d,className:h,stepsDisplayText:p}){const f=m(),[g,y]=de.useState(!1),x=de.useRef(""),v=de.useRef(0),b=!r&&t&&e.length>0,C=o.length>0||null!==l,w=de.useMemo(()=>{if(!c){if(g)return e;return e.filter(e=>"thinking"!==e.type).slice(-3)}const t=n||"";if(t&&t!==x.current&&""!==x.current&&(v.current=e.length),x.current=t,g||0===e.length)return e;const r=v.current;return e.slice(r)},[e,n,g,c]),k=de.useMemo(()=>new Set(w),[w]),S=de.useMemo(()=>{const e=new Map;return w.forEach((t,n)=>e.set(t,n)),e},[w]),M=de.useMemo(()=>{const t=new Map;return e.forEach((e,n)=>t.set(e,n)),t},[e]),N=b&&!!n;de.useLayoutEffect(()=>(i?.(N),()=>i?.(!1)),[N,i]),de.useEffect(()=>{b||0===v.current||(y(!1),v.current=0,x.current="")},[b]);const _=de.useCallback(()=>{y(e=>!e)},[]);if(0===e.length&&!C)return null;const j=n||f.formatMessage({defaultMessage:"Working",id:"gAR0atqpRn"}),T=e.length>0;return he.jsx("div",{className:h,children:he.jsxs("div",{className:"grid grid-rows-[auto_auto] min-w-0",children:[T&&he.jsx("div",{className:"row-start-1 col-start-1 min-w-0",children:he.jsx(yy,{isWorking:b&&!!n,statusText:j,stepCount:e.length,isTimelineExpanded:g,onToggleTimeline:_,sparkLayoutId:"claude-spark",className:b?void 0:d,stepsDisplayText:p,children:he.jsxs(xy,{isFirstBlockOfMessage:!1,isLastBlockOfMessage:!1,isStreaming:!1,borderless:!0,autoCollapse:!1,children:[e.map((e,t)=>he.jsx("div",{children:s(e,t,{isFirstItem:0===t,isLastItem:!1,isInExpandedTimeline:!1,isTimelineExpanded:!0})},t)),he.jsx(uy,{icon:he.jsx(O,{size:16,className:"text-text-500"}),isFirstItem:!1,isLastItem:!0,isActive:!1,showDotFallback:!1,children:he.jsx("div",{className:"pl-2.5 pt-0.5 text-text-300 !font-base",children:he.jsx(u,{defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})}),(T||C)&&he.jsxs("div",{className:"row-start-2 col-start-1 relative grid isolate min-w-0",children:[C&&he.jsx("div",{className:"row-start-1 col-start-1 relative z-[2] min-w-0",children:l??o.map((e,t)=>he.jsx("div",{children:a?.(e,t)},`after-${t}`))}),T&&he.jsx(A,{children:b&&he.jsx(E.div,{className:"row-start-1 col-start-1 relative z-0 min-w-0",style:{overflowAnchor:"none"},initial:{opacity:1},exit:{opacity:0,height:0},transition:{duration:Yg,ease:ny.EASE_OUT},children:he.jsx(xy,{isFirstBlockOfMessage:!1,isLastBlockOfMessage:!1,isStreaming:!0,borderless:!0,autoCollapse:!1,animateEntrance:!0,children:c?he.jsx(A,{children:w.map((e,t)=>{const n=M.get(e)??t;return he.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:Qg,ease:ny.EASE_OUT},children:s(e,n,{isFirstItem:0===t,isLastItem:t===w.length-1,isInExpandedTimeline:!0,isTimelineExpanded:g})},n)})}):e.map((e,t)=>{const n=k.has(e),r=S.get(e)??-1;return he.jsx(E.div,{initial:!1,animate:{opacity:n?1:0,height:n?"auto":0},transition:{layout:{duration:0},ease:ny.SNAPPY_OUT,duration:.2},className:"overflow-hidden",children:s(e,t,{isFirstItem:0===r,isLastItem:r===w.length-1,isInExpandedTimeline:!0,isTimelineExpanded:g})},t)})})},"expanded-tools")})]})]})})}),Sy=de.memo(({input:e,toolResult:t,renderMode:n=ay.Standard,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,iconSize:l=16,onUrlClick:c})=>{const d=m(),h=String(e?.url||""),p=(e=>{try{return new URL(e).hostname}catch{return null}})(h),f=t?.is_error,g=f?null:(e=>{if(!e?.content)return null;try{const t=e.content;if(!Array.isArray(t))return null;const n=t.find(e=>"knowledge"===e.type&&e.title);if(n)return{title:n.title};const r=t.find(e=>"text"===e.type);if(r?.text)try{const e=JSON.parse(r.text);if(Array.isArray(e)&&e.length>0&&e[0].title)return{title:e[0].title}}catch{}return null}catch{return null}})(t),y=g?.title||h,x=!!t||!a;let v,b;x?f?v=he.jsxs(he.Fragment,{children:[he.jsx(u,{defaultMessage:"Failed to fetch",id:"1nV3NuMwiG"})," ",he.jsx("span",{className:"text-text-400",children:y})]}):(v=y,b=p||void 0):v=p?d.formatMessage({defaultMessage:"Fetching from {hostname}",id:"5qKeNV67+8"},{hostname:p}):d.formatMessage({defaultMessage:"Fetching page",id:"uAw7cJ5rnr"});return he.jsx(hy,{handleClick:h?()=>{h&&(c?c(h):window.open(h,"_blank"))}:void 0,isStreaming:!x,icon:he.jsx(Ot,{url:h,size:l,fadeInOnLoad:!0}),text:v,secondaryText:b,secondaryIcon:x&&h?he.jsx(Cr,{size:16,className:"text-text-300"}):void 0,hideCaret:!0,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,renderMode:n,isFirstItemInGroup:i,isLastItemInGroup:o})});function My(e){if(!e?.content)return[];try{if(Array.isArray(e.content)){const t=e.content.filter(e=>"knowledge"===e.type&&"webpage_metadata"===e.metadata?.type);if(t.length>0)return t.map(e=>({title:e.title||"",url:e.url||"",siteDomain:e.metadata?.site_domain,faviconUrl:e.metadata?.favicon_url}))}let t="";if("string"==typeof e.content)t=e.content;else if(Array.isArray(e.content)){t=e.content.filter(e=>"text"===e.type).map(e=>e.text).join("\n")}return function(e){const t=e.indexOf("Links:");if(-1===t)return[];const n=e.slice(t+6).trim();if(!n.startsWith("["))return[];let r=0,s=-1,i=!1,o=!1;for(let a=0;a<n.length;a++){const e=n[a];if(o)o=!1;else if("\\"!==e)if('"'!==e){if(!i)if("["===e)r++;else if("]"===e&&(r--,0===r)){s=a+1;break}}else i=!i;else o=!0}if(-1===s)return[];try{const e=n.slice(0,s),t=JSON.parse(e);return Array.isArray(t)?t.filter(e=>"string"==typeof e?.url).map(e=>{let t;try{t=new URL(e.url).hostname}catch{}return{title:e.title||"",url:e.url,siteDomain:t}}):[]}catch{return[]}}(t)}catch{return[]}}Sy.displayName="WebFetchToolCell";const Ny=de.memo(({input:e,toolResult:t,renderMode:n=ay.Standard,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,iconSize:l=16,onResultClick:c})=>{const u=m(),d=My(t),h=d.length;let p="";if("string"==typeof e)try{const t=JSON.parse(e);p=t?.query||""}catch{p=""}else p=e?.query||"";const f=h>0||!a,g=f?p:u.formatMessage({defaultMessage:"Searching the web",id:"5KajyzHSXj"}),y=f&&h>0?u.formatMessage({defaultMessage:"{count, plural, one {# result} other {# results}}",id:"s88ium+h8p"},{count:h}):void 0;return he.jsx(hy,{icon:he.jsx(Vr,{size:l,className:"text-text-500"}),text:g,secondaryText:y,isStreaming:!f,hideCaret:!0,renderMode:n,isFirstBlockOfMessage:r,isLastBlockOfMessage:s,isFirstItemInGroup:i,isLastItemInGroup:o,children:d.length>0&&he.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{ease:"easeOut",duration:.3},className:"overflow-hidden",children:he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-lg p-1 mx-2.5 mt-1 mb-2 max-h-[150px] overflow-y-auto bg-bg-000/50",children:he.jsx("div",{className:"flex flex-col gap-1",children:d.map((e,t)=>he.jsx(gy,{title:e.title,url:e.url,faviconUrl:e.faviconUrl,onClick:c},`${e.url}-${t}`))})})})})});function _y({dataUrl:e,width:t,height:r,maxHeight:s="200px",className:i=""}){const o=n();return he.jsxs("div",{className:i,children:[he.jsx("img",{src:e,alt:o.formatMessage({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),className:"max-w-full h-auto rounded border border-border-300 cursor-pointer hover:opacity-90 hover:rotate-2 transition-all duration-150 ease-out",style:{maxHeight:s},onClick:()=>window.open(e,"_blank"),title:o.formatMessage({defaultMessage:"Click to open in new tab",id:"A+vguREwVx"})}),t&&r&&he.jsxs("div",{className:"mt-1 text-xs text-text-300",children:[t,"×",r]})]})}function jy({screenshot:e,coordinates:t,viewportDimensions:r,className:s="",zoomLevel:i=2.5}){const o=n(),a=de.useRef(null),l=de.useRef(null),c=de.useRef(null),[u,d]=de.useState(1),[h,p]=de.useState({x:50,y:50});return de.useEffect(()=>{const e=()=>{if(a.current&&l.current){const e=a.current,n=l.current,s=r?.width||e.naturalWidth,o=r?.height||e.naturalHeight,c=e.naturalWidth/s,u=e.naturalHeight/o,d=t[0]*c,h=t[1]*u,f=n.offsetWidth,m=n.offsetHeight,g=f/e.naturalWidth,y=m/e.naturalHeight,x=Math.min(g,y),v=e.naturalWidth*x,b=e.naturalHeight*x,C=(f-v)/2,w=(m-b)/2,k=d*x+C,S=h*x+w,M=C*i/(i-1),N=((C+v)*i-f)/(i-1),_=w*i/(i-1),j=((w+b)*i-m)/(i-1),E=(k*i-f)/(i-1),T=k*i/(i-1),A=(S*i-m)/(i-1),L=S*i/(i-1),O=Math.max(M,E),I=Math.min(N,T),D=Math.max(_,A),R=Math.min(j,L);let P=k,z=S;O<=I&&(P=Math.max(O,Math.min(I,k))),D<=R&&(z=Math.max(D,Math.min(R,S)));p({x:P/f*100,y:z/m*100})}},n=a.current;if(n){if(!n.complete)return n.addEventListener("load",e),()=>n.removeEventListener("load",e);e()}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[e,t,r,i]),de.useEffect(()=>{d(1);const e=setTimeout(()=>{d(i)},300);return()=>clearTimeout(e)},[e,i]),he.jsx("div",{ref:l,className:`relative overflow-hidden ${s}`,children:he.jsx("div",{ref:c,className:"w-full h-full",style:{transform:`scale(${u})`,transformOrigin:`${h.x}% ${h.y}%`,transition:"transform 0.6s ease-out"},children:he.jsx("img",{ref:a,src:e,alt:o.formatMessage({defaultMessage:"Screenshot with click location",id:"5n05oJw5CD"}),className:"w-full h-full",style:{objectFit:"contain"}})})})}function Ey({screenshot:e,startCoordinate:t,endCoordinate:r,className:s=""}){const i=n(),[o,a]=de.useState({width:0,height:0}),l=de.useRef(null);de.useEffect(()=>{if(l.current){const e=()=>{l.current&&a({width:l.current.offsetWidth,height:l.current.offsetHeight})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[e]);const[c,u]=t,[d,h]=r,p=o.width>0?o.width/(l.current?.naturalWidth||o.width):1,f=o.height>0?o.height/(l.current?.naturalHeight||o.height):1,m=c*p,g=u*f,y=d*p,x=h*f;return he.jsxs("div",{className:`relative inline-block ${s}`,children:[he.jsx("img",{ref:l,src:e,alt:i.formatMessage({defaultMessage:"Screenshot with drag path",id:"cF32KOfDNQ"}),className:"max-w-full h-auto hover:rotate-2 transition-transform duration-150 ease-out",onLoad:()=>{l.current&&a({width:l.current.offsetWidth,height:l.current.offsetHeight})}}),o.width>0&&he.jsxs(he.Fragment,{children:[he.jsxs("svg",{className:"absolute pointer-events-none",style:{left:0,top:0,width:"100%",height:"100%",zIndex:15},children:[he.jsx("defs",{children:he.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:he.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#dc2626"})})}),he.jsx("line",{x1:m,y1:g,x2:y,y2:x,stroke:"#dc2626",strokeWidth:"2",markerEnd:"url(#arrowhead)"})]}),he.jsx("div",{className:"absolute bg-bg-000 border-2 border-accent-secondary-100 rounded-full",style:{left:`${m}px`,top:`${g}px`,width:"8px",height:"8px",transform:"translate(-50%, -50%)",zIndex:20}}),he.jsx("div",{className:"absolute bg-bg-000 border-2 border-danger-200 rounded-full",style:{left:`${y}px`,top:`${x}px`,width:"8px",height:"8px",transform:"translate(-50%, -50%)",zIndex:20}})]})]})}
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=I("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ay=I("list-checks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Ly=I("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Oy(e){return/^mcp__[0-9a-f-]+__/.test(e)}const Iy=e=>he.jsxs(j,{...e,children:[he.jsx("path",{d:"M10.8139 17.5841L7.08902 8.12868C6.76198 7.29851 7.60347 6.48813 8.42074 6.84621L17.6697 10.8985C18.6008 11.3065 18.4 12.6821 17.3912 12.8069L14.3103 13.1881C13.8869 13.2405 13.5433 13.5557 13.4548 13.973L12.7225 17.4251C12.5168 18.3949 11.1772 18.5065 10.8139 17.5841Z",stroke:"currentColor",fill:"none",strokeWidth:"1"}),he.jsx("path",{d:"M5 5L3 3",stroke:"currentColor",strokeLinecap:"round"}),he.jsx("path",{d:"M8.36609 3.82843L8.36609 1.63391",stroke:"currentColor",strokeLinecap:"round"}),he.jsx("path",{d:"M3.82843 8.4624H1.5376",stroke:"currentColor",strokeLinecap:"round"})]}),Dy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M8.5284 16.4959L3.99583 4.99017C3.6688 4.16 4.51029 3.34963 5.32755 3.7077L16.6268 8.65832C17.5578 9.06626 17.3571 10.4419 16.3482 10.5667L12.2422 11.0747C11.8188 11.1271 11.4753 11.4423 11.3868 11.8596L10.437 16.3369C10.2313 17.3066 8.89175 17.4182 8.5284 16.4959Z",stroke:"currentColor",fill:"none",strokeWidth:"1"})}),Ry=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M9.77051 6.99976C10.7236 6.99987 11.5443 7.67268 11.7314 8.60718L12.4102 11.9998H14.3906L13.7344 8.72339C13.6503 8.3028 13.2814 7.9999 12.8525 7.99976H12.5C12.224 7.99976 12.0002 7.77576 12 7.49976C12 7.22361 12.2239 6.99976 12.5 6.99976H12.8525C13.7581 6.9999 14.5382 7.63909 14.7158 8.5271L15.4102 11.9998H17.3906L16.7344 8.72339C16.6503 8.3028 16.2814 7.9999 15.8525 7.99976H15.5C15.224 7.99976 15.0002 7.77576 15 7.49976C15 7.22361 15.2239 6.99976 15.5 6.99976H15.8525C16.7581 6.9999 17.5382 7.63909 17.7158 8.5271L18.4902 12.4021C18.5194 12.5488 18.4815 12.7015 18.3867 12.8171C18.2918 12.9327 18.1496 12.9997 18 12.9998H2.5C2.43885 12.9998 2.38012 12.9857 2.32422 12.9646C2.31718 12.9619 2.30962 12.9607 2.30273 12.9578C2.28147 12.9486 2.262 12.9366 2.24219 12.9246C2.23265 12.9187 2.22297 12.9134 2.21387 12.907C2.19638 12.8947 2.17994 12.8815 2.16406 12.8669C2.15403 12.8577 2.14402 12.8486 2.13477 12.8386C2.12793 12.8313 2.1197 12.825 2.11328 12.8171C2.10702 12.8095 2.10244 12.8007 2.09668 12.7927C2.08824 12.7811 2.08068 12.7689 2.07324 12.7566C2.06252 12.7387 2.0523 12.7208 2.04395 12.7019C2.03919 12.6912 2.03623 12.6798 2.03223 12.6687C2.02468 12.6477 2.01639 12.627 2.01172 12.6052C2.00939 12.5944 2.00943 12.5831 2.00781 12.572C1.99968 12.5161 1.99848 12.4588 2.00977 12.4021L2.76855 8.60718C2.95571 7.67268 3.7764 6.99986 4.72949 6.99976H9.77051ZM4.72949 7.99976C4.25302 7.99986 3.84263 8.33629 3.74902 8.80347L3.10938 11.9998H11.3906L10.751 8.80347C10.6574 8.33629 10.247 7.99987 9.77051 7.99976H4.72949Z",fill:"currentColor"})}),Py=e=>e.split("_").map((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase()).join(" "),zy=new Set(["computer","click","navigate","read_page","find","screenshot","get_page_text","form_input","type","wait","tabs_create","tabs_context","upload_image","read_console_messages","read_network_requests","resize_window","gif_creator","execute_js"]),Fy=e=>"string"==typeof e?e:e.domain,Hy=({plan:e,isCollapsible:t=!1,defaultCollapsed:n=!1,showHeader:s=!0})=>{const[i,o]=de.useState(n),a=Re(e.domains,"domains"),l=Re(e.approach,"approach"),c=he.jsxs("div",{className:"space-y-3",children:[a.length>0&&he.jsxs("div",{children:[he.jsx("h4",{className:"font-small text-text-400 mb-2",style:{fontFamily:"var(--font-ui-serif)",fontSize:"0.75rem",fontWeight:430},children:he.jsx(r,{defaultMessage:"Visit these sites",id:"cv8yc1KJ7n"})}),he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-xl px-3 py-2 space-y-1.5",children:a.map((e,t)=>he.jsx("div",{className:"font-base text-text-100",children:Fy(e)},t))})]}),l.length>0&&he.jsxs("div",{children:[he.jsx("h4",{className:"font-small text-text-400 mb-2",style:{fontFamily:"var(--font-ui-serif)",fontSize:"0.75rem",fontWeight:430},children:he.jsx(r,{defaultMessage:"Follow this approach",id:"YREuYaOzoG"})}),he.jsx("div",{className:"border-[0.5px] border-border-300 rounded-xl px-3 py-2 space-y-2",children:l.map((e,t)=>he.jsxs("div",{className:"flex gap-2 font-base text-text-100",children:[he.jsx("span",{className:"text-text-100","aria-hidden":"true",children:"•"}),he.jsx("span",{className:"flex-1",children:e})]},t))})]})]});return t?he.jsxs("div",{className:"space-y-3",children:[s&&he.jsxs("button",{onClick:()=>o(!i),className:"flex items-center gap-2 w-full text-left group",children:[he.jsx(Ay,{size:16,className:"text-text-300"}),he.jsx(D,{size:14,className:R("text-text-400 transition-transform",i?"-rotate-90":"")}),he.jsx("span",{className:"font-base-bold text-text-200 group-hover:text-text-100",children:he.jsx(r,{defaultMessage:"Follow the plan",id:"e8VD9vcoJC"})})]}),!i&&c]}):he.jsx("div",{className:"space-y-3",children:c})},Vy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 3C10.2761 3 10.5 3.22386 10.5 3.5V9.5H16.5L16.6006 9.50977C16.8286 9.55629 17 9.75829 17 10C17 10.2417 16.8286 10.4437 16.6006 10.4902L16.5 10.5H10.5V16.5C10.5 16.7761 10.2761 17 10 17C9.72386 17 9.5 16.7761 9.5 16.5V10.5H3.5C3.22386 10.5 3 10.2761 3 10C3 9.72386 3.22386 9.5 3.5 9.5H9.5V3.5C9.5 3.22386 9.72386 3 10 3Z"})}),$y=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 3C10.2761 3.00006 10.5 3.2239 10.5 3.5V15.293L14.6465 11.1465C14.8418 10.9514 15.1583 10.9513 15.3536 11.1465C15.5487 11.3417 15.5486 11.6583 15.3536 11.8535L10.3535 16.8535C10.2598 16.9473 10.1326 17 10 17C9.90062 17 9.8042 16.9703 9.72268 16.916L9.64651 16.8535L4.6465 11.8535C4.45138 11.6582 4.45128 11.3417 4.6465 11.1465C4.84172 10.9513 5.15827 10.9514 5.35353 11.1465L9.50003 15.293V3.5C9.50003 3.22386 9.72389 3 10 3Z"})}),By=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M8.14648 4.64648C8.34176 4.45136 8.6583 4.45127 8.85352 4.64648C9.04868 4.8417 9.04862 5.15826 8.85352 5.35352L4.70703 9.50001H16.5C16.7761 9.50001 17 9.72387 17 10C16.9999 10.2761 16.7761 10.5 16.5 10.5H4.70703L8.85352 14.6465C9.04863 14.8418 9.04873 15.1583 8.85352 15.3535C8.6583 15.5487 8.34174 15.5486 8.14648 15.3535L3.14648 10.3535C3.05274 10.2598 3.00003 10.1326 3 10C3 9.90061 3.02967 9.80418 3.08398 9.72267L3.14648 9.64649L8.14648 4.64648Z"})}),Uy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M11.1465 4.64648C11.3417 4.45127 11.6582 4.45136 11.8535 4.64648L16.8535 9.64649L16.916 9.72267C16.9703 9.80418 17 9.90061 17 10C17 10.1326 16.9473 10.2598 16.8535 10.3535L11.8535 15.3535C11.6583 15.5486 11.3417 15.5487 11.1465 15.3535C10.9513 15.1583 10.9514 14.8418 11.1465 14.6465L15.293 10.5H3.5C3.2239 10.5 3.00006 10.2761 3 10C3 9.72387 3.22386 9.50001 3.5 9.50001H15.293L11.1465 5.35352C10.9514 5.15826 10.9513 4.8417 11.1465 4.64648Z"})}),Zy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 3C10.1326 3.00003 10.2598 3.05274 10.3535 3.14648L15.3536 8.14648C15.5486 8.34174 15.5487 8.6583 15.3536 8.85352C15.1583 9.04873 14.8418 9.04863 14.6465 8.85352L10.5 4.70703V16.5C10.5 16.7761 10.2761 16.9999 10 17C9.72389 17 9.50003 16.7761 9.50003 16.5V4.70703L5.35353 8.85352C5.15827 9.04862 4.84172 9.04868 4.6465 8.85352C4.45128 8.6583 4.45138 8.34176 4.6465 8.14648L9.64651 3.14648L9.72268 3.08398C9.8042 3.02967 9.90062 3 10 3Z"})}),Wy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M12 3C12.4721 3 12.9169 3.222 13.2002 3.59961L14.25 5H16.5C17.3284 5 18 5.67157 18 6.5V15.5C18 16.3284 17.3284 17 16.5 17H3.5C2.67157 17 2 16.3284 2 15.5V6.5C2 5.67157 2.67157 5 3.5 5H5.75L6.7998 3.59961L6.91309 3.46582C7.19443 3.17009 7.58677 3 8 3H12ZM8 4C7.88217 4 7.76948 4.04152 7.68066 4.11523L7.59961 4.2002L6.40039 5.7998C6.30596 5.92571 6.15738 6 6 6H3.5C3.22386 6 3 6.22386 3 6.5V15.5C3 15.7761 3.22386 16 3.5 16H16.5C16.7761 16 17 15.7761 17 15.5V6.5C17 6.22386 16.7761 6 16.5 6H14C13.8426 6 13.694 5.92571 13.5996 5.7998L12.4004 4.2002C12.306 4.07429 12.1574 4 12 4H8ZM10 7C11.933 7 13.5 8.567 13.5 10.5C13.5 12.433 11.933 14 10 14C8.067 14 6.5 12.433 6.5 10.5C6.5 8.567 8.067 7 10 7ZM10 8C8.61929 8 7.5 9.11929 7.5 10.5C7.5 11.8807 8.61929 13 10 13C11.3807 13 12.5 11.8807 12.5 10.5C12.5 9.11929 11.3807 8 10 8Z"})}),qy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M7.12771 5.16489C7.28926 4.98544 7.55225 4.95072 7.75273 5.0682L7.83477 5.12778L12.835 9.62788C12.9402 9.72264 12.9999 9.85833 13 9.99995C13 10.1063 12.9667 10.2093 12.9053 10.2939L12.835 10.372L7.83477 14.8721C7.62952 15.0567 7.31242 15.0402 7.12771 14.835C6.94336 14.6298 6.95983 14.3126 7.16482 14.128L11.7519 9.99995L7.16482 5.87193L7.09744 5.79674C6.95939 5.60969 6.96617 5.34444 7.12771 5.16489Z"})}),Gy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5H3C2.79779 17.5 2.61549 17.3782 2.53809 17.1914C2.4607 17.0046 2.50349 16.7895 2.64648 16.6465L4.35547 14.9365C3.20124 13.6175 2.5 11.8906 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 11.7952 4.22659 13.4199 5.40332 14.5967L5.46582 14.6729C5.52017 14.7544 5.5498 14.8508 5.5498 14.9502C5.5498 15.0828 5.49709 15.2099 5.40332 15.3037L4.20703 16.5H10C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM13.29 9.30371C13.3986 9.05001 13.6925 8.93174 13.9463 9.04004C14.2 9.14863 14.3183 9.44253 14.21 9.69629C13.8506 10.536 13.1645 11.25 12.25 11.25C11.6372 11.25 11.128 10.9289 10.75 10.4648C10.372 10.9289 9.86276 11.25 9.25 11.25C8.63724 11.25 8.12801 10.9289 7.75 10.4648C7.37198 10.9289 6.86276 11.25 6.25 11.25C5.97386 11.25 5.75 11.0261 5.75 10.75C5.75 10.4739 5.97386 10.25 6.25 10.25C6.58764 10.25 7.00448 9.97056 7.29004 9.30371L7.32422 9.2373C7.41431 9.09121 7.5749 9 7.75 9C7.9501 9 8.13123 9.11975 8.20996 9.30371L8.32227 9.53516C8.59804 10.0359 8.95442 10.25 9.25 10.25C9.58764 10.25 10.0045 9.97056 10.29 9.30371L10.3242 9.2373C10.4143 9.09121 10.5749 9 10.75 9C10.9501 9 11.1312 9.11975 11.21 9.30371L11.3223 9.53516C11.598 10.0359 11.9544 10.25 12.25 10.25C12.5876 10.25 13.0045 9.97056 13.29 9.30371Z"})}),Jy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5H3C2.79779 17.5 2.61549 17.3782 2.53809 17.1914C2.4607 17.0046 2.50349 16.7895 2.64648 16.6465L4.35547 14.9365C3.20124 13.6175 2.5 11.8906 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 11.7952 4.22659 13.4199 5.40332 14.5967L5.46582 14.6729C5.52017 14.7544 5.5498 14.8508 5.5498 14.9502C5.5498 15.0828 5.49709 15.2099 5.40332 15.3037L4.20703 16.5H10C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM10 7C10.2761 7 10.5 7.22386 10.5 7.5V9.5H12.5C12.7761 9.5 13 9.72386 13 10C13 10.2761 12.7761 10.5 12.5 10.5H10.5V12.5C10.5 12.7761 10.2761 13 10 13C9.72386 13 9.5 12.7761 9.5 12.5V10.5H7.5C7.22386 10.5 7 10.2761 7 10C7 9.72386 7.22386 9.5 7.5 9.5H9.5V7.5C9.5 7.22386 9.72386 7 10 7Z"})}),Ky=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M15.1883 5.10908C15.3699 4.96398 15.6346 4.96153 15.8202 5.11592C16.0056 5.27067 16.0504 5.53125 15.9403 5.73605L15.8836 5.82003L8.38354 14.8202C8.29361 14.9279 8.16242 14.9925 8.02221 14.9989C7.88203 15.0051 7.74545 14.9526 7.64622 14.8534L4.14617 11.3533L4.08172 11.2752C3.95384 11.0811 3.97542 10.817 4.14617 10.6463C4.31693 10.4755 4.58105 10.4539 4.77509 10.5818L4.85321 10.6463L7.96556 13.7586L15.1161 5.1794L15.1883 5.10908Z"})}),Yy=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 2.5C14.1421 2.5 17.5 5.85786 17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5ZM10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10C16.5 6.41015 13.5899 3.5 10 3.5ZM10 5C10.2761 5 10.5 5.22386 10.5 5.5V9.66895L13.6973 11.04L13.7852 11.0898C13.9763 11.2224 14.0552 11.4751 13.96 11.6973C13.8647 11.9193 13.6272 12.0372 13.3994 11.9902L13.3027 11.96L9.80273 10.46C9.61896 10.3811 9.5 10.2 9.5 10V5.5C9.5 5.22386 9.72386 5 10 5Z"})}),Qy=({size:e=16,className:t=""})=>he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 16 16",fill:"none",className:t,children:he.jsx("path",{d:"M11.25 9H10V7H11.25C11.695 7 12.13 6.86804 12.5 6.62081C12.87 6.37357 13.1584 6.02217 13.3287 5.61104C13.499 5.1999 13.5436 4.7475 13.4568 4.31105C13.37 3.87459 13.1557 3.47368 12.841 3.15901C12.5263 2.84434 12.1254 2.63005 11.689 2.54323C11.2525 2.45642 10.8001 2.50097 10.389 2.67127C9.97783 2.84157 9.62643 3.12996 9.37919 3.49997C9.13196 3.86998 9 4.30499 9 4.75V6H7V4.75C7 4.30499 6.86804 3.86998 6.62081 3.49997C6.37357 3.12996 6.02217 2.84157 5.61104 2.67127C5.1999 2.50097 4.7475 2.45642 4.31105 2.54323C3.87459 2.63005 3.47368 2.84434 3.15901 3.15901C2.84434 3.47368 2.63005 3.87459 2.54323 4.31105C2.45642 4.7475 2.50097 5.1999 2.67127 5.61104C2.84157 6.02217 3.12996 6.37357 3.49997 6.62081C3.86998 6.86804 4.30499 7 4.75 7H6V9H4.75C4.30499 9 3.86998 9.13196 3.49997 9.37919C3.12996 9.62643 2.84157 9.97783 2.67127 10.389C2.50097 10.8001 2.45642 11.2525 2.54323 11.689C2.63005 12.1254 2.84434 12.5263 3.15901 12.841C3.47368 13.1557 3.87459 13.37 4.31105 13.4568C4.7475 13.5436 5.1999 13.499 5.61104 13.3287C6.02217 13.1584 6.37357 12.87 6.62081 12.5C6.86804 12.13 7 11.695 7 11.25V10H9V11.25C9 11.695 9.13196 12.13 9.37919 12.5C9.62643 12.87 9.97783 13.1584 10.389 13.3287C10.8001 13.499 11.2525 13.5436 11.689 13.4568C12.1254 13.37 12.5263 13.1557 12.841 12.841C13.1557 12.5263 13.37 12.1254 13.4568 11.689C13.5436 11.2525 13.499 10.8001 13.3287 10.389C13.1584 9.97783 12.87 9.62643 12.5 9.37919C12.13 9.13196 11.695 9 11.25 9ZM10 4.75C10 4.50277 10.0733 4.2611 10.2107 4.05554C10.348 3.84998 10.5432 3.68976 10.7716 3.59515C11.0001 3.50054 11.2514 3.47579 11.4939 3.52402C11.7363 3.57225 11.9591 3.6913 12.1339 3.86612C12.3087 4.04093 12.4278 4.26366 12.476 4.50614C12.5242 4.74861 12.4995 4.99995 12.4049 5.22836C12.3102 5.45676 12.15 5.65199 11.9445 5.78934C11.7389 5.92669 11.4972 6 11.25 6H10V4.75ZM3.5 4.75C3.5 4.41848 3.6317 4.10054 3.86612 3.86612C4.10054 3.6317 4.41848 3.5 4.75 3.5C5.08152 3.5 5.39946 3.6317 5.63388 3.86612C5.8683 4.10054 6 4.41848 6 4.75V6H4.75C4.41848 6 4.10054 5.8683 3.86612 5.63388C3.6317 5.39946 3.5 5.08152 3.5 4.75ZM6 11.25C6 11.4972 5.92669 11.7389 5.78934 11.9445C5.65199 12.15 5.45676 12.3102 5.22836 12.4049C4.99995 12.4995 4.74861 12.5242 4.50614 12.476C4.26366 12.4278 4.04093 12.3087 3.86612 12.1339C3.6913 11.9591 3.57225 11.7363 3.52402 11.4939C3.47579 11.2514 3.50054 11.0001 3.59515 10.7716C3.68976 10.5432 3.84998 10.348 4.05554 10.2107C4.2611 10.0733 4.50277 10 4.75 10H6V11.25ZM7 7H9V9H7V7ZM11.25 12.5C10.9185 12.5 10.6005 12.3683 10.3661 12.1339C10.1317 11.8995 10 11.5815 10 11.25V10H11.25C11.5815 10 11.8995 10.1317 12.1339 10.3661C12.3683 10.6005 12.5 10.9185 12.5 11.25C12.5 11.5815 12.3683 11.8995 12.1339 12.1339C11.8995 12.3683 11.5815 12.5 11.25 12.5Z",fill:"currentColor"})}),Xy=e=>de.useMemo(()=>navigator.platform.toUpperCase().indexOf("MAC")>=0||navigator.userAgent.toUpperCase().indexOf("MAC")>=0,[])?he.jsx(Qy,{...e}):he.jsx("span",{className:"text-text-500 font-normal",children:"Ctrl +"}),ex=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10 14C10.8284 14 11.5 14.6716 11.5 15.5C11.5 16.3284 10.8284 17 10 17C9.17157 17 8.5 16.3284 8.5 15.5C8.5 14.6716 9.17157 14 10 14ZM10 8.5C10.8284 8.5 11.5 9.17157 11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5ZM10 3C10.8284 3 11.5 3.67157 11.5 4.5C11.5 5.32843 10.8284 6 10 6C9.17157 6 8.5 5.32843 8.5 4.5C8.5 3.67157 9.17157 3 10 3Z"})}),tx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M9.72821 2.87934C10.0318 2.10869 10.9028 1.72933 11.6735 2.03266L14.4655 3.13226C15.236 3.43593 15.6145 4.30697 15.3112 5.07758L11.3903 15.0307C11.2954 15.2717 11.1394 15.4835 10.9391 15.6459L10.8513 15.7123L7.7077 17.8979C7.29581 18.1843 6.73463 17.9917 6.57294 17.5356L6.54657 17.4409L5.737 13.6987C5.67447 13.4092 5.69977 13.107 5.80829 12.8315L9.72821 2.87934ZM6.73798 13.1987C6.70201 13.2903 6.69385 13.3906 6.71454 13.4868L7.44501 16.8627L10.28 14.892L10.3376 14.8452C10.3909 14.7949 10.4325 14.7332 10.4597 14.6645L13.0974 7.96723L9.37567 6.50141L6.73798 13.1987ZM11.3073 2.96332C11.0504 2.86217 10.7601 2.98864 10.6589 3.24555L9.74188 5.57074L13.4636 7.03754L14.3806 4.71137C14.4817 4.45445 14.3552 4.16413 14.0983 4.06293L11.3073 2.96332Z"})}),nx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M11.0974 2.04754C11.8559 1.36502 13.1023 1.62953 13.4919 2.61785L14.4558 5.06414C15.6023 4.86154 16.7713 5.48673 17.2145 6.61199C17.6576 7.73723 17.2274 8.98904 16.2507 9.62273L17.2155 12.071C17.6307 13.1254 16.7716 14.2422 15.6462 14.111L11.3727 13.61L12.3366 16.0563C12.6402 16.827 12.2615 17.6979 11.4909 18.0016L10.5602 18.3688C9.78952 18.6723 8.91852 18.2929 8.61493 17.5221L7.33173 14.2663L6.86689 14.4499C5.06846 15.1581 3.03623 14.2737 2.32782 12.4753C1.61965 10.6769 2.50309 8.64461 4.30146 7.93621L6.85907 6.92937C6.93572 6.89918 7.00401 6.84961 7.05732 6.7868L10.9528 2.19695L11.0974 2.04754ZM9.66669 13.4108C9.58487 13.4012 9.50115 13.4119 9.4245 13.4421L8.26239 13.8991L9.5456 17.1559C9.6468 17.4129 9.93711 17.5394 10.194 17.4382L11.1247 17.072C11.3814 16.9707 11.507 16.6803 11.4059 16.4235L10.2468 13.4782L9.66669 13.4108ZM4.66767 8.86687C3.38323 9.373 2.75252 10.8245 3.25849 12.1091C3.76452 13.3937 5.21604 14.0253 6.50067 13.5192L8.82587 12.6022L6.99384 7.94988L4.66767 8.86687ZM12.5612 2.98504C12.4313 2.65568 12.0162 2.56714 11.7634 2.79461L11.7145 2.84441L7.85028 7.39617L9.82978 12.4225L15.7614 13.1179C16.1365 13.1617 16.4229 12.7896 16.2849 12.4382L12.5612 2.98504ZM14.8356 6.02996L15.8708 8.65887C16.3372 8.25373 16.5232 7.58576 16.2839 6.9782C16.0445 6.37071 15.453 6.00819 14.8356 6.02996Z"})}),rx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M11.5859 2C11.9837 2.00004 12.3652 2.15818 12.6465 2.43945L15.5605 5.35352C15.8418 5.63478 16 6.01629 16 6.41406V16.5C16 17.3284 15.3284 18 14.5 18H5.5C4.72334 18 4.08461 17.4097 4.00781 16.6533L4 16.5V3.5C4 2.67157 4.67157 2 5.5 2H11.5859ZM5.5 3C5.22386 3 5 3.22386 5 3.5V16.5C5 16.7761 5.22386 17 5.5 17H14.5C14.7761 17 15 16.7761 15 16.5V7H12.5C11.6716 7 11 6.32843 11 5.5V3H5.5ZM12.54 13.3037C12.6486 13.05 12.9425 12.9317 13.1963 13.04C13.45 13.1486 13.5683 13.4425 13.46 13.6963C13.1651 14.3853 12.589 15 11.7998 15C11.3132 14.9999 10.908 14.7663 10.5996 14.4258C10.2913 14.7661 9.88667 14.9999 9.40039 15C8.91365 15 8.50769 14.7665 8.19922 14.4258C7.89083 14.7661 7.48636 15 7 15C6.72386 15 6.5 14.7761 6.5 14.5C6.5 14.2239 6.72386 14 7 14C7.21245 14 7.51918 13.8199 7.74023 13.3037L7.77441 13.2373C7.86451 13.0913 8.02513 13 8.2002 13C8.40022 13.0001 8.58145 13.1198 8.66016 13.3037C8.88121 13.8198 9.18796 14 9.40039 14C9.61284 13.9998 9.9197 13.8197 10.1406 13.3037L10.1748 13.2373C10.2649 13.0915 10.4248 13.0001 10.5996 13C10.7997 13 10.9808 13.1198 11.0596 13.3037C11.2806 13.8198 11.5874 13.9999 11.7998 14C12.0122 14 12.319 13.8198 12.54 13.3037ZM12.54 9.30371C12.6486 9.05001 12.9425 8.93174 13.1963 9.04004C13.45 9.14863 13.5683 9.44253 13.46 9.69629C13.1651 10.3853 12.589 11 11.7998 11C11.3132 10.9999 10.908 10.7663 10.5996 10.4258C10.2913 10.7661 9.88667 10.9999 9.40039 11C8.91365 11 8.50769 10.7665 8.19922 10.4258C7.89083 10.7661 7.48636 11 7 11C6.72386 11 6.5 10.7761 6.5 10.5C6.5 10.2239 6.72386 10 7 10C7.21245 10 7.51918 9.8199 7.74023 9.30371L7.77441 9.2373C7.86451 9.09126 8.02513 9 8.2002 9C8.40022 9.00008 8.58145 9.11981 8.66016 9.30371C8.88121 9.8198 9.18796 10 9.40039 10C9.61284 9.99978 9.9197 9.81969 10.1406 9.30371L10.1748 9.2373C10.2649 9.09147 10.4248 9.00014 10.5996 9C10.7997 9 10.9808 9.11975 11.0596 9.30371C11.2806 9.8198 11.5874 9.99989 11.7998 10C12.0122 10 12.319 9.81985 12.54 9.30371ZM12 5.5C12 5.77614 12.2239 6 12.5 6H14.793L12 3.20703V5.5Z"})}),sx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M7.2705 3.0498C11.1054 1.5437 15.4369 3.42942 16.9473 7.26367C18.4585 11.1003 16.5729 15.4359 12.7363 16.9473C8.89982 18.4583 4.56416 16.5736 3.05272 12.7373C1.54288 8.90435 3.42282 4.57201 7.25194 3.05663C7.25547 3.05522 7.25914 3.05413 7.26269 3.05273C7.26523 3.05172 7.26795 3.05079 7.2705 3.0498ZM8.64159 14.5283C8.05764 14.958 7.56418 15.4198 7.17772 15.8896C8.21355 16.3858 9.37633 16.6096 10.5508 16.5098C10.2224 16.2862 9.89754 16.0029 9.58202 15.6748C9.26312 15.3432 8.94744 14.9583 8.64159 14.5283ZM13.1572 12.5351C12.5305 12.6659 11.8818 12.8585 11.2275 13.1162C10.5729 13.3741 9.96666 13.6758 9.41894 14.0078C9.6946 14.3937 9.97385 14.7371 10.2539 15.0283C10.7036 15.4959 11.1332 15.8156 11.5117 15.9863C11.8879 16.1559 12.1765 16.1643 12.3935 16.0791C12.6107 15.9936 12.8179 15.7903 12.9775 15.4092C13.1379 15.0262 13.2342 14.4991 13.2441 13.8506C13.2503 13.4466 13.2187 13.0053 13.1572 12.5351ZM3.63768 8.51855C3.34594 9.76629 3.4167 11.1121 3.92186 12.3945C4.42675 13.6762 5.29203 14.7083 6.35546 15.4219C6.82009 14.8304 7.4201 14.2628 8.12694 13.748C7.6691 12.9972 7.2458 12.1466 6.88378 11.2275C6.52163 10.3082 6.25055 9.397 6.07323 8.53515C5.20566 8.64053 4.38055 8.63422 3.63768 8.51855ZM16.081 12.3828C15.4777 12.3027 14.8015 12.3016 14.081 12.3857C14.1506 12.9087 14.1838 13.4053 14.1767 13.8652C14.1698 14.3208 14.124 14.75 14.0361 15.1377C14.9636 14.4096 15.6617 13.4524 16.081 12.3828ZM11.0947 6.7705C10.4885 7.14026 9.82394 7.47239 9.11425 7.75195C8.40436 8.03157 7.69176 8.2418 6.99608 8.38476C7.16147 9.17591 7.41289 10.0225 7.75292 10.8857C8.09272 11.7483 8.48601 12.5376 8.90429 13.2285C9.51056 12.8587 10.176 12.5276 10.8857 12.248C11.5954 11.9685 12.3075 11.7572 13.0029 11.6143C12.8376 10.8236 12.5869 9.97794 12.2471 9.11523C11.907 8.25206 11.5133 7.46188 11.0947 6.7705ZM13.6426 4.57714C13.178 5.16855 12.5788 5.73625 11.8721 6.25097C12.3302 7.00222 12.754 7.85307 13.1162 8.77245C13.4782 9.69152 13.7485 10.6024 13.9258 11.4639C14.7932 11.3584 15.6185 11.3649 16.3613 11.4805C16.6528 10.233 16.5841 8.88752 16.0791 7.60546C15.5738 6.32297 14.707 5.29067 13.6426 4.57714ZM5.9619 4.86327C5.03547 5.59096 4.33712 6.54756 3.91796 7.6162C4.52106 7.69641 5.19677 7.69821 5.91698 7.61425C5.84736 7.09104 5.81616 6.59385 5.82323 6.13378C5.83026 5.679 5.87418 5.25038 5.9619 4.86327ZM8.48827 4.01367C8.11174 3.8439 7.82256 3.83644 7.60546 3.92187C7.38849 4.0075 7.182 4.20998 7.02245 4.59081C6.86212 4.97369 6.76585 5.50006 6.75585 6.14843C6.74965 6.55226 6.78027 6.99382 6.84179 7.46386C7.46863 7.33317 8.11803 7.14252 8.77245 6.88476C9.42675 6.62702 10.0316 6.32305 10.5791 5.9912C10.3036 5.6057 10.0259 5.26167 9.74608 4.9707C9.29651 4.50322 8.8667 4.18435 8.48827 4.01367ZM12.8223 4.10937C11.7866 3.61351 10.6234 3.3904 9.44921 3.49023C9.77744 3.71355 10.1026 3.99633 10.418 4.32421C10.7368 4.65579 11.0526 5.04068 11.3584 5.4707C11.9424 5.04095 12.4358 4.57931 12.8223 4.10937Z"})}),ix=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M16.5 4C17.3284 4 18 4.67157 18 5.5V14.5C18 15.3284 17.3284 16 16.5 16H3.5C2.67157 16 2 15.3284 2 14.5V5.5C2 4.67157 2.67157 4 3.5 4H16.5ZM3.5 5C3.22386 5 3 5.22386 3 5.5V14.5C3 14.7761 3.22386 15 3.5 15H16.5C16.7761 15 17 14.7761 17 14.5V5.5C17 5.22386 16.7761 5 16.5 5H3.5ZM12.5 12C12.7761 12 13 12.2239 13 12.5C13 12.7761 12.7761 13 12.5 13H7.5C7.22386 13 7 12.7761 7 12.5C7 12.2239 7.22386 12 7.5 12H12.5ZM6.25 9.5C6.66421 9.5 7 9.83579 7 10.25C7 10.6642 6.66421 11 6.25 11C5.83579 11 5.5 10.6642 5.5 10.25C5.5 9.83579 5.83579 9.5 6.25 9.5ZM8.75 9.5C9.16421 9.5 9.5 9.83579 9.5 10.25C9.5 10.6642 9.16421 11 8.75 11C8.33579 11 8 10.6642 8 10.25C8 9.83579 8.33579 9.5 8.75 9.5ZM11.25 9.5C11.6642 9.5 12 9.83579 12 10.25C12 10.6642 11.6642 11 11.25 11C10.8358 11 10.5 10.6642 10.5 10.25C10.5 9.83579 10.8358 9.5 11.25 9.5ZM13.75 9.5C14.1642 9.5 14.5 9.83579 14.5 10.25C14.5 10.6642 14.1642 11 13.75 11C13.3358 11 13 10.6642 13 10.25C13 9.83579 13.3358 9.5 13.75 9.5ZM6.25 7C6.66421 7 7 7.33579 7 7.75C7 8.16421 6.66421 8.5 6.25 8.5C5.83579 8.5 5.5 8.16421 5.5 7.75C5.5 7.33579 5.83579 7 6.25 7ZM8.75 7C9.16421 7 9.5 7.33579 9.5 7.75C9.5 8.16421 9.16421 8.5 8.75 8.5C8.33579 8.5 8 8.16421 8 7.75C8 7.33579 8.33579 7 8.75 7ZM11.25 7C11.6642 7 12 7.33579 12 7.75C12 8.16421 11.6642 8.5 11.25 8.5C10.8358 8.5 10.5 8.16421 10.5 7.75C10.5 7.33579 10.8358 7 11.25 7ZM13.75 7C14.1642 7 14.5 7.33579 14.5 7.75C14.5 8.16421 14.1642 8.5 13.75 8.5C13.3358 8.5 13 8.16421 13 7.75C13 7.33579 13.3358 7 13.75 7Z"})}),ox=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M8 14C8 14.5523 8.44772 15 9 15H9.5C9.77614 15 10 15.2239 10 15.5C10 15.7761 9.77614 16 9.5 16H9C8.40169 16 7.86651 15.7357 7.5 15.3193C7.13349 15.7357 6.59831 16 6 16H5.5C5.22386 16 5 15.7761 5 15.5C5 15.2239 5.22386 15 5.5 15H6C6.55228 15 7 14.5523 7 14V13.5L7.00098 6.5H7V6C7 5.44772 6.55228 5 6 5H5.5C5.22386 5 5 4.77614 5 4.5C5 4.22386 5.22386 4 5.5 4H6C6.59805 4 7.1335 4.26363 7.5 4.67969C7.8665 4.26363 8.40195 4 9 4H9.5C9.77614 4 10 4.22386 10 4.5C10 4.77614 9.77614 5 9.5 5H9C8.44772 5 8 5.44772 8 6V6.5H8.00098L8 13.5V14ZM5.5 7C5.77614 7 6 7.22386 6 7.5C6 7.77614 5.77614 8 5.5 8H3.5C3.22386 8 3 8.22386 3 8.5V11.5C3 11.7761 3.22386 12 3.5 12H5.5C5.77614 12 6 12.2239 6 12.5C6 12.7761 5.77614 13 5.5 13H3.5C2.67157 13 2 12.3284 2 11.5V8.5C2 7.67157 2.67157 7 3.5 7H5.5ZM16.5 7C17.3284 7 18 7.67157 18 8.5V11.5C18 12.3284 17.3284 13 16.5 13H9.5C9.22386 13 9 12.7761 9 12.5C9 12.2239 9.22386 12 9.5 12H16.5C16.7761 12 17 11.7761 17 11.5V8.5C17 8.22386 16.7761 8 16.5 8H9.5C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7H16.5Z"})}),ax=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M8.5 2C12.0899 2 15 4.91015 15 8.5C15 10.1149 14.4094 11.5908 13.4346 12.7275L17.8535 17.1465L17.918 17.2246C18.0461 17.4187 18.0244 17.6827 17.8535 17.8535C17.6827 18.0244 17.4187 18.0461 17.2246 17.918L17.1465 17.8535L12.7275 13.4346C11.5908 14.4094 10.1149 15 8.5 15C4.91015 15 2 12.0899 2 8.5C2 4.91015 4.91015 2 8.5 2ZM8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C11.5376 14 14 11.5376 14 8.5C14 5.46243 11.5376 3 8.5 3Z"})}),lx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M10.5488 2C11.3503 2 12 2.64973 12 3.45117C12 3.64554 12.1376 3.85418 12.3848 3.95215C12.4534 3.97933 12.5215 4.00769 12.5889 4.03711L12.6797 4.06934C12.8914 4.12916 13.094 4.07583 13.2148 3.95508C13.7824 3.38817 14.7023 3.38882 15.2695 3.95605L16.0439 4.73047L16.1436 4.84082C16.6091 5.41137 16.5761 6.25346 16.0439 6.78516C15.9061 6.92297 15.8568 7.16748 15.9629 7.41016L16.0479 7.61523L16.0898 7.70215C16.1981 7.8943 16.3787 7.99998 16.5488 8C17.3503 8 18 8.64973 18 9.45117V10.5488C18 11.3503 17.3503 12 16.5488 12C16.3787 12 16.1982 12.1057 16.0898 12.2979L16.0479 12.3848C16.0206 12.4533 15.9923 12.5216 15.9629 12.5889C15.8567 12.8317 15.9059 13.0768 16.0439 13.2148C16.6113 13.7823 16.6113 14.7021 16.0439 15.2695L15.2695 16.0439C14.7021 16.6113 13.7823 16.6113 13.2148 16.0439C13.0941 15.9232 12.8914 15.87 12.6797 15.9297L12.5889 15.9629C12.5219 15.9921 12.4539 16.0198 12.3857 16.0469C12.1385 16.1449 12.0002 16.3534 12 16.5479C12 17.3496 11.3496 18 10.5479 18H9.45215C8.6504 18 8 17.3496 8 16.5479C7.99981 16.3776 7.89419 16.1969 7.70215 16.0889L7.61523 16.0469C7.5465 16.0197 7.4777 15.9914 7.41016 15.9619C7.16721 15.8561 6.92289 15.9062 6.78516 16.0439C6.25346 16.5761 5.41137 16.6091 4.84082 16.1436L4.73047 16.0439L3.95605 15.2695C3.38882 14.7023 3.38817 13.7824 3.95508 13.2148L4.00293 13.1582C4.089 13.0359 4.1206 12.8611 4.06934 12.6797L4.03711 12.5889C4.00769 12.5215 3.97933 12.4534 3.95215 12.3848C3.85418 12.1376 3.64554 12 3.45117 12C2.64973 12 2 11.3503 2 10.5488V9.45117C2 8.64973 2.64973 8 3.45117 8C3.64551 7.99998 3.85336 7.86221 3.95117 7.61523L4.03711 7.41016L4.06934 7.31934C4.12058 7.13786 4.0891 6.963 4.00293 6.84082L3.95508 6.78516C3.38796 6.21804 3.38796 5.29759 3.95508 4.73047L4.73047 3.95508L4.84082 3.85547C5.41121 3.39018 6.25345 3.42338 6.78516 3.95508C6.92296 4.09285 7.16718 4.14308 7.41016 4.03711C7.47794 4.00754 7.54625 3.97848 7.61523 3.95117C7.86221 3.85336 7.99998 3.64551 8 3.45117C8 2.64973 8.64973 2 9.45117 2H10.5488ZM9.45117 3C9.20202 3 9 3.20202 9 3.45117C8.99998 4.12476 8.54338 4.66017 7.9834 4.88184C7.92515 4.9049 7.86686 4.92814 7.80957 4.95312C7.25608 5.19449 6.55378 5.13969 6.07715 4.66309C5.92261 4.50854 5.68432 4.48855 5.50879 4.60449L5.43848 4.66309L4.66309 5.43848C4.48649 5.61507 4.48649 5.90055 4.66309 6.07715C5.10986 6.52395 5.18607 7.1692 4.99512 7.7041L4.95312 7.80957C4.92814 7.86686 4.9049 7.92515 4.88184 7.9834C4.66017 8.54338 4.12476 8.99998 3.45117 9C3.20202 9 3 9.20202 3 9.45117V10.5488C3 10.798 3.20202 11 3.45117 11C4.12476 11 4.65999 11.4569 4.88184 12.0166C4.90472 12.0743 4.92834 12.1317 4.95312 12.1885C5.1948 12.7421 5.13958 13.4449 4.66309 13.9219C4.48628 14.0988 4.48621 14.3856 4.66309 14.5625L5.4375 15.3369L5.50879 15.3955C5.6843 15.5112 5.92272 15.4914 6.07715 15.3369C6.55382 14.8599 7.25685 14.8044 7.81055 15.0459C7.86752 15.0707 7.92546 15.0943 7.9834 15.1172L8.08691 15.1631C8.59842 15.4071 8.99981 15.9165 9 16.5479C9 16.7973 9.20268 17 9.45215 17H10.5479C10.7973 17 11 16.7973 11 16.5479C11.0002 15.8742 11.4568 15.3391 12.0166 15.1172C12.0743 15.0943 12.1317 15.0707 12.1885 15.0459L12.2939 15.0039C12.8292 14.8126 13.4747 14.8898 13.9219 15.3369C14.0988 15.5138 14.3856 15.5138 14.5625 15.3369L15.3369 14.5625C15.5138 14.3856 15.5138 14.0988 15.3369 13.9219C14.86 13.445 14.8046 12.7424 15.0469 12.1885C15.0718 12.1315 15.0952 12.0735 15.1182 12.0156L15.1641 11.9121C15.4084 11.4013 15.9175 11 16.5488 11C16.798 11 17 10.798 17 10.5488V9.45117C17 9.20202 16.798 9 16.5488 9C15.9172 8.99998 15.4081 8.59825 15.1641 8.08691L15.1182 7.9834L15.0459 7.81055C14.8038 7.25675 14.8599 6.55381 15.3369 6.07715C15.4914 5.92272 15.5112 5.6843 15.3955 5.50879L15.3369 5.4375L14.5625 4.66309C14.4079 4.50844 14.169 4.48878 13.9932 4.60449L13.9219 4.66309C13.4449 5.13958 12.7421 5.1948 12.1885 4.95312L12.0166 4.88184C11.4569 4.65999 11 4.12476 11 3.45117C11 3.20202 10.798 3 10.5488 3H9.45117ZM10 7C11.6569 7 13 8.34315 13 10C13 11.6569 11.6569 13 10 13C8.34315 13 7 11.6569 7 10C7 8.34315 8.34315 7 10 7ZM10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8Z"})}),cx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M5.99999 13.5C6.55227 13.5 6.99998 13.9478 6.99999 14.5V16.5C6.99999 17.0523 6.55228 17.5 5.99999 17.5H3.99999C3.44771 17.5 2.99999 17.0523 2.99999 16.5V14.5C3 13.9478 3.44772 13.5 3.99999 13.5H5.99999ZM3.99999 16.5H5.99999V14.5H3.99999V16.5ZM16.5 15C16.7761 15 17 15.2239 17 15.5C17 15.7762 16.7761 16 16.5 16H9.49999C9.22386 16 8.99999 15.7762 8.99999 15.5C9.00001 15.2239 9.22387 15 9.49999 15H16.5ZM5.99999 8.00002C6.55227 8.00002 6.99998 8.44775 6.99999 9.00002V11C6.99999 11.5523 6.55228 12 5.99999 12H3.99999C3.44771 12 2.99999 11.5523 2.99999 11V9.00002C3 8.44775 3.44772 8.00003 3.99999 8.00002H5.99999ZM3.99999 11H5.99999V9.00002H3.99999V11ZM16.5 9.50002C16.7761 9.50002 17 9.72389 17 10C17 10.2762 16.7761 10.5 16.5 10.5H9.49999C9.22386 10.5 8.99999 10.2762 8.99999 10C9.00001 9.7239 9.22387 9.50003 9.49999 9.50002H16.5ZM6.12597 2.91798C6.30923 2.71156 6.62549 2.69282 6.83202 2.87599C7.03846 3.05925 7.05721 3.37551 6.87402 3.58205L4.65624 6.08205C4.56198 6.18816 4.42708 6.24925 4.28515 6.25002C4.14315 6.25078 4.0075 6.19113 3.9121 6.08596L2.87987 4.94728L2.81932 4.86525C2.701 4.66516 2.7351 4.40248 2.91405 4.24025C3.09293 4.07823 3.35742 4.06993 3.54491 4.20705L3.62011 4.27541L4.27733 5.00002L6.12597 2.91798ZM16.5 4.00002C16.7761 4.00002 17 4.22389 17 4.50002C17 4.77616 16.7761 5.00002 16.5 5.00002H9.49999C9.22386 5.00001 8.99999 4.77615 8.99999 4.50002C9.00001 4.22389 9.22387 4.00002 9.49999 4.00002H16.5Z"})}),ux=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M11.3232 1.5C11.9365 1.50011 12.4881 1.87396 12.7158 2.44336L13.3379 4H17.5L17.6006 4.00977C17.8285 4.0563 18 4.25829 18 4.5C18 4.7417 17.8285 4.94371 17.6006 4.99023L17.5 5H15.9629L15.0693 16.6152C15.0091 17.3965 14.3578 17.9999 13.5742 18H6.42578C5.6912 17.9999 5.07237 17.4697 4.94824 16.7598L4.93066 16.6152L4.03711 5H2.5C2.22387 5 2.00002 4.77613 2 4.5C2 4.22386 2.22386 4 2.5 4H6.66211L7.28418 2.44336L7.33105 2.33887C7.58152 1.82857 8.10177 1.5001 8.67676 1.5H11.3232ZM5.92773 16.5381C5.94778 16.7985 6.16464 16.9999 6.42578 17H13.5742C13.8354 16.9999 14.0522 16.7985 14.0723 16.5381L14.9609 5H5.03906L5.92773 16.5381ZM8.5 8C8.77613 8 8.99998 8.22388 9 8.5V13.5C9 13.7761 8.77614 14 8.5 14C8.22386 14 8 13.7761 8 13.5V8.5C8.00002 8.22388 8.22387 8 8.5 8ZM11.5 8C11.7761 8 12 8.22386 12 8.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V8.5C11 8.22386 11.2239 8 11.5 8ZM8.67676 2.5C8.49802 2.5001 8.33492 2.59525 8.24609 2.74609L8.21289 2.81445L7.73828 4H12.2617L11.7871 2.81445C11.7112 2.62471 11.5276 2.50011 11.3232 2.5H8.67676Z"})}),dx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M15.5 4C15.7761 4 16 4.22386 16 4.5V6.5C16 6.77614 15.7761 7 15.5 7C15.2239 7 15 6.77614 15 6.5V5H10.5V15H12C12.2761 15 12.5 15.2239 12.5 15.5C12.5 15.7761 12.2761 16 12 16H8C7.72386 16 7.5 15.7761 7.5 15.5C7.5 15.2239 7.72386 15 8 15H9.5V5H5V6.5C5 6.77614 4.77614 7 4.5 7C4.22386 7 4 6.77614 4 6.5V4.5C4 4.46557 4.00314 4.43189 4.00977 4.39941C4.05629 4.17145 4.25829 4 4.5 4H15.5Z",fill:"currentColor"})}),hx=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M16.5 13C16.7761 13 17 13.2239 17 13.5V15.5C17 16.3284 16.3284 17 15.5 17H4.5C3.67157 17 3 16.3284 3 15.5V13.5C3 13.2239 3.22386 13 3.5 13C3.77614 13 4 13.2239 4 13.5V15.5C4 15.7761 4.22386 16 4.5 16H15.5C15.7761 16 16 15.7761 16 15.5V13.5C16 13.2239 16.2239 13 16.5 13ZM10 3C10.1428 3 10.2791 3.06122 10.374 3.16797L14.374 7.66797L14.4326 7.75C14.5492 7.95128 14.5127 8.21347 14.332 8.37402C14.1515 8.53433 13.8873 8.53961 13.7012 8.40039L13.626 8.33203L10.5 4.81445V13.5C10.5 13.7761 10.2761 14 10 14C9.72386 14 9.5 13.7761 9.5 13.5V4.81445L6.37402 8.33203C6.19064 8.53834 5.87437 8.55725 5.66797 8.37402C5.46166 8.19064 5.44275 7.87437 5.62598 7.66797L9.62598 3.16797L9.70508 3.09668C9.79001 3.03458 9.89298 3 10 3Z"})});function px({result:e,toolInfo:t,lastScreenshot:s,debugMode:i=!1}){const o=n(),[a,l]=de.useState(!1),[c,u]=de.useState(!1);de.useEffect(()=>{fe(me.SHOW_SYSTEM_REMINDERS).then(e=>{void 0!==e&&u(e)});const e=e=>{void 0!==e[me.SHOW_SYSTEM_REMINDERS]?.newValue&&u(e[me.SHOW_SYSTEM_REMINDERS].newValue)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[]);const d=Array.isArray(e.content)&&e.content.some(e=>"image"===e.type),h=t?(()=>{if(!t)return null;if("computer"===t.name){const n=t.input?.action,r="string"==typeof e.content?(()=>{try{return JSON.parse(e.content)}catch{return null}})():null,s=r?.action||n;switch(s){case"screenshot":return{icon:he.jsx(Wy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Take screenshot",id:"oqZjDDkxak"})};case"left_click":return{icon:he.jsx(Iy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Click",id:"X6qJ+Mle0d"})};case"right_click":return{icon:he.jsx("span",{className:"text-text-300",children:he.jsx(Rm,{size:14,color:"currentColor"})}),text:o.formatMessage({defaultMessage:"Right-click",id:"Ri63Z85D7E"})};case"double_click":return{icon:he.jsx(Iy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Double-click",id:"x0gJoMad7a"})};case"triple_click":return{icon:he.jsx(Iy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Triple-click",id:"AG0gBvRduy"})};case"type":{const e=t.input?.text,n=e?`${e.substring(0,30)}${e.length>30?"...":""}`:"";return{icon:he.jsx(dx,{size:16,className:"text-text-300"}),text:e?o.formatMessage({defaultMessage:'Type: "{text}"',id:"b5Uf1JSpcI"},{text:n}):o.formatMessage({defaultMessage:"Type text",id:"ai0JAxDdlC"})}}case"wait":{const e=t.input?.duration;return{icon:he.jsx(Yy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Wait {count, plural, one {# second} other {# seconds}}",id:"aLzfIziOrP"},{count:e})}}case"scroll":{const e=t.input?.scroll_direction||"down";return{icon:"up"===e?he.jsx(Zy,{size:16,className:"text-text-300"}):"down"===e?he.jsx($y,{size:16,className:"text-text-300"}):"left"===e?he.jsx(By,{size:16,className:"text-text-300"}):"right"===e?he.jsx(Uy,{size:16,className:"text-text-300"}):he.jsx($y,{size:16,className:"text-text-300"}),text:`Scroll ${e}`}}case"key":{const e=t.input?.text;return{icon:he.jsx(ix,{size:16,className:"text-text-300"}),text:e?`Press key: ${e}`:o.formatMessage({defaultMessage:"Press key",id:"ZJn5qDfYOD"})}}case"left_click_drag":return{icon:he.jsx("span",{className:"text-text-300",children:he.jsx($m,{size:14,color:"currentColor"})}),text:o.formatMessage({defaultMessage:"Drag",id:"r5pj/5J6ic"})};default:return{icon:he.jsx(lx,{size:16,className:"text-text-300"}),text:`Computer action: ${s||n||"Unknown"}`}}}if("screenshot"===t.name)return{icon:he.jsx(Wy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Take screenshot",id:"oqZjDDkxak"})};if("read_page"===t.name){const e=t.input?.filter;let n=o.formatMessage({defaultMessage:"Read page",id:"hbWicV9xaa"});return"interactive"===e?n=o.formatMessage({defaultMessage:"Read page (interactive)",id:"6kGP03sC6R"}):"all"===e&&(n=o.formatMessage({defaultMessage:"Read page (all)",id:"N6hq8IFfkj"})),{icon:he.jsx(rx,{size:16,className:"text-text-300"}),text:n}}if("find"===t.name){const e=t.input?.query,n=e?`${e.substring(0,30)}${e.length>30?"...":""}`:"";return{icon:he.jsx(ax,{size:16,className:"text-text-300"}),text:e?o.formatMessage({defaultMessage:'Find: "{query}"',id:"ArrUF7Kfqw"},{query:n}):o.formatMessage({defaultMessage:"Find element",id:"C9scsm6HrW"})}}if("get_page_text"===t.name)return{icon:he.jsx("span",{className:"text-text-300",children:he.jsx(_m,{size:20,color:"currentColor"})}),text:o.formatMessage({defaultMessage:"Extract page text",id:"kwxxreL+i3"})};if("scroll"===t.name){const e=t.input;let n=o.formatMessage({defaultMessage:"Scroll",id:"SxCvYAQUfY"}),r=he.jsx($y,{size:16,className:"text-text-300"});if(e?.direction)n=`Scroll ${e.direction}`,r="up"===e.direction?he.jsx(Zy,{className:"w-3.5 h-3.5 text-text-300"}):"down"===e.direction?he.jsx($y,{className:"w-3.5 h-3.5 text-text-300"}):"left"===e.direction?he.jsx(By,{className:"w-3.5 h-3.5 text-text-300"}):"right"===e.direction?he.jsx(Uy,{className:"w-3.5 h-3.5 text-text-300"}):he.jsx($y,{className:"w-3.5 h-3.5 text-text-300"});else if(e?.text){const t=`${e.text.substring(0,20)}${e.text.length>20?"...":""}`;n=o.formatMessage({defaultMessage:'Scroll to: "{text}"',id:"PhoFlacbDZ"},{text:t})}else e?.ref&&(n=o.formatMessage({defaultMessage:"Scroll to element",id:"CyQ6so5Xsy"}));return{icon:r,text:n}}if("key"===t.name){const e=t.input?.key?.split(" ").filter(e=>e.length>0)||[],n=e.length;let r="";if(1===n)r=o.formatMessage({defaultMessage:"Press {key} key",id:"rwoZ8xAmCX"},{key:e[0]});else if(n<=5)r=o.formatMessage({defaultMessage:"Press keys: {keys}",id:"W/T0ya233Q"},{keys:e.join(", ")});else{const t={};e.forEach(e=>{t[e]=(t[e]||0)+1});const s=Object.entries(t).map(([e,t])=>t>1?`${e} ×${t}`:e).join(", ");r=o.formatMessage({defaultMessage:"Press {count} keys: {summary}",id:"07CU16lPVb"},{count:n,summary:s})}return{icon:he.jsx(ix,{className:"w-3.5 h-3.5 text-text-300"}),text:r}}if("wait"===t.name)return{icon:he.jsx(Yy,{className:"w-3.5 h-3.5 text-text-300"}),text:o.formatMessage({defaultMessage:"Wait {count, plural, one {# second} other {# seconds}}",id:"aLzfIziOrP"},{count:t.input?.duration})};if("type"===t.name){const e=t.input?.text?`${t.input.text.substring(0,30)}${t.input.text.length>30?"...":""}`:"";return{icon:he.jsx(dx,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:'Type: "{text}"',id:"b5Uf1JSpcI"},{text:e})}}if("form_input"===t.name){const e=t.input?.value;let n=o.formatMessage({defaultMessage:"Set form value",id:"ceCuvzBxbw"});if(e){const t=`${String(e).substring(0,20)}${String(e).length>20?"...":""}`;n=o.formatMessage({defaultMessage:'Set input to "{value}"',id:"d1iFfHCXCd"},{value:t})}return{icon:he.jsx(ox,{size:16,className:"text-text-300"}),text:n}}if("click"===t.name){let e="";if(t.input?.text){const n=`${t.input.text.substring(0,30)}${t.input.text.length>30?"...":""}`;e=o.formatMessage({defaultMessage:'Click: "{target}"',id:"fuoi35GbI+"},{target:n})}else e=o.formatMessage({defaultMessage:"Click",id:"X6qJ+Mle0d"});return{icon:he.jsx(Iy,{size:16,className:"text-text-300"}),text:e}}if("navigate"===t.name){const e=t.input?.url?.substring(0,30)||"",n=t.input?.url?.length>30?"...":"";return{icon:he.jsx(Dy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Navigate to {url}",id:"B5amdqFEtT"},{url:`${e}${n}`})}}if("update_plan"===t.name){const t=Array.isArray(e.content)?e.content.filter(e=>"text"===e.type).map(e=>e.text).join(""):"string"==typeof e.content?e.content:"",n=t.includes("approved your plan")||t.includes("User has approved"),r=t.includes("rejected")||t.includes("Permission denied");return n?{icon:he.jsx(Ky,{className:"w-4 h-4 text-accent-secondary-100"}),text:o.formatMessage({defaultMessage:"Plan approved",id:"htmyA3WAQx"})}:r?{icon:he.jsx("span",{className:"text-danger-100","aria-hidden":"true",children:"✕"}),text:o.formatMessage({defaultMessage:"Plan rejected",id:"7wJz7kSrLT"})}:{icon:he.jsx(cx,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Update plan",id:"e6uhP1Ta9X"})}}if("TodoWrite"===t.name){const e=Re(t.input?.todos,"todos"),n=e.length;let r=1;for(let t=0;t<e.length;t++){if("in_progress"===e[t].status){r=t+1;break}if("pending"===e[t].status){r=t+1;break}}return{icon:he.jsx(cx,{size:16,className:"text-text-300"}),text:n>0?o.formatMessage({defaultMessage:"Step {currentStep} of {totalCount}",id:"2uu7KJJCOH"},{currentStep:r,totalCount:n}):o.formatMessage({defaultMessage:"Steps",id:"huCHmkVjex"})}}return"tabs_create"===t.name?{icon:he.jsx("span",{className:"text-text-300",children:he.jsx(Hm,{size:14,color:"currentColor"})}),text:o.formatMessage({defaultMessage:"Create new tab",id:"hjoV9zJZVT"})}:"tabs_context"===t.name?{icon:he.jsx(Ry,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Get tabs",id:"PytICQxIDI"})}:"execute_javascript"===t.name?{icon:he.jsx("span",{className:"text-text-300",children:he.jsx(Am,{size:16,color:"currentColor"})}),text:o.formatMessage({defaultMessage:"Execute JavaScript",id:"MtIcfsBa83"})}:"upload_image"===t.name?{icon:he.jsx(hx,{className:"w-4 h-4 text-text-300"}),text:o.formatMessage({defaultMessage:"Upload image",id:"vMUomPyEk+"})}:{icon:he.jsx(lx,{size:16,className:"text-text-300"}),text:`Tool: ${t.name||"Unknown"}`}})():null,p=!h&&e&&d&&!e.is_error?{icon:he.jsx(Wy,{size:16,className:"text-text-300"}),text:o.formatMessage({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})}:null,f=h||p,m="update_plan"===t?.name&&("Plan approved"===f?.text||"Plan rejected"===f?.text),g=i||"update_plan"===t?.name&&!m;return he.jsxs("div",{className:"overflow-hidden border-[0.5px] border-border-300 rounded-[10px]",children:[g?he.jsxs("button",{onClick:()=>l(!a),className:"w-full px-3 py-2 bg-bg-100 flex items-center justify-between text-left hover:bg-bg-200 cursor-pointer transition-colors",children:[he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:f?.icon}),he.jsx("span",{className:"font-base text-text-300",children:f?.text||he.jsx(r,{defaultMessage:"Tool Result",id:"Yn41lcLvmg"})})]}),he.jsx(qy,{className:"w-4 h-4 text-text-400 transition-transform "+(a?"rotate-90":"")})]}):he.jsx("div",{className:"w-full px-3 py-2 bg-bg-100 flex items-center justify-between text-left",children:he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx("div",{className:"flex items-center justify-center flex-shrink-0",children:f?.icon}),he.jsx("span",{className:"font-base text-text-300",children:f?.text||he.jsx(r,{defaultMessage:"Tool Result",id:"Yn41lcLvmg"})})]})}),"update_plan"===t?.name&&a&&t?.input&&he.jsx("div",{className:"px-4 py-3 bg-bg-000 border-t-[0.5px] border-border-200",children:he.jsx(Hy,{plan:{domains:t.input.domains||[],approach:t.input.approach||[]}})}),i&&a&&he.jsx("div",{className:"p-4 bg-bg-000 border-t-[0.5px] border-border-200",children:he.jsxs("div",{className:"space-y-3",children:[t&&he.jsxs("div",{className:"space-y-2",children:[he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Tool ID:",id:"NhwAlG8X9c"})}),he.jsx("code",{className:"ml-2 font-code-sm bg-bg-200 px-2 py-1 rounded text-text-200",children:t.id||e.tool_use_id})]}),t.input?.tabId&&he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Target Tab ID:",id:"8YQCrT7GkS"})}),he.jsx("code",{className:"ml-2 font-code-sm bg-bg-200 px-2 py-1 rounded text-text-200",children:t.input.tabId})]}),he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Parameters:",id:"qTWwGwIHH6"})}),he.jsx("pre",{className:"mt-1 font-code-sm bg-bg-200 p-2 rounded overflow-x-auto text-text-200",children:JSON.stringify(t.input,null,2)})]})]}),("click"===t?.name&&t?.input?.coordinate||"computer"===t?.name&&["left_click","right_click","double_click","triple_click"].includes(t?.input?.action)&&t?.input?.coordinate)&&s&&he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Click Location:",id:"3h3ag+S9Qb"})}),he.jsx(jy,{screenshot:s,coordinates:(t.name,t.input.coordinate),className:"mt-1"})]}),"computer"===t?.name&&"left_click_drag"===t?.input?.action&&t?.input?.start_coordinate&&t?.input?.coordinate&&s&&he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Drag Path:",id:"AU53gP2rAv"})}),he.jsx(Ey,{screenshot:s,startCoordinate:t.input.start_coordinate,endCoordinate:t.input.coordinate,className:"mt-1"})]}),he.jsxs("div",{children:[he.jsx("span",{className:"font-caption font-medium text-text-400",children:he.jsx(r,{defaultMessage:"Result:",id:"vBiQpyXw2X"})}),d?he.jsx("div",{className:"mt-2",children:e.content.map((e,t)=>{if("image"===e.type&&"base64"===e.source?.type){const n=`data:${e.source.media_type};base64,${e.source.data}`;return he.jsx(_y,{dataUrl:n,className:"mt-2"},t)}return"text"===e.type?he.jsx("pre",{className:"mt-1 font-code-sm bg-bg-200 p-2 rounded overflow-x-auto text-text-200",children:c?e.text:Pe(e.text)},t):null})}):he.jsx("pre",{className:"mt-1 text-xs bg-bg-200 p-2 rounded overflow-x-auto text-text-200",children:"string"==typeof e.content?c?e.content:Pe(e.content):JSON.stringify(e.content,null,2)})]})]})})]})}const fx=({size:e=16,className:t=""})=>he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 16 16",fill:"none",className:t,children:he.jsx("path",{d:"M14.4999 7C14.4987 8.06051 14.0769 9.07725 13.3271 9.82715C12.5772 10.577 11.5604 10.9988 10.4999 11H3.20678L5.35366 13.1462C5.44748 13.2401 5.50018 13.3673 5.50018 13.5C5.50018 13.6327 5.44748 13.7599 5.35366 13.8538C5.25984 13.9476 5.13259 14.0003 4.99991 14.0003C4.86722 14.0003 4.73998 13.9476 4.64615 13.8538L1.64615 10.8538C1.59967 10.8073 1.56279 10.7522 1.53763 10.6915C1.51246 10.6308 1.49951 10.5657 1.49951 10.5C1.49951 10.4343 1.51246 10.3692 1.53763 10.3085C1.56279 10.2478 1.59967 10.1927 1.64615 10.1462L4.64615 7.14625C4.73998 7.05243 4.86722 6.99972 4.99991 6.99972C5.13259 6.99972 5.25984 7.05243 5.35366 7.14625C5.44748 7.24007 5.50018 7.36732 5.50018 7.5C5.50018 7.63268 5.44748 7.75993 5.35366 7.85375L3.20678 10H10.4999C11.2956 10 12.0586 9.68393 12.6212 9.12132C13.1838 8.55871 13.4999 7.79565 13.4999 7C13.4999 6.20435 13.1838 5.44129 12.6212 4.87868C12.0586 4.31607 11.2956 4 10.4999 4H4.99991C4.8673 4 4.74012 3.94732 4.64635 3.85355C4.55258 3.75979 4.49991 3.63261 4.49991 3.5C4.49991 3.36739 4.55258 3.24021 4.64635 3.14645C4.74012 3.05268 4.8673 3 4.99991 3H10.4999C11.5604 3.00116 12.5772 3.42296 13.3271 4.17285C14.0769 4.92275 14.4987 5.93949 14.4999 7Z",fill:"currentColor"})}),mx=({onClick:e,children:t,isActive:n=!1,isPrimary:r=!1,height:s})=>he.jsx("button",{onClick:e,className:`w-full font-base flex min-w-[75px] px-[14px] py-[3px] justify-between items-center gap-2 rounded-lg border-[0.5px] transition-colors font-medium ${n?"text-text-100 bg-bg-300 border-border-400":r?"bg-text-000 text-bg-000 border-text-000 hover:bg-text-100":"text-text-100 border-border-200 hover:bg-bg-100"} ${s?"":"h-9"}`,style:s?{height:s}:void 0,children:t}),gx=({planStructure:e,onApprove:t,onReject:s,isReadOnly:i=!1,onClose:o})=>{const l=n(),[c,u]=de.useState(null),d=de.useCallback(()=>{t()},[t]),h=de.useCallback(()=>{s()},[s]),p=de.useCallback(e=>{e.target===e.currentTarget&&i&&o&&o()},[i,o]);de.useEffect(()=>{if(i){const e=e=>{"Escape"===e.key&&o&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}{const e=e=>(e.metaKey||e.ctrlKey)&&"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),u("reject"),void setTimeout(()=>{h()},150)):"Enter"===e.key?(e.preventDefault(),u("approve"),void setTimeout(()=>{d()},150)):void("Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),u("reject"),setTimeout(()=>{h()},150)));return window.addEventListener("keydown",e,!0),()=>window.removeEventListener("keydown",e,!0)}},[d,h,i,o]);const{domains:f=[],approach:m=[]}=e,g=he.jsxs("div",{className:"bg-bg-000 rounded-[14px]",children:[he.jsxs("div",{className:"flex items-center justify-between py-[10px] px-4",children:[he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx(cx,{size:20,className:"text-text-100"}),he.jsx("h3",{className:"font-base text-text-100",children:he.jsx(r,{defaultMessage:"Claude's plan",id:"VlOMp+IyXR"})})]}),i&&o&&he.jsx("button",{onClick:o,className:"text-text-400 hover:text-text-200 transition-colors duration-200 p-1 rounded-md hover:bg-bg-200",children:he.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:he.jsx("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),he.jsx("div",{className:"border-t border-border-300"}),he.jsxs("div",{className:"px-4 py-3 space-y-4 max-h-[40vh] overflow-y-auto",children:[f.length>0&&he.jsxs("div",{children:[he.jsx("p",{className:"font-small text-text-400 mb-2",children:he.jsx(r,{defaultMessage:"Allow actions on these sites",id:"DR5hG1vSxp"})}),he.jsx("div",{className:"space-y-2",children:f.map((e,t)=>{const{name:n,isForceAsk:r}=(e=>"string"==typeof e?{name:e,isForceAsk:!1}:{name:e.domain,isForceAsk:"category3"===e.category})(e);return he.jsxs("div",{className:"flex items-start gap-2",children:[he.jsx("span",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center",children:he.jsx(sx,{size:16,className:"text-text-400"})}),he.jsx("span",{className:"font-base text-text-100",children:n}),r&&he.jsx(a,{tooltipContent:l.formatMessage({defaultMessage:"You must approve any Claude action on this site",id:"qgGoWr0XYl"}),side:"top",align:"center",children:he.jsx("span",{className:"flex-shrink-0 cursor-help",children:he.jsx($r,{size:14,className:"text-text-400"})})})]},t)})})]}),m.length>0&&he.jsxs("div",{children:[he.jsx("p",{className:"font-small text-text-400 mb-2",children:he.jsx(r,{defaultMessage:"Approach to follow",id:"XAcQi8udmY"})}),he.jsx("div",{className:"space-y-2",children:m.map((e,t)=>he.jsxs("div",{className:"flex items-start gap-2",children:[he.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full border-border-300 border-0.5 flex items-center justify-center text-xs text-text-400",children:t+1}),he.jsx("span",{className:"font-base text-text-100",children:e})]},t))})]})]}),!i&&he.jsxs("div",{className:"px-3 py-[10px] space-y-[5px] mt-[10px]",children:[he.jsxs(mx,{onClick:d,isPrimary:!0,isActive:"approve"===c,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Approve plan",id:"K8niogJNQY"})}),he.jsx(fx,{className:"text-text-500"})]}),he.jsxs(mx,{onClick:h,isActive:"reject"===c,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Make changes",id:"PSsQUhf180"})}),he.jsxs("span",{className:"flex items-center gap-0.5",children:[he.jsx(Xy,{className:"text-text-500"}),he.jsx(fx,{className:"text-text-500"})]})]}),he.jsx("p",{className:"font-small text-text-500 pt-1 px-1",children:he.jsx(r,{defaultMessage:"Claude will only use the sites listed. You'll be asked before accessing anything else.",id:"ttaSfve/3w"})})]})]});return i?he.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",onClick:p,children:[he.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fade-in"}),he.jsx("div",{className:"relative max-w-lg w-full animate-modal-enter",children:g})]}):g},yx=({plan:e,isStreaming:t=!1,toolResult:n})=>{const[s,i]=de.useState(!1),o=n?n.is_error||"string"==typeof n.content&&n.content.includes("Plan rejected")?"rejected":"approved":void 0,a=!!n&&!t;return he.jsxs(he.Fragment,{children:[he.jsx("div",{onClick:()=>{a&&i(!0)},className:"flex text-left rounded-lg overflow-hidden border-[0.5px] border-border-300 transition duration-300 w-full hover:bg-bg-000/50 px-4 mt-4 mb-3 "+(a?"cursor-pointer hover:border-border-200":""),children:he.jsxs("div",{className:"group/artifact-block flex flex-1 align-start justify-between w-full",children:[he.jsxs("div",{className:"flex flex-col gap-1 py-4 min-w-0 flex-1",children:[he.jsx("div",{className:"font-base leading-tight line-clamp-1 "+(t&&0===e.approach.length?"text-text-500":"text-text-200"),children:t&&0===e.approach.length?he.jsx("span",{className:"animate-pulse",children:he.jsx(r,{defaultMessage:"Drafting plan...",id:"0A0qMvsWV4"})}):he.jsx(r,{defaultMessage:"Plan",id:"hW8KjZhriV",description:"A plan that Claude has prepared before starting work"})}),he.jsx("div",{className:"font-small line-clamp-1 text-text-400",children:o?he.jsx(he.Fragment,{children:"approved"===o?he.jsx(r,{defaultMessage:"Approved",id:"6XFO/Cw7Ld"}):he.jsx(r,{defaultMessage:"Rejected",id:"5qaD7sDVxu"})}):t?he.jsx("span",{className:"animate-pulse",children:he.jsx(r,{defaultMessage:"Planning",id:"99OdS35+yZ"})}):he.jsx(r,{defaultMessage:"Browser automation",id:"2Gct3kUo/o"})})]}),he.jsx("div",{className:"flex items-end w-[100px] relative shrink-0",children:he.jsx("div",{className:"absolute right-2 flex flex-1 overflow-hidden w-[84px] h-[71px] rounded-t-lg border-[0.5px] border-border-200 select-none scale-[1] group-hover/artifact-block:scale-[1.035] rotate-[0.1rad] group-hover/artifact-block:rotate-[0.065rad] duration-300 ease-out group-hover/artifact-block:duration-400 group-hover/artifact-block:ease-[cubic-bezier(0,0.9,0.5,1.35)] transition-transform backface-hidden will-change-transform translate-y-[19%] bg-bg-000 text-text-500 whitespace-pre-wrap text-[0.35rem] leading-tight p-2 font-mono wrap-break-word hyphens-auto",children:e.approach.length>0?e.approach.slice(0,3).join("\n"):""})})]})}),a&&s&&he.jsx(gx,{planStructure:e,onApprove:()=>{},onReject:()=>{},isReadOnly:!0,onClose:()=>{i(!1)}})]})},xx=({dataUrl:e,className:t="",coordinates:r})=>{const s=n(),[i,o]=de.useState(!1),a=de.useRef(null),[l,c]=de.useState(1);return de.useEffect(()=>{const e=()=>{if(a.current&&r){const e=a.current.width/a.current.naturalWidth,t=a.current.height/a.current.naturalHeight;c(Math.min(e,t))}},t=a.current;if(t&&r){if(!t.complete)return t.addEventListener("load",e),()=>t.removeEventListener("load",e);e()}},[e,r]),he.jsxs(he.Fragment,{children:[he.jsxs("button",{onClick:()=>o(!0),className:`relative flex-shrink-0 w-9 h-7 rounded border border-border-300 hover:border-border-200 hover:rotate-2 transition-all duration-150 ease-out hover:shadow-sm overflow-hidden ${t}`,title:s.formatMessage({defaultMessage:"Click to view full screenshot",id:"LWiiXht89U"}),children:[he.jsx("img",{ref:a,src:e,alt:s.formatMessage({defaultMessage:"Screenshot thumbnail",id:"/oSRHC9/hb"}),className:"w-full h-full object-cover"}),r&&he.jsx("div",{className:"absolute pointer-events-none rounded-full border border-accent-main-100 w-1.5 h-1.5 bg-accent-main-100",style:{left:r[0]*l+"px",top:r[1]*l+"px",transform:"translate(-50%, -50%)"}})]}),he.jsx(zt,{imageUrl:i?e:null,onClose:()=>o(!1),coordinates:r})]})},vx=de.memo(function({toolName:e,toolDisplayName:t,serverName:s,serverIconUrl:i,toolUseId:o,input:a,toolResult:l,renderMode:c=ay.Standard,isFirstBlockOfMessage:u,isLastBlockOfMessage:d,isFirstItemInGroup:h,isLastItemInGroup:p,isStreaming:f,screenshotsByTab:m}){const[g,y]=de.useState(!1),[x,v]=de.useState(!1);de.useEffect(()=>{fe(me.DEBUG_MODE).then(e=>{void 0!==e&&v(e)});const e=e=>{void 0!==e[me.DEBUG_MODE]?.newValue&&v(e[me.DEBUG_MODE].newValue)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[]);const b=!x&&"update_plan"!==e,C=n(),w={name:e,input:a,id:o},k=((e,t,n,r)=>{if("computer"===e){const e=t?.action;switch(e){case"screenshot":return{text:r.formatMessage({defaultMessage:"Take screenshot",id:"oqZjDDkxak"}),icon:he.jsx(Pt,{size:12})};case"left_click":return{text:r.formatMessage({defaultMessage:"Click",id:"X6qJ+Mle0d"}),icon:he.jsx(Iy,{size:12})};case"right_click":return{text:r.formatMessage({defaultMessage:"Right-click",id:"Ri63Z85D7E"}),icon:he.jsx(Iy,{size:12})};case"double_click":return{text:r.formatMessage({defaultMessage:"Double-click",id:"x0gJoMad7a"}),icon:he.jsx(Iy,{size:12})};case"triple_click":return{text:r.formatMessage({defaultMessage:"Triple-click",id:"AG0gBvRduy"}),icon:he.jsx(Iy,{size:12})};case"type":{const e=t?.text,n=e?`${e.substring(0,30)}${e.length>30?"...":""}`:"";return{text:e?r.formatMessage({defaultMessage:'Type: "{text}"',id:"b5Uf1JSpcI"},{text:n}):r.formatMessage({defaultMessage:"Type text",id:"ai0JAxDdlC"}),icon:he.jsx(Br,{size:12})}}case"wait":{const e=t?.duration;return{text:r.formatMessage({defaultMessage:"Wait {count, plural, one {# second} other {# seconds}}",id:"aLzfIziOrP"},{count:e}),icon:he.jsx(ts,{size:12})}}case"scroll":{const e=t?.scroll_direction||"down",n="up"===e?he.jsx(kr,{size:12}):he.jsx(br,{size:12});return{text:"up"===e?r.formatMessage({defaultMessage:"Scroll up",id:"06tSNl9YfF"}):r.formatMessage({defaultMessage:"Scroll down",id:"zQipeg7kSl"}),icon:n}}case"key":{const e=t?.text;return{text:e?r.formatMessage({defaultMessage:"Press key: {keys}",id:"BpjonN0qoV"},{keys:e}):r.formatMessage({defaultMessage:"Press key",id:"ZJn5qDfYOD"}),icon:he.jsx(Br,{size:12})}}case"left_click_drag":return{text:r.formatMessage({defaultMessage:"Drag",id:"r5pj/5J6ic"}),icon:he.jsx(Iy,{size:12})};case"zoom":return{text:r.formatMessage({defaultMessage:"Zoom",id:"yMbKjuDH/n"}),icon:he.jsx(wr,{size:12})};case"hover":return{text:r.formatMessage({defaultMessage:"Hover",id:"QNEFpq3fE/"}),icon:he.jsx(Ir,{size:12})};case"scroll_to":return{text:r.formatMessage({defaultMessage:"Scroll to element",id:"CyQ6so5Xsy"}),icon:he.jsx(br,{size:12})};default:return{text:r.formatMessage({defaultMessage:"Computer action: {action}",id:"xLpBTyWHMH"},{action:e||"Unknown"}),icon:he.jsx(Ir,{size:12})}}}if("screenshot"===e)return{text:r.formatMessage({defaultMessage:"Take screenshot",id:"oqZjDDkxak"}),icon:he.jsx(Pt,{size:12})};if("read_page"===e){const e=t?.filter?` (${t.filter})`:"";return{text:r.formatMessage({defaultMessage:"Read page",id:"hbWicV9xaa"})+e,icon:he.jsx(Fr,{size:12})}}if("find"===e){const e=t?.query,n=e?`${e.substring(0,30)}${e.length>30?"...":""}`:"";return{text:e?r.formatMessage({defaultMessage:'Find: "{query}"',id:"ArrUF7Kfqw"},{query:n}):r.formatMessage({defaultMessage:"Find element",id:"C9scsm6HrW"}),icon:he.jsx(Yr,{size:12})}}if("get_page_text"===e)return{text:r.formatMessage({defaultMessage:"Extract page text",id:"kwxxreL+i3"}),icon:he.jsx(Fr,{size:12})};if("form_input"===e){const e=t?.value,n=e?`${String(e).substring(0,20)}${String(e).length>20?"...":""}`:"";return{text:e?r.formatMessage({defaultMessage:'Set input to "{value}"',id:"d1iFfHCXCd"},{value:n}):r.formatMessage({defaultMessage:"Set form value",id:"ceCuvzBxbw"}),icon:he.jsx(Kr,{size:12})}}if("click"===e){const e=t?.text,n=e?`${e.substring(0,30)}${e.length>30?"...":""}`:"";return{text:e?r.formatMessage({defaultMessage:'Click: "{target}"',id:"fuoi35GbI+"},{target:n}):r.formatMessage({defaultMessage:"Click",id:"X6qJ+Mle0d"}),icon:he.jsx(Iy,{size:12})}}if("navigate"===e){const e=t?.url?`${t.url.substring(0,30)}${t.url.length>30?"...":""}`:"";return{text:r.formatMessage({defaultMessage:"Navigate to {url}",id:"B5amdqFEtT"},{url:e}),icon:he.jsx(Dy,{size:12})}}if("type"===e){const e=t?.text?`${t.text.substring(0,30)}${t.text.length>30?"...":""}`:"";return{text:r.formatMessage({defaultMessage:'Type: "{text}"',id:"b5Uf1JSpcI"},{text:e}),icon:he.jsx(Br,{size:12})}}if("wait"===e){const e=t?.duration;return{text:r?r.formatMessage({defaultMessage:"Wait {count, plural, one {# second} other {# seconds}}",id:"aLzfIziOrP"},{count:e}):`Wait ${e} second${1===e?"":"s"}`,icon:he.jsx(ts,{size:12})}}if("tabs_create"===e)return{text:r.formatMessage({defaultMessage:"Create new tab",id:"hjoV9zJZVT"}),icon:he.jsx(Ry,{size:12})};if("tabs_context"===e)return{text:r.formatMessage({defaultMessage:"Get tabs",id:"PytICQxIDI"}),icon:he.jsx(Ry,{size:12})};if("upload_image"===e)return{text:r.formatMessage({defaultMessage:"Upload image",id:"vMUomPyEk+"}),icon:he.jsx(ns,{size:12})};if("update_plan"===e){const e=Array.isArray(n?.content)?n.content.filter(e=>"text"===e.type).map(e=>e.text).join(""):"string"==typeof n?.content?n.content:"",t=e.includes("approved your plan")||e.includes("User has approved");return e.includes("rejected")||e.includes("Permission denied")?{icon:he.jsx(Qr,{size:12}),text:r.formatMessage({defaultMessage:"Plan rejected",id:"7wJz7kSrLT"})}:t?{icon:he.jsx(Qr,{size:12}),text:r.formatMessage({defaultMessage:"Created a plan",id:"aXfQ2L8ErF"})}:{icon:he.jsx(Qr,{size:12}),text:r.formatMessage({defaultMessage:"Follow a plan",id:"8QvDObQuPZ"})}}if("javascript_tool"===e)return{text:r.formatMessage({defaultMessage:"Execute JavaScript",id:"MtIcfsBa83"}),icon:he.jsx(Tr,{size:12})};if("WebSearch"===e)return{text:r.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:he.jsx(Yr,{size:12})};if("WebFetch"===e){const e=t?.url||"";if(e)try{const t=new URL(e);return{text:r.formatMessage({defaultMessage:"Fetch from {hostname}",id:"YR6CGakwNu"},{hostname:t.hostname}),icon:he.jsx(Vr,{size:12})}}catch{const t=`${e.substring(0,30)}${e.length>30?"...":""}`;return{text:r.formatMessage({defaultMessage:"Fetch {url}",id:"GhHvcgGjy9"},{url:t}),icon:he.jsx(Vr,{size:12})}}return{text:r.formatMessage({defaultMessage:"Web fetch",id:"4Bom+nABM6"}),icon:he.jsx(Vr,{size:12})}}return"read_console_messages"===e?{text:r.formatMessage({defaultMessage:"Read console messages",id:"/cUj2zoCtz"}),icon:he.jsx(Or,{size:12})}:"read_network_requests"===e?{text:r.formatMessage({defaultMessage:"Read network requests",id:"6UuyKKMuCv"}),icon:he.jsx(Or,{size:12})}:"resize_window"===e?{text:r.formatMessage({defaultMessage:"Resize window",id:"mH4wEOlsQs"}),icon:he.jsx(Ir,{size:12})}:"gif_creator"===e?{text:r.formatMessage({defaultMessage:"Create GIF",id:"KtjIeAooNb"}),icon:he.jsx(Pt,{size:12})}:{text:Py(e)}})(e,a,l,C),S=Oy(e)&&s,M=t||k.text,N=S?he.jsx(Ot,{url:i,size:16,fadeInOnLoad:!0,fallbackSvg:he.jsx(Et,{letter:s,size:16,hideBorder:!0})}):k.icon||void 0,_=de.useMemo(()=>{if(c!==ay.TimelineGroup)return null;if(!l?.content)return null;const e=Array.isArray(l.content)?l.content.find(e=>"image"===e.type):null;return e&&"base64"===e.source?.type&&e.source?.media_type?`data:${e.source.media_type};base64,${e.source.data}`:null},[c,l]),j=a?.tabId,E=j&&m?m.get(j):void 0,T="click"===e||"computer"===e&&["left_click","right_click","double_click","triple_click"].includes(a?.action)?a?.coordinate:void 0,A=c===ay.TimelineGroup?_?he.jsx(xx,{dataUrl:_}):E&&T?he.jsx(xx,{dataUrl:E,coordinates:T}):null:void 0;return"update_plan"===e?he.jsx(yx,{plan:{domains:a?.domains||[],approach:a?.approach||[]},isStreaming:f,toolResult:l}):he.jsx(py,{isExpanded:g,setIsExpanded:y,isStreaming:f,icon:N,text:M,isFirstBlockOfMessage:u,isLastBlockOfMessage:d,renderMode:c,isFirstItemInGroup:h,isLastItemInGroup:p,isExpandingDisabled:b,secondaryElement:A,children:he.jsx(dy,{isExpanded:g,children:l?he.jsx(px,{result:l,toolName:e,toolInfo:w,debugMode:!0,lastScreenshot:E}):he.jsx("div",{className:"font-small text-text-500 p-3",children:f?he.jsx(r,{defaultMessage:"Executing...",id:"g8ctzHRk8U"}):he.jsx(r,{defaultMessage:"No result available",id:"MZEyK3VcKi"})})})})});function bx({text:e,onComputerFileClick:t,textColor:n}){const[r,s]=de.useState(e),i=de.useRef(null),o=de.useRef(0);return de.useEffect(()=>{const t=o.current,n=e.slice(t);n&&(o.current=e.length,i.current||(i.current=new Ft,i.current.start(e=>{s(e)}).catch(e=>{})),i.current.addText(n))},[e]),he.jsx(Bg,{text:r,variant:"assistant",onComputerFileClick:t,textColor:n})}const Cx=({input:e,toolResult:t,renderMode:r=ay.Standard,isFirstBlockOfMessage:s,isLastBlockOfMessage:i,isFirstItemInGroup:o,isLastItemInGroup:a,isStreaming:l})=>{const c=n(),[u,d]=de.useState(!1),h=de.useMemo(()=>{let e=document.getElementById("modal-portal");return e||(e=document.createElement("div"),e.id="modal-portal",document.body.appendChild(e)),e},[]),p=(e=>e?{domains:e.domains||[],approach:e.approach||[]}:null)(e),f=((e,t)=>{if(t||!e)return"creating";if(e?.content){const t="string"==typeof e.content?e.content:Array.isArray(e.content)?e.content.filter(e=>"text"===e.type).map(e=>e.text).join("\n"):"";if(t.includes("approved")||t.includes("Approved"))return"approved";if(t.includes("rejected")||t.includes("Rejected"))return"rejected"}return e?.is_error?"rejected":"approved"})(t,l),m=de.useCallback(()=>{p&&d(!0)},[p]),g=de.useCallback(()=>{d(!1)},[]);let y=c.formatMessage({defaultMessage:"Plan",id:"hW8KjZhriV",description:"A plan that Claude has prepared before starting work"});return"creating"===f?y=c.formatMessage({defaultMessage:"Creating plan...",id:"P0iWYFMJG2"}):"approved"===f?y=c.formatMessage({defaultMessage:"Created a plan",id:"aXfQ2L8ErF"}):"rejected"===f&&(y=c.formatMessage({defaultMessage:"Plan rejected",id:"7wJz7kSrLT"})),he.jsxs(he.Fragment,{children:[he.jsx(hy,{icon:he.jsx(Qr,{size:12,className:"text-text-500"}),text:y,isStreaming:l,hideCaret:!0,renderMode:r,isFirstBlockOfMessage:s,isLastBlockOfMessage:i,isFirstItemInGroup:o,isLastItemInGroup:a,handleClick:p?m:void 0,isDisabled:!p}),u&&p&&P.createPortal(he.jsx(gx,{planStructure:p,onApprove:g,onReject:g,isReadOnly:!0,onClose:g}),h)]})};const wx=de.memo(({block:e,toolResult:t,index:n,blocks:r,renderMode:s=ay.Standard,isFirstItemInGroup:i=!1,isLastItemInGroup:o=!1,isStreaming:a,allMessages:l=[],messageIndex:c=0,screenshotsByTab:u,onComputerFileClick:d})=>{const h=0===n,p=n===r.length-1;if("text"===e.type){const t=e.text;return a&&t?he.jsx(bx,{text:t,onComputerFileClick:d,textColor:s===ay.TimelineGroup?"text-text-100":void 0}):he.jsx(Bg,{text:t,variant:"assistant",onComputerFileClick:d,textColor:s===ay.TimelineGroup?"text-text-100":void 0})}if("tool_use"===e.type){let n,r=t;if(!r&&l&&c<l.length-1)for(let t=c+1;t<l.length;t++){const n=l[t];if("user"===n.role&&Array.isArray(n.content)){const t=n.content.find(t=>"tool_result"===t.type&&t.tool_use_id===e.id);if(t){r=t;break}}}if("turn_answer_start"===e.name)return null;if("WebSearch"===e.name)return he.jsx(Ny,{toolName:e.name,toolUseId:e.id,input:e.input,toolResult:r,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,iconSize:12,onResultClick:e=>chrome.tabs.create({url:e})});if("WebFetch"===e.name)return he.jsx(Sy,{toolName:e.name,toolUseId:e.id,input:e.input,toolResult:r,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,iconSize:16,onUrlClick:e=>window.open(e,"_blank")});if("update_plan"===e.name)return he.jsx(Cx,{toolName:e.name,toolUseId:e.id,input:e.input,toolResult:r,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a});if(zy.has(e.name))return he.jsx(vx,{toolName:e.name,toolUseId:e.id,input:e.input,toolResult:r,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,screenshotsByTab:u});if("create_file"===e.name||"open_file"===e.name||"update_file"===e.name||"view"===e.name){const t=e.input,n=t?.path||"",l=t?.file_text||"";let c;c="create_file"===e.name?"create":"open_file"===e.name||"view"===e.name?"read":"edit";const u=!!r||!a;return he.jsx(fy,{action:c,path:n,fileText:l,displayText:t?.description,iconSize:12,isStreaming:a,isComplete:u,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o})}if("bash"===e.name||"Bash"===e.name||"bash_tool"===e.name){const t=e.input;n=t?.description||t?.command||void 0}else if("str_replace"===e.name||"str_replace_editor"===e.name||"Edit"===e.name){const t=e.input;n=t?.path?`Editing ${t.path}`:void 0}else if("Read"===e.name){const t=e.input;n=t?.file_path||void 0}else if("Write"===e.name){const t=e.input;n=t?.file_path?`Writing ${t.file_path}`:void 0}else if("Glob"===e.name||"Grep"===e.name){const t=e.input;n=t?.pattern||void 0}else if("Task"===e.name){const t=e.input;n=t?.description||void 0}const d=Oy(e.name)?function(e){const t=function(e){const t=e.match(/^mcp__([0-9a-f-]+)__(.+)$/);return t?t[1]:null}(e);if(!t)return null;const n=Zn.getState(),r=n.remoteServers[t],s=n.remoteTools[t];if(!r)return null;const i=function(e){const t=e.match(/^mcp__[0-9a-f-]+__(.+)$/);return t?t[1]:e}(e),o=s?.find(e=>e.name===i);return{serverName:r.name,serverUrl:r.url,toolDisplayName:o?.displayName||i,uuid:r.uuid,alwaysApprovedKey:o?.always_approved_key}}(e.name):null;return he.jsx(my,{toolName:e.name,toolDisplayName:n||d?.toolDisplayName,toolUseId:e.id,input:e.input,toolResult:r,renderMode:s,isFirstBlockOfMessage:h,isLastBlockOfMessage:p,isFirstItemInGroup:i,isLastItemInGroup:o,isStreaming:a,iconSize:12,integrationIconUrl:d?.serverUrl})}return e.type,null}),kx=({blocks:e,isStreaming:t,allMessages:n=[],messageIndex:r=0,screenshotsByTab:s,onComputerFileClick:i})=>{const{blocksBeforeAnswer:o,blocksAfterAnswer:a,hasFinalAnswer:l}=de.useMemo(()=>{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];if("tool_use"===r.type&&"turn_answer_start"===r.name){t=n;break}}return-1===t?{blocksBeforeAnswer:e,blocksAfterAnswer:[],hasFinalAnswer:!1}:{blocksBeforeAnswer:e.slice(0,t),blocksAfterAnswer:e.slice(t+1),hasFinalAnswer:!0}},[e]),c=de.useMemo(()=>(e=>{const t=[],n=new Set;return e.forEach((r,s)=>{if(!n.has(s))if(Jg(r)){const i={items:[{block:r,index:s,renderable:Kg(r)}],startIndex:s,isLastBlockOfMessage:!1};for(let t=s+1;t<e.length;t++){const r=e[t];if(!Jg(r))break;i.items.push({block:r,index:t,renderable:Kg(r)}),n.add(t),t===e.length-1&&(i.isLastBlockOfMessage=!0)}const o=i.items.filter(e=>e.renderable);0===o.length?t.push({type:"single",content:r,index:s}):t.push({type:"group",content:i,index:s})}else t.push({type:"single",content:r,index:s})}),t})(o),[o]);return l?he.jsxs(he.Fragment,{children:[o.length>0&&he.jsx(xy,{isFirstBlockOfMessage:!0,isLastBlockOfMessage:0===a.length,isStreaming:t,borderless:!0,autoCollapse:!0,children:o.map((e,t)=>he.jsx(wx,{block:e,index:t,blocks:o,renderMode:ay.TimelineGroup,isFirstItemInGroup:0===t,isLastItemInGroup:t===o.length-1,isStreaming:!1,allMessages:n,messageIndex:r,screenshotsByTab:s,onComputerFileClick:i},`before-answer-${t}`))}),a.map((e,t)=>he.jsx(wx,{block:e,index:t,blocks:a,isStreaming:!1,allMessages:n,messageIndex:r,screenshotsByTab:s,onComputerFileClick:i},`after-answer-${t}`))]}):he.jsx(he.Fragment,{children:c.map(o=>{if("group"===o.type){const a=o.content,l=a.items.filter(e=>e.renderable);if(l.length<=1){const l=a.items[0];return l?he.jsx(wx,{block:l.block,index:l.index,blocks:e,isStreaming:t,allMessages:n,messageIndex:r,screenshotsByTab:s,onComputerFileClick:i},`block-${o.type}-${o.index}`):null}return he.jsx(xy,{isFirstBlockOfMessage:0===a.startIndex,isLastBlockOfMessage:a.isLastBlockOfMessage,isStreaming:t,autoCollapse:!0,children:l.map((o,a)=>he.jsx(wx,{block:o.block,index:o.index,blocks:e,renderMode:ay.TimelineGroup,isFirstItemInGroup:0===a,isLastItemInGroup:a===l.length-1,isStreaming:t,allMessages:n,messageIndex:r,screenshotsByTab:s,onComputerFileClick:i},o.index))},`block-${o.type}-${o.index}`)}return he.jsx(wx,{block:o.content,index:o.index,blocks:e,isStreaming:t,allMessages:n,messageIndex:r,screenshotsByTab:s,onComputerFileClick:i},`block-${o.type}-${o.index}`)})})},Sx=e=>he.jsx("svg",{width:e.size||20,height:e.size||20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:he.jsx("path",{d:"M14.5 3C15.8807 3 17 4.11929 17 5.5V14.5C17 15.7943 16.0164 16.8592 14.7559 16.9873L14.5 17H5.5L5.24414 16.9873C4.06772 16.8677 3.13227 15.9323 3.0127 14.7559L3 14.5V5.5C3 4.11929 4.11929 3 5.5 3H14.5ZM5.5 4C4.67157 4 4 4.67157 4 5.5V14.5C4 15.3284 4.67157 16 5.5 16H14.5C15.3284 16 16 15.3284 16 14.5V5.5C16 4.67157 15.3284 4 14.5 4H5.5ZM11.1377 6.01953C11.403 6.09555 11.5563 6.37231 11.4805 6.6377L9.48047 13.6377C9.40445 13.903 9.12769 14.0563 8.8623 13.9805C8.59702 13.9044 8.44371 13.6277 8.51953 13.3623L10.5195 6.3623C10.5956 6.09702 10.8723 5.94371 11.1377 6.01953Z",fill:"currentColor"})});function Mx({name:e,content:t,onClick:n}){const r=he.jsxs("span",{onClick:n,className:R("inline-flex relative group","text-accent-secondary-100","select-none","mx-0.5","cursor-pointer"),children:[he.jsx("span",{className:R("absolute -inset-y-0.5 -left-0.5 -right-1 rounded-md pointer-events-none","opacity-0 group-hover:opacity-100","bg-accent-secondary-900","transition-opacity duration-150")}),he.jsxs("span",{className:"relative pl-5 flex items-center",children:[he.jsx("span",{className:"absolute top-1/2 -translate-y-1/2 left-0 w-4 h-4 flex items-center justify-center",children:he.jsx(Sx,{size:16})}),he.jsx("span",{className:"relative",children:e})]})]});return t?he.jsx(a,{tooltipContent:he.jsx("div",{className:"max-w-[200px] max-h-[100px] overflow-hidden text-xs",children:t.length>150?`${t.slice(0,150)}...`:t}),side:"top",children:r}):r}const Nx=/\[\[shortcut:([^:]+):([^\]]+)\]\]/g;function _x(e,t){const n=[];let r,s=0;for(Nx.lastIndex=0;null!==(r=Nx.exec(e));){r.index>s&&n.push(e.slice(s,r.index));const[,i,o]=r;n.push(he.jsx(Mx,{id:i,name:o,onClick:t?()=>t(i):void 0},`chip-${r.index}`)),s=r.index+r[0].length}return s<e.length&&n.push(e.slice(s)),n.length>0?n:e}function jx(e){return Nx.lastIndex=0,Nx.test(e)}const Ex=de.memo(function({message:e,previousMessages:t=[],isLastMessage:r=!1,isStreaming:s=!1,submittedFeedback:i=null,onThumbsUp:o,onThumbsDown:l,showThumbs:c=!1,onSavePrompt:u,onEditShortcut:d,messageIndex:h=0,allMessages:p=[],onComputerFileClick:m}){const g=n(),[y,x]=de.useState(!1),[v,b]=de.useState(!1),[C,w]=de.useState(!1),[k,S]=de.useState(!1),[M,N]=de.useState(null);de.useEffect(()=>{fe(me.SHOW_TRACE_IDS).then(e=>{void 0!==e&&b(e)}),fe(me.SHOW_SYSTEM_REMINDERS).then(e=>{void 0!==e&&w(e)});const e=e=>{void 0!==e[me.SHOW_TRACE_IDS]?.newValue&&b(e[me.SHOW_TRACE_IDS].newValue),void 0!==e[me.SHOW_SYSTEM_REMINDERS]?.newValue&&w(e[me.SHOW_SYSTEM_REMINDERS].newValue)};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[]);const _=Array.isArray(e.content)?e.content.filter(e=>"text"===e.type):[],j=Array.isArray(e.content)?e.content.filter(e=>"image"===e.type):[],E=j.filter((t,n)=>{if(Array.isArray(e.content)){const t=e.content.findIndex(e=>e===j[n]);if(t>0){const n=e.content[t-1];if("text"===n.type&&n.text?.includes("[Image ID: workflow-step-"))return!1}}return!0}),T="string"==typeof e.content?e.content:_.map(e=>e.text).join(""),A=C?T:Pe(T),L=async()=>{if(A){const e=await async function(e){if(!e.includes("[[shortcut:"))return e;const t=await be.getAllPrompts(),n=new Map(t.map(e=>[e.id,e]));return e.replace(Wg,(e,t,r)=>{const s=n.get(t);return s?.prompt?s.prompt:`/${r}`})}(A);await navigator.clipboard.writeText(e),S(!0),setTimeout(()=>S(!1),2e3)}},O=new Map,I=new Map;if([...t,e].forEach(e=>{"assistant"===e.role&&Array.isArray(e.content)&&e.content.forEach(e=>{"tool_use"===e.type&&e.id&&O.set(e.id,{name:e.name,input:e.input,id:e.id})}),"user"===e.role&&Array.isArray(e.content)&&e.content.forEach(e=>{if("tool_result"===e.type&&Array.isArray(e.content)){let t=null;const n=e.tool_use_id?O.get(e.tool_use_id):void 0;n?.input&&(t=n.input.tabId??null),e.content.forEach(e=>{if("image"===e.type&&"base64"===e.source?.type){const n=`data:${e.source.media_type};base64,${e.source.data}`;null!==t&&I.set(t,n)}})}})}),"user"===e.role){const t=Array.isArray(e.content)?e.content.filter(e=>"tool_result"===e.type):[],n=t.length>0&&!A;return he.jsxs("div",{className:R(n?"w-full py-3":"flex justify-end","group"),children:[he.jsxs("div",{className:n?"w-full":"flex flex-col items-end max-w-[85%] min-w-0",children:[E.length>0&&he.jsx("div",{className:R("flex flex-wrap gap-2 justify-end",A?"mb-2":"py-5"),children:E.map((e,t)=>{const n=e;if("base64"===n.source?.type){const e=`data:${n.source.media_type};base64,${n.source.data}`;return he.jsx("div",{className:"w-[120px] h-[120px] rounded-lg overflow-hidden border border-border-300/50 hover:border-border-200 shadow-sm shadow-always-black/5 cursor-pointer transition-all",onClick:()=>N(e),children:he.jsx("img",{src:e,alt:g.formatMessage({defaultMessage:"Attached image {imageNumber}",id:"ehDw1cvHNn"},{imageNumber:t+1}),className:"w-full h-full object-cover"})},t)}return null})}),he.jsx("div",{className:R("relative inline-flex flex-col break-words max-w-full",A&&0==t.length?"px-4 py-3 bg-bg-300 rounded-[14px]":"w-full"),children:A&&he.jsxs("div",{className:R("relative transition-all duration-300 ease-in-out",t.length>0&&"ml-auto px-4 py-3 bg-bg-300 rounded-[14px]",!y&&A.length>500&&"max-h-[300px] overflow-hidden",y&&A.length>500&&"max-h-[50000px] overflow-hidden"),children:[jx(A)?he.jsx("div",{className:"font-base",children:_x(A,d)}):he.jsx(Bg,{text:A,variant:"user"}),!y&&A.length>500&&he.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-bg-300 to-transparent pointer-events-none transition-opacity duration-300"}),A.length>500&&he.jsx("button",{onClick:()=>x(!y),className:"absolute bottom-0.5 right-0 p-1.5 bg-bg-500 hover:bg-bg-200 rounded-full transition-colors border-[0.5px] border-border-400/50 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto","aria-label":y?g.formatMessage({defaultMessage:"Collapse message",id:"PwZL2cdrCr"}):g.formatMessage({defaultMessage:"Expand message",id:"CZn1nvWlQF"}),children:he.jsx("div",{className:R("transition-transform duration-300",y&&"rotate-180"),children:he.jsx(Mr,{size:12,className:"text-text-300"})})})]})}),A&&he.jsx("div",{className:"h-7 flex justify-end items-center",children:he.jsxs("div",{className:"flex items-center gap-0.5 pr-1 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto",children:[u&&he.jsx(a,{tooltipContent:g.formatMessage({defaultMessage:"Save as shortcut",id:"z9VjDwhyoe"}),side:"bottom",children:he.jsx("button",{onClick:()=>u(A),className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":g.formatMessage({defaultMessage:"Save as shortcut",id:"z9VjDwhyoe"}),children:he.jsx(Ur,{size:12})})}),he.jsx(a,{tooltipContent:k?g.formatMessage({defaultMessage:"Copied",id:"p556q3uvbn"}):g.formatMessage({defaultMessage:"Copy",id:"4l6vz1/eZ5"}),side:"bottom",open:!!k||void 0,delayDuration:k?0:200,children:he.jsx("button",{onClick:L,className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":g.formatMessage({defaultMessage:"Copy message",id:"8Rj4WgXPcB"}),children:k?he.jsx(f,{size:12}):he.jsx(Dr,{size:12})})})]})})]}),he.jsx(zt,{imageUrl:M,fileName:g.formatMessage({defaultMessage:"image.png",id:"1mTUAYpy10"}),onClose:()=>N(null)})]})}if("assistant"===e.role){const t=Array.isArray(e.content)?e.content:[],n=r&&!s;return he.jsx("div",{className:R("flex items-start","group"),children:he.jsxs("div",{className:"max-w-4xl claude-response w-full break-words",children:[v&&e.traceId&&he.jsx("div",{className:"mb-2",children:he.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-mono bg-bg-300 text-text-400",children:["(Ant-only) TraceID: ",e.traceId]})}),he.jsx(kx,{blocks:t,isStreaming:s,allMessages:p,messageIndex:h,screenshotsByTab:I,onComputerFileClick:m}),c&&o&&l&&he.jsx("div",{className:"h-7 flex items-center",children:he.jsxs("div",{className:R("flex items-center gap-0.5 mt-2 -ml-1.5",n?"opacity-100":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto"),children:[he.jsx(a,{tooltipContent:g.formatMessage({defaultMessage:"Give positive feedback",id:"FGCv00cdfW"}),side:"bottom",children:he.jsx("button",{onClick:o,className:"p-1.5 rounded-md transition-colors "+("positive"===i?"text-text-100":"text-text-300 hover:bg-bg-300 hover:text-text-100"),"aria-label":g.formatMessage({defaultMessage:"Good response",id:"OSbNg+1qqF"}),children:"positive"===i?he.jsx(Ug,{size:12}):he.jsx(es,{size:12})})}),he.jsx(a,{tooltipContent:g.formatMessage({defaultMessage:"Give negative feedback",id:"ngzzQUJCXB"}),side:"bottom",children:he.jsx("button",{onClick:l,className:"p-1.5 rounded-md transition-colors "+("negative"===i?"text-text-100":"text-text-300 hover:bg-bg-300 hover:text-text-100"),"aria-label":g.formatMessage({defaultMessage:"Bad response",id:"tuJiA0ZNUD"}),children:"negative"===i?he.jsx(Zg,{size:12}):he.jsx(Xr,{size:12})})})]})})]})})}return null}),Tx=e=>Symbol.iterator in e,Ax=e=>"entries"in e,Lx=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[s,i]of n)if(!r.has(s)||!Object.is(i,r.get(s)))return!1;return!0};function Ox(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Object.getPrototypeOf(e)===Object.getPrototypeOf(t)&&(Tx(e)&&Tx(t)?Ax(e)&&Ax(t)?Lx(e,t):((e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let s=n.next(),i=r.next();for(;!s.done&&!i.done;){if(!Object.is(s.value,i.value))return!1;s=n.next(),i=r.next()}return!!s.done&&!!i.done})(e,t):Lx({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})))}function Ix(e){const t=xe.useRef(void 0);return n=>{const r=e(n);return Ox(t.current,r)?t.current:t.current=r}}const Dx=Wn(e=>({showCommandMenu:!1,showWorkflowModeSelectionModal:!1,showSkipPermissionsOverlay:!1,showShareWarningModal:!1,showAntBuildUpsell:!1,showFeedbackForm:!1,showNotificationBanner:!1,announcementDismissed:!1,skipPermissionsWarningDismissed:!1,isMessageLimitDismissed:!1,showTopGradient:!1,hasBlockingWarning:!1,commandSearchTerm:"",isGeneratingSummary:!1,pendingContinue:!1,lastGroupShowExpandedTimeline:!1,lastGroupAnimationCompletedAt:0,setShowCommandMenu:t=>e({showCommandMenu:t}),setShowWorkflowModeSelectionModal:t=>e({showWorkflowModeSelectionModal:t}),setShowSkipPermissionsOverlay:t=>e({showSkipPermissionsOverlay:t}),setShowShareWarningModal:t=>e({showShareWarningModal:t}),setShowAntBuildUpsell:t=>e({showAntBuildUpsell:t}),setShowFeedbackForm:t=>e({showFeedbackForm:t}),setShowNotificationBanner:t=>e({showNotificationBanner:t}),setAnnouncementDismissed:t=>e({announcementDismissed:t}),setSkipPermissionsWarningDismissed:t=>e({skipPermissionsWarningDismissed:t}),setIsMessageLimitDismissed:t=>e({isMessageLimitDismissed:t}),setShowTopGradient:t=>e({showTopGradient:t}),setHasBlockingWarning:t=>e({hasBlockingWarning:t}),setCommandSearchTerm:t=>e({commandSearchTerm:t}),setIsGeneratingSummary:t=>e({isGeneratingSummary:t}),setPendingContinue:t=>e({pendingContinue:t}),setLastGroupShowExpandedTimeline:t=>e({lastGroupShowExpandedTimeline:t}),setLastGroupAnimationCompletedAt:t=>e({lastGroupAnimationCompletedAt:t}),resetOnSessionClear:()=>e({hasBlockingWarning:!1,skipPermissionsWarningDismissed:!1,lastGroupShowExpandedTimeline:!1,lastGroupAnimationCompletedAt:0})})),Rx=de.memo(function({messages:e,allMessages:t,startIndex:r,endIndex:s,isStreaming:i,isAgentRunning:o=!1,currentStatusProp:a,onComputerFileClick:l}){const c=n(),u=Dx(e=>e.setLastGroupShowExpandedTimeline),{timelineBlocks:d,finalBlocks:h,hasCompletionSignal:p,foundTurnAnswerStart:f}=de.useMemo(()=>{const n=[],i=[];let o=!1,a=!1;const l=t.slice(s+1).find(e=>"result"===e.type);let c="";return l&&l.result&&(c=l.result.trim(),a=!0),e.forEach((e,t)=>{if("assistant"!==e.role||!Array.isArray(e.content))return;const s="stop_reason"in e?e.stop_reason:void 0;e.content.forEach(e=>{const a=r+t;"tool_use"!==e.type||"turn_answer_start"!==e.name?"text"===e.type?o?i.push({type:"text",block:e,messageIndex:a,stopReason:s}):"end_turn"===s?e.text?.trim()&&i.push({type:"text",block:e,messageIndex:a,stopReason:s}):c&&e.text?.trim()===c?i.push({type:"text",block:e,messageIndex:a,stopReason:s}):e.text?.trim()&&n.push({type:"text",block:e,messageIndex:a,stopReason:s}):"tool_use"===e.type&&(o?i:n).push({type:"tool_use",block:e,messageIndex:a,stopReason:s}):o=!0})}),{timelineBlocks:n,finalBlocks:i,hasCompletionSignal:a,foundTurnAnswerStart:o}},[e,r,t,s]),m=de.useMemo(()=>{const e=new Map;return t.forEach(t=>{"user"===t.role&&Array.isArray(t.content)&&t.content.forEach(t=>{"tool_result"===t.type&&t.tool_use_id&&e.set(t.tool_use_id,t)})}),e},[t]),g=de.useCallback((e,n,r)=>{const s="tool_use"===e.type&&m.has(e.block.id),a="tool_use"===e.type?!s&&o:i&&r.isLastItem;return"text"===e.type?r.isInExpandedTimeline?null:he.jsx(uy,{isFirstItem:r.isFirstItem,isLastItem:r.isLastItem,isActive:a,showDotFallback:!0,children:he.jsx("div",{className:"px-2.5 text-text-400",children:he.jsx(Bg,{text:e.block.text,variant:"assistant",onComputerFileClick:l})})},`timeline-${n}`):he.jsx(wx,{block:e.block,toolResult:m.get(e.block.id),index:n,blocks:d.map(e=>e.block),renderMode:ay.TimelineGroup,isFirstItemInGroup:r.isFirstItem,isLastItemInGroup:r.isLastItem,isStreaming:!s&&o,allMessages:t,messageIndex:e.messageIndex,onComputerFileClick:l},`timeline-tool-${e.block.id}`)},[m,o,i,d,t,l]),y=de.useCallback(e=>"text"===e.type?i?he.jsx(bx,{text:e.block.text,onComputerFileClick:l}):he.jsx(Bg,{text:e.block.text,variant:"assistant",onComputerFileClick:l}):he.jsx(Bg,{text:`Tool: ${e.block.name}`,variant:"assistant",onComputerFileClick:l}),[i,l]),x=t.slice(s+1).some(e=>"result"===e.type||!("user"!==e.role||!Array.isArray(e.content))&&e.content.some(e=>"text"===e.type&&e.text?.trim())),v=h.some(e=>"text"===e.type&&e.block.text?.trim()),b=d.length>0,C=b?v||x||p:f||x||p,w=de.useCallback(e=>{u(e&&b)},[u,b]);if(0===d.length&&0===h.length)return null;const k=a||c.formatMessage({defaultMessage:"Working",id:"gAR0atqpRn"});return he.jsx(ky,{blocks:d,isStreaming:o,statusText:k,turnIsOver:C,renderBlock:g,fadeToolsOnStatusChange:!0,blocksAfterTimeline:h,renderBlockAfterTimeline:y,onStatusDisplayVisibilityChange:w})}),Px=({message:e})=>{const[t,n]=de.useState(!1),s="string"==typeof e.content?e.content:"";return he.jsxs("div",{className:"mb-5 overflow-hidden border-[0.5px] border-border-200 rounded-[10px]",children:[he.jsxs("button",{onClick:()=>n(!t),className:"w-full px-4 py-2 transition-colors flex items-center justify-between text-left cursor-pointer "+(t?"bg-bg-000":"bg-bg-100 hover:bg-bg-200"),children:[he.jsx("span",{className:"font-small text-text-300",children:he.jsx(r,{defaultMessage:"Conversation summary",id:"c0ZeCgLvCL"})}),he.jsx(qy,{className:"w-4 h-4 text-text-400 transition-transform "+(t?"rotate-90":"")})]}),t&&he.jsx("div",{className:"px-4 pt-2 pb-4 bg-bg-000",children:he.jsx("div",{className:"font-claude-response text-xs text-text-200 whitespace-pre-wrap",children:s})})]})},zx=de.memo(function({messageGroups:e,messages:t,isAgentRunning:n,hasPermissionPrompt:r,currentStatus:s,submittedFeedback:i,scrollRefs:o,onThumbsUp:a,onThumbsDown:l,onSavePrompt:c,onEditShortcut:u,onComputerFileClick:d}){const h=de.useCallback(e=>{if("user"!==e.role)return!1;if("string"==typeof e.content){return Pe(e.content).length>0}return!!Array.isArray(e.content)&&e.content.some(e=>{if("text"===e.type){return Pe(e.text).length>0}return!1})},[]);let p=-1;for(let y=e.length-1;y>=0;y--){const t=e[y];if("tool_group"!==t.type){const e=t.messages[0];if(e&&h(e)){p=y;break}}}const f=(p,f)=>{if("tool_group"===p.type){const i=f===e.length-1,o=p.messages[p.messages.length-1],a=i&&"assistant"===o?.role&&n;return he.jsx("div",{children:he.jsx(Rx,{messages:p.messages,allMessages:t,startIndex:p.startIndex,endIndex:p.endIndex,allMessagesLength:t.length,isStreaming:a,isAgentRunning:n,hasPermissionPrompt:r,currentStatusProp:s,isLastGroup:i,onComputerFileClick:d})},p.startIndex)}const m=p.messages[0],g=p.startIndex;if(!m)return null;if("type"in m&&"result"===m.type)return null;if(m.isCompactSummary)return he.jsx(Px,{message:m},g);const y=(()=>{for(let e=t.length-1;e>g;e--){const n=t[e];if((!("type"in n)||"result"!==n.type)&&"user"!==n.role)return!1}return!0})(),x="assistant"===m.role;let v=!1;if(x&&!m.isCompactionMessage){const e=t.slice(g+1).some(e=>h(e));v=y||e}const b=m.isCompactionMessage,C=h(m)&&!t.slice(g+1).some(e=>h(e));return he.jsx("div",{className:b?"mb-5":"",ref:(()=>{if(C)return o.lastHumanMessage})(),children:he.jsx(Ex,{message:m,previousMessages:t.slice(0,g),allMessages:t,messageIndex:g,isLastMessage:y,isStreaming:y&&x&&n,submittedFeedback:i.get(g)||null,onThumbsUp:()=>a(g),onThumbsDown:()=>l(g),showThumbs:v,onSavePrompt:"user"===m.role?e=>c(e):void 0,onEditShortcut:"user"===m.role?u:void 0,onComputerFileClick:d})},g)},m=e.slice(0,p+1),g=e.slice(p+1);return he.jsxs(he.Fragment,{children:[m.map((e,t)=>f(e,t)),g.length>0&&he.jsx("div",{ref:o.lastAssistantMessage,className:"flex flex-col",children:g.map((e,t)=>f(e,p+1+t))})]})}),Fx=de.forwardRef((e,t)=>he.jsx("div",{ref:t,"aria-hidden":"true",className:"h-px w-full pointer-events-none"}));Fx.displayName="LastMessageSentinel";const Hx=Wn(e=>({messages:[],messageByIndex:new Map,isStreaming:!1,sessionId:null,hasApprovedPlan:!1,setMessages:t=>{const n=new Map;t.forEach((e,t)=>{n.set(t,e)}),e({messages:t,messageByIndex:n})},appendMessage:t=>e(e=>{const n=[...e.messages,t],r=n.length-1,s=new Map(e.messageByIndex);return s.set(r,t),{messages:n,messageByIndex:s}}),updateMessage:(t,n)=>e(e=>{const r=[...e.messages];r[t]=n;const s=new Map(e.messageByIndex);return s.set(t,n),{messages:r,messageByIndex:s}}),clearMessages:()=>e({messages:[],messageByIndex:new Map,hasApprovedPlan:!1}),setStreaming:t=>e({isStreaming:t}),setSessionId:t=>e({sessionId:t}),setHasApprovedPlan:t=>e({hasApprovedPlan:t})})),Vx=de.memo(function({messages:e,messageGroups:t,messageHistory:r,isAgentRunning:s,isCompacting:i,isInitializing:o,showConversionError:a,conversionError:l,hasPermissionPrompt:c,currentStatus:u,tokensSaved:d,isDarkMode:h,tabId:p,autoScrollRef:f,scrollRefs:m,sentinelRef:g,submittedFeedback:y,onThumbsUp:x,onThumbsDown:v,onSavePrompt:b,onEditShortcut:C,onComputerFileClick:w,onPromptClick:k,children:S}){const M=n(),N=Dx(e=>e.lastGroupShowExpandedTimeline),_=Hx(e=>{let t=0,n=!1;for(const r of e.messages)if("user"===r.role){const e=r.content;(Array.isArray(e)?e.some(e=>"type"in e&&"tool_result"!==e.type):"string"==typeof e)&&(t++,n=!0)}else"assistant"===r.role&&n&&(t++,n=!1);return t});return he.jsx(ir,{ref:f,parentClassName:"flex-1 "+(0===e.length?"!overflow-hidden":""),innerClassName:"h-full",children:he.jsxs("div",{className:"mx-auto flex size-full max-w-3xl flex-col md:px-2",children:[he.jsxs("div",{className:"flex-1 flex flex-col px-4 max-w-3xl mx-auto w-full pt-1",children:[0===e.length&&he.jsx(pr,{tabId:p,onPromptClick:k}),r.length>0&&he.jsxs(he.Fragment,{children:[r.map((e,t)=>he.jsx("div",{className:"opacity-60",children:he.jsx(Ex,{message:e,previousMessages:r.slice(0,t),messageIndex:t,allMessages:r,isLastMessage:!1,isStreaming:!1,onEditShortcut:"user"===e.role?C:void 0,onComputerFileClick:w})},`history-${t}`)),he.jsx(fr,{tokensSaved:d??void 0})]}),he.jsx(zx,{messageGroups:t,messages:e,isAgentRunning:s,hasPermissionPrompt:c,currentStatus:u,submittedFeedback:y,scrollRefs:{lastAssistantMessage:m.lastAssistantMessage,lastHumanMessage:m.lastHumanMessage},onThumbsUp:x,onThumbsDown:v,onSavePrompt:b,onEditShortcut:C,onComputerFileClick:w}),he.jsx(Fx,{ref:g}),he.jsxs("div",{ref:m.extras,className:"min-h-8",children:[he.jsxs("div",{className:"flex items-center gap-3 "+(!(s||i||o)||c||N?"invisible":""),children:[he.jsx(mr,{state:i||o?"shimmer":"thinking",isInteractive:!1,className:"[&_svg]:!fill-[#D97757]"}),i&&he.jsx(yr,{isDarkMode:h,text:M.formatMessage({defaultMessage:"Compacting...",id:"zqQotfDw3h"})}),o&&he.jsx(yr,{isDarkMode:h,text:M.formatMessage({defaultMessage:"Starting up...",id:"GsEWS8NyxJ"})})]}),a&&he.jsx(xr,{error:l,tabId:p,title:M.formatMessage({defaultMessage:"Create Scheduled Task",id:"mHmhCARyh8"})})]}),he.jsx(or,{scrollRefs:m,autoScrollRef:f,messageCount:_})]}),S&&he.jsxs("div",{ref:m.chatInput,className:"sticky bottom-0 mx-auto w-full z-[5]",children:[S,he.jsx("div",{className:"bg-bg-100 h-0.5"})]})]})})});function $x({autoscrollRef:e,sentinelElement:t,isStreaming:n=!1,children:r,className:s,wrapperClassName:i,ariaLabel:o="Scroll to bottom",scrollThreshold:a=150}){const[l,c]=de.useState(!1),u=de.useCallback(()=>{const t=e.current;t&&(t.scrollToBottom("instant"),n&&t.setPinToBottom(!0))},[e,n]);return de.useEffect(()=>{n||e.current?.setPinToBottom(!1)},[n,e]),de.useEffect(()=>{if(!t)return;const n=e.current?.getScrollContainer();if(!n)return;const r=new IntersectionObserver(([e])=>{c(!e.isIntersecting)},{root:n,threshold:.01,rootMargin:`0px 0px ${a}px 0px`});return r.observe(t),()=>{r.disconnect()}},[t,e,a]),he.jsx("div",{className:R("flex justify-center pb-2",i),children:he.jsxs("button",{onClick:u,"aria-label":o,className:R("size-9 inline-flex items-center justify-center","border-0.5 overflow-hidden !rounded-full p-1","shadow-md hover:shadow-lg","bg-bg-000/80 hover:bg-bg-000","backdrop-blur transition-opacity duration-200",n?"border-accent-brand/30":"border-border-300",l?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none",s),children:[r,he.jsx($y,{className:"mix-blend-luminosity"})]})})}function Bx(e,t){return Ht(e)?e[((e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e})(0,e.length,t)]:e}class Ux{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){const t=this.animations.map(t=>t.attachTimeline(e));return()=>{t.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return Zx(this.animations,"duration")}get iterationDuration(){return Zx(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Zx(e,t){let n=0;for(let r=0;r<e.length;r++){const s=e[r][t];null!==s&&s>n&&(n=s)}return n}class Wx extends Ux{then(e,t){return this.finished.finally(e).then(()=>{})}}function qx(e){const t=$t(()=>Bt(e)),{isStatic:n}=de.useContext(Ut);if(n){const[,n]=de.useState(e);de.useEffect(()=>t.on("change",n),[])}return t}function Gx(e,t){const n=qx(t()),r=()=>n.set(t());return r(),Zt(()=>{const t=()=>Wt.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),qt(r)}}),n}function Jx(e,...t){const n=e.length;return Gx(t.filter(Gt),function(){let r="";for(let s=0;s<n;s++){r+=e[s];const n=t[s];n&&(r+=Gt(n)?n.get():n)}return r})}function Kx(e,t,n,r){if("function"==typeof e)return function(e){Jt.current=[],e();const t=Gx(Jt.current,e);return Jt.current=void 0,t}(e);const s="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],i=e[2+n],o=e[3+n],a=Vt(s,i,o);return t?a(r):a}(t,n,r);return Array.isArray(e)?Yx(e,s):Yx([e],([e])=>s(e))}function Yx(e,t){const n=$t(()=>[]);return Gx(e,()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}function Qx(e){return"object"==typeof e&&!Array.isArray(e)}function Xx(e,t,n,r){return"string"==typeof e&&Qx(t)?Kt(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function ev(e,t,n){return e*(t+1)}function tv(e,t,n,r){return"number"==typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):r.get(t)??e}function nv(e,t,n,r,s,i){!function(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Qt(e,s),r--)}}(e,s,i);for(let o=0;o<t.length;o++)e.push({value:t[o],at:Yt(s,i,r[o]),easing:Bx(n,o)})}function rv(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function sv(e,t){return e.at===t.at?null===e.value?1:null===t.value?-1:0:e.at-t.at}function iv(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function ov(e,t){return t[e]||(t[e]=[]),t[e]}function av(e){return Array.isArray(e)?e:[e]}function lv(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const cv=e=>"number"==typeof e,uv=e=>e.every(cv);class dv extends on{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(function(e,t){return e in t}(t,e)){const n=e[t];if("string"==typeof n||"number"==typeof n)return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return an()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function hv(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=ln(e)&&!cn(e)?new un(t):new dn(t);n.mount(e),hn.set(e,n)}function pv(e){const t=new dv({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),hn.set(e,t)}function fv(e,t,n,r){const s=[];if(function(e,t){return Gt(e)||"number"==typeof e||"string"==typeof e&&!Qx(t)}(e,t))s.push(pn(e,Qx(t)&&t.default||t,n&&n.default||n));else{const i=Xx(e,t,r),o=i.length;for(let e=0;e<o;e++){const r=i[e],a=r instanceof Element?hv:pv;hn.has(r)||a(r);const l=hn.get(r),c={...n};"delay"in c&&"function"==typeof c.delay&&(c.delay=c.delay(e,o)),s.push(...fn(l,{...t,transition:c},{}))}}return s}function mv(e,t,n){const r=[],s=function(e,{defaultTransition:t={},...n}={},r,s){const i=t.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,d=0,h=0;for(let p=0;p<e.length;p++){const n=e[p];if("string"==typeof n){c.set(n,d);continue}if(!Array.isArray(n)){c.set(n.name,tv(d,n.at,u,c));continue}let[o,f,m={}]=n;void 0!==m.at&&(d=tv(d,m.at,u,c));let g=0;const y=(e,n,r,o=0,a=0)=>{const l=av(e),{delay:c=0,times:u=Xt(l),type:p="keyframes",repeat:f,repeatType:m,repeatDelay:y=0,...x}=n;let{ease:v=t.ease||"easeOut",duration:b}=n;const C="function"==typeof c?c(o,a):c,w=l.length,k=nn(p)?p:s?.[p||"keyframes"];if(w<=2&&k){let e=100;if(2===w&&uv(l)){const t=l[1]-l[0];e=Math.abs(t)}const t={...x};void 0!==b&&(t.duration=rn(b));const n=en(t,e,k);v=n.ease,b=n.duration}b??(b=i);const S=d+C;1===u.length&&0===u[0]&&(u[1]=1);const M=u.length-l.length;if(M>0&&tn(u,M),1===l.length&&l.unshift(null),f){b=ev(b,f);const e=[...l],t=[...u];v=Array.isArray(v)?[...v]:[v];const n=[...v];for(let r=0;r<f;r++){l.push(...e);for(let s=0;s<e.length;s++)u.push(t[s]+(r+1)),v.push(0===s?"linear":Bx(n,s-1))}rv(u,f)}const N=S+b;nv(r,l,v,u,S,N),g=Math.max(C+b,g),h=Math.max(N,h)};if(Gt(o))y(f,m,ov("default",iv(o,a)));else{const e=Xx(o,f,r,l),t=e.length;for(let n=0;n<t;n++){const r=iv(e[n],a);for(const e in f)y(f[e],lv(m,e),ov(e,r),n,t)}}u=d,d+=g}return a.forEach((e,r)=>{for(const s in e){const i=e[s];i.sort(sv);const a=[],l=[],c=[];for(let e=0;e<i.length;e++){const{at:t,value:n,easing:r}=i[e];a.push(n),l.push(sn(0,h,t)),c.push(r||"easeOut")}0!==l[0]&&(l.unshift(0),a.unshift(a[0]),c.unshift("easeInOut")),1!==l[l.length-1]&&(l.push(1),a.push(null)),o.has(r)||o.set(r,{keyframes:{},transition:{}});const u=o.get(r);u.keyframes[s]=a,u.transition[s]={...t,duration:h,ease:c,times:l,...n}}}),o}(e,t,n,{spring:mn});return s.forEach(({keyframes:e,transition:t},n)=>{r.push(...fv(n,e,t))}),r}const gv=function(e,t,n){let r,s=[];if(i=e,Array.isArray(i)&&i.some(Array.isArray))s=mv(e,t,yv);else{const{onComplete:i,...o}=n||{};"function"==typeof i&&(r=i),s=fv(e,t,o,yv)}var i;const o=new Wx(s);return r&&o.finished.then(r),o};var yv;const xv=({type:e,children:t,onAction:r,onDismiss:s,actionText:i,actionIcon:o,dismissWithGradient:a=!1})=>{const l=n(),[c,u]=de.useState(!1),d=(e=>{switch(e){case"high-risk":return"bg-[#F7ECC1] dark:bg-[#F5DB9A]";case"refusal":case"error":case"danger":return"bg-danger-900";case"announcement":return"bg-[#D4E7F7] dark:bg-[#2B5278]";default:return"bg-bg-300 dark:bg-bg-400"}})(e),h=(e=>{switch(e){case"high-risk":return"text-[#141413]";case"refusal":case"error":case"danger":return"text-danger-100 dark:text-danger-000";case"announcement":return"text-[#1E5A8E] dark:text-[#D4E7F7]";default:return"text-text-200 dark:text-text-300"}})(e);return he.jsx(gn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15,ease:"easeOut"},className:"overflow-hidden",children:he.jsxs("div",{className:`${d} ${h} rounded-t-[14px] px-4 py-2 flex items-center justify-between relative`,...a&&s&&{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},children:[he.jsx("div",{className:"text-xs flex-1",children:t}),!a&&(r||s)&&he.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[r&&i&&he.jsxs("button",{onClick:r,className:("high-risk"===e?"bg-[#141413] text-[#F7ECC1] dark:text-[#F5DB9A]":"refusal"===e||"danger"===e?"bg-danger-100 text-danger-900 dark:bg-danger-000 dark:text-danger-900":"bg-text-100 text-bg-000")+" px-3 py-1 rounded-md text-xs font-medium hover:opacity-90 transition-opacity flex items-center gap-1",children:[o,i]}),s&&he.jsx("button",{onClick:s,className:"p-1 hover:opacity-70 rounded transition-opacity","aria-label":l.formatMessage({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),children:he.jsx(z,{size:12})})]}),a&&s&&he.jsxs(he.Fragment,{children:[he.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-t-[14px] transition-all duration-300 ease-out\n                "+(c?"opacity-100":"opacity-0"),style:{background:"high-risk"===e?"linear-gradient(45deg, transparent 70%, rgba(247, 236, 193, 0.5) 85%, rgba(247, 236, 193, 0.9) 100%)":"refusal"===e||"error"===e||"danger"===e?"linear-gradient(45deg, transparent 70%, rgba(249, 236, 236, 0.5) 85%, rgba(249, 236, 236, 0.9) 100%)":"announcement"===e?"linear-gradient(45deg, transparent 70%, rgba(212, 231, 247, 0.5) 85%, rgba(212, 231, 247, 0.9) 100%)":"linear-gradient(45deg, transparent 70%, rgba(255, 255, 255, 0.3) 85%, rgba(255, 255, 255, 0.6) 100%)"}}),he.jsx("button",{onClick:s,className:"absolute top-3 right-3 p-0.5 transition-all duration-300 ease-out\n                "+(c?"opacity-70 hover:opacity-100":"opacity-0 pointer-events-none"),"aria-label":l.formatMessage({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),children:he.jsx(z,{vectorSizeOverride:11})})]})]})})},vv=({currentModelName:e,fallbackModelName:t,fallbackDisplayName:n,learnMoreUrl:s,onRetry:i,onSendFeedback:o})=>he.jsxs("div",{className:"bg-bg-000 rounded-2xl border-[0.5px] border-border-300 px-4 py-4",style:{boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.04)"},children:[he.jsx("h3",{className:"font-ui text-[16px] font-medium leading-[140%] text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Chat paused",id:"bL7dVUkHa0"})}),he.jsx("p",{className:"font-base text-text-100 mb-0",children:he.jsx(r,{defaultMessage:"{currentModelName}'s safety filters flagged this chat. Due to its advanced capabilities, {currentModelName} has additional safety measures that occasionally pause normal, safe chats. We're working to improve this. Continue your chat with {fallbackDisplayName}, {sendFeedbackLink}, or {learnMoreLink}.",id:"DLwrrxRpu/",values:{currentModelName:e,fallbackDisplayName:n,sendFeedbackLink:he.jsx("button",{onClick:o,className:"inline-link hover:opacity-70 transition-opacity",children:he.jsx(r,{defaultMessage:"send feedback",id:"Rtb80IDfRS"})}),learnMoreLink:he.jsx("button",{onClick:()=>chrome.tabs.create({url:s}),className:"inline-link hover:opacity-70 transition-opacity",children:he.jsx(r,{defaultMessage:"learn more",id:"JpNRENzqW2"})})}})}),he.jsx(l,{variant:"primary",onClick:()=>i(t),className:"mt-4 w-full",children:he.jsx(r,{defaultMessage:"Retry with {fallbackDisplayName}",id:"yeVBln6MC+",values:{fallbackDisplayName:n}})})]});class bv extends Error{}class Cv extends bv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class wv extends bv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class kv extends bv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Sv extends bv{}class Mv extends bv{constructor(e){super(`Invalid unit ${e}`)}}class Nv extends bv{}class _v extends bv{constructor(){super("Zone is an abstract class")}}const jv="numeric",Ev="short",Tv="long",Av={year:jv,month:jv,day:jv},Lv={year:jv,month:Ev,day:jv},Ov={year:jv,month:Ev,day:jv,weekday:Ev},Iv={year:jv,month:Tv,day:jv},Dv={year:jv,month:Tv,day:jv,weekday:Tv},Rv={hour:jv,minute:jv},Pv={hour:jv,minute:jv,second:jv},zv={hour:jv,minute:jv,second:jv,timeZoneName:Ev},Fv={hour:jv,minute:jv,second:jv,timeZoneName:Tv},Hv={hour:jv,minute:jv,hourCycle:"h23"},Vv={hour:jv,minute:jv,second:jv,hourCycle:"h23"},$v={hour:jv,minute:jv,second:jv,hourCycle:"h23",timeZoneName:Ev},Bv={hour:jv,minute:jv,second:jv,hourCycle:"h23",timeZoneName:Tv},Uv={year:jv,month:jv,day:jv,hour:jv,minute:jv},Zv={year:jv,month:jv,day:jv,hour:jv,minute:jv,second:jv},Wv={year:jv,month:Ev,day:jv,hour:jv,minute:jv},qv={year:jv,month:Ev,day:jv,hour:jv,minute:jv,second:jv},Gv={year:jv,month:Ev,day:jv,weekday:Ev,hour:jv,minute:jv},Jv={year:jv,month:Tv,day:jv,hour:jv,minute:jv,timeZoneName:Ev},Kv={year:jv,month:Tv,day:jv,hour:jv,minute:jv,second:jv,timeZoneName:Ev},Yv={year:jv,month:Tv,day:jv,weekday:Tv,hour:jv,minute:jv,timeZoneName:Tv},Qv={year:jv,month:Tv,day:jv,weekday:Tv,hour:jv,minute:jv,second:jv,timeZoneName:Tv};class Xv{get type(){throw new _v}get name(){throw new _v}get ianaName(){return this.name}get isUniversal(){throw new _v}offsetName(e,t){throw new _v}formatOffset(e,t){throw new _v}offset(e){throw new _v}equals(e){throw new _v}get isValid(){throw new _v}}let eb=null;class tb extends Xv{static get instance(){return null===eb&&(eb=new tb),eb}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return fC(e,t,n)}formatOffset(e,t){return xC(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let nb={};const rb={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let sb={};class ib extends Xv{static create(e){return sb[e]||(sb[e]=new ib(e)),sb[e]}static resetCache(){sb={},nb={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=ib.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return fC(e,t,n,this.name)}formatOffset(e,t){return xC(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(r=this.name,nb[r]||(nb[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),nb[r]);var r;let[s,i,o,a,l,c,u]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let s=0;s<n.length;s++){const{type:e,value:t}=n[s],i=rb[e];"era"===e?r[i]=t:qb(i)||(r[i]=parseInt(t,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,i,o,a,l,c,u]=r;return[o,s,i,a,l,c,u]}(n,t);"BC"===a&&(s=1-Math.abs(s));let d=+t;const h=d%1e3;return d-=h>=0?h:1e3+h,(uC({year:s,month:i,day:o,hour:24===l?0:l,minute:c,second:u,millisecond:0})-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let ob={};let ab={};function lb(e,t={}){const n=JSON.stringify([e,t]);let r=ab[n];return r||(r=new Intl.DateTimeFormat(e,t),ab[n]=r),r}let cb={};let ub={};let db=null;let hb={};function pb(e,t,n,r){const s=e.listingMode();return"error"===s?null:"en"===s?n(t):r(t)}class fb{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let r=cb[n];return r||(r=new Intl.NumberFormat(e,t),cb[n]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return nC(this.floor?Math.floor(e):oC(e,3),this.padTo)}}class mb{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&ib.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=lb(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class gb{constructor(e,t,n){this.opts={style:"long",...n},!t&&Kb()&&(this.rtf=function(e,t={}){const{base:n,...r}=t,s=JSON.stringify([e,r]);let i=ub[s];return i||(i=new Intl.RelativeTimeFormat(e,t),ub[s]=i),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${s[e][0]}`;case-1:return n?"yesterday":`last ${s[e][0]}`;case 0:return n?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=1===a,c=s[e],u=r?l?c[1]:c[2]||c[1]:l?s[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const yb={firstDay:1,minimalDays:4,weekend:[6,7]};class xb{static fromOpts(e){return xb.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,s=!1){const i=e||Ab.defaultLocale,o=i||(s?"en-US":db||(db=(new Intl.DateTimeFormat).resolvedOptions().locale,db)),a=t||Ab.defaultNumberingSystem,l=n||Ab.defaultOutputCalendar,c=eC(r)||Ab.defaultWeekSettings;return new xb(o,a,l,c,i)}static resetCache(){db=null,ab={},cb={},ub={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return xb.create(e,t,n,r)}constructor(e,t,n,r,s){const[i,o,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,s;try{t=lb(e).resolvedOptions(),s=e}catch(r){const i=e.substring(0,n);t=lb(i).resolvedOptions(),s=i}const{numberingSystem:i,calendar:o}=t;return[s,i,o]}}(e);this.locale=i,this.numberingSystem=t||o||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?xb.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,eC(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return pb(this,e,kC,()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;n<=12;n++){const r=_k.utc(2009,n,1);t.push(e(r))}return t}(e=>this.extract(e,n,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return pb(this,e,_C,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;n<=7;n++){const r=_k.utc(2016,11,13+n);t.push(e(r))}return t}(e=>this.extract(e,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return pb(this,void 0,()=>jC,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[_k.utc(2016,11,13,9),_k.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return pb(this,e,LC,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[_k.utc(-40,1,1),_k.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===n);return r?r.value:null}numberFormatter(e={}){return new fb(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new mb(e,this.intl,t)}relFormatter(e={}){return new gb(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let r=ob[n];return r||(r=new Intl.ListFormat(e,t),ob[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Yb()?function(e){let t=hb[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,hb[e]=t}return t}(this.locale):yb}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let vb=null;class bb extends Xv{static get utcInstance(){return null===vb&&(vb=new bb(0)),vb}static instance(e){return 0===e?bb.utcInstance:new bb(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new bb(mC(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${xC(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${xC(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return xC(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class Cb extends Xv{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function wb(e,t){if(qb(e)||null===e)return t;if(e instanceof Xv)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?tb.instance:"utc"===n||"gmt"===n?bb.utcInstance:bb.parseSpecifier(n)||ib.create(e)}return Gb(e)?bb.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new Cb(e)}let kb,Sb=()=>Date.now(),Mb="system",Nb=null,_b=null,jb=null,Eb=60,Tb=null;class Ab{static get now(){return Sb}static set now(e){Sb=e}static set defaultZone(e){Mb=e}static get defaultZone(){return wb(Mb,tb.instance)}static get defaultLocale(){return Nb}static set defaultLocale(e){Nb=e}static get defaultNumberingSystem(){return _b}static set defaultNumberingSystem(e){_b=e}static get defaultOutputCalendar(){return jb}static set defaultOutputCalendar(e){jb=e}static get defaultWeekSettings(){return Tb}static set defaultWeekSettings(e){Tb=eC(e)}static get twoDigitCutoffYear(){return Eb}static set twoDigitCutoffYear(e){Eb=e%100}static get throwOnInvalid(){return kb}static set throwOnInvalid(e){kb=e}static resetCaches(){xb.resetCache(),ib.resetCache()}}class Lb{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ob=[0,31,59,90,120,151,181,212,243,273,304,334],Ib=[0,31,60,91,121,152,182,213,244,274,305,335];function Db(e,t){return new Lb("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Rb(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return 0===s?7:s}function Pb(e,t,n){return n+(aC(e)?Ib:Ob)[t-1]}function zb(e,t){const n=aC(e)?Ib:Ob,r=n.findIndex(e=>e<t);return{month:r+1,day:t-n[r]}}function Fb(e,t){return(e-t+7)%7+1}function Hb(e,t=4,n=1){const{year:r,month:s,day:i}=e,o=Pb(r,s,i),a=Fb(Rb(r,s,i),n);let l,c=Math.floor((o-a+14-t)/7);return c<1?(l=r-1,c=hC(l,t,n)):c>hC(r,t,n)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:a,...vC(e)}}function Vb(e,t=4,n=1){const{weekYear:r,weekNumber:s,weekday:i}=e,o=Fb(Rb(r,1,t),n),a=lC(r);let l,c=7*s+i-o-7+t;c<1?(l=r-1,c+=lC(l)):c>a?(l=r+1,c-=lC(r)):l=r;const{month:u,day:d}=zb(l,c);return{year:l,month:u,day:d,...vC(e)}}function $b(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:Pb(t,n,r),...vC(e)}}function Bb(e){const{year:t,ordinal:n}=e,{month:r,day:s}=zb(t,n);return{year:t,month:r,day:s,...vC(e)}}function Ub(e,t){if(!qb(e.localWeekday)||!qb(e.localWeekNumber)||!qb(e.localWeekYear)){if(!qb(e.weekday)||!qb(e.weekNumber)||!qb(e.weekYear))throw new Sv("Cannot mix locale-based week fields with ISO-based week fields");return qb(e.localWeekday)||(e.weekday=e.localWeekday),qb(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),qb(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Zb(e){const t=Jb(e.year),n=tC(e.month,1,12),r=tC(e.day,1,cC(e.year,e.month));return t?n?!r&&Db("day",e.day):Db("month",e.month):Db("year",e.year)}function Wb(e){const{hour:t,minute:n,second:r,millisecond:s}=e,i=tC(t,0,23)||24===t&&0===n&&0===r&&0===s,o=tC(n,0,59),a=tC(r,0,59),l=tC(s,0,999);return i?o?a?!l&&Db("millisecond",s):Db("second",r):Db("minute",n):Db("hour",t)}function qb(e){return void 0===e}function Gb(e){return"number"==typeof e}function Jb(e){return"number"==typeof e&&e%1==0}function Kb(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Yb(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Qb(e,t,n){if(0!==e.length)return e.reduce((e,r)=>{const s=[t(r),r];return e&&n(e[0],s[0])===e[0]?e:s},null)[1]}function Xb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function eC(e){if(null==e)return null;if("object"!=typeof e)throw new Nv("Week settings must be an object");if(!tC(e.firstDay,1,7)||!tC(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!tC(e,1,7)))throw new Nv("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function tC(e,t,n){return Jb(e)&&e>=t&&e<=n}function nC(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function rC(e){return qb(e)||null===e||""===e?void 0:parseInt(e,10)}function sC(e){return qb(e)||null===e||""===e?void 0:parseFloat(e)}function iC(e){if(!qb(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function oC(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function aC(e){return e%4==0&&(e%100!=0||e%400==0)}function lC(e){return aC(e)?366:365}function cC(e,t){const n=(r=t-1)-(s=12)*Math.floor(r/s)+1;var r,s;return 2===n?aC(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function uC(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function dC(e,t,n){return-Fb(Rb(e,1,t),n)+t-1}function hC(e,t=4,n=1){const r=dC(e,t,n),s=dC(e+1,t,n);return(lC(e)-r+s)/7}function pC(e){return e>99?e:e>Ab.twoDigitCutoffYear?1900+e:2e3+e}function fC(e,t,n,r=null){const s=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(i.timeZone=r);const o={timeZoneName:t,...i},a=new Intl.DateTimeFormat(n,o).formatToParts(s).find(e=>"timezonename"===e.type.toLowerCase());return a?a.value:null}function mC(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function gC(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new Nv(`Invalid unit value ${e}`);return t}function yC(e,t){const n={};for(const r in e)if(Xb(e,r)){const s=e[r];if(null==s)continue;n[t(r)]=gC(s)}return n}function xC(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${nC(n,2)}:${nC(r,2)}`;case"narrow":return`${s}${n}${r>0?`:${r}`:""}`;case"techie":return`${s}${nC(n,2)}${nC(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function vC(e){return function(e,t){return t.reduce((t,n)=>(t[n]=e[n],t),{})}(e,["hour","minute","second","millisecond"])}const bC=["January","February","March","April","May","June","July","August","September","October","November","December"],CC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wC=["J","F","M","A","M","J","J","A","S","O","N","D"];function kC(e){switch(e){case"narrow":return[...wC];case"short":return[...CC];case"long":return[...bC];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const SC=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],MC=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],NC=["M","T","W","T","F","S","S"];function _C(e){switch(e){case"narrow":return[...NC];case"short":return[...MC];case"long":return[...SC];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const jC=["AM","PM"],EC=["Before Christ","Anno Domini"],TC=["BC","AD"],AC=["B","A"];function LC(e){switch(e){case"narrow":return[...AC];case"short":return[...TC];case"long":return[...EC];default:return null}}function OC(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const IC={D:Av,DD:Lv,DDD:Iv,DDDD:Dv,t:Rv,tt:Pv,ttt:zv,tttt:Fv,T:Hv,TT:Vv,TTT:$v,TTTT:Bv,f:Uv,ff:Wv,fff:Jv,ffff:Yv,F:Zv,FF:qv,FFF:Kv,FFFF:Qv};class DC{static create(e,t={}){return new DC(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let i=0;i<e.length;i++){const o=e.charAt(i);"'"===o?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||o===t?n+=o:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return IC[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return nC(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,s=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=()=>n?function(e){return jC[e.hour<12?0:1]}(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(t,r)=>n?function(e,t){return kC(t)[e.month-1]}(e,t):s(r?{month:t}:{month:t,day:"numeric"},"month"),l=(t,r)=>n?function(e,t){return _C(t)[e.weekday-1]}(e,t):s(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=DC.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return LC(t)[e.year<0?0:1]}(e,t):s({era:t},"era");return OC(DC.parseFormat(t),t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}})}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=DC.parseFormat(t),s=r.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]);return OC(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...s.map(n).filter(e=>e))))}}const RC=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function PC(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function zC(...e){return t=>e.reduce(([e,n,r],s)=>{const[i,o,a]=s(t,r);return[{...e,...i},o||n,a]},[{},null,1]).slice(0,2)}function FC(e,...t){if(null==e)return[null,null];for(const[n,r]of t){const t=n.exec(e);if(t)return r(t)}return[null,null]}function HC(...e){return(t,n)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=rC(t[n+s]);return[r,null,n+s]}}const VC=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$C=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BC=RegExp(`${$C.source}${`(?:${VC.source}?(?:\\[(${RC.source})\\])?)?`}`),UC=RegExp(`(?:T${BC.source})?`),ZC=HC("weekYear","weekNumber","weekDay"),WC=HC("year","ordinal"),qC=RegExp(`${$C.source} ?(?:${VC.source}|(${RC.source}))?`),GC=RegExp(`(?: ${qC.source})?`);function JC(e,t,n){const r=e[t];return qb(r)?n:rC(r)}function KC(e,t){return[{hours:JC(e,t,0),minutes:JC(e,t+1,0),seconds:JC(e,t+2,0),milliseconds:iC(e[t+3])},null,t+4]}function YC(e,t){const n=!e[t]&&!e[t+1],r=mC(e[t+1],e[t+2]);return[{},n?null:bb.instance(r),t+3]}function QC(e,t){return[{},e[t]?ib.create(e[t]):null,t+1]}const XC=RegExp(`^T?${$C.source}$`),ew=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function tw(e){const[t,n,r,s,i,o,a,l,c]=e,u="-"===t[0],d=l&&"-"===l[0],h=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:h(sC(n)),months:h(sC(r)),weeks:h(sC(s)),days:h(sC(i)),hours:h(sC(o)),minutes:h(sC(a)),seconds:h(sC(l),"-0"===l),milliseconds:h(iC(c),d)}]}const nw={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function rw(e,t,n,r,s,i,o){const a={year:2===t.length?pC(rC(t)):rC(t),month:CC.indexOf(n)+1,day:rC(r),hour:rC(s),minute:rC(i)};return o&&(a.second=rC(o)),e&&(a.weekday=e.length>3?SC.indexOf(e)+1:MC.indexOf(e)+1),a}const sw=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function iw(e){const[,t,n,r,s,i,o,a,l,c,u,d]=e,h=rw(t,s,r,n,i,o,a);let p;return p=l?nw[l]:c?0:mC(u,d),[h,new bb(p)]}const ow=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,aw=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,lw=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function cw(e){const[,t,n,r,s,i,o,a]=e;return[rw(t,s,r,n,i,o,a),bb.utcInstance]}function uw(e){const[,t,n,r,s,i,o,a]=e;return[rw(t,a,n,r,s,i,o),bb.utcInstance]}const dw=PC(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,UC),hw=PC(/(\d{4})-?W(\d\d)(?:-?(\d))?/,UC),pw=PC(/(\d{4})-?(\d{3})/,UC),fw=PC(BC),mw=zC(function(e,t){return[{year:JC(e,t),month:JC(e,t+1,1),day:JC(e,t+2,1)},null,t+3]},KC,YC,QC),gw=zC(ZC,KC,YC,QC),yw=zC(WC,KC,YC,QC),xw=zC(KC,YC,QC);const vw=zC(KC);const bw=PC(/(\d{4})-(\d\d)-(\d\d)/,GC),Cw=PC(qC),ww=zC(KC,YC,QC);const kw="Invalid Duration",Sw={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Mw={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Sw},Nw=365.2425,_w=30.436875,jw={years:{quarters:4,months:12,weeks:52.1775,days:Nw,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:_w,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...Sw},Ew=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Tw=Ew.slice(0).reverse();function Aw(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Iw(r)}function Lw(e,t){let n=t.milliseconds??0;for(const r of Tw.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function Ow(e,t){const n=Lw(e,t)<0?-1:1;Ew.reduceRight((r,s)=>{if(qb(t[s]))return r;if(r){const i=t[r]*n,o=e[s][r],a=Math.floor(i/o);t[s]+=a*n,t[r]-=a*o*n}return s},null),Ew.reduce((n,r)=>{if(qb(t[r]))return n;if(n){const s=t[n]%1;t[n]-=s,t[r]+=s*e[n][r]}return r},null)}class Iw{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?jw:Mw;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||xb.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return Iw.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new Nv("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new Iw({values:yC(e,Iw.normalizeUnit),loc:xb.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Gb(e))return Iw.fromMillis(e);if(Iw.isDuration(e))return e;if("object"==typeof e)return Iw.fromObject(e);throw new Nv(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=FC(e,[ew,tw]);return n?Iw.fromObject(n,t):Iw.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=FC(e,[XC,vw]);return n?Iw.fromObject(n,t):Iw.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Nv("need to specify a reason the Duration is invalid");const n=e instanceof Lb?e:new Lb(e,t);if(Ab.throwOnInvalid)throw new kv(n);return new Iw({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new Mv(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?DC.create(this.loc,n).formatDurationFromString(this,e):kw}toHuman(e={}){if(!this.isValid)return kw;const t=Ew.map(t=>{const n=this.values[t];return qb(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=oC(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};return _k.fromMillis(t,{zone:"UTC"}).toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Lw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Iw.fromDurationLike(e),n={};for(const r of Ew)(Xb(t.values,r)||Xb(this.values,r))&&(n[r]=t.get(r)+this.get(r));return Aw(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=Iw.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=gC(e(this.values[n],n));return Aw(this,{values:t},!0)}get(e){return this[Iw.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return Aw(this,{values:{...this.values,...yC(e,Iw.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){return Aw(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ow(this.matrix,e),Aw(this,{values:e},!0)}rescale(){if(!this.isValid)return this;return Aw(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map(e=>Iw.normalizeUnit(e));const t={},n={},r=this.toObject();let s;for(const i of Ew)if(e.indexOf(i)>=0){s=i;let e=0;for(const t in n)e+=this.matrix[t][i]*n[t],n[t]=0;Gb(r[i])&&(e+=r[i]);const o=Math.trunc(e);t[i]=o,n[i]=(1e3*e-1e3*o)/1e3}else Gb(r[i])&&(n[i]=r[i]);for(const i in n)0!==n[i]&&(t[s]+=i===s?n[i]:n[i]/this.matrix[s][i]);return Ow(this.matrix,t),Aw(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return Aw(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of Ew)if(!t(this.values[n],e.values[n]))return!1;return!0}}const Dw="Invalid Interval";class Rw{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Nv("need to specify a reason the Interval is invalid");const n=e instanceof Lb?e:new Lb(e,t);if(Ab.throwOnInvalid)throw new wv(n);return new Rw({invalid:n})}static fromDateTimes(e,t){const n=jk(e),r=jk(t),s=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?Rw.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:Rw.invalid("missing or invalid end"):Rw.invalid("missing or invalid start")}(n,r);return null==s?new Rw({start:n,end:r}):s}static after(e,t){const n=Iw.fromDurationLike(t),r=jk(e);return Rw.fromDateTimes(r,r.plus(n))}static before(e,t){const n=Iw.fromDurationLike(t),r=jk(e);return Rw.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,i,o,a;try{e=_k.fromISO(n,t),i=e.isValid}catch(s){i=!1}try{o=_k.fromISO(r,t),a=o.isValid}catch(s){a=!1}if(i&&a)return Rw.fromDateTimes(e,o);if(i){const n=Iw.fromISO(r,t);if(n.isValid)return Rw.after(e,n)}else if(a){const e=Iw.fromISO(n,t);if(e.isValid)return Rw.before(o,e)}}return Rw.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?Rw.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(jk).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),n=[];let{s:r}=this,s=0;for(;r<this.e;){const e=t[s]||this.e,i=+e>+this.e?this.e:e;n.push(Rw.fromDateTimes(r,i)),r=i,s+=1}return n}splitBy(e){const t=Iw.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,s=1;const i=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits(e=>e*s));n=+e>+this.e?this.e:e,i.push(Rw.fromDateTimes(r,n)),r=n,s+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Rw.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Rw.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),i=Array.prototype.concat(...s).sort((e,t)=>e.time-t.time);for(const o of i)n+="s"===o.type?1:-1,1===n?t=o.time:(t&&+t!==+o.time&&r.push(Rw.fromDateTimes(t,o.time)),t=null);return Rw.merge(r)}difference(...e){return Rw.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Dw}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Av,t={}){return this.isValid?DC.create(this.s.loc.clone(t),e).formatInterval(this):Dw}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Dw}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Dw}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Dw}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Dw}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Iw.invalid(this.invalidReason)}mapEndpoints(e){return Rw.fromDateTimes(e(this.s),e(this.e))}}class Pw{static hasDST(e=Ab.defaultZone){const t=_k.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return ib.isValidZone(e)}static normalizeZone(e){return wb(e,Ab.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||xb.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||xb.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||xb.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||xb.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||xb.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||xb.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||xb.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return xb.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return xb.create(t,null,"gregory").eras(e)}static features(){return{relative:Kb(),localeWeek:Yb()}}}function zw(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(Iw.fromMillis(r).as("days"))}function Fw(e,t,n,r){let[s,i,o,a]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=zw(e,t);return(n-n%7)/7}],["days",zw]],s={},i=e;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,s[l]=c(e,t),a=i.plus(s),a>t?(s[l]--,(e=i.plus(s))>t&&(a=e,s[l]--,e=i.plus(s))):e=a);return[e,s,a,o]}(e,t,n);const l=t-s,c=n.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===c.length&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(i[a]=(i[a]||0)+l/(o-s)));const u=Iw.fromObject(i,r);return c.length>0?Iw.fromMillis(l,r).shiftTo(...c).plus(u):u}const Hw={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Vw={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$w=Hw.hanidec.replace(/[\[|\]]/g,"").split("");function Bw({numberingSystem:e},t=""){return new RegExp(`${Hw[e||"latn"]}${t}`)}function Uw(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(Hw.hanidec))t+=$w.indexOf(e[n]);else for(const e in Vw){const[n,s]=Vw[e];r>=n&&r<=s&&(t+=r-n)}}return parseInt(t,10)}return t}(e))}}const Zw=`[ ${String.fromCharCode(160)}]`,Ww=new RegExp(Zw,"g");function qw(e){return e.replace(/\./g,"\\.?").replace(Ww,Zw)}function Gw(e){return e.replace(/\./g,"").replace(Ww," ").toLowerCase()}function Jw(e,t){return null===e?null:{regex:RegExp(e.map(qw).join("|")),deser:([n])=>e.findIndex(e=>Gw(n)===Gw(e))+t}}function Kw(e,t){return{regex:e,deser:([,e,t])=>mC(e,t),groups:t}}function Yw(e){return{regex:e,deser:([e])=>e}}const Qw={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Xw=null;function ek(e,t){return Array.prototype.concat(...e.map(e=>function(e,t){if(e.literal)return e;const n=nk(DC.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t)))}function tk(e,t,n){const r=ek(DC.parseFormat(n),e),s=r.map(t=>function(e,t){const n=Bw(t),r=Bw(t,"{2}"),s=Bw(t,"{3}"),i=Bw(t,"{4}"),o=Bw(t,"{6}"),a=Bw(t,"{1,2}"),l=Bw(t,"{1,3}"),c=Bw(t,"{1,6}"),u=Bw(t,"{1,9}"),d=Bw(t,"{2,4}"),h=Bw(t,"{4,6}"),p=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},f=(f=>{if(e.literal)return p(f);switch(f.val){case"G":return Jw(t.eras("short"),0);case"GG":return Jw(t.eras("long"),0);case"y":return Uw(c);case"yy":case"kk":return Uw(d,pC);case"yyyy":case"kkkk":return Uw(i);case"yyyyy":return Uw(h);case"yyyyyy":return Uw(o);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Uw(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Uw(r);case"MMM":return Jw(t.months("short",!0),1);case"MMMM":return Jw(t.months("long",!0),1);case"LLL":return Jw(t.months("short",!1),1);case"LLLL":return Jw(t.months("long",!1),1);case"o":case"S":return Uw(l);case"ooo":case"SSS":return Uw(s);case"u":return Yw(u);case"uu":return Yw(a);case"uuu":case"E":case"c":return Uw(n);case"a":return Jw(t.meridiems(),0);case"EEE":return Jw(t.weekdays("short",!1),1);case"EEEE":return Jw(t.weekdays("long",!1),1);case"ccc":return Jw(t.weekdays("short",!0),1);case"cccc":return Jw(t.weekdays("long",!0),1);case"Z":case"ZZ":return Kw(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Kw(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Yw(/[a-z_+-/]{1,256}?/i);case" ":return Yw(/[^\S\n\r]/);default:return p(f)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return f.token=e,f}(t,e)),i=s.find(e=>e.invalidReason);if(i)return{input:t,tokens:r,invalidReason:i.invalidReason};{const[e,n]=function(e){return[`^${e.map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"")}$`,e]}(s),i=RegExp(e,"i"),[o,a]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const s in n)if(Xb(n,s)){const i=n[s],o=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(r.slice(t,t+o))),t+=o}return[r,e]}return[r,{}]}(t,i,n),[l,c,u]=a?function(e){let t,n=null;return qb(e.z)||(n=ib.create(e.z)),qb(e.Z)||(n||(n=new bb(e.Z)),t=e.Z),qb(e.q)||(e.M=3*(e.q-1)+1),qb(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),qb(e.u)||(e.S=iC(e.u)),[Object.keys(e).reduce((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t},{}),n,t]}(a):[null,null,void 0];if(Xb(a,"a")&&Xb(a,"H"))throw new Sv("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:i,rawMatches:o,matches:a,result:l,zone:c,specificOffset:u}}}function nk(e,t){if(!e)return null;const n=DC.create(t,e).dtFormatter((Xw||(Xw=_k.fromMillis(1555555555555)),Xw)),r=n.formatToParts(),s=n.resolvedOptions();return r.map(t=>function(e,t,n){const{type:r,value:s}=e;if("literal"===r){const e=/^\s+$/.test(s);return{literal:!e,val:e?" ":s}}const i=t[r];let o=r;"hour"===r&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=Qw[o];if("object"==typeof a&&(a=a[i]),a)return{literal:!1,val:a}}(t,e,s))}const rk="Invalid DateTime",sk=864e13;function ik(e){return new Lb("unsupported zone",`the zone "${e.name}" is not supported`)}function ok(e){return null===e.weekData&&(e.weekData=Hb(e.c)),e.weekData}function ak(e){return null===e.localWeekData&&(e.localWeekData=Hb(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function lk(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new _k({...n,...t,old:n})}function ck(e,t,n){let r=e-60*t*1e3;const s=n.offset(r);if(t===s)return[r,t];r-=60*(s-t)*1e3;const i=n.offset(r);return s===i?[r,s]:[e-60*Math.min(s,i)*1e3,Math.max(s,i)]}function uk(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function dk(e,t,n){return ck(uC(e),t,n)}function hk(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:r,month:s,day:Math.min(e.c.day,cC(r,s))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=Iw.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=uC(i);let[l,c]=ck(a,n,e.zone);return 0!==o&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function pk(e,t,n,r,s,i){const{setZone:o,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,s=_k.fromObject(e,{...n,zone:r,specificOffset:i});return o?s:s.setZone(a)}return _k.invalid(new Lb("unparsable",`the input "${s}" can't be parsed as ${r}`))}function fk(e,t,n=!0){return e.isValid?DC.create(xb.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function mk(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=nC(e.c.year,n?6:4),t?(r+="-",r+=nC(e.c.month),r+="-",r+=nC(e.c.day)):(r+=nC(e.c.month),r+=nC(e.c.day)),r}function gk(e,t,n,r,s,i){let o=nC(e.c.hour);return t?(o+=":",o+=nC(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=":")):o+=nC(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=nC(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=nC(e.c.millisecond,3))),s&&(e.isOffsetFixed&&0===e.offset&&!i?o+="Z":e.o<0?(o+="-",o+=nC(Math.trunc(-e.o/60)),o+=":",o+=nC(Math.trunc(-e.o%60))):(o+="+",o+=nC(Math.trunc(e.o/60)),o+=":",o+=nC(Math.trunc(e.o%60)))),i&&(o+="["+e.zone.ianaName+"]"),o}const yk={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},xk={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},vk={ordinal:1,hour:0,minute:0,second:0,millisecond:0},bk=["year","month","day","hour","minute","second","millisecond"],Ck=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],wk=["year","ordinal","hour","minute","second","millisecond"];function kk(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Mv(e);return t}(e)}}function Sk(e,t){const n=wb(t.zone,Ab.defaultZone),r=xb.fromObject(t),s=Ab.now();let i,o;if(qb(e.year))i=s;else{for(const n of bk)qb(e[n])&&(e[n]=yk[n]);const t=Zb(e)||Wb(e);if(t)return _k.invalid(t);const r=n.offset(s);[i,o]=dk(e,r,n)}return new _k({ts:i,zone:n,loc:r,o:o})}function Mk(e,t,n){const r=!!qb(n.round)||n.round,s=(e,s)=>{e=oC(e,r||n.calendary?0:2,!0);return t.loc.clone(n).relFormatter(n).format(e,s)},i=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return s(i(n.unit),n.unit);for(const o of n.units){const e=i(o);if(Math.abs(e)>=1)return s(e,o)}return s(e>t?-0:0,n.units[n.units.length-1])}function Nk(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class _k{constructor(e){const t=e.zone||Ab.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Lb("invalid input"):null)||(t.isValid?null:ik(t));this.ts=qb(e.ts)?Ab.now():e.ts;let r=null,s=null;if(!n){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);r=uk(this.ts,e),n=Number.isNaN(r.year)?new Lb("invalid input"):null,r=n?null:r,s=n?null:e}}this._zone=t,this.loc=e.loc||xb.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new _k({})}static local(){const[e,t]=Nk(arguments),[n,r,s,i,o,a,l]=t;return Sk({year:n,month:r,day:s,hour:i,minute:o,second:a,millisecond:l},e)}static utc(){const[e,t]=Nk(arguments),[n,r,s,i,o,a,l]=t;return e.zone=bb.utcInstance,Sk({year:n,month:r,day:s,hour:i,minute:o,second:a,millisecond:l},e)}static fromJSDate(e,t={}){const n=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(n))return _k.invalid("invalid input");const s=wb(t.zone,Ab.defaultZone);return s.isValid?new _k({ts:n,zone:s,loc:xb.fromObject(t)}):_k.invalid(ik(s))}static fromMillis(e,t={}){if(Gb(e))return e<-sk||e>sk?_k.invalid("Timestamp out of range"):new _k({ts:e,zone:wb(t.zone,Ab.defaultZone),loc:xb.fromObject(t)});throw new Nv(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Gb(e))return new _k({ts:1e3*e,zone:wb(t.zone,Ab.defaultZone),loc:xb.fromObject(t)});throw new Nv("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=wb(t.zone,Ab.defaultZone);if(!n.isValid)return _k.invalid(ik(n));const r=xb.fromObject(t),s=yC(e,kk),{minDaysInFirstWeek:i,startOfWeek:o}=Ub(s,r),a=Ab.now(),l=qb(t.specificOffset)?n.offset(a):t.specificOffset,c=!qb(s.ordinal),u=!qb(s.year),d=!qb(s.month)||!qb(s.day),h=u||d,p=s.weekYear||s.weekNumber;if((h||c)&&p)throw new Sv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new Sv("Can't mix ordinal dates with month/day");const f=p||s.weekday&&!h;let m,g,y=uk(a,l);f?(m=Ck,g=xk,y=Hb(y,i,o)):c?(m=wk,g=vk,y=$b(y)):(m=bk,g=yk);let x=!1;for(const M of m){qb(s[M])?s[M]=x?g[M]:y[M]:x=!0}const v=f?function(e,t=4,n=1){const r=Jb(e.weekYear),s=tC(e.weekNumber,1,hC(e.weekYear,t,n)),i=tC(e.weekday,1,7);return r?s?!i&&Db("weekday",e.weekday):Db("week",e.weekNumber):Db("weekYear",e.weekYear)}(s,i,o):c?function(e){const t=Jb(e.year),n=tC(e.ordinal,1,lC(e.year));return t?!n&&Db("ordinal",e.ordinal):Db("year",e.year)}(s):Zb(s),b=v||Wb(s);if(b)return _k.invalid(b);const C=f?Vb(s,i,o):c?Bb(s):s,[w,k]=dk(C,l,n),S=new _k({ts:w,zone:n,o:k,loc:r});return s.weekday&&h&&e.weekday!==S.weekday?_k.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${S.toISO()}`):S}static fromISO(e,t={}){const[n,r]=FC(e,[dw,mw],[hw,gw],[pw,yw],[fw,xw]);return pk(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=FC(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[sw,iw]);return pk(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=FC(e,[ow,cw],[aw,cw],[lw,uw]);return pk(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(qb(e)||qb(t))throw new Nv("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,i=xb.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[o,a,l,c]=function(e,t,n){const{result:r,zone:s,specificOffset:i,invalidReason:o}=tk(e,t,n);return[r,s,i,o]}(i,e,t);return c?_k.invalid(c):pk(o,a,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return _k.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=FC(e,[bw,mw],[Cw,ww]);return pk(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Nv("need to specify a reason the DateTime is invalid");const n=e instanceof Lb?e:new Lb(e,t);if(Ab.throwOnInvalid)throw new Cv(n);return new _k({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=nk(e,xb.fromObject(t));return n?n.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return ek(DC.parseFormat(e),xb.fromObject(t)).map(e=>e.val).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?ok(this).weekYear:NaN}get weekNumber(){return this.isValid?ok(this).weekNumber:NaN}get weekday(){return this.isValid?ok(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?ak(this).weekday:NaN}get localWeekNumber(){return this.isValid?ak(this).weekNumber:NaN}get localWeekYear(){return this.isValid?ak(this).weekYear:NaN}get ordinal(){return this.isValid?$b(this.c).ordinal:NaN}get monthShort(){return this.isValid?Pw.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Pw.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Pw.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Pw.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=uC(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),i=this.zone.offset(n-r*t),o=this.zone.offset(n-s*t);if(i===o)return[this];const a=n-i*t,l=n-o*t,c=uk(a,i),u=uk(l,o);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[lk(this,{ts:a}),lk(this,{ts:l})]:[this]}get isInLeapYear(){return aC(this.year)}get daysInMonth(){return cC(this.year,this.month)}get daysInYear(){return this.isValid?lC(this.year):NaN}get weeksInWeekYear(){return this.isValid?hC(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?hC(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=DC.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(bb.instance(e),t)}toLocal(){return this.setZone(Ab.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=wb(e,Ab.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=dk(n,t,e)}return lk(this,{ts:r,zone:e})}return _k.invalid(ik(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return lk(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=yC(e,kk),{minDaysInFirstWeek:n,startOfWeek:r}=Ub(t,this.loc),s=!qb(t.weekYear)||!qb(t.weekNumber)||!qb(t.weekday),i=!qb(t.ordinal),o=!qb(t.year),a=!qb(t.month)||!qb(t.day),l=o||a,c=t.weekYear||t.weekNumber;if((l||i)&&c)throw new Sv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new Sv("Can't mix ordinal dates with month/day");let u;s?u=Vb({...Hb(this.c,n,r),...t},n,r):qb(t.ordinal)?(u={...this.toObject(),...t},qb(t.day)&&(u.day=Math.min(cC(u.year,u.month),u.day))):u=Bb({...$b(this.c),...t});const[d,h]=dk(u,this.o,this.zone);return lk(this,{ts:d,o:h})}plus(e){if(!this.isValid)return this;return lk(this,hk(this,Iw.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return lk(this,hk(this,Iw.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=Iw.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?DC.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):rk}toLocaleString(e=Av,t={}){return this.isValid?DC.create(this.loc.clone(t),e).formatDateTime(this):rk}toLocaleParts(e={}){return this.isValid?DC.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const i="extended"===e;let o=mk(this,i);return o+="T",o+=gk(this,i,t,n,r,s),o}toISODate({format:e="extended"}={}){return this.isValid?mk(this,"extended"===e):null}toISOWeekDate(){return fk(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:i="extended"}={}){if(!this.isValid)return null;return(r?"T":"")+gk(this,"extended"===i,t,e,n,s)}toRFC2822(){return fk(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return fk(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?mk(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),fk(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():rk}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return Iw.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=(a=t,Array.isArray(a)?a:[a]).map(Iw.normalizeUnit),i=e.valueOf()>this.valueOf(),o=Fw(i?this:e,i?e:this,s,r);var a;return i?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(_k.now(),e,t)}until(e){return this.isValid?Rw.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,n)<=r&&r<=s.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||_k.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),Mk(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?Mk(e.base||_k.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(_k.isDateTime))throw new Nv("min requires all arguments be DateTimes");return Qb(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(_k.isDateTime))throw new Nv("max requires all arguments be DateTimes");return Qb(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n;return tk(xb.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return _k.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return Av}static get DATE_MED(){return Lv}static get DATE_MED_WITH_WEEKDAY(){return Ov}static get DATE_FULL(){return Iv}static get DATE_HUGE(){return Dv}static get TIME_SIMPLE(){return Rv}static get TIME_WITH_SECONDS(){return Pv}static get TIME_WITH_SHORT_OFFSET(){return zv}static get TIME_WITH_LONG_OFFSET(){return Fv}static get TIME_24_SIMPLE(){return Hv}static get TIME_24_WITH_SECONDS(){return Vv}static get TIME_24_WITH_SHORT_OFFSET(){return $v}static get TIME_24_WITH_LONG_OFFSET(){return Bv}static get DATETIME_SHORT(){return Uv}static get DATETIME_SHORT_WITH_SECONDS(){return Zv}static get DATETIME_MED(){return Wv}static get DATETIME_MED_WITH_SECONDS(){return qv}static get DATETIME_MED_WITH_WEEKDAY(){return Gv}static get DATETIME_FULL(){return Jv}static get DATETIME_FULL_WITH_SECONDS(){return Kv}static get DATETIME_HUGE(){return Yv}static get DATETIME_HUGE_WITH_SECONDS(){return Qv}}function jk(e){if(_k.isDateTime(e))return e;if(e&&e.valueOf&&Gb(e.valueOf()))return _k.fromJSDate(e);if(e&&"object"==typeof e)return _k.fromObject(e);throw new Nv(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Ek=()=>{const{userProfile:e}=F(),t=e?.organization?.organization_type;return"claude_team"===t||"claude_enterprise"===t},Tk=()=>{const{userProfile:e}=F();return e?.account?.has_claude_pro??!1},Ak=()=>{const{userProfile:e}=F();return e?.account?.has_claude_max??!1};const Lk=" · ",Ok="Wallet empty",Ik="Spending cap reached",Dk="Limit reached - contact an admin to keep working",Rk="Limit reached",Pk="Usage limit reached",zk="continuing with extra usage",Fk="contact an admin to keep working",Hk="Add credits",Vk="Manage",$k="Keep working",Bk="Approaching 5-hour limit",Uk="Approaching weekly limit",Zk="You have 1 message left before hitting usage limits",Wk={"5h":"5-hour","7d":"Weekly","7d_opus":"Opus"},qk=({messageLimit:e,currentModel:t,onBlockingStateChange:n,onDismiss:r})=>{const[s,i]=de.useState(!1),o=Ek(),a=Tk(),l=Ak(),c=(()=>{const{userProfile:e}=F(),t=e?.account?.has_claude_max,n=e?.organization?.rate_limit_tier;if(t)return"default_claude_max_20x"===n?"max_20x":"max_5x"})(),u="https://claude.ai",d={UPGRADE_GENERIC:`${u}/upgrade?hide_free=true`,UPGRADE_MAX:`${u}/upgrade?hide_pro=true`,ADD_CREDITS:`${u}/settings/billing`,MANAGE_SPENDING:`${u}/settings/usage`,ENABLE_OVERAGES:`${u}/settings/usage`},h="within_limit"===e.type,p=function(e){if(!e||"within_limit"===e.type)return{isOverageScenario:!1,isBlocking:!1,isActive:!1};const t=!!e.overageDisabledReason&&"overage_not_provisioned"!==e.overageDisabledReason&&"org_level_disabled"!==e.overageDisabledReason,n=!!e.windows?.overage||t,r="exceeded_limit"===e.windows?.overage?.status||t;return{isOverageScenario:n,isBlocking:r,isActive:!r&&n}}(e),{windowName:f,status:m}=function(e,t){if(!e)return{windowName:null,status:null};const n=t?.startsWith("claude-opus")??!0,r="exceeded_limit"===e["5h"]?.status,s="exceeded_limit"===e["7d"]?.status,i=n&&"exceeded_limit"===e["7d_opus"]?.status,o="exceeded_limit"===e.overage?.status;if((s||r||i)&&o)return{windowName:"overage",status:e.overage};const a=[];if(r&&a.push({name:"5h",resetTime:e["5h"].resets_at}),s&&a.push({name:"7d",resetTime:e["7d"].resets_at}),i&&a.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),a.length>1){const t=a.reduce((e,t)=>t.resetTime>e.resetTime?t:e);return{windowName:t.name,status:e[t.name]}}return i?{windowName:"7d_opus",status:e["7d_opus"]}:s?{windowName:"7d",status:e["7d"]}:r||"approaching_limit"===e["5h"]?.status?{windowName:"5h",status:e["5h"]}:"approaching_limit"===e["7d"]?.status?{windowName:"7d",status:e["7d"]}:"approaching_limit"===e.overage?.status?{windowName:"overage",status:e.overage}:{windowName:null,status:null}}(e.windows,t),g=m?.resets_at||("within_limit"!==e.type?e.resetsAt:void 0),y=g?_k.fromSeconds(g):null,x="exceeded_limit"===e.type||"approaching_limit"===e.type&&0===e.remaining,v=!h&&(x&&!p.isActive||p.isBlocking),b=!o&&"max_20x"!==c,C=()=>(a||l)&&(a&&!l||"max_5x"===c)?d.UPGRADE_MAX:d.UPGRADE_GENERIC,w=()=>(a||l)&&a&&!l?"Subscribe to Max":"Upgrade",k=({url:e,text:t,opacity:n=90})=>he.jsx("button",{onClick:t=>((e,t)=>{e.stopPropagation(),chrome.tabs.create({url:t})})(t,e),className:`underline cursor-pointer text-text-100 opacity-${n} hover:opacity-100`,children:t}),S=(e,t)=>{const n=e.toLocaleString(_k.TIME_SIMPLE);if("7d"===t||"7d_opus"===t){return`${e.toFormat("cccc")} ${n}`}return n};if(de.useEffect(()=>{n?.(!h&&v)},[h,v,n]),h)return null;if(!v&&s)return null;if(s&&!v)return null;const M=p.isBlocking?"danger":"info";return he.jsx(xv,{type:M,onDismiss:v?void 0:()=>{i(!0),r?.()},children:(()=>{if(p.isOverageScenario){if(p.isBlocking)return o?Dk:"out_of_credits"===e.overageDisabledReason?he.jsxs(he.Fragment,{children:[Ok,Lk,he.jsx(k,{url:d.ADD_CREDITS,text:Hk})]}):he.jsxs(he.Fragment,{children:[Ik,Lk,he.jsx(k,{url:d.MANAGE_SPENDING,text:Vk})]});if(p.isActive&&y){const e=S(y,f),t=f?Wk[f]:null;return t?`${t} limit resets ${e}${Lk}${zk}`:`${Rk}${Lk}${zk}`}}if(x){if(!y)return Pk;const s=S(y,f),i=f?Wk[f]:null,a="max_20x"===c&&("overage_not_provisioned"===e.overageDisabledReason||"org_level_disabled"===e.overageDisabledReason);if(i){if(o)return`${i} limit resets ${s} - ${Fk}`;const e=a?he.jsx(k,{url:d.ENABLE_OVERAGES,text:$k}):b?he.jsx(k,{url:C(),text:w()}):null;return t=`${i} limit reached · resets`,n=s,(r=e)?he.jsxs(he.Fragment,{children:[t," ",n,Lk,r]}):`${t} ${n}`}return`${Pk} · resets ${s}`}{const t=b?he.jsx(k,{url:C(),text:w(),opacity:75}):null;if("5h"===f)return t?he.jsxs(he.Fragment,{children:[Bk,Lk,t]}):Bk;if("7d"===f)return t?he.jsxs(he.Fragment,{children:[Uk,Lk,t]}):Uk;const n=e.remaining;return 1===n?Zk:`You have ${n} messages left before hitting usage limits`}var t,n,r})()})},Gk=({isEligible:e,onBlockingStateChange:t})=>(de.useEffect(()=>{t?.(!e)},[e,t]),e?null:he.jsx(xv,{type:"info",children:he.jsxs("div",{className:"flex justify-between items-center w-full",children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Claude in Chrome requires a paid plan",id:"hg/DxQvpUn"})}),he.jsx("button",{onClick:e=>{e.stopPropagation(),chrome.tabs.create({url:"https://claude.ai/upgrade?hide_free=true"})},className:"underline cursor-pointer text-text-100 opacity-90 hover:opacity-100",children:he.jsx(r,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})]})}));const Jk=de.memo(({placeholders:e,isVisible:t})=>{const r=function(){const e=n();return[e.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}),e.formatMessage({defaultMessage:"Type / for commands",id:"fHClqd2+bS"})]}(),s=e??r,[i,o]=de.useState(0),[a,l]=de.useState(!1);return de.useEffect(()=>{if(!t||s.length<=1)return;const e=setInterval(()=>{l(!0),o(e=>(e+1)%s.length)},3e3);return()=>clearInterval(e)},[t,s.length]),de.useEffect(()=>{t&&(o(0),l(!1))},[t]),t?he.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden pl-0 pt-0",children:he.jsx(yn,{mode:"wait",initial:!1,children:he.jsx(gn.span,{initial:!!a&&{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"block text-text-500 text-sm",children:s[i]},i)})}):null});Jk.displayName="RotatingPlaceholder";const Kk="https://support.claude.com/en/articles/12012173-getting-started-with-claude-for-chrome#h_91c6e5a1ee";var Yk,Qk,Xk={exports:{}},eS={};function tS(){return Qk||(Qk=1,Xk.exports=function(){if(Yk)return eS;Yk=1;var e=Ce(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(s){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=n({inst:{value:a,getSnapshot:t}}),c=l[0].inst,u=l[1];return s(function(){c.value=a,c.getSnapshot=t,o(c)&&u({inst:c})},[e,a,t]),r(function(){return o(c)&&u({inst:c}),e(function(){o(c)&&u({inst:c})})},[e]),i(a),a};return eS.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,eS}()),Xk.exports}var nS=tS();function rS(e){this.content=e}function sS(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),i=t.child(r);if(s!=i){if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let e=0;s.text[e]==i.text[e];e++)n++;return n}if(s.content.size||i.content.size){let e=sS(s.content,i.content,n+1);if(null!=e)return e}n+=s.nodeSize}else n+=s.nodeSize}}function iS(e,t,n,r){for(let s=e.childCount,i=t.childCount;;){if(0==s||0==i)return s==i?null:{a:n,b:r};let o=e.child(--s),a=t.child(--i),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let e=0,t=Math.min(o.text.length,a.text.length);for(;e<t&&o.text[o.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let e=iS(o.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}rS.prototype={constructor:rS,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),i=r.content.slice();return-1==s?i.push(n||e,t):(i[s+1]=t,n&&(i[s]=n)),new rS(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new rS(n)},addToStart:function(e,t){return new rS([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new rS(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),i=r.find(e);return s.splice(-1==i?s.length:i,0,t,n),new rS(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=rS.from(e)).size?new rS(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=rS.from(e)).size?new rS(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=rS.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},rS.from=function(e){if(e instanceof rS)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new rS(t)};class oS{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,s){for(let i=0,o=0;o<t;i++){let a=this.content[i],l=o+a.nodeSize;if(l>e&&!1!==n(a,r+o,s||null,i)&&a.content.size){let s=o+1;a.nodesBetween(Math.max(0,e-s),Math.min(a.content.size,t-s),n,r+s)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let s="",i=!0;return this.nodesBetween(e,t,(o,a)=>{let l=o.isText?o.text.slice(Math.max(e,a)-a,t-a):o.isLeaf?r?"function"==typeof r?r(o):r:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(i?i=!1:s+=n),s+=l},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new oS(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let s=0,i=0;i<t;s++){let o=this.content[s],a=i+o.nodeSize;a>e&&((i<e||a>t)&&(o=o.isText?o.cut(Math.max(0,e-i),Math.min(o.text.length,t-i)):o.cut(Math.max(0,e-i-1),Math.min(o.content.size,t-i-1))),n.push(o),r+=o.nodeSize),i=a}return new oS(n,r)}cutByIndex(e,t){return e==t?oS.empty:0==e&&t==this.content.length?this:new oS(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),s=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new oS(r,s)}addToStart(e){return new oS([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oS(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return sS(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return iS(this,e,t,n)}findIndex(e){if(0==e)return lS(0,e);if(e==this.size)return lS(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let r=n+this.child(t).nodeSize;if(r>=e)return r==e?lS(t+1,r):lS(t,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return oS.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new oS(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oS.empty;let t,n=0;for(let r=0;r<e.length;r++){let s=e[r];n+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(t||(t=e.slice(0,r)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new oS(t||e,n)}static from(e){if(!e)return oS.empty;if(e instanceof oS)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oS([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oS.empty=new oS([],0);const aS={index:0,offset:0};function lS(e,t){return aS.index=e,aS.offset=t,aS}function cS(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!cS(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!cS(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}let uS=class e{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let s=e[r];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,r));else{if(s.type.excludes(this.type))return e;!n&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(s)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&cS(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];let n=t.slice();return n.sort((e,t)=>e.type.rank-t.type.rank),n}};uS.none=[];class dS extends Error{}class hS{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=fS(this.content,e+this.openStart,t);return n&&new hS(n,this.openStart,this.openEnd)}removeBetween(e,t){return new hS(pS(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return hS.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new hS(oS.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)n++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)r++;return new hS(e,n,r)}}function pS(e,t,n){let{index:r,offset:s}=e.findIndex(t),i=e.maybeChild(r),{index:o,offset:a}=e.findIndex(n);if(s==t||i.isText){if(a!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(pS(i.content,t-s-1,n-s-1)))}function fS(e,t,n,r){let{index:s,offset:i}=e.findIndex(t),o=e.maybeChild(s);if(i==t||o.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=fS(o.content,t-i-1,n,o);return a&&e.replaceChild(s,o.copy(a))}function mS(e,t,n){if(n.openStart>e.depth)throw new dS("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new dS("Inconsistent open depths");return gS(e,t,n,0)}function gS(e,t,n,r){let s=e.index(r),i=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let o=gS(e,t,n,r+1);return i.copy(i.content.replaceChild(s,o))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:s,end:o}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)r=t.node(s).copy(oS.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return CS(i,wS(e,s,o,t,r))}{let r=e.parent,s=r.content;return CS(r,s.cut(0,e.parentOffset).append(n.content).append(s.cut(t.parentOffset)))}}return CS(i,kS(e,t,r))}function yS(e,t){if(!t.type.compatibleContent(e.type))throw new dS("Cannot join "+t.type.name+" onto "+e.type.name)}function xS(e,t,n){let r=e.node(n);return yS(r,t.node(n)),r}function vS(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function bS(e,t,n,r){let s=(t||e).node(n),i=0,o=t?t.index(n):s.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(vS(e.nodeAfter,r),i++));for(let a=i;a<o;a++)vS(s.child(a),r);t&&t.depth==n&&t.textOffset&&vS(t.nodeBefore,r)}function CS(e,t){return e.type.checkContent(t),e.copy(t)}function wS(e,t,n,r,s){let i=e.depth>s&&xS(e,t,s+1),o=r.depth>s&&xS(n,r,s+1),a=[];return bS(null,e,s,a),i&&o&&t.index(s)==n.index(s)?(yS(i,o),vS(CS(i,wS(e,t,n,r,s+1)),a)):(i&&vS(CS(i,kS(e,t,s+1)),a),bS(t,n,s,a),o&&vS(CS(o,kS(n,r,s+1)),a)),bS(r,null,s,a),new oS(a)}function kS(e,t,n){let r=[];if(bS(null,e,n,r),e.depth>n){vS(CS(xS(e,t,n+1),kS(e,t,n+1)),r)}return bS(t,null,n,r),new oS(r)}hS.empty=new hS(oS.empty,0,0);class SS{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let s=0;s<e;s++)r+=n.child(s).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return uS.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let s=n.marks;for(var i=0;i<s.length;i++)!1!==s[i].type.spec.inclusive||r&&s[i].isInSet(r.marks)||(s=s[i--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<n.length;s++)!1!==n[s].type.spec.inclusive||r&&n[s].isInSet(r.marks)||(n=n[s--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new jS(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,s=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(s),o=s-t;if(n.push(i,e,r+t),!o)break;if(i=i.child(e),i.isText)break;s=o-1,r+=t+1}return new SS(t,n,s)}static resolveCached(e,t){let n=_S.get(e);if(n)for(let s=0;s<n.elts.length;s++){let e=n.elts[s];if(e.pos==t)return e}else _S.set(e,n=new MS);let r=n.elts[n.i]=SS.resolve(e,t);return n.i=(n.i+1)%NS,r}}class MS{constructor(){this.elts=[],this.i=0}}const NS=12,_S=new WeakMap;class jS{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ES=Object.create(null);class TS{constructor(e,t,n,r=uS.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||oS.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&cS(this.attrs,t||e.defaultAttrs||ES)&&uS.sameSet(this.marks,n||uS.none)}copy(e=null){return e==this.content?this:new TS(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new TS(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return hS.empty;let r=this.resolve(e),s=this.resolve(t),i=n?0:r.sharedDepth(t),o=r.start(i),a=r.node(i).content.cut(r.pos-o,s.pos-o);return new hS(a,r.depth-i,s.depth-i)}replace(e,t,n){return mS(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return SS.resolveCached(this,e)}resolveNoCache(e){return SS.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),LS(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=oS.empty,r=0,s=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,r,s),o=i&&i.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(let a=r;a<s;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(n),i=s&&s.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=uS.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!uS.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=oS.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,r,n);return s.type.checkAttrs(s.attrs),s}}TS.prototype.text=void 0;class AS extends TS{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):LS(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new AS(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new AS(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function LS(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class OS{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new IS(e,t);if(null==n.next)return OS.empty;let r=DS(n);n.next&&n.err("Unexpected trailing text");let s=function(e){let t=Object.create(null);return n(VS(e,0));function n(r){let s=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<s.length;e++)s[e][0]==t&&(r=s[e][1]);VS(e,n).forEach(e=>{r||s.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let i=t[r.join(",")]=new OS(r.indexOf(e.length-1)>-1);for(let e=0;e<s.length;e++){let r=s[e][1].sort(HS);i.next.push({type:s[e][0],next:t[r.join(",")]||n(r)})}return i}}(function(e){let t=[[]];return s(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let s={term:r,to:n};return t[e].push(s),s}function s(e,t){e.forEach(e=>e.to=t)}function i(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(i(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let o=n();return r(t,o),s(i(e.expr,o),o),[r(o)]}if("plus"==e.type){let o=n();return s(i(e.expr,t),o),s(i(e.expr,o),o),[r(o)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let o=t;for(let t=0;t<e.min;t++){let t=n();s(i(e.expr,o),t),o=t}if(-1==e.max)s(i(e.expr,o),o);else for(let t=e.min;t<e.max;t++){let t=n();r(o,t),s(i(e.expr,o),t),o=t}return[r(o)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=i(e.exprs[r],t);if(r==e.exprs.length-1)return o;s(o,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],s=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];i.push(n.name),!s||n.isText||n.hasRequiredAttrs()||(s=!1),-1==r.indexOf(o)&&r.push(o)}s&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,n),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let s=t;r&&s<n;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function s(i,o){let a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return oS.from(o.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=s(n,o.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),s=r.match;if(s.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<s.next.length;e++){let{type:i,next:o}=s.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!o.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let s=0;s<t.next.length;s++)r+=(s?", ":"")+t.next[s].type.name+"->"+e.indexOf(t.next[s].next);return r}).join("\n")}}OS.empty=new OS(!0);class IS{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function DS(e){let t=[];do{t.push(RS(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function RS(e){let t=[];do{t.push(PS(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function PS(e){let t=function(e){if(e.eat("(")){let t=DS(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let i in n){let e=n[i];e.isInGroup(t)&&s.push(e)}0==s.length&&e.err("No node type or group '"+t+"' found");return s}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=FS(e,t)}return t}function zS(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function FS(e,t){let n=zS(e),r=n;return e.eat(",")&&(r="}"!=e.next?zS(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function HS(e,t){return t-e}function VS(e,t){let n=[];return function t(r){let s=e[r];if(1==s.length&&!s[0].term)return t(s[0].to);n.push(r);for(let e=0;e<s.length;e++){let{term:r,to:i}=s[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(HS)}function $S(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function BS(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(void 0===s){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);s=t.default}n[r]=s}return n}function US(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let n=e[s];n.validate&&n.validate(t[s])}}function ZS(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new qS(e,r,t[r]);return n}let WS=class e{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=ZS(e,n.attrs),this.defaultAttrs=$S(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==OS.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:BS(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new TS(this,this.computeAttrs(e),oS.from(t),uS.setFrom(n))}createChecked(e=null,t,n){return t=oS.from(t),this.checkContent(t),new TS(this,this.computeAttrs(e),t,uS.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=oS.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),s=r&&r.fillBefore(oS.empty,!0);return s?new TS(this,e,t.append(s),uS.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){US(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:uS.none:e}static compile(t,n){let r=Object.create(null);t.forEach((t,s)=>r[t]=new e(t,n,s));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class qS{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let s=null===n?"null":typeof n;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class GS{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=ZS(e,r.attrs),this.excluded=null;let s=$S(this.attrs);this.instance=s?new uS(this,s):null}create(e=null){return!e&&this.instance?this.instance:new uS(this,BS(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,s)=>n[e]=new GS(e,r++,t,s)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){US(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class JS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=rS.from(e.nodes),t.marks=rS.from(e.marks||{}),this.nodes=WS.compile(this.spec.nodes,this),this.marks=GS.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",s=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=OS.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==s?null:s?KS(this,s.split(" ")):""!=s&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:KS(this,t.split(" "))}this.nodeFromJSON=e=>TS.fromJSON(this,e),this.markFromJSON=e=>uS.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof WS))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new AS(n,n.defaultAttrs,e,uS.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function KS(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],i=e.marks[s],o=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==s||r.spec.group&&r.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=r)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class YS{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new rM(this,t,!1);return n.addAll(e,uS.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new rM(this,t,!0);return n.addAll(e,uS.none,t.from,t.to),hS.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(sM(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let r=this.styles[s],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach(e=>{n(e=iM(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)})}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach(e=>{n(e=iM(e)),e.node||e.ignore||e.mark||(e.node=r)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new YS(e,YS.schemaRules(e)))}}const QS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},XS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},eM={ol:!0,ul:!0};function tM(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class nM{constructor(e,t,n,r,s,i){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=i,this.content=[],this.activeMarks=uS.none,this.match=s||(4&i?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(oS.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=oS.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(oS.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!QS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class rM{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,s=t.topNode,i=tM(null,t.preserveWhitespace,0)|(n?4:0);r=s?new nM(s.type,s.attrs,uS.none,!0,t.topMatch||s.type.contentMatch,i):new nM(n?null:e.schema.topNodeType,null,uS.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,s=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===s||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(s)n="full"!==s?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],s=e.previousSibling;(!t||s&&"BR"==s.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,s=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i,o=e.nodeName.toLowerCase();eM.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&eM.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));e:if(a?a.ignore:XS.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(QS.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),n=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let i=a&&a.skip?t:this.readStyles(e,t);i&&this.addAll(e,i),n&&this.sync(s),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?i:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let e=this.parser.matchedStyles[r],s=n.getPropertyValue(e);if(s)for(let n;;){let r=this.parser.matchStyle(e,s,this,n);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter(e=>!r.clearMark(e)):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return t}addElementByRule(e,t,n,r){let s,i;if(t.node)if(i=this.parser.schema.nodes[t.node],i.isLeaf)this.insertNode(i.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(i,t.attrs||null,n,t.preserveWhitespace);e&&(s=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let o=this.top;if(i&&i.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}s&&this.sync(o)&&this.open--}addAll(e,t,n,r){let s=n||0;for(let i=n?e.childNodes[n]:e.firstChild,o=null==r?null:e.childNodes[r];i!=o;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,t);this.findAtPoint(e,s)}findPlace(e,t,n){let r,s;for(let i=this.open,o=0;i>=0;i--){let t=this.nodes[i],a=t.findWrapping(e);if(a&&(!r||r.length>a.length+o)&&(r=a,s=t,!a.length))break;if(t.solid){if(n)break;o+=2}}if(!r)return null;this.sync(s);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=uS.none;for(let s of r.concat(e.marks))(t.type?t.type.allowsMarkType(s.type):oM(s.type,e.type))&&(n=s.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let s=this.findPlace(e.create(t),n,!1);return s&&(s=this.enterInner(e,t,n,!0,r)),s}enterInner(e,t,n,r=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let o=tM(e,s,i.options);4&i.options&&0==i.content.length&&(o|=4);let a=uS.none;return n=n.filter(t=>!(i.type?i.type.allowsMarkType(t.type):oM(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new nM(e,t,a,r,null,o)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),s=-(n?n.depth+1:0)+(r?0:1),i=(e,o)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;o>=s;o--)if(i(e-1,o))return!0;return!1}{let e=o>0||0==o&&r?this.nodes[o].type:n&&o>=s?n.node(o-s).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;o--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function sM(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function iM(e){let t={};for(let n in e)t[n]=e[n];return t}function oM(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let i=[],o=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:s}=e.edge(n);if(r==t)return!0;if(i.indexOf(s)<0&&o(s))return!0}};if(o(s.contentMatch))return!0}}class aM{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=cM(t).createDocumentFragment());let r=n,s=[];return e.forEach(e=>{if(s.length||e.marks.length){let n=0,i=0;for(;n<s.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(s[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<s.length;)r=s.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],o=this.serializeMark(n,e.isInline,t);o&&(s.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=hM(cM(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(n),n=s.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&hM(cM(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return hM(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new aM(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=lM(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return lM(e.marks)}}function lM(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function cM(e){return e.document||window.document}const uM=new WeakMap;function dM(e){let t=uM.get(e);return void 0===t&&uM.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function hM(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let s,i=t[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=dM(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o,a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let l=n?e.createElementNS(n,i):e.createElement(i),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):"style"==e&&l.style?l.style.cssText=c[e]:l.setAttribute(e,c[e])}}for(let d=u;d<t.length;d++){let s=t[d];if(0===s){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=hM(e,s,n,r);if(l.appendChild(t),i){if(o)throw new RangeError("Multiple content holes");o=i}}}return{dom:l,contentDOM:o}}const pM=Math.pow(2,16);function fM(e,t){return e+t*pM}function mM(e){return 65535&e}let gM=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}},yM=class e{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}recover(e){let t=0,n=mM(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/pM}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+s],c=this.ranges[o+i],u=a+l;if(e<=u){let s=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return s;let i=e==(t<0?a:u)?null:fM(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new gM(s,d,i)}r+=c-l}return n?e+r:new gM(e+r,0,null)}touches(e,t){let n=0,r=mM(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let t=this.ranges[o]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[o+s];if(e<=t+a&&o==3*r)return!0;n+=this.ranges[o+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let i=this.ranges[r],o=i-(this.inverted?s:0),a=i+(this.inverted?0:s),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),s+=c-l}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};yM.empty=new yM([]);let xM=class e{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(t=0,n=this.maps.length){return new e(this.maps,this.mirror,t,n)}copy(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let t=new e;return t.appendMappingInverted(this),t}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let s=this.from;s<this.to;s++){let n=this.maps[s].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(s);if(null!=t&&t>s&&t<this.to){s=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new gM(e,r,null)}};const vM=Object.create(null);let bM=class{getMap(){return yM.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=vM[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in vM)throw new RangeError("Duplicate use of step JSON ID "+e);return vM[e]=t,t.prototype.jsonID=e,t}},CM=class e{constructor(e,t){this.doc=e,this.failed=t}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,n,r,s){try{return e.ok(t.replace(n,r,s))}catch(i){if(i instanceof dS)return e.fail(i.message);throw i}}};function wM(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(wM(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return oS.fromArray(r)}let kM=class e extends bM{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new hS(wM(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return CM.fromReplace(e,this.from,this.to,s)}invert(){return new SM(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};bM.jsonID("addMark",kM);let SM=class e extends bM{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new hS(wM(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return CM.fromReplace(e,this.from,this.to,n)}invert(){return new kM(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};bM.jsonID("removeMark",SM);let MM=class e extends bM{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return CM.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return CM.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let t=this.mark.addToSet(n.marks);if(t.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(t))return new e(this.pos,n.marks[r]);return new e(this.pos,this.mark)}}return new NM(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};bM.jsonID("addNodeMark",MM);let NM=class e extends bM{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return CM.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return CM.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new MM(this.pos,this.mark):this}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};bM.jsonID("removeNodeMark",NM);let _M=class e extends bM{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&EM(e,this.from,this.to)?CM.fail("Structure replace would overwrite content"):CM.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new yM([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}}{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,hS.fromJSON(t,n.slice),!!n.structure)}};bM.jsonID("replace",_M);let jM=class e extends bM{constructor(e,t,n,r,s,i,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=o}apply(e){if(this.structure&&(EM(e,this.from,this.gapFrom)||EM(e,this.gapTo,this.to)))return CM.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return CM.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?CM.fromReplace(e,this.from,this.to,n):CM.fail("Content does not fit in gap")}getMap(){return new yM([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new e(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,hS.fromJSON(t,n.slice),n.insert,!!n.structure)}};function EM(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,s--}}return!1}function TM(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),o=r.node(e),a=!1;if(1==i)a=o.canReplace(n,n,s);else{let e=o.contentMatchAt(n).findWrapping(s.firstChild.type);a=e&&o.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function AM(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}bM.jsonID("replaceAround",jM);let LM=class{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=oS.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=oS.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,i=n.depth,o=r.depth;for(;i&&o&&1==s.childCount;)s=s.firstChild.content,i--,o--;let a=new hS(s,i,o);return e>-1?new jM(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new _M(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=DM(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let s=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:o,match:a}=this.frontier[i],l=null;if(1==t&&(s?a.matchType(s.type)||(l=a.fillBefore(oS.from(s),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:l};if(2==t&&s&&(e=a.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=DM(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new hS(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=DM(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new hS(OM(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new hS(OM(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let f=0;f<s.length;f++)this.openFrontierNode(s[f]);let i=this.unplaced,o=n?n.content:i.content,a=i.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=o.size+e-(i.content.size-i.openEnd);for(;l<o.childCount;){let e=o.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(RM(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=IM(this.placed,t,oS.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=o;f<h;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?hS.empty:new hS(OM(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new hS(OM(i.content,e,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!PM(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=PM(e,t,r,n,s);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],s=PM(e,n,r,t,!0);if(!s||s.childCount)continue e}return{depth:t,fit:i,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=IM(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=IM(this.placed,this.depth,oS.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(oS.empty,!0);e.childCount&&(this.placed=IM(this.placed,this.frontier.length,e))}};function OM(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(OM(e.firstChild.content,t-1,n)))}function IM(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(IM(e.lastChild.content,t-1,n)))}function DM(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function RM(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,RM(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(oS.empty,!0)))),e.copy(r)}function PM(e,t,n,r,s){let i=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,o)?a:null}function zM(e){return e.spec.defining||e.spec.definingForContent}function FM(e,t,n,r,s){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(FM(s.content,t+1,n,r,s)))}if(t>r){let t=s.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(oS.empty,!0))}return e}function HM(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let s=e.start(r);if(s<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&n.push(r)}return n}let VM=class e extends bM{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return CM.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return CM.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(r),0,t.isLeaf?0:1))}getMap(){return yM.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}};bM.jsonID("attr",VM);let $M=class extends Error{};$M=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},($M.prototype=Object.create(Error.prototype)).constructor=$M,$M.prototype.name="TransformError";let BM=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new xM}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new $M(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=hS.empty){let r=function(e,t,n=t,r=hS.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return AM(s,i,r)?new _M(t,n,r):new LM(s,i,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new hS(oS.from(n),0,0))}delete(e,t){return this.replace(e,t,hS.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(AM(s,i,r))return e.step(new _M(t,n,r));let o=HM(s,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let e=s.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;o.indexOf(h)>-1?a=h:s.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==r.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h].type,t=zM(e);if(t&&s.node(l).type!=e)u=h;else if(t||!e.isTextblock)break}for(let h=r.openStart;h>=0;h--){let t=(h+u+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<o.length;c++){let u=o[(c+l)%o.length],d=!0;u<0&&(d=!1,u=-u);let h=s.node(u-1),p=s.index(u-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(s.before(u),d?i.after(u):n,new hS(FM(r.content,0,r.openStart,t),t,r.openEnd))}}let d=e.steps.length;for(let h=o.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let e=o[h];e<0||(t=s.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let s=r.depth-1;s>=0;s--){let e=r.index(s);if(r.node(s).canReplaceWith(e,e,n))return r.before(s+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let e=r.indexAfter(s);if(r.node(s).canReplaceWith(e,e,n))return r.after(s+1);if(e<r.node(s).childCount)return null}return null}(e.doc,t,r.type);null!=s&&(t=n=s)}e.replaceRange(t,n,new hS(oS.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),i=HM(r,s);for(let o=0;o<i.length;o++){let t=i[o],n=o==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),s.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),s.indexAfter(t-1))))return e.delete(r.before(t),s.after(t))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o)return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:s,depth:i}=t,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=oS.empty,d=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=oS.from(r.node(f).copy(u)),d++):l--;let h=oS.empty,p=0;for(let f=i,m=!1;f>n;f--)m||s.after(f+1)<s.end(f)?(m=!0,h=oS.from(s.node(f).copy(h)),p++):c++;e.step(new jM(l,c,o,a,new hS(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=new _M(t-n,t+n,hS.empty,!0);e.step(r)}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=oS.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let e=n[o].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oS.from(n[o].type.create(n[o].attrs,r))}let s=t.start,i=t.end;e.step(new jM(s,i,s,i,new hS(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,s)&&function(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){e.clearIncompatible(e.mapping.slice(i).map(n,1),r);let o=e.mapping.slice(i),a=o.map(n,1),l=o.map(n+t.nodeSize,1);return e.step(new jM(a,l,a+1,l-1,new hS(oS.from(r.create(s,null,t.marks)),0,0),1,!0)),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new jM(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new hS(oS.from(o),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new VM(e,t,n)),this}addNodeMark(e,t){return this.step(new MM(e,t)),this}removeNodeMark(e,t){if(!(t instanceof uS)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new NM(e,t)),this}split(e,t=1,n){return function(e,t,n=1,r){let s=e.doc.resolve(t),i=oS.empty,o=oS.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=oS.from(s.node(a).copy(i));let e=r&&r[c];o=oS.from(e?e.type.create(e.attrs,o):s.node(a).copy(o))}e.step(new _M(t,t,new hS(i.append(o),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let s,i,o=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(s&&s.to==c&&s.mark.eq(u[e])?s.to=d:o.push(s=new SM(c,d,u[e])));i&&i.to==c?i.to=d:a.push(i=new kM(c,d,r))}}),o.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(e,o)=>{if(!e.isInline)return;i++;let a=null;if(r instanceof GS){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<s.length;e++){let t=s[e];t.step==i-1&&l.eq(s[e].style)&&(n=t)}n?(n.to=r,n.step=i):s.push({style:l,from:Math.max(o,t),to:r,step:i})}}}),s.forEach(t=>e.step(new SM(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,r=n.contentMatch){let s=e.doc.nodeAt(t),i=[],o=t+1;for(let a=0;a<s.childCount;a++){let t=s.child(a),l=o+t.nodeSize,c=r.matchType(t.type);if(c){r=c;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new SM(o,l,t.marks[r]))}else i.push(new _M(o,l,hS.empty));o=l}if(!r.validEnd){let t=r.fillBefore(oS.empty,!0);e.replace(o,o,new hS(t,0,0))}for(let a=i.length-1;a>=0;a--)e.step(i[a])}(this,e,t,n),this}};const UM=Object.create(null);class ZM{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new WM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=hS.empty){let n=t.content.lastChild,r=null;for(let o=0;o<t.openEnd;o++)r=n,n=n.lastChild;let s=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:l}=i[o],c=e.mapping.slice(s);e.replaceRange(c.map(a.pos),c.map(l.pos),o?hS.empty:t),0==o&&nN(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:i,$to:o}=r[s],a=e.mapping.slice(n),l=a.map(i.pos),c=a.map(o.pos);s?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),nN(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new JM(e):tN(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let s=e.depth-1;s>=0;s--){let r=t<0?tN(e.node(0),e.node(s),e.before(s+1),e.index(s),t,n):tN(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new XM(e.node(0))}static atStart(e){return tN(e,e,0,0,1)||new XM(e)}static atEnd(e){return tN(e,e,e.content.size,e.childCount,-1)||new XM(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=UM[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in UM)throw new RangeError("Duplicate use of selection JSON ID "+e);return UM[e]=t,t.prototype.jsonID=e,t}getBookmark(){return JM.between(this.$anchor,this.$head).getBookmark()}}ZM.prototype.visible=!0;class WM{constructor(e,t){this.$from=e,this.$to=t}}let qM=!1;function GM(e){qM||e.parent.inlineContent||(qM=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class JM extends ZM{constructor(e,t=e){GM(e),GM(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return ZM.near(n);let r=e.resolve(t.map(this.anchor));return new JM(r.parent.inlineContent?r:n,n)}replace(e,t=hS.empty){if(super.replace(e,t),t==hS.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof JM&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new KM(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new JM(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=ZM.findFrom(t,n,!0)||ZM.findFrom(t,-n,!0);if(!e)return ZM.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(ZM.findFrom(e,-n,!0)||ZM.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new JM(e,t)}}ZM.jsonID("text",JM);class KM{constructor(e,t){this.anchor=e,this.head=t}map(e){return new KM(e.map(this.anchor),e.map(this.head))}resolve(e){return JM.between(e.resolve(this.anchor),e.resolve(this.head))}}class YM extends ZM{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),s=e.resolve(r);return n?ZM.near(s):new YM(s)}content(){return new hS(oS.from(this.node),0,0)}eq(e){return e instanceof YM&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new QM(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new YM(e.resolve(t.anchor))}static create(e,t){return new YM(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}YM.prototype.visible=!1,ZM.jsonID("node",YM);class QM{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new KM(n,n):new QM(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&YM.isSelectable(n)?new YM(t):ZM.near(t)}}class XM extends ZM{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=hS.empty){if(t==hS.empty){e.delete(0,e.doc.content.size);let t=ZM.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new XM(e)}map(e){return new XM(e)}eq(e){return e instanceof XM}getBookmark(){return eN}}ZM.jsonID("all",XM);const eN={map(){return this},resolve:e=>new XM(e)};function tN(e,t,n,r,s,i=!1){if(t.inlineContent)return JM.create(e,n);for(let o=r-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let r=t.child(o);if(r.isAtom){if(!i&&YM.isSelectable(r))return YM.create(e,n-(s<0?r.nodeSize:0))}else{let t=tN(e,r,n+s,s<0?r.childCount:0,s,i);if(t)return t}n+=r.nodeSize*s}return null}function nN(e,t,n){let r=e.steps.length-1;if(r<t)return;let s,i=e.steps[r];(i instanceof _M||i instanceof jM)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==s&&(s=r)}),e.setSelection(ZM.near(e.doc.resolve(s),n)))}class rN extends BM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return uS.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||uS.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let s=this.storedMarks;if(!s){let e=this.doc.resolve(t);s=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,s)),this.selection.empty||this.setSelection(ZM.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function sN(e,t){return t&&e?e.bind(t):e}class iN{constructor(e,t,n){this.name=e,this.init=sN(t.init,n),this.apply=sN(t.apply,n)}}const oN=[new iN("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new iN("selection",{init:(e,t)=>e.selection||ZM.atStart(t.doc),apply:e=>e.selection}),new iN("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new iN("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class aN{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oN.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new iN(e.key,e.spec.state,e))})}}class lN{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let o=this.config.plugins[i];if(o.spec.appendTransaction){let a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),s=!0}r&&(r[i]={state:n,n:t.length})}}if(!s)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new lN(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let s=n[r];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new rN(this)}static create(e){let t=new aN(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new lN(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new aN(this.schema,e.plugins),n=t.fields,r=new lN(t);for(let s=0;s<n.length;s++){let t=n[s].name;r[t]=this.hasOwnProperty(t)?this[t]:n[s].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],s=r.spec.state;s&&s.toJSON&&(t[n]=s.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new aN(e.schema,e.plugins),s=new lN(r);return r.fields.forEach(r=>{if("doc"==r.name)s.doc=TS.fromJSON(e.schema,t.doc);else if("selection"==r.name)s.selection=ZM.fromJSON(s.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let o=n[i],a=o.spec.state;if(o.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(s[r.name]=a.fromJSON.call(o,e,t[i],s))}s[r.name]=r.init(e,s)}}),s}}function cN(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):"handleDOMEvents"==r&&(s=cN(s,t,{})),n[r]=s}return n}class uN{constructor(e){this.spec=e,this.props={},e.props&&cN(e.props,this,this.props),this.key=e.key?e.key.key:hN("plugin")}getState(e){return e[this.key]}}const dN=Object.create(null);function hN(e){return e in dN?e+"$"+ ++dN[e]:(dN[e]=0,e+"$")}class pN{constructor(e="key"){this.key=hN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const fN=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},mN=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let gN=null;const yN=function(e,t,n){let r=gN||(gN=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},xN=function(e,t,n,r){return n&&(bN(e,t,n,r,-1)||bN(e,t,n,r,1))},vN=/^(img|br|input|textarea|hr)$/i;function bN(e,t,n,r,s){for(var i;;){if(e==n&&t==r)return!0;if(t==(s<0?0:CN(e))){let n=e.parentNode;if(!n||1!=n.nodeType||wN(e)||vN.test(e.nodeName)||"false"==e.contentEditable)return!1;t=fN(e)+(s<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(s<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(i=n.pmViewDesc)||void 0===i?void 0:i.ignoreForSelection))return!1;t+=s}else e=n,t=s<0?CN(e):0}}}}function CN(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function wN(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const kN=function(e){return e.focusNode&&xN(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function SN(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const MN="undefined"!=typeof navigator?navigator:null,NN="undefined"!=typeof document?document:null,_N=MN&&MN.userAgent||"",jN=/Edge\/(\d+)/.exec(_N),EN=/MSIE \d/.exec(_N),TN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_N),AN=!!(EN||TN||jN),LN=EN?document.documentMode:TN?+TN[1]:jN?+jN[1]:0,ON=!AN&&/gecko\/(\d+)/i.test(_N);ON&&(/Firefox\/(\d+)/.exec(_N)||[0,0])[1];const IN=!AN&&/Chrome\/(\d+)/.exec(_N),DN=!!IN,RN=IN?+IN[1]:0,PN=!AN&&!!MN&&/Apple Computer/.test(MN.vendor),zN=PN&&(/Mobile\/\w+/.test(_N)||!!MN&&MN.maxTouchPoints>2),FN=zN||!!MN&&/Mac/.test(MN.platform),HN=!!MN&&/Win/.test(MN.platform),VN=/Android \d/.test(_N),$N=!!NN&&"webkitFontSmoothing"in NN.documentElement.style,BN=$N?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function UN(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ZN(e,t){return"number"==typeof e?e:e[t]}function WN(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function qN(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(1!=o.nodeType){o=mN(o);continue}let e=o,n=e==i.body,a=n?UN(i):WN(e),l=0,c=0;if(t.top<a.top+ZN(r,"top")?c=-(a.top-t.top+ZN(s,"top")):t.bottom>a.bottom-ZN(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+ZN(s,"top")-a.top:t.bottom-a.bottom+ZN(s,"bottom")),t.left<a.left+ZN(r,"left")?l=-(a.left-t.left+ZN(s,"left")):t.right>a.right-ZN(r,"right")&&(l=t.right-a.right+ZN(s,"right")),l||c)if(n)i.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let s=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-s,top:t.top-i,right:t.right-s,bottom:t.bottom-i}}let u=n?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(u))break;o="absolute"==u?o.offsetParent:mN(o)}}function GN(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=mN(r));return t}function JN(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:i}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let KN=null;function YN(e,t){let n,r,s,i,o=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=yN(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<o){n=u,o=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!s&&p.left<=t.left&&p.right>=t.left&&(s=u,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&s&&(n=s,r=i,o=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let n=n_(r,1);if(n.top!=n.bottom&&QN(t,n))return{node:e,offset:s+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:a}:YN(n,r)}function QN(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function XN(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let s=e[r];if(QN(t,s))return XN(n,t,s)}}if((i=(i+1)%r)==s)break}return e}function e_(e,t){let n,r=e.dom.ownerDocument,s=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(CN(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(CN(r.startContainer),r.startOffset)}}}(r,t.left,t.top);i&&({node:n,offset:s}=i);let o,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!QN(t,n))return null;if(a=XN(e.dom,t,n),!a)return null}if(PN)for(let c=a;n&&c;c=mN(c))c.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(ON&&1==n.nodeType&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let e,r=n.childNodes[s];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&s++}let r;$N&&s&&1==n.nodeType&&1==(r=n.childNodes[s-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&s--,n==e.dom&&s==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:0!=s&&1==n.nodeType&&"BR"==n.childNodes[s-1].nodeName||(o=function(e,t,n,r){let s=-1;for(let i=t,o=!1;i!=e.dom;){let t,n=e.docView.nearestDesc(i,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(n.dom.nodeName)&&(!o&&t.left>r.left||t.top>r.top?s=n.posBefore:(!o&&t.right<r.left||t.bottom<r.top)&&(s=n.posAfter),o=!0),!n.contentDOM&&s<0&&!n.node.isText))return(n.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;i=n.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}(e,n,s,t))}null==o&&(o=function(e,t,n){let{node:r,offset:s}=YN(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,s,i)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function t_(e){return e.top<e.bottom||e.left<e.right}function n_(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(t_(e))return e}return Array.prototype.find.call(n,t_)||e.getBoundingClientRect()}const r_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function s_(e,t,n){let{node:r,offset:s,atom:i}=e.docView.domFromPos(t,n<0?-1:1),o=$N||ON;if(3==r.nodeType){if(!o||!r_.test(r.nodeValue)&&(n<0?s:s!=r.nodeValue.length)){let e=s,t=s,i=n<0?1:-1;return n<0&&!s?(t++,i=-1):n>=0&&s==r.nodeValue.length?(e--,i=1):n<0?e--:t++,i_(n_(yN(r,e,t),i),i<0)}{let e=n_(yN(r,s,s),n);if(ON&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let t=n_(yN(r,s-1,s-1),-1);if(t.top==e.top){let n=n_(yN(r,s,s+1),-1);if(n.top!=e.top)return i_(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&s&&(n<0||s==CN(r))){let e=r.childNodes[s-1];if(1==e.nodeType)return o_(e.getBoundingClientRect(),!1)}if(null==i&&s<CN(r)){let e=r.childNodes[s];if(1==e.nodeType)return o_(e.getBoundingClientRect(),!0)}return o_(r.getBoundingClientRect(),n>=0)}if(null==i&&s&&(n<0||s==CN(r))){let e=r.childNodes[s-1],t=3==e.nodeType?yN(e,CN(e)-(o?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return i_(n_(t,1),!1)}if(null==i&&s<CN(r)){let e=r.childNodes[s];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?yN(e,0,o?0:1):1==e.nodeType?e:null:null;if(t)return i_(n_(t,-1),!0)}return i_(n_(3==r.nodeType?yN(r):r,-n),n>=0)}function i_(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function o_(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function a_(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}const l_=/[\u0590-\u08ac]/;let c_=null,u_=null,d_=!1;function h_(e,t,n){return c_==t&&u_==n?d_:(c_=t,u_=n,d_="up"==n||"down"==n?function(e,t,n){let r=t.selection,s="up"==n?r.$from:r.$to;return a_(e,t,()=>{let{node:t}=e.docView.domFromPos(s.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=s_(e,s.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=yN(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let s=t[e];if(s.bottom>s.top+1&&("up"==n?r.top-s.top>2*(s.bottom-r.top):s.bottom-r.bottom>2*(r.bottom-s.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=e.domSelection();return a?l_.test(r.parent.textContent)&&a.modify?a_(e,t,()=>{let{focusNode:t,focusOffset:s,anchorNode:i,anchorOffset:o}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&s==d;try{a.collapse(i,o),t&&(t!=i||s!=o)&&a.extend&&a.extend(t,s)}catch(p){}return null!=l&&(a.caretBidiLevel=l),h}):"left"==n||"backward"==n?i:o:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class p_{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>fN(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let s,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(s=i.nodeDOM)||(1==s.nodeType?s.contains(1==e.nodeType?e:e.parentNode):s==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],s=n+r.size;if(n==e&&s!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<s)return r.descAt(e-n-r.border);n=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let s=0;n<this.children.length;n++){let t=this.children[n],i=s+t.size;if(i>e||t instanceof b_){r=e-s;break}s=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let s;n&&!(s=this.children[n-1]).size&&s instanceof f_&&s.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?fN(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?fN(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let i=n,o=0;;o++){let n=this.children[o],a=i+n.size;if(-1==r&&e<=a){let s=i+n.border;if(e>=s&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,s);e=i;for(let t=o;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=fN(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||o==this.children.length-1)){t=a;for(let e=o+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){s=fN(n.dom);break}t+=n.size}-1==s&&(s=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let s=Math.min(e,t),i=Math.max(e,t);for(let p=0,f=0;p<this.children.length;p++){let o=this.children[p],a=f+o.size;if(s>f&&i<a)return o.setSelection(e-f-o.border,t-f-o.border,n,r);f=a}let o=this.domFromPos(e,e?-1:1),a=t==e?o:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((ON||PN)&&e==t){let{node:e,offset:t}=o;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(o=a={node:n.parentNode,offset:fN(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(ON&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&PN)&&xN(o.node,o.offset,c.anchorNode,c.anchorOffset)&&xN(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&(!u||!ON)){l.collapse(o.node,o.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(h){}}if(!d){if(e>t){let e=o;o=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let s=this.children[r],i=n+s.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+s.border,o=i-s.border;if(e>=r&&t<=o)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=o||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(e-r,t-r):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class f_ extends p_{constructor(e,t,n,r){let s,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:r)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class m_ extends p_{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class g_ extends p_{constructor(e,t,n,r,s){super(e,[],n,r),this.mark=t,this.spec=s}static create(e,t,n,r){let s=r.nodeViews[t.type.name],i=s&&s(t,r,n);return i&&i.dom||(i=aM.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new g_(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=g_.create(this.parent,this.mark,!0,n),s=this.children,i=this.size;t<i&&(s=O_(s,t,i,n)),e>0&&(s=O_(s,0,e,n));for(let o=0;o<s.length;o++)s[o].parent=r;return r.children=s,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class y_ extends p_{constructor(e,t,n,r,s,i,o,a,l){super(e,[],s,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=o}static create(e,t,n,r,s,i){let o,a=s.nodeViews[t.type.name],l=a&&a(t,s,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:i,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=aM.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=j_(c,n,t),l?o=new C_(e,t,n,r,c,u||null,d,l,s,i+1):t.isText?new v_(e,t,n,r,c,d,s):new y_(e,t,n,r,c,u||null,d,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oS.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&E_(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,i=s&&s.pos>-1?s:null,o=s&&s.pos<0,a=new A_(this,i&&i.node,e);!function(e,t,n,r){let s=t.locals(e),i=0;if(0==s.length){for(let n=0;n<e.childCount;n++){let o=e.child(n);r(o,s,t.forChild(i,o),n),i+=o.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;o<s.length&&s[o].to==i;){let e=s[o++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(L_);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=i&&a.splice(e--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let f=i+h.nodeSize;if(h.isText){let e=f;o<s.length&&s[o].from<e&&(e=s[o].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-i),h=h.cut(0,e-i),f=e,p=-1)}else for(;o<s.length&&s[o].to<f;)o++;r(h,h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice(),t.forChild(i,h),p),i=f}}(this.node,this.innerDeco,(t,s,i)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&a.syncToMarks(s==this.node.childCount?uS.none:this.node.child(s).marks,n,e),a.placeWidget(t,e,r)},(t,i,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,i,l,c)||o&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(t,i,l,u,e)||a.updateNextNode(t,i,l,e,c,r)||a.addNode(t,i,l,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),w_(this.contentDOM,this.children,e),zN&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof JM)||n<t||r>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,i=function(e,t,n,r){for(let s=0,i=0;s<e.childCount&&i<=r;){let o=e.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<e.childCount;){let t=e.child(s++);if(i+=t.nodeSize,!t.isText)break;l+=t.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return i<0?null:{node:s,pos:i,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new m_(this,s,t,r);e.input.compositionNodes.push(i),this.children=O_(this.children,n,n+r.length,e,i)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(E_(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=N_(this.dom,this.nodeDOM,M_(this.outerDeco,this.node,t),M_(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function x_(e,t,n,r,s){j_(r,t,e);let i=new y_(void 0,e,t,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class v_ extends y_{constructor(e,t,n,r,s,i,o){super(e,t,n,r,s,null,i,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),s=document.createTextNode(r.text);return new v_(this.parent,r,this.outerDeco,this.innerDeco,s,s,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class b_ extends p_{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class C_ extends y_{constructor(e,t,n,r,s,i,o,a,l,c){super(e,t,n,r,s,i,o,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,n);return s&&this.updateInner(e,t,n,r),s}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function w_(e,t,n){let r=e.firstChild,s=!1;for(let i=0;i<t.length;i++){let o=t[i],a=o.dom;if(a.parentNode==e){for(;a!=r;)r=T_(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(a,r);if(o instanceof g_){let t=r?r.previousSibling:e.lastChild;w_(o.contentDOM,o.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=T_(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const k_=function(e){e&&(this.nodeName=e)};k_.prototype=Object.create(null);const S_=[new k_];function M_(e,t,n){if(0==e.length)return S_;let r=n?S_[0]:new k_,s=[r];for(let i=0;i<e.length;i++){let o=e[i].type.attrs;if(o){o.nodeName&&s.push(r=new k_(o.nodeName));for(let e in o){let i=o[e];null!=i&&(n&&1==s.length&&s.push(r=new k_(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return s}function N_(e,t,n,r){if(n==S_&&r==S_)return t;let s=t;for(let i=0;i<r.length;i++){let t=r[i],o=n[i];if(i){let n;o&&o.nodeName==t.nodeName&&s!=e&&(n=s.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(s),o=S_[0]),s=n}__(s,o||S_[0],t)}return s}function __(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==s.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<s.length;t++)-1==r.indexOf(s[t])&&e.classList.add(s[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function j_(e,t,n){return N_(e,e,S_,M_(t,n,1!=e.nodeType))}function E_(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function T_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class A_{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,s=e.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof g_)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;r<i&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[s])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=g_.create(this.top,e[s],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,n,r){let s,i=-1;if(r>=this.preMatch.index&&(s=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,n))i=this.top.children.indexOf(s,this.index);else for(let o=this.index,a=Math.min(this.top.children.length,o+5);o<a;o++){let r=this.top.children[o];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){i=o;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,s){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,s)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,s,i){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof y_){let l=this.preMatch.matched.get(a);if(null!=l&&l!=s)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&E_(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,o),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,i)))return this.destroyBetween(this.index,o),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,i+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,s,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!E_(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let o=y_.create(this.top,t,n,r,s,i);if(o.contentDOM){o.children=e.children,e.children=[];for(let e of o.children)e.parent=o}return e.destroy(),o}addNode(e,t,n,r,s){let i=y_.create(this.top,e,t,n,r,s);i.contentDOM&&i.updateChildren(r,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new f_(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof g_;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof v_)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((PN||DN)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new b_(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function L_(e,t){return e.type.side-t.type.side}function O_(e,t,n,r,s){let i=[];for(let o=0,a=0;o<e.length;o++){let l=e[o],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function I_(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),i=s&&0==s.size,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a,l,c=r.resolve(o);if(kN(n)){for(a=o;s&&!s.node;)s=s.parent;let e=s.node;if(s&&e.isAtom&&YM.isSelectable(e)&&s.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,s=t==CN(e);r||s;){if(e==n)return!0;let t=fN(e);if(!(e=e.parentNode))return!1;r=r&&0==t,s=s&&t==CN(e)}}(n.focusNode,n.focusOffset,s.dom))){let e=s.posBefore;l=new YM(o==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=o,s=o;for(let r=0;r<n.rangeCount;r++){let i=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(i.startContainer,i.startOffset,1)),s=Math.max(s,e.docView.posFromDOM(i.endContainer,i.endOffset,-1))}if(t<0)return null;[a,o]=s==e.state.selection.anchor?[s,t]:[t,s],c=r.resolve(o)}else a=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!l){l=B_(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!i?1:-1)}return l}function D_(e){return e.editable?e.hasFocus():Z_(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function R_(e,t=!1){let n=e.state.selection;if(V_(e,n),D_(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&DN){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&xN(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r="IMG"==n.nodeName;r?t.collapse(n.parentNode,fN(n)+1):t.collapse(n,0);!r&&!e.state.selection.visible&&AN&&LN<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{let r,s,{anchor:i,head:o}=n;!P_||n instanceof JM||(n.$from.parent.inlineContent||(r=z_(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=z_(e,n.to))),e.docView.setSelection(i,o,e,t),P_&&(r&&H_(r),s&&H_(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==s||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{D_(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const P_=PN||DN&&RN<63;function z_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(PN&&s&&"false"==s.contentEditable)return F_(s);if(!(s&&"false"!=s.contentEditable||i&&"false"!=i.contentEditable)){if(s)return F_(s);if(i)return F_(i)}}function F_(e){return e.contentEditable="true",PN&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function H_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function V_(e,t){if(t instanceof YM){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&($_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else $_(e)}function $_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function B_(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||JM.between(t,n,r)}function U_(e){return!(e.editable&&!e.hasFocus())&&Z_(e)}function Z_(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function W_(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return i&&ZM.findFrom(i,t)}function q_(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function G_(e,t,n){let r=e.state.selection;if(!(r instanceof JM)){if(r instanceof YM&&r.node.isInline)return q_(e,new JM(t>0?r.$to:r.$from));{let n=W_(e.state,t);return!!n&&q_(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,s=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+s.nodeSize*(t<0?-1:1));return q_(e,new JM(r.$anchor,i))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=W_(e.state,t);return!!(n&&n instanceof YM)&&q_(e,n)}if(!(FN&&n.indexOf("m")>-1)){let n,s=r.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText)return!1;let o=t<0?s.pos-i.nodeSize:s.pos;return!!(i.isAtom||(n=e.docView.descAt(o))&&!n.contentDOM)&&(YM.isSelectable(i)?q_(e,new YM(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):!!$N&&q_(e,new JM(e.state.doc.resolve(t<0?o:o+i.nodeSize))))}}function J_(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function K_(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Y_(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,o=!1;ON&&1==n.nodeType&&r<J_(n)&&K_(n.childNodes[r],-1)&&(o=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(K_(e,-1))s=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Q_(n))break;{let t=n.previousSibling;for(;t&&K_(t,-1);)s=n.parentNode,i=fN(t),t=t.previousSibling;if(t)n=t,r=J_(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?X_(e,n,r):s&&X_(e,s,i)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,o=J_(n);for(;;)if(r<o){if(1!=n.nodeType)break;if(!K_(n.childNodes[r],1))break;s=n,i=++r}else{if(Q_(n))break;{let t=n.nextSibling;for(;t&&K_(t,1);)s=t.parentNode,i=fN(t)+1,t=t.nextSibling;if(t)n=t,r=0,o=J_(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}}s&&X_(e,s,i)}(e)}function Q_(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function X_(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!wN(e);)t=fN(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!wN(e);)t=fN(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(kN(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&R_(e)},50)}function ej(e,t){let n=e.state.doc.resolve(t);if(!DN&&!HN&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),s=(n.top+n.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),s=(n.top+n.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function tj(e,t,n){let r=e.state.selection;if(r instanceof JM&&!r.empty||n.indexOf("s")>-1)return!1;if(FN&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=W_(e.state,t);if(n&&n instanceof YM)return q_(e,n)}if(!s.parent.inlineContent){let n=t<0?s:i,o=r instanceof XM?ZM.near(n,t):ZM.findFrom(n,t);return!!o&&q_(e,o)}return!1}function nj(e,t){if(!(e.state.selection instanceof JM))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function rj(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function sj(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||FN&&72==n&&"c"==r)return nj(e,-1)||Y_(e,-1);if(46==n&&!t.shiftKey||FN&&68==n&&"c"==r)return nj(e,1)||Y_(e,1);if(13==n||27==n)return!0;if(37==n||FN&&66==n&&"c"==r){let t=37==n?"ltr"==ej(e,e.state.selection.from)?-1:1:-1;return G_(e,t,r)||Y_(e,t)}if(39==n||FN&&70==n&&"c"==r){let t=39==n?"ltr"==ej(e,e.state.selection.from)?1:-1:1;return G_(e,t,r)||Y_(e,t)}return 38==n||FN&&80==n&&"c"==r?tj(e,-1,r)||Y_(e,-1):40==n||FN&&78==n&&"c"==r?function(e){if(!PN||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;rj(e,n,"true"),setTimeout(()=>rj(e,n,"false"),20)}return!1}(e)||tj(e,1,r)||Y_(e,1):r==(FN?"m":"c")&&(66==n||73==n||89==n||90==n)}function ij(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:s,openEnd:i}=t;for(;s>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){s--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let o=e.someProp("clipboardSerializer")||aM.fromSchema(e.state.schema),a=mj(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=pj[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function oj(e,t,n,r,s){let i,o,a=s.parent.type.spec.code;if(!n&&!t)return null;let l=!!t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,a||r,e)}),a)return o=new hS(oS.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",t=>{o=t(o,e,!0)}),o;let n=e.someProp("clipboardTextParser",n=>n(t,s,r,e));if(n)o=n;else{let n=s.marks(),{schema:r}=e.state,o=aM.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(o.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=mj().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(e);(n=s&&pj[s[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;gj||(gj=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return gj.createHTML(e)}(e),n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),$N&&function(e){let t=e.querySelectorAll(DN?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!o){let t=e.someProp("clipboardParser")||e.someProp("domParser")||YS.fromSchema(e.state.schema);o=t.parseSlice(i,{preserveWhitespace:!(!l&&!u),context:s,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||aj.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)o=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(a){return e}let{content:s,openStart:i,openEnd:o}=e;for(let l=n.length-2;l>=0;l-=2){let e=r.nodes[n[l]];if(!e||e.hasRequiredAttrs())break;s=oS.from(e.create(n[l+1],s)),i++,o++}return new hS(s,i,o)}(hj(o,+u[1],+u[2]),u[4]);else if(o=hS.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,s=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach(e=>{if(!i)return;let t,n=s.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&cj(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=uj(i[i.length-1],r.length));let t=lj(e,n);i.push(t),s=s.matchType(t.type),r=n}}),i)return oS.from(i)}return e}(o.content,s),!0),o.openStart||o.openEnd){let e=0,t=0;for(let n=o.content.firstChild;e<o.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=o.content.lastChild;t<o.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);o=hj(o,e,t)}return e.someProp("transformPasted",t=>{o=t(o,e,l)}),o}const aj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function lj(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,oS.from(e));return e}function cj(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=cj(e,t,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(oS.from(lj(n,e,s+1))))}}function uj(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,uj(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(oS.empty,!0);return e.copy(n.append(r))}function dj(e,t,n,r,s,i){let o=t<0?e.firstChild:e.lastChild,a=o.content;return e.childCount>1&&(i=0),s<r-1&&(a=dj(a,t,n,r,s+1,i)),s>=n&&(a=t<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(oS.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function hj(e,t,n){return t<e.openStart&&(e=new hS(dj(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new hS(dj(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const pj={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let fj=null;function mj(){return fj||(fj=document.implementation.createHTMLDocument("title"))}let gj=null;const yj={},xj={},vj={touchstart:!0,touchmove:!0};class bj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Cj(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function wj(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>kj(e,t))})}function kj(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function Sj(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Mj(e){return{left:e.clientX,top:e.clientY}}function Nj(e,t,n,r,s){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(e.someProp(t,t=>o>i.depth?t(e,n,i.nodeAfter,i.before(o),s,!0):t(e,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function _j(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function jj(e,t,n,r,s){return Nj(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(s?function(e,t){if(-1==t)return!1;let n,r,s=e.state.selection;s instanceof YM&&(n=s.node);let i=e.state.doc.resolve(t);for(let o=i.depth+1;o>0;o--){let e=o>i.depth?i.nodeAfter:i.node(o);if(YM.isSelectable(e)){r=n&&s.$from.depth>0&&o>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?i.before(s.$from.depth):i.before(o);break}}return null!=r&&(_j(e,YM.create(e.state.doc,r)),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&YM.isSelectable(r))&&(_j(e,new YM(n)),!0)}(e,n))}function Ej(e,t,n,r){return Nj(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function Tj(e,t,n,r){return Nj(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(_j(e,JM.create(r,0,r.content.size)),!0);let s=r.resolve(t);for(let i=s.depth+1;i>0;i--){let t=i>s.depth?s.nodeAfter:s.node(i),n=s.before(i);if(t.inlineContent)_j(e,JM.create(r,n+1,n+1+t.content.size));else{if(!YM.isSelectable(t))continue;_j(e,YM.create(r,n))}return!0}}(e,n,r)}function Aj(e){return Fj(e)}xj.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Ij(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!VN||!DN||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!zN||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||sj(e,n)?n.preventDefault():Cj(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,SN(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},xj.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},xj.keypress=(e,t)=>{let n=t;if(Ij(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||FN&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof JM&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t,s))||e.dispatch(s()),n.preventDefault()}};const Lj=FN?"metaKey":"ctrlKey";yj.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Aj(e),s=Date.now(),i="singleClick";s-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[Lj]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=e.posAtCoords(Mj(n));o&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Oj(e,o,n,!!r)):("doubleClick"==i?Ej:Tj)(e,o.pos,o.inside,n)?n.preventDefault():Cj(e,"pointer"))};class Oj{constructor(e,t,n,r){let s,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Lj],this.allowDefault=n.shiftKey,t.inside>-1)s=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);s=n.parent,i=n.depth?n.before():0}const o=r?null:n.target,a=o?e.docView.nearestDesc(o,!0):null;this.target=a&&1==a.nodeDOM.nodeType?a.nodeDOM:null;let{selection:l}=e.state;(0==n.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||l instanceof YM&&l.from<=i&&l.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!ON||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Cj(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>R_(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Mj(e))),this.updateAllowDefault(e),this.allowDefault||!t?Cj(this.view,"pointer"):jj(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||PN&&this.mightDrag&&!this.mightDrag.node.isAtom||DN&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(_j(this.view,ZM.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Cj(this.view,"pointer")}move(e){this.updateAllowDefault(e),Cj(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function Ij(e,t){return!!e.composing||!!(PN&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}yj.touchstart=e=>{e.input.lastTouch=Date.now(),Aj(e),Cj(e,"pointer")},yj.touchmove=e=>{e.input.lastTouch=Date.now(),Cj(e,"pointer")},yj.contextmenu=e=>Aj(e);const Dj=VN?5e3:-1;function Rj(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Fj(e),t))}function Pj(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function zj(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=CN(e=e.childNodes[t-1])}else{if(!e.parentNode||wN(e))return null;t=fN(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||wN(e))return null;t=fN(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function Fj(e,t=!1){if(!(VN&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Pj(e),t||e.docView&&e.docView.dirty){let n=I_(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}xj.compositionstart=xj.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof JM&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),Fj(e,!0),e.markCursor=null;else if(Fj(e,!t.selection.empty),ON&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Rj(e,Dj)},xj.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Rj(e,20))};const Hj=AN&&LN<15||zN&&BN<604;function Vj(e,t,n,r,s){let i=oj(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,s,i||hS.empty)))return!0;if(!i)return!1;let o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function $j(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}yj.copy=xj.cut=(e,t)=>{let n=t,r=e.state.selection,s="cut"==n.type;if(r.empty)return;let i=Hj?null:n.clipboardData,o=r.content(),{dom:a,text:l}=ij(e,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,a),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},xj.paste=(e,t)=>{let n=t;if(e.composing&&!VN)return;let r=Hj?null:n.clipboardData,s=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Vj(e,$j(r),r.getData("text/html"),s,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Vj(e,r.value,null,s,t):Vj(e,r.textContent,r.innerHTML,s,t)},50)}(e,n)};class Bj{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Uj=FN?"altKey":"ctrlKey";function Zj(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[Uj]}yj.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s,i=e.state.selection,o=i.empty?null:e.posAtCoords(Mj(n));if(o&&o.pos>=i.from&&o.pos<=(i instanceof YM?i.to-1:i.to));else if(r&&r.mightDrag)s=YM.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(s=YM.create(e.state.doc,t.posBefore))}let a=(s||e.state.selection).content(),{dom:l,text:c,slice:u}=ij(e,a);(!n.dataTransfer.files.length||!DN||RN>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Hj?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Hj||n.dataTransfer.setData("text/plain",c),e.dragging=new Bj(u,Zj(e,n),s)},yj.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},xj.dragover=xj.dragenter=(e,t)=>t.preventDefault(),xj.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let s=e.posAtCoords(Mj(n));if(!s)return;let i=e.state.doc.resolve(s.pos),o=r&&r.slice;o?e.someProp("transformPasted",t=>{o=t(o,e,!1)}):o=oj(e,$j(n.dataTransfer),Hj?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||!Zj(e,n));if(e.someProp("handleDrop",t=>t(e,n,o||hS.empty,a)))return void n.preventDefault();if(!o)return;n.preventDefault();let l=o?TM(e.state.doc,i.pos,o):i.pos;null==l&&(l=i.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&YM.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new YM(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,s)=>t=s),c.setSelection(B_(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},yj.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&R_(e)},20))},yj.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},yj.beforeinput=(e,t)=>{if(DN&&VN&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,SN(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let os in xj)yj[os]=xj[os];function Wj(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class qj{constructor(e,t){this.toDOM=e,this.spec=t||Qj,this.side=this.spec.side||0}map(e,t,n,r){let{pos:s,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new Kj(s-n,s-n,this)}valid(){return!0}eq(e){return this==e||e instanceof qj&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Wj(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Gj{constructor(e,t){this.attrs=e,this.spec=t||Qj}map(e,t,n,r){let s=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return s>=i?null:new Kj(s,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Gj&&Wj(this.attrs,e.attrs)&&Wj(this.spec,e.spec)}static is(e){return e.type instanceof Gj}destroy(){}}class Jj{constructor(e,t){this.attrs=e,this.spec=t||Qj}map(e,t,n,r){let s=e.mapResult(t.from+r,1);if(s.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=s.pos?null:new Kj(s.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:s}=e.content.findIndex(t.from);return s==t.from&&!(n=e.child(r)).isText&&s+n.nodeSize==t.to}eq(e){return this==e||e instanceof Jj&&Wj(this.attrs,e.attrs)&&Wj(this.spec,e.spec)}destroy(){}}class Kj{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Kj(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Kj(e,e,new qj(t,n))}static inline(e,t,n,r){return new Kj(e,t,new Gj(n,r))}static node(e,t,n,r){return new Kj(e,t,new Jj(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Gj}get widget(){return this.type instanceof qj}}const Yj=[],Qj={};class Xj{constructor(e,t){this.local=e.length?e:Yj,this.children=t.length?t:Yj}static create(e,t){return t.length?iE(t,e,0,Qj):eE}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,s){for(let i=0;i<this.local.length;i++){let o=this.local[i];o.from<=t&&o.to>=e&&(!s||s(o.spec))&&n.push(o.copy(o.from+r,o.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let o=this.children[i]+1;this.children[i+2].findInner(e-o,t-o,n,r+o,s)}}map(e,t,n){return this==eE||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Qj)}mapInner(e,t,n,r,s){let i;for(let o=0;o<this.local.length;o++){let a=this.local[o].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):s.onRemove&&s.onRemove(this.local[o].spec)}return this.children.length?function(e,t,n,r,s,i,o){let a=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach((t,n,r,s)=>{let i=s-r-(n-t);for(let o=0;o<a.length;o+=3){let r=a[o+1];if(r<0||t>r+u-e)continue;let s=a[o]+u-e;n>=s?a[o+1]=t<=s?-2:-1:t>=u&&i&&(a[o]+=i,a[o+1]+=i)}e+=i}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),u=t-s;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+i,-1)-s,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[c+2].mapInner(n,f,t+1,e[c]+i+1,o);r!=eE?(a[c]=u,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,s,i,o){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,s,t);a?n.push(a):o.onRemove&&o.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t,n,s,i,o),c=iE(l,r,0,o);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Xj(t.sort(oE),a)}(this.children,i||[],e,t,n,r,s):i?new Xj(i.sort(oE),Yj):eE}add(e,t){return t.length?this==eE?Xj.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,s=0;e.forEach((e,i)=>{let o,a=i+n;if(o=rE(t,e,a)){for(r||(r=this.children.slice());s<r.length&&r[s]<i;)s+=3;r[s]==i?r[s+2]=r[s+2].addInner(e,o,a+1):r.splice(s,0,i,i+e.nodeSize,iE(o,e,a+1,Qj)),s+=3}});let i=nE(s?sE(t):t,-n);for(let o=0;o<i.length;o++)i[o].type.valid(e,i[o])||i.splice(o--,1);return new Xj(i.length?this.local.concat(i).sort(oE):this.local,r||this.children)}remove(e){return 0==e.length||this==eE?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let s=0;s<n.length;s+=3){let r,i=n[s]+t,o=n[s+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<o&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[s+2].removeInner(r,i+1);a!=eE?n[s+2]=a:(n.splice(s,3),s-=3)}if(r.length)for(let s,i=0;i<e.length;i++)if(s=e[i])for(let e=0;e<r.length;e++)r[e].eq(s,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Xj(r,n):eE}forChild(e,t){if(this==eE)return this;if(t.isLeaf)return Xj.empty;let n,r;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}let s=e+1,i=s+t.content.size;for(let o=0;o<this.local.length;o++){let e=this.local[o];if(e.from<i&&e.to>s&&e.type instanceof Gj){let t=Math.max(s,e.from)-s,n=Math.min(i,e.to)-s;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Xj(r.sort(oE),Yj);return n?new tE([e,n]):e}return n||eE}eq(e){if(this==e)return!0;if(!(e instanceof Xj)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return aE(this.localsInner(e))}localsInner(e){if(this==eE)return Yj;if(e.inlineContent||!this.local.some(Gj.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Gj||t.push(this.local[n]);return t}forEachSet(e){e(this)}}Xj.empty=new Xj([],[]),Xj.removeOverlap=aE;const eE=Xj.empty;class tE{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,Qj));return tE.from(n)}forChild(e,t){if(t.isLeaf)return Xj.empty;let n=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,t);s!=eE&&(s instanceof tE?n=n.concat(s.members):n.push(s))}return tE.from(n)}eq(e){if(!(e instanceof tE)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<s.length;e++)t.push(s[e])}else t=s}return t?aE(n?t:t.sort(oE)):Yj}static from(e){switch(e.length){case 0:return eE;case 1:return e[0];default:return new tE(e.every(e=>e instanceof Xj)?e:e.reduce((e,t)=>e.concat(t instanceof Xj?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function nE(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new Kj(s.from+t,s.to+t,s.type))}return n}function rE(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let i,o=0;o<e.length;o++)(i=e[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),e[o]=null);return s}function sE(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function iE(e,t,n,r){let s=[],i=!1;t.forEach((t,o)=>{let a=rE(e,t,o+n);if(a){i=!0;let e=iE(a,t,n+o+1,r);e!=eE&&s.push(o,o+t.nodeSize,e)}});let o=nE(i?sE(e):e,-n).sort(oE);for(let a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Xj(o,s):eE}function oE(e,t){return e.from-t.from||e.to-t.to}function aE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let i=t[s];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),lE(t,s,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[s]=i.copy(i.from,r.to),lE(t,s+1,i.copy(r.to,i.to)))}}return t}function lE(e,t,n){for(;t<e.length&&oE(n,e[t])>0;)t++;e.splice(t,0,n)}function cE(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=eE&&t.push(r)}),e.cursorWrapper&&t.push(Xj.create(e.state.doc,[e.cursorWrapper.deco])),tE.from(t)}const uE={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dE=AN&&LN<=11;class hE{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pE{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hE,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);AN&&LN<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),dE&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,uE)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(U_(this.view)){if(this.suppressingSelectionUpdates)return R_(this.view);if(AN&&LN<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&xN(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let s=e.focusNode;s;s=mN(s))n.add(s);for(let s=e.anchorNode;s;s=mN(s))if(n.has(s)){t=s;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&U_(e)&&!this.ignoreSelectionChange(n),s=-1,i=-1,o=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(s=s<0?e.from:Math.min(e.from,s),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(o=!0))}if(ON&&a.length){let t=a.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&yE(e,n)==t||r.remove()}}}let l=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&kN(n)&&(l=I_(e))&&l.eq(ZM.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,R_(e),this.currentSelection.set(n),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,i),function(e){if(fE.has(e))return;if(fE.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=ON,mE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mE=!0}}(e)),this.handleDOMChange(s,i,o,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||R_(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,s=e.nextSibling;if(AN&&LN<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(s=i)}let i=r&&r.parentNode==e.target?fN(r)+1:0,o=n.localPosFromDOM(e.target,i,-1),a=s&&s.parentNode==e.target?fN(s):e.target.childNodes.length;return{from:o,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let fE=new WeakMap,mE=!1;function gE(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,i=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return xN(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function yE(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function xE(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(PN&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||PN&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const vE=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function bE(e,t,n,r,s){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=I_(e,t);if(n&&!e.state.selection.eq(n)){if(DN&&VN&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,SN(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),i&&r.setMeta("composition",i),e.dispatch(r)}return}let o=e.state.doc.resolve(t),a=o.sharedDepth(n);t=o.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:s,fromOffset:i,toOffset:o,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],kN(c)||r.push({node:c.focusNode,offset:c.focusOffset})),DN&&8===e.input.lastKeyCode)for(let g=o;g>i;g--){let e=s.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){o=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||YS.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(s,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:o,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:xE,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,s){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:o,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==s){r-=o+Math.max(0,i-Math.min(o,a))-i}if(o<i&&e.size<t.size){let e=r<=i&&r>=o?i-r:0;i-=e,i&&i<t.size&&kE(t.textBetween(i-1,i+1))&&(i+=e?1:-1),a=i+(a-o),o=i}else if(a<i){let t=r<=i&&r>=a?i-r:0;i-=t,i&&i<e.size&&kE(e.textBetween(i-1,i+1))&&(i+=t?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}(p.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(zN&&e.input.lastIOSEnter>Date.now()-225||VN)&&s.some(e=>1==e.nodeType&&!vE.test(e.nodeName))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",t=>t(e,SN(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof JM&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=CE(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof JM&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),AN&&LN<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&"  "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m=d.doc.resolveNoCache(f.start-d.from),g=d.doc.resolveNoCache(f.endB-d.from),y=h.resolve(f.start),x=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=f.endA;if((zN&&e.input.lastIOSEnter>Date.now()-225&&(!x||s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!x&&m.pos<d.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(d.doc.textBetween(m.pos,g.pos,"","")))&&e.someProp("handleKeyDown",t=>t(e,SN(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,s){if(n-t<=s.pos-r.pos||wE(r,!0,!1)<s.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let e=i.nodeAfter;return null!=e&&n==t+e.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=e.resolve(wE(i,!0,!0));return!(!o.parent.isTextblock||o.pos>n||wE(o,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(o.parent.content)}(h,f.start,f.endA,m,g)&&e.someProp("handleKeyDown",t=>t(e,SN(8,"Backspace"))))return void(VN&&DN&&e.domObserver.suppressSelectionUpdates());DN&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),VN&&!x&&m.start()!=g.start()&&0==g.parentOffset&&m.depth==g.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,g=d.doc.resolveNoCache(f.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,SN(13,"Enter"))})},20));let v,b=f.start,C=f.endA,w=t=>{let n=t||e.state.tr.replace(b,C,d.doc.slice(f.start-d.from,f.endB-d.from));if(d.sel){let t=CE(e,n.doc,d.sel);t&&!(DN&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==b||t.head==n.mapping.map(C)-1)||AN&&t.empty&&t.head==b)&&n.setSelection(t)}return i&&n.setMeta("composition",i),n.scrollIntoView()};if(x)if(m.pos==g.pos){AN&&LN<=11&&0==m.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>R_(e),20));let t=w(e.state.tr.delete(b,C)),n=h.resolve(f.start).marksAcross(h.resolve(f.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(f.endA==f.endB&&(v=function(e,t){let n,r,s,i=e.firstChild.marks,o=t.firstChild.marks,a=i,l=o;for(let u=0;u<o.length;u++)a=o[u].removeFromSet(a);for(let u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",s=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",s=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(s(t.child(u)));if(oS.from(c).eq(e))return{mark:r,type:n}}(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start())))){let t=w(e.state.tr);"add"==v.type?t.addMark(b,C,v.mark):t.removeMark(b,C,v.mark),e.dispatch(t)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let t=m.parent.textBetween(m.parentOffset,g.parentOffset),n=()=>w(e.state.tr.insertText(t,b,C));e.someProp("handleTextInput",r=>r(e,b,C,t,n))||e.dispatch(n())}else e.dispatch(w());else e.dispatch(w())}function CE(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:B_(e,t.resolve(n.anchor),t.resolve(n.head))}function wE(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,s++}return s}function kE(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class SE{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(EE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_E(this),NE(this),this.nodeViews=jE(this),this.docView=x_(this.state.doc,ME(this),cE(this),this.dom,this),this.domObserver=new pE(this,(e,t,n,r)=>bE(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in yj){let n=yj[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!Sj(e,t)||kj(e,t)||!e.editable&&t.type in xj||n(e,t)},vj[t]?{passive:!0}:void 0)}PN&&e.dom.addEventListener("input",()=>null),wj(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&wj(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(EE),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(Pj(this),i=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=jE(this);(function(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&wj(this),this.editable=_E(this),NE(this);let a=cE(this),l=ME(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=s||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(i=!0);let d="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),s=Math.max(0,r.top);for(let i=(r.left+r.right)/2,o=s+1;o<Math.min(innerHeight,r.bottom);o+=5){let r=e.root.elementFromPoint(i,o);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=s-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:GN(e.dom)}}(this);if(i){this.domObserver.stop();let t=u&&(AN||DN)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(u){let n=DN?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zj(this)),!s&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=x_(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return xN(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?R_(this,t):(V_(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;JN(n,0==r?0:r-t)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof YM){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&qN(this,t.getBoundingClientRect(),e)}else qN(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new Bj(e.slice,e.move,r<0?void 0:YM.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[e];if(null!=r&&(n=t?t(r):r))return n}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let r=s[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(AN){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(KN)return e.focus(KN);let t=GN(e);e.focus(null==KN?{get preventScroll(){return KN={preventScroll:!0},!0}}:void 0),KN||(KN=!1,JN(t,0))}(this.dom),R_(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return e_(this,e)}coordsAtPos(e,t=1){return s_(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return h_(this,t||this.state,e)}pasteHTML(e,t){return Vj(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Vj(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return ij(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],cE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,gN=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){kj(e,t)||!yj[t.type]||!e.editable&&t.type in xj||yj[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?PN&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return gE(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?gE(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ME(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[Kj.node(0,e.state.doc.content.size,t)]}function NE(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Kj.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function _E(e){return!e.someProp("editable",t=>!1===t(e.state))}function jE(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function EE(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}SE.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var TE={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},AE={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LE="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),OE="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),IE="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),DE=OE||LE&&+LE[1]<57,RE=0;RE<10;RE++)TE[48+RE]=TE[96+RE]=String(RE);for(RE=1;RE<=24;RE++)TE[RE+111]="F"+RE;for(RE=65;RE<=90;RE++)TE[RE]=String.fromCharCode(RE+32),AE[RE]=String.fromCharCode(RE);for(var PE in TE)AE.hasOwnProperty(PE)||(AE[PE]=TE[PE]);const zE="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),FE="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function HE(e){let t,n,r,s,i=e.split(/-(?!$)/),o=i[i.length-1];"Space"==o&&(o=" ");for(let a=0;a<i.length-1;a++){let e=i[a];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);zE?s=!0:n=!0}}return t&&(o="Alt-"+o),n&&(o="Ctrl-"+o),s&&(o="Meta-"+o),r&&(o="Shift-"+o),o}function VE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function $E(e){let t=function(e){let t=Object.create(null);for(let n in e)t[HE(n)]=e[n];return t}(e);return function(e,n){let r,s=function(e){var t=!(DE&&(e.ctrlKey||e.altKey||e.metaKey)||IE&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?AE:TE)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),i=t[VE(s,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==s.length&&" "!=s){if(n.shiftKey){let r=t[VE(s,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(FE&&n.ctrlKey&&n.altKey)&&(r=TE[n.keyCode])&&r!=s){let s=t[VE(r,n)];if(s&&s(e.state,e.dispatch,e))return!0}}return!1}}const BE=Math.pow(2,16);function UE(e,t){return e+t*BE}function ZE(e){return 65535&e}let WE=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}},qE=class e{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}recover(e){let t=0,n=ZE(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/BE}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+s],c=this.ranges[o+i],u=a+l;if(e<=u){let s=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return s;let i=e==(t<0?a:u)?null:UE(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new WE(s,d,i)}r+=c-l}return n?e+r:new WE(e+r,0,null)}touches(e,t){let n=0,r=ZE(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let t=this.ranges[o]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[o+s];if(e<=t+a&&o==3*r)return!0;n+=this.ranges[o+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let i=this.ranges[r],o=i-(this.inverted?s:0),a=i+(this.inverted?0:s),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),s+=c-l}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};qE.empty=new qE([]);class GE{constructor(e,t,n=0,r=(e?e.length:0)){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new GE(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new GE;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let s=this.from;s<this.to;s++){let n=this._maps[s].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(s);if(null!=t&&t>s&&t<this.to){s=t,e=this._maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new WE(e,r,null)}}const JE=Object.create(null);let KE=class{getMap(){return qE.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=JE[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in JE)throw new RangeError("Duplicate use of step JSON ID "+e);return JE[e]=t,t.prototype.jsonID=e,t}},YE=class e{constructor(e,t){this.doc=e,this.failed=t}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,n,r,s){try{return e.ok(t.replace(n,r,s))}catch(i){if(i instanceof dS)return e.fail(i.message);throw i}}};function QE(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(QE(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return oS.fromArray(r)}let XE=class e extends KE{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new hS(QE(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return YE.fromReplace(e,this.from,this.to,s)}invert(){return new eT(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};KE.jsonID("addMark",XE);let eT=class e extends KE{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new hS(QE(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return YE.fromReplace(e,this.from,this.to,n)}invert(){return new XE(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};KE.jsonID("removeMark",eT);let tT=class e extends KE{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return YE.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return YE.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let t=this.mark.addToSet(n.marks);if(t.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(t))return new e(this.pos,n.marks[r]);return new e(this.pos,this.mark)}}return new nT(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};KE.jsonID("addNodeMark",tT);let nT=class e extends KE{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return YE.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return YE.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new tT(this.pos,this.mark):this}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};KE.jsonID("removeNodeMark",nT);let rT=class e extends KE{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&iT(e,this.from,this.to)?YE.fail("Structure replace would overwrite content"):YE.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new qE([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}}{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,hS.fromJSON(t,n.slice),!!n.structure)}};KE.jsonID("replace",rT);let sT=class e extends KE{constructor(e,t,n,r,s,i,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=o}apply(e){if(this.structure&&(iT(e,this.from,this.gapFrom)||iT(e,this.gapTo,this.to)))return YE.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return YE.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?YE.fromReplace(e,this.from,this.to,n):YE.fail("Content does not fit in gap")}getMap(){return new qE([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new e(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,hS.fromJSON(t,n.slice),n.insert,!!n.structure)}};function iT(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,s--}}return!1}function oT(e,t,n,r=n.contentMatch,s=!0){let i=e.doc.nodeAt(t),o=[],a=t+1;for(let l=0;l<i.childCount;l++){let t=i.child(l),c=a+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new eT(a,c,t.marks[r]));if(s&&t.isText&&"pre"!=n.whitespace){let e,r,s=/\r?\n|\r/g;for(;e=s.exec(t.text);)r||(r=new hS(oS.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),o.push(new rT(a+e.index,a+e.index+e[0].length,r))}}else o.push(new rT(a,c,hS.empty));a=c}if(!r.validEnd){let t=r.fillBefore(oS.empty,!0);e.replace(a,a,new hS(t,0,0))}for(let l=o.length-1;l>=0;l--)e.step(o[l])}function aT(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function lT(e){return{type:e,attrs:null}}function cT(e,t,n,r){t.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let s=e.mapping.slice(r).map(n+1+i+o.index);e.replaceWith(s,s+1,t.type.schema.linebreakReplacement.create())}}})}function uT(e,t,n,r){t.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+i);e.replaceWith(s,s+1,t.type.schema.text("\n"))}})}function dT(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let e=s.node(c),t=s.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let o=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!o.type.validContent(n))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function hT(e,t){let n=e.resolve(t),r=n.index();return pT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function pT(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let i=t.child(s),o=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function fT(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let e,i,o=r.index(s);if(s==r.depth?(e=r.nodeBefore,i=r.nodeAfter):n>0?(e=r.node(s+1),o++,i=r.node(s).maybeChild(o)):(e=r.node(s).maybeChild(o-1),i=r.node(s+1)),e&&!e.isTextblock&&pT(e,i)&&r.node(s).canReplace(o,o+1))return t;if(0==s)break;t=n<0?r.before(s):r.after(s)}}function mT(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}KE.jsonID("replaceAround",sT);let gT=class{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=oS.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=oS.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,i=n.depth,o=r.depth;for(;i&&o&&1==s.childCount;)s=s.firstChild.content,i--,o--;let a=new hS(s,i,o);return e>-1?new sT(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new rT(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=vT(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let s=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:o,match:a}=this.frontier[i],l=null;if(1==t&&(s?a.matchType(s.type)||(l=a.fillBefore(oS.from(s),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:l};if(2==t&&s&&(e=a.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=vT(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new hS(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=vT(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new hS(yT(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new hS(yT(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let f=0;f<s.length;f++)this.openFrontierNode(s[f]);let i=this.unplaced,o=n?n.content:i.content,a=i.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=o.size+e-(i.content.size-i.openEnd);for(;l<o.childCount;){let e=o.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(bT(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=xT(this.placed,t,oS.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=o;f<h;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?hS.empty:new hS(yT(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new hS(yT(i.content,e,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!CT(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=CT(e,t,r,n,s);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],s=CT(e,n,r,t,!0);if(!s||s.childCount)continue e}return{depth:t,fit:i,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xT(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=xT(this.placed,this.depth,oS.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(oS.empty,!0);e.childCount&&(this.placed=xT(this.placed,this.frontier.length,e))}};function yT(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(yT(e.firstChild.content,t-1,n)))}function xT(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(xT(e.lastChild.content,t-1,n)))}function vT(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function bT(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,bT(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(oS.empty,!0)))),e.copy(r)}function CT(e,t,n,r,s){let i=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,o)?a:null}function wT(e){return e.spec.defining||e.spec.definingForContent}function kT(e,t,n,r,s){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(kT(s.content,t+1,n,r,s)))}if(t>r){let t=s.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(oS.empty,!0))}return e}function ST(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let s=e.start(r);if(s<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(s==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==s-1)&&n.push(r)}return n}let MT=class e extends KE{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return YE.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return YE.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(r),0,t.isLeaf?0:1))}getMap(){return qE.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}};KE.jsonID("attr",MT);let NT=class e extends KE{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return YE.ok(n)}getMap(){return qE.empty}invert(t){return new e(this.attr,t.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}};KE.jsonID("docAttr",NT);let _T=class extends Error{};_T=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(_T.prototype=Object.create(Error.prototype)).constructor=_T,_T.prototype.name="TransformError";class jT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new GE}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new _T(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=hS.empty){let r=function(e,t,n=t,r=hS.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return mT(s,i,r)?new rT(t,n,r):new gT(s,i,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new hS(oS.from(n),0,0))}delete(e,t){return this.replace(e,t,hS.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(mT(s,i,r))return e.step(new rT(t,n,r));let o=ST(s,e.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let e=s.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;o.indexOf(h)>-1?a=h:s.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==r.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h],t=wT(e.type);if(t&&!e.sameMarkup(s.node(Math.abs(a)-1)))u=h;else if(t||!e.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let t=(h+u+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<o.length;c++){let u=o[(c+l)%o.length],d=!0;u<0&&(d=!1,u=-u);let h=s.node(u-1),p=s.index(u-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(s.before(u),d?i.after(u):n,new hS(kT(r.content,0,r.openStart,t),t,r.openEnd))}}let d=e.steps.length;for(let h=o.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let e=o[h];e<0||(t=s.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let s=r.depth-1;s>=0;s--){let e=r.index(s);if(r.node(s).canReplaceWith(e,e,n))return r.before(s+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let e=r.indexAfter(s);if(r.node(s).canReplaceWith(e,e,n))return r.after(s+1);if(e<r.node(s).childCount)return null}return null}(e.doc,t,r.type);null!=s&&(t=n=s)}e.replaceRange(t,n,new hS(oS.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),i=ST(r,s);for(let o=0;o<i.length;o++){let t=i[o],n=o==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),s.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),s.indexAfter(t-1))))return e.delete(r.before(t),s.after(t))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:s,depth:i}=t,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=oS.empty,d=0;for(let f=i,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=oS.from(r.node(f).copy(u)),d++):l--;let h=oS.empty,p=0;for(let f=i,m=!1;f>n;f--)m||s.after(f+1)<s.end(f)?(m=!0,h=oS.from(s.node(f).copy(h)),p++):c++;e.step(new sT(l,c,o,a,new hS(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,i=e.doc.resolve(t-n),o=i.node().type;if(s&&o.inlineContent){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(s);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);uT(e,r.node(),r.before(),a)}o.inlineContent&&oT(e,t+n-1,o,i.node().contentMatchAt(i.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new rT(c,l.map(t+n,-1),hS.empty,!0)),!0===r){let t=e.doc.resolve(c);cT(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=oS.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let e=n[o].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oS.from(n[o].type.create(n[o].attrs,r))}let s=t.start,i=t.end;e.step(new sT(s,i,s,i,new hS(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let o="function"==typeof s?s(t):s;if(t.isTextblock&&!t.hasMarkup(r,o)&&function(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}(e.doc,e.mapping.slice(i).map(n),r)){let s=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?s=!1:!e&&t&&(s=!0)}!1===s&&uT(e,t,n,i),oT(e,e.mapping.slice(i).map(n,1),r,void 0,null===s);let a=e.mapping.slice(i),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new sT(l,c,l+1,c-1,new hS(oS.from(r.create(o,null,t.marks)),0,0),1,!0)),!0===s&&cT(e,t,n,i),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new sT(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new hS(oS.from(o),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new MT(e,t,n)),this}setDocAttribute(e,t){return this.step(new NT(e,t)),this}addNodeMark(e,t){return this.step(new tT(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof uS)t.isInSet(n.marks)&&this.step(new nT(e,t));else{let r,s=n.marks,i=[];for(;r=t.isInSet(s);)i.push(new nT(e,r)),s=r.removeFromSet(s);for(let e=i.length-1;e>=0;e--)this.step(i[e])}return this}split(e,t=1,n){return function(e,t,n=1,r){let s=e.doc.resolve(t),i=oS.empty,o=oS.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=oS.from(s.node(a).copy(i));let e=r&&r[c];o=oS.from(e?e.type.create(e.attrs,o):s.node(a).copy(o))}e.step(new rT(t,t,new hS(i.append(o),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let s,i,o=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(s&&s.to==c&&s.mark.eq(u[e])?s.to=d:o.push(s=new eT(c,d,u[e])));i&&i.to==c?i.to=d:a.push(i=new XE(c,d,r))}}),o.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(e,o)=>{if(!e.isInline)return;i++;let a=null;if(r instanceof GS){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(o+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<s.length;e++){let t=s[e];t.step==i-1&&l.eq(s[e].style)&&(n=t)}n?(n.to=r,n.step=i):s.push({style:l,from:Math.max(o,t),to:r,step:i})}}}),s.forEach(t=>e.step(new eT(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return oT(this,e,t,n),this}}const ET=Math.pow(2,16);function TT(e,t){return e+t*ET}function AT(e){return 65535&e}let LT=class{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}},OT=class e{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}recover(e){let t=0,n=AT(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/ET}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+s],c=this.ranges[o+i],u=a+l;if(e<=u){let s=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return s;let i=e==(t<0?a:u)?null:TT(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new LT(s,d,i)}r+=c-l}return n?e+r:new LT(e+r,0,null)}touches(e,t){let n=0,r=AT(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let t=this.ranges[o]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[o+s];if(e<=t+a&&o==3*r)return!0;n+=this.ranges[o+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let i=this.ranges[r],o=i-(this.inverted?s:0),a=i+(this.inverted?0:s),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),s+=c-l}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}};OT.empty=new OT([]);const IT=Object.create(null);let DT=class{getMap(){return OT.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=IT[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in IT)throw new RangeError("Duplicate use of step JSON ID "+e);return IT[e]=t,t.prototype.jsonID=e,t}},RT=class e{constructor(e,t){this.doc=e,this.failed=t}static ok(t){return new e(t,null)}static fail(t){return new e(null,t)}static fromReplace(t,n,r,s){try{return e.ok(t.replace(n,r,s))}catch(i){if(i instanceof dS)return e.fail(i.message);throw i}}};function PT(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(PT(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return oS.fromArray(r)}let zT=class e extends DT{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new hS(PT(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return RT.fromReplace(e,this.from,this.to,s)}invert(){return new FT(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};DT.jsonID("addMark",zT);let FT=class e extends DT{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new hS(PT(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return RT.fromReplace(e,this.from,this.to,n)}invert(){return new zT(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}merge(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}};DT.jsonID("removeMark",FT);let HT=class e extends DT{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return RT.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return RT.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let t=this.mark.addToSet(n.marks);if(t.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(t))return new e(this.pos,n.marks[r]);return new e(this.pos,this.mark)}}return new VT(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};DT.jsonID("addNodeMark",HT);let VT=class e extends DT{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return RT.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return RT.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new HT(this.pos,this.mark):this}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}};DT.jsonID("removeNodeMark",VT);let $T=class e extends DT{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&UT(e,this.from,this.to)?RT.fail("Structure replace would overwrite content"):RT.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new OT([this.from,this.to-this.from,this.slice.size])}invert(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}}{let n=this.slice.size+t.slice.size==0?hS.empty:new hS(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,hS.fromJSON(t,n.slice),!!n.structure)}};DT.jsonID("replace",$T);let BT=class e extends DT{constructor(e,t,n,r,s,i,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=o}apply(e){if(this.structure&&(UT(e,this.from,this.gapFrom)||UT(e,this.gapTo,this.to)))return RT.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return RT.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?RT.fromReplace(e,this.from,this.to,n):RT.fail("Content does not fit in gap")}getMap(){return new OT([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new e(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,hS.fromJSON(t,n.slice),n.insert,!!n.structure)}};function UT(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,s--}}return!1}function ZT(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function WT(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),s=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(s,i,t))return n;if(0==n||r.type.spec.isolating||!ZT(r,s,i))break}return null}function qT(e){return{type:e,attrs:null}}function GT(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let e=s.node(c),t=s.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let o=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!o.type.validContent(n))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function JT(e,t){let n=e.resolve(t),r=n.index();return KT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function KT(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let i=t.child(s),o=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(e,t))}function YT(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let e,i,o=r.index(s);if(s==r.depth?(e=r.nodeBefore,i=r.nodeAfter):n>0?(e=r.node(s+1),o++,i=r.node(s).maybeChild(o)):(e=r.node(s).maybeChild(o-1),i=r.node(s+1)),e&&!e.isTextblock&&KT(e,i)&&r.node(s).canReplace(o,o+1))return t;if(0==s)break;t=n<0?r.before(s):r.after(s)}}function QT(e,t,n=t,r=hS.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return function(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}(s,i,r)?new $T(t,n,r):new XT(s,i,r).fit()}DT.jsonID("replaceAround",BT);class XT{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=oS.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=oS.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let s=this.placed,i=n.depth,o=r.depth;for(;i&&o&&1==s.childCount;)s=s.firstChild.content,i--,o--;let a=new hS(s,i,o);return e>-1?new BT(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new $T(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let s=t.firstChild;if(t.childCount>1&&(r=0),s.type.spec.isolating&&r<=n){e=n;break}t=s.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=nA(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let s=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:o,match:a}=this.frontier[i],l=null;if(1==t&&(s?a.matchType(s.type)||(l=a.fillBefore(oS.from(s),!1)):r&&o.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:l};if(2==t&&s&&(e=a.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=nA(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new hS(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=nA(e,t);if(r.childCount<=1&&t>0){let s=e.size-t<=t+r.size;this.unplaced=new hS(eA(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new hS(eA(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let f=0;f<s.length;f++)this.openFrontierNode(s[f]);let i=this.unplaced,o=n?n.content:i.content,a=i.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=o.size+e-(i.content.size-i.openEnd);for(;l<o.childCount;){let e=o.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(rA(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==o.childCount?h:-1)))}let p=l==o.childCount;p||(h=-1),this.placed=tA(this.placed,t,oS.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=o;f<h;f++){let e=m.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),m=e.content}this.unplaced=p?0==e?hS.empty:new hS(eA(i.content,e-1,1),e-1,h<0?i.openEnd:e-1):new hS(eA(i.content,e,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!sA(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=sA(e,t,r,n,s);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],s=sA(e,n,r,t,!0);if(!s||s.childCount)continue e}return{depth:t,fit:i,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tA(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=tA(this.placed,this.depth,oS.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(oS.empty,!0);e.childCount&&(this.placed=tA(this.placed,this.frontier.length,e))}}function eA(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(eA(e.firstChild.content,t-1,n)))}function tA(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(tA(e.lastChild.content,t-1,n)))}function nA(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function rA(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,rA(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(oS.empty,!0)))),e.copy(r)}function sA(e,t,n,r,s){let i=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,o)?a:null}DT.jsonID("attr",class e extends DT{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return RT.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return RT.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(r),0,t.isLeaf?0:1))}getMap(){return OT.empty}invert(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}});DT.jsonID("docAttr",class e extends DT{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return RT.ok(n)}getMap(){return OT.empty}invert(t){return new e(this.attr,t.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}});let iA=class extends Error{};iA=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(iA.prototype=Object.create(Error.prototype)).constructor=iA,iA.prototype.name="TransformError";const oA=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function aA(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const lA=(e,t,n)=>{let r=aA(e,n);if(!r)return!1;let s=hA(r);if(!s){let n=r.blockRange(),s=n&&WT(n);return null!=s&&(t&&t(e.tr.lift(n,s).scrollIntoView()),!0)}let i=s.nodeBefore;if(wA(e,s,t,-1))return!0;if(0==r.parent.content.size&&(uA(i,"end")||YM.isSelectable(i)))for(let o=r.depth;;o--){let n=QT(e.doc,r.before(o),r.after(o),hS.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(uA(i,"end")?ZM.findFrom(r.doc.resolve(r.mapping.map(s.pos,-1)),-1):YM.create(r.doc,s.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}if(1==o||r.node(o-1).childCount>1)break}return!(!i.isAtom||s.depth!=r.depth-1)&&(t&&t(e.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0)};function cA(e,t,n){let r=t.nodeBefore,s=t.pos-1;for(;!r.isTextblock;s--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let i=t.nodeAfter,o=t.pos+1;for(;!i.isTextblock;o++){if(i.type.spec.isolating)return!1;let e=i.firstChild;if(!e)return!1;i=e}let a=QT(e.doc,s,o,hS.empty);if(!a||a.from!=s||a instanceof $T&&a.slice.size>=o-s)return!1;if(n){let t=e.tr.step(a);t.setSelection(JM.create(t.doc,s)),n(t.scrollIntoView())}return!0}function uA(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const dA=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=hA(r)}let o=i&&i.nodeBefore;return!(!o||!YM.isSelectable(o))&&(t&&t(e.tr.setSelection(YM.create(e.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function hA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function pA(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const fA=(e,t,n)=>{let r=pA(e,n);if(!r)return!1;let s=gA(r);if(!s)return!1;let i=s.nodeAfter;if(wA(e,s,t,1))return!0;if(0==r.parent.content.size&&(uA(i,"start")||YM.isSelectable(i))){let n=QT(e.doc,r.before(),r.after(),hS.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(uA(i,"start")?ZM.findFrom(r.doc.resolve(r.mapping.map(s.pos)),1):YM.create(r.doc,r.mapping.map(s.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||s.depth!=r.depth-1)&&(t&&t(e.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0)},mA=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=gA(r)}let o=i&&i.nodeAfter;return!(!o||!YM.isSelectable(o))&&(t&&t(e.tr.setSelection(YM.create(e.doc,i.pos)).scrollIntoView()),!0)};function gA(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const yA=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function xA(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const vA=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof XM||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=xA(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,o=e.tr.insert(n,i.createAndFill());o.setSelection(JM.create(o.doc,n+1)),t(o.scrollIntoView())}return!0},bA=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(GT(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),s=r&&WT(r);return null!=s&&(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)};const CA=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof YM&&e.selection.node.isBlock)return!(!n.parentOffset||!GT(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.depth)return!1;let s,i,o=[],a=!1,l=!1;for(let h=n.depth;;h--){if(n.node(h).isBlock){a=n.end(h)==n.pos+(n.depth-h),l=n.start(h)==n.pos-(n.depth-h),i=xA(n.node(h-1).contentMatchAt(n.indexAfter(h-1))),o.unshift(a&&i?{type:i}:null),s=h;break}if(1==h)return!1;o.unshift(null)}let c=e.tr;(e.selection instanceof JM||e.selection instanceof XM)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=GT(c.doc,u,o.length,o);if(d||(o[0]=i?{type:i}:null,d=GT(c.doc,u,o.length,o)),!d)return!1;if(c.split(u,o.length,o),!a&&l&&n.node(s).type!=i){let e=c.mapping.map(n.before(s)),t=c.doc.resolve(e);i&&n.node(s-1).canReplaceWith(t.index(),t.index()+1,i)&&c.setNodeMarkup(c.mapping.map(n.before(s)),i)}return t&&t(c.scrollIntoView()),!0};function wA(e,t,n,r){let s,i,o=t.nodeBefore,a=t.nodeAfter,l=o.type.spec.isolating||a.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,i=t.index();return!(!(r&&s&&r.type.compatibleContent(s.type))||(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(i,i+1)||!s.isTextblock&&!JT(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(i=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&i.matchType(s[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,i=oS.empty;for(let e=s.length-1;e>=0;e--)i=oS.from(s[e].create(null,i));i=oS.from(o.copy(i));let l=e.tr.step(new BT(t.pos-1,r,t.pos,r,new hS(i,1,0),s.length,!0)),c=l.doc.resolve(r+2*s.length);c.nodeAfter&&c.nodeAfter.type==o.type&&JT(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:ZM.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&WT(d);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&uA(a,"start",!0)&&uA(o,"end")){let r=o,s=[];for(;s.push(r),!r.isTextblock;)r=r.lastChild;let i=a,l=1;for(;!i.isTextblock;i=i.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,i.content)){if(n){let r=oS.empty;for(let e=s.length-1;e>=0;e--)r=oS.from(s[e].copy(r));n(e.tr.step(new BT(t.pos-s.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new hS(r,s.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function kA(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return!!s.node(i).isTextblock&&(n&&n(t.tr.setSelection(JM.create(t.doc,e<0?s.start(i):s.end(i)))),!0)}}const SA=kA(-1),MA=kA(1);function NA(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&function(e,t,n=null,r=e){let s=function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let o=i.length?i[0]:t;return n.canReplaceWith(r,s,o)?i:null}(e,t),i=s&&function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),o=t.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:t).contentMatch;for(let l=r;a&&l<s;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?o:null}(r,t);return i?s.map(qT).concat({type:t,attrs:n}).concat(i.map(qT)):null}(o,e,t);return!!a&&(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0)}}function _A(e,t=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:r},$to:{pos:o}}=n.selection.ranges[i];n.doc.nodesBetween(r,o,(r,i)=>{if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{let t=n.doc.resolve(i),r=t.index();s=t.parent.canReplaceWith(r,r+1,e)}})}if(!s)return!1;if(r){let s=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:o}}=n.selection.ranges[r];s.setBlockType(i,o,e,t)}r(s.scrollIntoView())}return!0}}function jA(...e){return function(t,n,r){for(let s=0;s<e.length;s++)if(e[s](t,n,r))return!0;return!1}}jA(oA,lA,dA),jA(oA,fA,mA),jA(yA,vA,bA,CA),"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();const EA=Math.pow(2,16);function TA(e,t){return e+t*EA}function AA(e){return 65535&e}class LA{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class OA{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&OA.empty)return OA.empty}recover(e){let t=0,n=AA(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/EA}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[o+s],c=this.ranges[o+i],u=a+l;if(e<=u){let s=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return s;let i=e==(t<0?a:u)?null:TA(o/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new LA(s,d,i)}r+=c-l}return n?e+r:new LA(e+r,0,null)}touches(e,t){let n=0,r=AA(t),s=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let t=this.ranges[o]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[o+s];if(e<=t+a&&o==3*r)return!0;n+=this.ranges[o+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let i=this.ranges[r],o=i-(this.inverted?s:0),a=i+(this.inverted?0:s),l=this.ranges[r+t],c=this.ranges[r+n];e(o,o+l,a,a+c),s+=c-l}}invert(){return new OA(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?OA.empty:new OA(e<0?[0,-e,0]:[0,0,e])}}OA.empty=new OA([]);const IA=Object.create(null);class DA{getMap(){return OA.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=IA[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in IA)throw new RangeError("Duplicate use of step JSON ID "+e);return IA[e]=t,t.prototype.jsonID=e,t}}class RA{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new RA(e,null)}static fail(e){return new RA(null,e)}static fromReplace(e,t,n,r){try{return RA.ok(e.replace(t,n,r))}catch(s){if(s instanceof dS)return RA.fail(s.message);throw s}}}function PA(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy(PA(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return oS.fromArray(r)}class zA extends DA{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new hS(PA(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return RA.fromReplace(e,this.from,this.to,s)}invert(){return new FA(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new zA(t.pos,n.pos,this.mark)}merge(e){return e instanceof zA&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zA(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zA(t.from,t.to,e.markFromJSON(t.mark))}}DA.jsonID("addMark",zA);class FA extends DA{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new hS(PA(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return RA.fromReplace(e,this.from,this.to,n)}invert(){return new zA(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new FA(t.pos,n.pos,this.mark)}merge(e){return e instanceof FA&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new FA(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new FA(t.from,t.to,e.markFromJSON(t.mark))}}DA.jsonID("removeMark",FA);class HA extends DA{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return RA.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return RA.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new HA(this.pos,t.marks[n]);return new HA(this.pos,this.mark)}}return new VA(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new HA(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new HA(t.pos,e.markFromJSON(t.mark))}}DA.jsonID("addNodeMark",HA);class VA extends DA{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return RA.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return RA.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new HA(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new VA(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new VA(t.pos,e.markFromJSON(t.mark))}}DA.jsonID("removeNodeMark",VA);class $A extends DA{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&UA(e,this.from,this.to)?RA.fail("Structure replace would overwrite content"):RA.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new OA([this.from,this.to-this.from,this.slice.size])}invert(e){return new $A(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new $A(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof $A)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?hS.empty:new hS(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new $A(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?hS.empty:new hS(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new $A(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $A(t.from,t.to,hS.fromJSON(e,t.slice),!!t.structure)}}DA.jsonID("replace",$A);class BA extends DA{constructor(e,t,n,r,s,i,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=i,this.structure=o}apply(e){if(this.structure&&(UA(e,this.from,this.gapFrom)||UA(e,this.gapTo,this.to)))return RA.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return RA.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?RA.fromReplace(e,this.from,this.to,n):RA.fail("Content does not fit in gap")}getMap(){return new OA([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new BA(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||s>n.pos?null:new BA(t.pos,n.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new BA(t.from,t.to,t.gapFrom,t.gapTo,hS.fromJSON(e,t.slice),t.insert,!!t.structure)}}function UA(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,s--}}return!1}function ZA(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function WA(e){return{type:e,attrs:null}}function qA(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,o=s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let l=s.depth-1,c=n-2;l>i;l--,c--){let e=s.node(l),t=s.index(l);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),r=e;if(!e.canReplace(t+1,e.childCount)||!r.type.validContent(n))return!1}let a=s.indexAfter(i);return s.node(i).canReplaceWith(a,a,s.node(i+1).type)}function GA(e,t){let n=e.resolve(t),r=n.index();return s=n.nodeBefore,i=n.nodeAfter,!(!s||!i||s.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let i=t.child(s),o=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n)return!1;if(!e.type.allowsMarks(i.marks))return!1}return n.validEnd}(s,i))&&n.parent.canReplace(r,r+1);var s,i}DA.jsonID("replaceAround",BA);class JA extends DA{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return RA.fail("No node at attribute step's position");let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return RA.fromReplace(e,this.pos,this.pos+1,new hS(oS.from(r),0,t.isLeaf?0:1))}getMap(){return OA.empty}invert(e){return new JA(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new JA(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new JA(t.pos,t.attr,t.value)}}DA.jsonID("attr",JA);class KA extends DA{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return RA.ok(n)}getMap(){return OA.empty}invert(e){return new KA(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new KA(t.attr,t.value)}}DA.jsonID("docAttr",KA);let YA=class extends Error{};function QA(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return!!function(e,t,n,r=null){let s=!1,i=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=o.resolve(t.start-2);i=new jS(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new jS(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let a=function(e,t,n=null,r=e){let s=function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let o=i.length?i[0]:t;return n.canReplaceWith(r,s,o)?i:null}(e,t),i=s&&function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),o=t.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:t).contentMatch;for(let l=r;a&&l<s;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?o:null}(r,t);return i?s.map(WA).concat({type:t,attrs:n}).concat(i.map(WA)):null}(i,n,r,t);if(!a)return!1;e&&function(e,t,n,r,s){let i=oS.empty;for(let u=n.length-1;u>=0;u--)i=oS.from(n[u].type.create(n[u].attrs,i));e.step(new BA(t.start-(r?2:0),t.end,t.start,t.end,new hS(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let a=n.length-o,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&qA(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize}(e,t,a,s,n);return!0}(a,o,e,t)&&(r&&r(a.scrollIntoView()),!0)}}function XA(e){return function(t,n){let{$from:r,$to:s}=t.selection,i=r.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);return!!i&&(!n||(r.node(i.depth-1).type==e?function(e,t,n,r){let s=e.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new BA(i-1,o,i,o,new hS(oS.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new jS(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=function(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),s=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(s,i,t))return n;if(0==n||r.type.spec.isolating||!ZA(r,s,i))break}return null}(r);if(null==a)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);GA(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos);return t(s.scrollIntoView()),!0}(t,n,e,i):function(e,t,n){let r=e.tr,s=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=s.child(f).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?oS.empty:oS.from(s))))return!1;let d=i.pos,h=d+o.nodeSize;return r.step(new BA(d-(a?1:0),h+(l?1:0),d+1,h-1,new hS((a?oS.empty:oS.from(s.copy(oS.empty))).append(l?oS.empty:oS.from(s.copy(oS.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,i)))}}YA=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(YA.prototype=Object.create(Error.prototype)).constructor=YA,YA.prototype.name="TransformError";var eL=Object.defineProperty,tL=(e,t)=>{for(var n in t)eL(e,n,{get:t[n],enumerable:!0})};function nL(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var rL=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{const n=t(...e)(i);return s.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(s),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!e,l=e||s.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{const r=this.buildProps(l,t),s=n(...e)(r);return o.push(s),c}])),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),o.every(e=>!0===e))};return c}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:e,editor:r,view:i,state:nL({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(o)]))}};return o}},sL=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function iL(e,t){const n=new jT(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}var oL=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&oL(r)}return e};function aL(e){if("undefined"==typeof window)throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return oL(n)}function lL(e,t,n){if(e instanceof TS||e instanceof oS)return e;n={slice:!0,parseOptions:{},...n};const r="string"==typeof e;if("object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return oS.fromArray(e.map(e=>t.nodeFromJSON(e)));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return lL("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,s="";const i=new JS({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,s="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?YS.fromSchema(i).parseSlice(aL(e),n.parseOptions):YS.fromSchema(i).parse(aL(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${s}`)})}const r=YS.fromSchema(t);return n.slice?r.parseSlice(aL(e),n.parseOptions).content:r.parse(aL(e),n.parseOptions)}return lL("",t,n)}function cL(e,t,n={},r={}){return lL(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function uL(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function dL(e,t,n){if(void 0===e.config[t]&&e.parent)return dL(e.parent,t,n);if("function"==typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?dL(e.parent,t,n):null})}return e.config[t]}function hL(e){return e.map(e=>{const t=dL(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...hL(t())]:e}).flat(10)}function pL(e,t){const n=aM.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function fL(e){return"function"==typeof e}function mL(e,t=void 0,...n){return fL(e)?t?e.bind(t)(...n):e(...n):e}function gL(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function yL(e){const t=[],{nodeExtensions:n,markExtensions:r}=gL(e),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const n=dL(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:s});if(!n)return;n().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...i,...r}})})})})}),s.forEach(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=dL(e,"addAttributes",n);if(!r)return;const s=r();Object.entries(s).forEach(([n,r])=>{const s={...i,...r};"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&void 0===(null==s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:n,attribute:s})})}),t}function xL(...e){return e.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([e,t])=>{if(n[e])if("class"===e){const r=t?String(t).split(" "):[],s=n[e]?n[e].split(" "):[],i=r.filter(e=>!s.includes(e));n[e]=[...s,...i].join(" ")}else if("style"===e){const r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],s=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;s.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),r.forEach(e=>{const[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[e]=Array.from(i.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t;else n[e]=t}),n},{})}function vL(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>xL(e,t),{})}function bL(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const s=t.reduce((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null==r?e:{...e,[t.name]:r}},{});return{...r,...s}}}}function CL(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>("attrs"!==e||!function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function wL(e){return e.sort((e,t)=>{const n=dL(e,"priority")||100,r=dL(t,"priority")||100;return n>r?-1:n<r?1:0})}function kL(e){const t=wL(hL(e));return function(e){const t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name)).length,t}function SL(e,t,n){const{from:r,to:s}=t,{blockSeparator:i="\n\n",textSerializers:o={}}=n||{};let a="";return e.nodesBetween(r,s,(e,n,l,c)=>{var u;e.isBlock&&n>r&&(a+=i);const d=null==o?void 0:o[e.type.name];if(d)return l&&(a+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null==(u=null==e?void 0:e.text)?void 0:u.slice(Math.max(r,n)-n,s-n))}),a}function ML(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function NL(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function _L(e,t){const n=NL(t,e.schema),{from:r,to:s,empty:i}=e.selection,o=[];i?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,e=>{o.push(...e.marks)});const a=o.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function jL(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function EL(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function TL(e,t){const n=EL("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=jL(t,e.schema),{from:r,to:s}=e.selection,i=[];e.doc.nodesBetween(r,s,e=>{i.push(e)});const o=i.reverse().find(e=>e.type.name===n.name);return o?{...o.attrs}:{}}(e,t):"mark"===n?_L(e,t):{}}function AL(e){const t=function(e,t=JSON.stringify){const n={};return e.filter(e=>{const r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>{const r=t.filter((e,t)=>t!==n);return!r.some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to)})}function LL(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,s)=>{const i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{const{from:e,to:t}=n[s];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(({from:e,to:n})=>{const i=t.slice(s).map(e,-1),o=t.slice(s).map(n),a=t.invert().map(i,-1),l=t.invert().map(o);r.push({oldRange:{from:a,to:l},newRange:{from:i,to:o}})})}),AL(r)}function OL(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function IL(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:OL(t[r])?t[r].test(e[r]):t[r]===e[r])}function DL(e,t,n={}){return e.find(e=>e.type===t&&IL(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function RL(e,t,n={}){return!!DL(e,t,n)}function PL(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if(s.node&&s.node.marks.some(e=>e.type===t)||(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(e=>e.type===t))return;n=n||(null==(r=s.node.marks[0])?void 0:r.attrs);if(!DL([...s.node.marks],t,n))return;let i=s.index,o=e.start()+s.offset,a=i+1,l=o+s.node.nodeSize;for(;i>0&&RL([...e.parent.child(i-1).marks],t,n);)i-=1,o-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&RL([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function zL(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(t=>{const s=PL(n.resolve(e),t.type);s&&r.push({mark:t,...s})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function FL(e,t){return t.nodes[e]||t.marks[e]||null}function HL(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{const r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}function VL(e,t,n={}){const{empty:r,ranges:s}=e.selection,i=t?NL(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>IL(e.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:t,$to:n})=>{const r=t.pos,s=n.pos;e.doc.nodesBetween(r,s,(e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(r,t),i=Math.min(s,t+e.nodeSize);o+=i-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:i})))})}),0===o)return!1;const l=a.filter(e=>!i||i.name===e.mark.type.name).filter(e=>IL(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=o}function $L(e,t,n={}){const{from:r,to:s,empty:i}=e.selection,o=t?jL(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(e,t)=>{if(e.isText)return;const n=Math.max(r,t),i=Math.min(s,t+e.nodeSize);a.push({node:e,from:n,to:i})});const l=s-r,c=a.filter(e=>!o||o.name===e.node.type.name).filter(e=>IL(e.node.attrs,n,{strict:!1}));if(i)return!!c.length;return c.reduce((e,t)=>e+t.to-t.from,0)>=l}function BL(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function UL(e,t){const{nodeExtensions:n}=gL(t),r=n.find(t=>t.name===e);if(!r)return!1;const s=mL(dL(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof s&&s.split(" ").includes("list")}function ZL(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(r=e.text)?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(ZL(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function WL(e){return e instanceof YM}function qL(e){return e instanceof JM}function GL(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function JL(e,t=null){if(!t)return null;const n=ZM.atStart(e),r=ZM.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const s=n.from,i=r.to;return"all"===t?JM.create(e,GL(0,s,i),GL(e.content.size,s,i)):JM.create(e,GL(t,s,i),GL(t,s,i))}var KL=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=null==(t=e.undoable)||t}};function YL(e){var t;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null==(t=c.nodeBefore||c.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let u=!1;const d=((e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,s,i)=>{var o,a;const l=(null==(a=(o=e.type.spec).toText)?void 0:a.call(o,{node:e,pos:t,parent:s,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n})(c)+i;return o.forEach(e=>{if(u)return;const t=((e,t)=>{if(OL(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith),r.push(n.replaceWith)),r})(d,e.find);if(!t)return;const o=l.state.tr,c=nL({state:l.state,transaction:o}),h={from:r-(t[0].length-i.length),to:s},{commands:p,chain:f,can:m}=new rL({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&o.steps.length&&(e.undoable&&o.setMeta(a,{transform:o,from:r,to:s,text:i}),l.dispatch(o),u=!0)}),u}function QL(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function XL(e,t){const n={...e};return QL(e)&&QL(t)&&Object.keys(t).forEach(r=>{QL(t[r])&&QL(e[r])?n[r]=XL(e[r],t[r]):n[r]=t[r]}),n}var eO=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...mL(dL(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...mL(dL(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>XL(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},tO=class e extends eO{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const s=r.marks();if(!!!s.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;const i=s.find(e=>(null==e?void 0:e.type.name)===t.name);return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}};var nO=class{constructor(e){this.find=e.find,this.handler=e.handler}};function rO(e){const{editor:t,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=e,{commands:l,chain:c,can:u}=new rL({editor:t,state:n}),d=[];n.doc.nodesBetween(r,s,(e,t)=>{var h,p,f,m,g;if((null==(p=null==(h=e.type)?void 0:h.spec)?void 0:p.code)||!(e.isText||e.isTextblock||e.isInline))return;const y=null!=(g=null!=(m=null==(f=e.content)?void 0:f.size)?m:e.nodeSize)?g:0,x=Math.max(r,t),v=Math.min(s,t+y);if(x>=v)return;((e,t,n)=>{if(OL(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith),n.push(t.replaceWith)),n}):[]})(e.isText?e.text||"":e.textBetween(x-t,v-t,void 0,"￼"),i.find,o).forEach(e=>{if(void 0===e.index)return;const t=x+e.index+1,r=t+e[0].length,s={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},h=i.handler({state:n,range:s,match:e,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(h)})});return d.every(e=>null!==e)}var sO=null;function iO(e){const{editor:t,rules:n}=e;let r,s=null,i=!1,o=!1,a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}const l=({state:e,from:n,to:s,rule:i,pasteEvt:o})=>{const l=e.tr,c=nL({state:e,transaction:l});if(rO({editor:t,state:c,from:Math.max(n-1,0),to:s.b-1,rule:i,pasteEvent:o,dropEvent:r})&&l.steps.length){try{r="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{r=null}return a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return n.map(e=>new uN({view(e){const n=n=>{var r;s=(null==(r=e.dom.parentElement)?void 0:r.contains(n.target))?e.dom.parentElement:null,s&&(sO=t)},r=()=>{sO&&(sO=null)};return window.addEventListener("dragstart",n),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",n),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(o=s===e.dom.parentElement,r=t,!o){const e=sO;(null==e?void 0:e.isEditable)&&setTimeout(()=>{const t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;const r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return a=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const s=t[0],c="paste"===s.getMeta("uiEvent")&&!i,u="drop"===s.getMeta("uiEvent")&&!o,d=s.getMeta("applyPasteRules"),h=!!d;if(!c&&!u&&!h)return;if(h){let{text:t}=d;"string"==typeof t||(t=pL(oS.from(t),r.schema));const{from:n}=d,s=n+t.length,i=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n})(t);return l({rule:e,state:r,from:n,to:{b:s},pasteEvt:i})}const p=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);return"number"==typeof p&&f&&p!==f.b?l({rule:e,state:r,from:p,to:f,pasteEvt:a}):void 0}}))}var oO=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=kL(e),this.schema=function(e,t){var n;const r=yL(e),{nodeExtensions:s,markExtensions:i}=gL(e),o=null==(n=s.find(e=>dL(e,"topNode")))?void 0:n.name,a=Object.fromEntries(s.map(n=>{const s=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},o=CL({...e.reduce((e,t)=>{const r=dL(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:mL(dL(n,"content",i)),marks:mL(dL(n,"marks",i)),group:mL(dL(n,"group",i)),inline:mL(dL(n,"inline",i)),atom:mL(dL(n,"atom",i)),selectable:mL(dL(n,"selectable",i)),draggable:mL(dL(n,"draggable",i)),code:mL(dL(n,"code",i)),whitespace:mL(dL(n,"whitespace",i)),linebreakReplacement:mL(dL(n,"linebreakReplacement",i)),defining:mL(dL(n,"defining",i)),isolating:mL(dL(n,"isolating",i)),attrs:Object.fromEntries(s.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),a=mL(dL(n,"parseHTML",i));a&&(o.parseDOM=a.map(e=>bL(e,s)));const l=dL(n,"renderHTML",i);l&&(o.toDOM=e=>l({node:e,HTMLAttributes:vL(e,s)}));const c=dL(n,"renderText",i);return c&&(o.toText=c),[n.name,o]})),l=Object.fromEntries(i.map(n=>{const s=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},o=CL({...e.reduce((e,t)=>{const r=dL(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:mL(dL(n,"inclusive",i)),excludes:mL(dL(n,"excludes",i)),group:mL(dL(n,"group",i)),spanning:mL(dL(n,"spanning",i)),code:mL(dL(n,"code",i)),attrs:Object.fromEntries(s.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),a=mL(dL(n,"parseHTML",i));a&&(o.parseDOM=a.map(e=>bL(e,s)));const l=dL(n,"renderHTML",i);return l&&(o.toDOM=e=>l({mark:e,HTMLAttributes:vL(e,s)})),[n.name,o]}));return new JS({topNode:o,nodes:a,marks:l})}(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n=dL(t,"addCommands",{name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:FL(t.name,this.schema)});return n?{...e,...n()}:e},{})}get plugins(){const{editor:e}=this;return wL([...this.extensions].reverse()).flatMap(t=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:FL(t.name,this.schema)},r=[],s=dL(t,"addKeyboardShortcuts",n);let i={};if("mark"===t.type&&dL(t,"exitable",n)&&(i.ArrowRight=()=>tO.handleExit({editor:e,mark:t})),s){const t=Object.fromEntries(Object.entries(s()).map(([t,n])=>[t,()=>n({editor:e})]));i={...i,...t}}const o=new uN({props:{handleKeyDown:$E(i)}});r.push(o);const a=dL(t,"addInputRules",n);if(BL(t,e.options.enableInputRules)&&a){const t=a();if(t&&t.length){const n=function(e){const{editor:t,rules:n}=e,r=new uN({state:{init:()=>null,apply(e,s,i){const o=e.getMeta(r);if(o)return o;const a=e.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:e}=a;"string"==typeof e||(e=pL(oS.from(e),i.schema));const{from:s}=a,o=s+e.length;YL({editor:t,from:s,to:o,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:s}},props:{handleTextInput:(e,s,i,o)=>YL({editor:t,from:s,to:i,text:o,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:s}=e.state.selection;s&&YL({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,s){if("Enter"!==s.key)return!1;const{$cursor:i}=e.state.selection;return!!i&&YL({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}({editor:e,rules:t}),s=Array.isArray(n)?n:[n];r.push(...s)}}const l=dL(t,"addPasteRules",n);if(BL(t,e.options.enablePasteRules)&&l){const t=l();if(t&&t.length){const n=iO({editor:e,rules:t});r.push(...n)}}const c=dL(t,"addProseMirrorPlugins",n);if(c){const e=c();r.push(...e)}return r})}get attributes(){return yL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=gL(this.extensions);return Object.fromEntries(t.filter(e=>!!dL(e,"addNodeView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:jL(t.name,this.schema)},s=dL(t,"addNodeView",r);if(!s)return[];return[t.name,(r,i,o,a,l)=>{const c=vL(r,n);return s()({node:r,view:i,getPos:o,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=gL(this.extensions);return Object.fromEntries(t.filter(e=>!!dL(e,"addMarkView")).map(t=>{const n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:NL(t.name,this.schema)},s=dL(t,"addMarkView",r);if(!s)return[];return[t.name,(r,i,o)=>{const a=vL(r,n);return s()({mark:r,view:i,inline:o,editor:e,extension:t,HTMLAttributes:a,updateAttributes:t=>{!function(e,t,n={}){const{state:r}=t,{doc:s,tr:i}=r,o=e;s.descendants((t,r)=>{const s=i.mapping.map(r),a=i.mapping.map(r)+t.nodeSize;let l=null;if(t.marks.forEach(e=>{if(e!==o)return!1;l=e}),!l)return;let c=!1;if(Object.keys(n).forEach(e=>{n[e]!==l.attrs[e]&&(c=!0)}),c){const t=e.type.create({...e.attrs,...n});i.removeMark(s,a,e.type),i.addMark(s,a,t)}}),i.docChanged&&t.view.dispatch(i)}(r,e,t)}})}]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:FL(e.name,this.schema)};if("mark"===e.type){(null==(t=mL(dL(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name)}const r=dL(e,"onBeforeCreate",n),s=dL(e,"onCreate",n),i=dL(e,"onUpdate",n),o=dL(e,"onSelectionUpdate",n),a=dL(e,"onTransaction",n),l=dL(e,"onFocus",n),c=dL(e,"onBlur",n),u=dL(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),s&&this.editor.on("create",s),i&&this.editor.on("update",i),o&&this.editor.on("selectionUpdate",o),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)})}};oO.resolve=kL,oO.sort=wL,oO.flatten=hL;tL({},{ClipboardTextSerializer:()=>lO,Commands:()=>CI,Delete:()=>wI,Drop:()=>kI,Editable:()=>SI,FocusEvents:()=>NI,Keymap:()=>_I,Paste:()=>jI,Tabindex:()=>EI,focusEventsPluginKey:()=>MI});var aO=class e extends eO{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}},lO=aO.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new uN({key:new pN("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:i}=s,o=Math.min(...i.map(e=>e.$from.pos)),a=Math.max(...i.map(e=>e.$to.pos)),l=ML(n);return SL(r,{from:o,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),cO={};tL(cO,{blur:()=>uO,clearContent:()=>dO,clearNodes:()=>hO,command:()=>pO,createParagraphNear:()=>fO,cut:()=>mO,deleteCurrentNode:()=>gO,deleteNode:()=>yO,deleteRange:()=>xO,deleteSelection:()=>vO,enter:()=>bO,exitCode:()=>CO,extendMarkRange:()=>wO,first:()=>kO,focus:()=>NO,forEach:()=>_O,insertContent:()=>jO,insertContentAt:()=>EO,joinBackward:()=>LO,joinDown:()=>AO,joinForward:()=>OO,joinItemBackward:()=>IO,joinItemForward:()=>DO,joinTextblockBackward:()=>RO,joinTextblockForward:()=>PO,joinUp:()=>TO,keyboardShortcut:()=>FO,lift:()=>HO,liftEmptyBlock:()=>VO,liftListItem:()=>$O,newlineInCode:()=>BO,resetAttributes:()=>ZO,scrollIntoView:()=>WO,selectAll:()=>qO,selectNodeBackward:()=>GO,selectNodeForward:()=>JO,selectParentNode:()=>KO,selectTextblockEnd:()=>YO,selectTextblockStart:()=>QO,setContent:()=>XO,setMark:()=>eI,setMeta:()=>tI,setNode:()=>nI,setNodeSelection:()=>rI,setTextSelection:()=>sI,sinkListItem:()=>iI,splitBlock:()=>aI,splitListItem:()=>lI,toggleList:()=>dI,toggleMark:()=>hI,toggleNode:()=>pI,toggleWrap:()=>fI,undoInputRule:()=>mI,unsetAllMarks:()=>gI,unsetMark:()=>yI,updateAttributes:()=>xI,wrapIn:()=>vI,wrapInList:()=>bI});var uO=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null==(n=null==window?void 0:window.getSelection())||n.removeAllRanges())}),!0),dO=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),hO=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return!n||(s.forEach(({$from:n,$to:r})=>{e.doc.nodesBetween(n.pos,r.pos,(e,n)=>{if(e.type.isText)return;const{doc:r,mapping:s}=t,i=r.resolve(s.map(n)),o=r.resolve(s.map(n+e.nodeSize)),a=i.blockRange(o);if(!a)return;const l=function(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),s=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(s,i,t))return n;if(0==n||r.type.spec.isolating||!aT(r,s,i))break}return null}(a);if(e.type.isTextblock){const{defaultType:e}=i.parent.contentMatchAt(i.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)})}),!0)},pO=e=>t=>e(t),fO=()=>({state:e,dispatch:t})=>vA(e,t),mO=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,i.content),r.setSelection(new JM(r.doc.resolve(Math.max(o-1,0)))),!0},gO=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1){if(s.node(i).type===r.type){if(t){const t=s.before(i),n=s.after(i);e.delete(t,n).scrollIntoView()}return!0}}return!1},yO=e=>({tr:t,state:n,dispatch:r})=>{const s=jL(e,n.schema),i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1){if(i.node(e).type===s){if(r){const n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}}return!1},xO=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},vO=()=>({state:e,dispatch:t})=>oA(e,t),bO=()=>({commands:e})=>e.keyboardShortcut("Enter"),CO=()=>({state:e,dispatch:t})=>((e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=xA(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(t){let r=n.after(),s=e.tr.replaceWith(r,r,o.createAndFill());s.setSelection(ZM.near(s.doc.resolve(r),1)),t(s.scrollIntoView())}return!0})(e,t),wO=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const i=NL(e,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const e=PL(l,i,t);if(e&&e.from<=c&&e.to>=u){const t=JM.create(o,e.from,e.to);n.setSelection(t)}}return!0},kO=e=>t=>{const n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function SO(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function MO(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var NO=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:i})=>{t={scrollIntoView:!0,...t};const o=()=>{(MO()||SO())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(i&&null===e&&!qL(n.state.selection))return o(),!0;const a=JL(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},_O=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),jO=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),EO=(e,t,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){let s;const l=e=>{i.emit("contentError",{editor:i,error:e,disableCollaboration:()=>{"collaboration"in i.storage&&"object"==typeof i.storage.collaboration&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...(n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n}).parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{lL(t,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(a){l(a)}try{s=lL(t,i.schema,{parseOptions:c,errorOnInvalidContent:null!=(o=n.errorOnInvalidContent)?o:i.options.enableContentCheck})}catch(a){return l(a),!1}let{from:u,to:d}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},h=!0,p=!0;if(("type"in s?[s]:s).forEach(e=>{e.check(),h=!!h&&(e.isText&&0===e.marks.length),p=!!p&&e.isBlock}),u===d&&p){const{parent:e}=r.doc.resolve(u);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(u-=1,d+=1)}let f;if(h){if(Array.isArray(t))f=t.map(e=>e.text||"").join("");else if(t instanceof oS){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),f=e}else f="object"==typeof t&&t&&t.text?t.text:t;r.insertText(f,u,d)}else{f=s;const e=r.doc.resolve(u),t=e.node(),n=0===e.parentOffset,i=t.isText||t.isTextblock,o=t.content.size>0;n&&i&&o&&(u=Math.max(0,u-1)),r.replaceWith(u,d,f)}n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof rT||s instanceof sT))return;const i=e.mapping.maps[r];let o=0;i.forEach((e,t,n,r)=>{0===o&&(o=r)}),e.setSelection(ZM.near(e.doc.resolve(o),n))}(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:f}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:f})}return!0},TO=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection,s=r instanceof YM;if(s){if(r.node.isTextblock||!JT(e.doc,r.from))return!1;n=r.from}else if(n=YT(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);s&&r.setSelection(YM.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(e,t),AO=()=>({state:e,dispatch:t})=>((e,t)=>{let n,r=e.selection;if(r instanceof YM){if(r.node.isTextblock||!JT(e.doc,r.to))return!1;n=r.to}else if(n=YT(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(e,t),LO=()=>({state:e,dispatch:t})=>lA(e,t),OO=()=>({state:e,dispatch:t})=>fA(e,t),IO=()=>({state:e,dispatch:t,tr:n})=>{try{const r=fT(e.doc,e.selection.$from.pos,-1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},DO=()=>({state:e,dispatch:t,tr:n})=>{try{const r=fT(e.doc,e.selection.$from.pos,1);return null!=r&&(n.join(r,2),t&&t(n),!0)}catch{return!1}},RO=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=aA(e,n);if(!r)return!1;let s=hA(r);return!!s&&cA(e,s,t)})(e,t),PO=()=>({state:e,dispatch:t})=>((e,t,n)=>{let r=pA(e,n);if(!r)return!1;let s=gA(r);return!!s&&cA(e,s,t)})(e,t);function zO(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var FO=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const i=function(e){const t=e.split(/-(?!$)/);let n,r,s,i,o=t[t.length-1];"Space"===o&&(o=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))s=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);MO()||zO()?i=!0:r=!0}}return n&&(o=`Alt-${o}`),r&&(o=`Ctrl-${o}`),i&&(o=`Meta-${o}`),s&&(o=`Shift-${o}`),o}(e).split(/-(?!$)/),o=i.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===o?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,a))});return null==l||l.steps.forEach(e=>{const t=e.map(r.mapping);t&&s&&r.maybeStep(t)}),!0},HO=(e,t={})=>({state:n,dispatch:r})=>!!$L(n,jL(e,n.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),i=s&&WT(s);return null!=i&&(t&&t(e.tr.lift(s,i).scrollIntoView()),!0)})(n,r),VO=()=>({state:e,dispatch:t})=>bA(e,t),$O=e=>({state:t,dispatch:n})=>XA(jL(e,t.schema))(t,n),BO=()=>({state:e,dispatch:t})=>yA(e,t);function UO(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}var ZO=(e,t)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=EL("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(i=jL(e,r.schema)),"mark"===a&&(o=NL(e,r.schema)),s&&n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{i&&i===e.type&&n.setNodeMarkup(r,void 0,UO(e.attrs,t)),o&&e.marks.length&&e.marks.forEach(s=>{o===s.type&&n.addMark(r,r+e.nodeSize,o.create(UO(s.attrs,t)))})})}),!0)},WO=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),qO=()=>({tr:e,dispatch:t})=>{if(t){const t=new XM(e.doc);e.setSelection(t)}return!0},GO=()=>({state:e,dispatch:t})=>dA(e,t),JO=()=>({state:e,dispatch:t})=>mA(e,t),KO=()=>({state:e,dispatch:t})=>((e,t)=>{let n,{$from:r,to:s}=e.selection,i=r.sharedDepth(s);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(YM.create(e.doc,n))),!0)})(e,t),YO=()=>({state:e,dispatch:t})=>MA(e,t),QO=()=>({state:e,dispatch:t})=>SA(e,t),XO=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if("full"!==r.preserveWhitespace){const a=cL(e,s.schema,r,{errorOnInvalidContent:null!=t?t:s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,a).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:null!=t?t:s.options.enableContentCheck})};var eI=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=NL(e,r.schema);if(s)if(o){const e=_L(r,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach(e=>{const s=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(s,i,(e,r)=>{const o=Math.max(r,s),a=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(o,a,l.create({...e.attrs,...t}))}):n.addMark(o,a,l.create(t))})});return function(e,t,n){var r;const{selection:s}=t;let i=null;if(qL(s)&&(i=s.$cursor),i){const t=null!=(r=e.storedMarks)?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(t)||!t.some(e=>e.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:t,$to:r})=>{let s=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(s)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));s=t&&i}return!s}),s})}(r,n,l)},tI=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),nI=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const i=jL(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),!!i.isTextblock&&s().command(({commands:e})=>!!_A(i,{...o,...t})(n)||e.clearNodes()).command(({state:e})=>_A(i,{...o,...t})(e,r)).run()},rI=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,r=GL(e,0,n.content.size),s=YM.create(n,r);t.setSelection(s)}return!0},sI=e=>({tr:t,dispatch:n})=>{if(n){const{doc:n}=t,{from:r,to:s}="number"==typeof e?{from:e,to:e}:e,i=JM.atStart(n).from,o=JM.atEnd(n).to,a=GL(r,i,o),l=GL(s,i,o),c=JM.create(n,a,l);t.setSelection(c)}return!0},iI=e=>({state:t,dispatch:n})=>{const r=jL(e,t.schema);return(s=r,function(e,t){let{$from:n,$to:r}=e.selection,i=n.blockRange(r,e=>e.childCount>0&&e.firstChild.type==s);if(!i)return!1;let o=i.startIndex;if(0==o)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=s)return!1;if(t){let n=l.lastChild&&l.lastChild.type==a.type,r=oS.from(n?s.create():null),o=new hS(oS.from(s.create(null,oS.from(a.type.create(null,r)))),n?3:1,0),c=i.start,u=i.end;t(e.tr.step(new BA(c-(n?3:1),u,c,u,o,1,!0)).scrollIntoView())}return!0})(t,n);var s};function oI(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}var aI=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=t,{$from:a,$to:l}=i,c=HL(s.extensionManager.attributes,a.node().type.name,a.node().attrs);if(i instanceof YM&&i.node.isBlock)return!(!a.parentOffset||!dT(o,a.pos))&&(r&&(e&&oI(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,d=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=u&&d?[{type:d,attrs:c}]:void 0,p=dT(t.doc,t.mapping.map(a.pos),1,h);if(h||p||!dT(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)||(p=!0,h=d?[{type:d,attrs:c}]:void 0),r){if(p&&(i instanceof JM&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}e&&oI(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return p},lI=(e,t={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=jL(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let e=oS.empty;const r=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-r;t>=l.depth-3;t-=1)e=oS.from(l.node(t).copy(e));const s=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,i={...HL(h,l.node().type.name,l.node().attrs),...t},c=(null==(o=a.contentMatch.defaultType)?void 0:o.createAndFill(i))||void 0;e=e.append(oS.from(a.createAndFill(null,c)||void 0));const u=l.before(l.depth-(r-1));n.replace(u,l.after(-s),new hS(e,4-r,0));let d=-1;n.doc.nodesBetween(u,n.doc.content.size,(e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)}),d>-1&&n.setSelection(JM.near(n.doc.resolve(d))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,f={...HL(h,d.type.name,d.attrs),...t},m={...HL(h,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const g=p?[{type:a,attrs:f},{type:p,attrs:m}]:[{type:a,attrs:f}];if(!dT(n.doc,l.pos,2))return!1;if(s){const{selection:e,storedMarks:t}=r,{splittableMarks:o}=i.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(n.split(l.pos,2,g).scrollIntoView(),!a||!s)return!0;const c=a.filter(e=>o.includes(e.type.name));n.ensureMarks(c)}return!0},cI=(e,t)=>{const n=uL(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type!==(null==s?void 0:s.type)||!hT(e.doc,n.pos)||(e.join(n.pos),!0)},uI=(e,t)=>{const n=uL(e=>e.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type!==(null==s?void 0:s.type)||!hT(e.doc,r)||(e.join(r),!0)},dI=(e,t,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=s.extensionManager,p=jL(e,o.schema),f=jL(t,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:x}=m,v=y.blockRange(x),b=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;const C=uL(e=>UL(e.type.name,d))(m);if(v.depth>=1&&C&&v.depth-C.depth<=1){if(C.node.type===p)return c.liftListItem(f);if(UL(C.node.type.name,d)&&p.validContent(C.node.content)&&a)return l().command(()=>(i.setNodeMarkup(C.pos,p),!0)).command(()=>cI(i,p)).command(()=>uI(i,p)).run()}return n&&b&&a?l().command(()=>{const e=u().wrapInList(p,r),t=b.filter(e=>h.includes(e.type.name));return i.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(p,r).command(()=>cI(i,p)).command(()=>uI(i,p)).run():l().command(()=>!!u().wrapInList(p,r)||c.clearNodes()).wrapInList(p,r).command(()=>cI(i,p)).command(()=>uI(i,p)).run()},hI=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=NL(e,r.schema);return VL(r,o,t)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,t)},pI=(e,t,n={})=>({state:r,commands:s})=>{const i=jL(e,r.schema),o=jL(t,r.schema),a=$L(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},fI=(e,t={})=>({state:n,commands:r})=>{const s=jL(e,n.schema);return $L(n,s,t)?r.lift(s):r.wrapIn(s,t)},mI=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(e))){if(t){const t=e.tr,n=i.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(i.text){const n=t.doc.resolve(i.from).marks();t.replaceWith(i.from,i.to,e.schema.text(i.text,n))}else t.delete(i.from,i.to)}return!0}}return!1},gI=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0},yI=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=t,{selection:a}=n,l=NL(e,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:e,to:t}=a;const r=null==(i=c.marks().find(e=>e.type===l))?void 0:i.attrs,s=PL(c,l,r);s&&(e=s.from,t=s.to),n.removeMark(e,t,l)}else d.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},xI=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=EL("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(i=jL(e,r.schema)),"mark"===a&&(o=NL(e,r.schema)),s&&n.selection.ranges.forEach(e=>{const s=e.$from.pos,a=e.$to.pos;let l,c,u,d;n.selection.empty?r.doc.nodesBetween(s,a,(e,t)=>{i&&i===e.type&&(u=Math.max(t,s),d=Math.min(t+e.nodeSize,a),l=t,c=e)}):r.doc.nodesBetween(s,a,(e,r)=>{r<s&&i&&i===e.type&&(u=Math.max(r,s),d=Math.min(r+e.nodeSize,a),l=r,c=e),r>=s&&r<=a&&(i&&i===e.type&&n.setNodeMarkup(r,void 0,{...e.attrs,...t}),o&&e.marks.length&&e.marks.forEach(i=>{if(o===i.type){const l=Math.max(r,s),c=Math.min(r+e.nodeSize,a);n.addMark(l,c,o.create({...i.attrs,...t}))}}))}),c&&(void 0!==l&&n.setNodeMarkup(l,void 0,{...c.attrs,...t}),o&&c.marks.length&&c.marks.forEach(e=>{o===e.type&&n.addMark(u,d,o.create({...e.attrs,...t}))}))}),!0)},vI=(e,t={})=>({state:n,dispatch:r})=>NA(jL(e,n.schema),t)(n,r),bI=(e,t={})=>({state:n,dispatch:r})=>QA(jL(e,n.schema),t)(n,r),CI=aO.create({name:"commands",addCommands:()=>({...cO})}),wI=aO.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const i=()=>{var n,r,s,i;if(null!=(i=null==(s=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.filterTransaction)?void 0:s.call(r,e))?i:e.getMeta("y-sync$"))return;const o=iL(e.before,[e,...t]);LL(o).forEach(t=>{o.mapping.mapResult(t.oldRange.from).deletedAfter&&o.mapping.mapResult(t.oldRange.to).deletedBefore&&o.before.nodesBetween(t.oldRange.from,t.oldRange.to,(n,r)=>{const s=r+n.nodeSize-2,i=t.oldRange.from<=r&&s<=t.oldRange.to;this.editor.emit("delete",{type:"node",node:n,from:r,to:s,newFrom:o.mapping.map(r),newTo:o.mapping.map(s),deletedRange:t.oldRange,newRange:t.newRange,partial:!i,editor:this.editor,transaction:e,combinedTransform:o})})});const a=o.mapping;o.steps.forEach((t,n)=>{var r,s;if(t instanceof eT){const i=a.slice(n).map(t.from,-1),l=a.slice(n).map(t.to),c=a.invert().map(i,-1),u=a.invert().map(l),d=null==(r=o.doc.nodeAt(i-1))?void 0:r.marks.some(e=>e.eq(t.mark)),h=null==(s=o.doc.nodeAt(l))?void 0:s.marks.some(e=>e.eq(t.mark));this.editor.emit("delete",{type:"mark",mark:t.mark,from:t.from,to:t.to,deletedRange:{from:c,to:u},newRange:{from:i,to:l},partial:Boolean(h||d),editor:this.editor,transaction:e,combinedTransform:o})}})};null==(s=null==(r=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:r.async)||s?setTimeout(i,0):i()}}),kI=aO.create({name:"drop",addProseMirrorPlugins(){return[new uN({key:new pN("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),SI=aO.create({name:"editable",addProseMirrorPlugins(){return[new uN({key:new pN("editable"),props:{editable:()=>this.editor.options.editable}})]}}),MI=new pN("focusEvents"),NI=aO.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new uN({key:MI,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),_I=aO.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{const{selection:n,doc:r}=t,{empty:s,$anchor:i}=n,{pos:o,parent:a}=i,l=i.parent.isTextblock&&o>0?t.doc.resolve(o-1):i,c=l.parent.type.spec.isolating,u=i.pos-i.parentOffset,d=c&&1===l.parent.childCount?u===i.pos:ZM.atStart(r).from===o;return!(!s||!a.type.isTextblock||a.textContent.length||!d||d&&"paragraph"===i.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},s={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return MO()||zO()?s:r},addProseMirrorPlugins(){return[new uN({key:new pN("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;const r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),s=e.some(e=>e.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=t.selection,l=ZM.atStart(t.doc).from,c=ZM.atEnd(t.doc).to;if(i||!(o===l&&a===c))return;if(!ZL(n.doc))return;const u=n.tr,d=nL({state:n,transaction:u}),{commands:h}=new rL({editor:this.editor,state:d});return h.clearNodes(),u.steps.length?u:void 0}})]}}),jI=aO.create({name:"paste",addProseMirrorPlugins(){return[new uN({key:new pN("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),EI=aO.create({name:"tabindex",addProseMirrorPlugins(){return[new uN({key:new pN("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TI=class e{constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return;t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new e(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=this.pos+r+(i?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new e(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new e(a,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];if(e[s]!==t[s])break}}else n=r;r=r.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;const s=Object.keys(t);return this.children.forEach(i=>{if(!(n&&r.length>0)){if(i.node.type.name===e){s.every(e=>t[e]===i.node.attrs[e])&&r.push(i)}n&&r.length>0||(r=r.concat(i.querySelectorAll(e,t,n)))}}),r}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}};var AI=class extends sL{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=JL(t,this.options.autofocus);this.editorState=lN.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if("undefined"==typeof document)throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(e,t){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.setAttribute("data-tiptap-style",""),r.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(r),r}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}',this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if("state"===t)return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=fL(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(e=>{const t="string"==typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[SI,lO.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),CI,NI,_I,EI,kI,jI,wI].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new oO(n,this)}createCommandManager(){this.commandManager=new rL({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=cL(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message)))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=cL(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new SE(e,{...this.options.editorProps,attributes:{role:"textbox",...null==(t=this.options.editorProps)?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)}):void(this.capturedTransaction=e);const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),a=null==o?void 0:o.getMeta("focus"),l=null==o?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),e.getMeta("preventUpdate")||!n.some(e=>e.docChanged)||i.doc.eq(t.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return TL(this.state,e)}isActive(e,t){const n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return $L(e,null,n)||VL(e,null,n);const r=EL(t,e.schema);return"node"===r?$L(e,t,n):"mark"===r&&VL(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return pL(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){return SL(e,{from:0,to:e.content.size},t)}(this.state.doc,{blockSeparator:t,textSerializers:{...ML(this.schema),...n}})}get isEmpty(){return ZL(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return null==(t=null==(e=this.editorView)?void 0:e.isDestroyed)||t}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new TI(t,this)}get $doc(){return this.$pos(0)}};function LI(e){return new KL({find:e.find,handler:({state:t,range:n,match:r})=>{const s=mL(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:i}=t,o=r[r.length-1],a=r[0];if(o){const r=a.search(/\S/),l=n.from+a.indexOf(o),c=l+o.length;if(zL(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&i.delete(c,n.to),l>n.from&&i.delete(n.from+r,l);const u=n.from+r+o.length;i.addMark(n.from+r,u,e.type.create(s||{})),i.removeStoredMark(e.type)}},undoable:e.undoable})}function OI(e){return new KL({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),i=mL(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)},undoable:e.undoable})}function II(e){return new KL({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const i=mL(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),l=a&&function(e,t,n=null,r=e){let s=function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let o=i.length?i[0]:t;return n.canReplaceWith(r,s,o)?i:null}(e,t),i=s&&function(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),o=t.contentMatch.findWrapping(i.type);if(!o)return null;let a=(o.length?o[o.length-1]:t).contentMatch;for(let l=r;a&&l<s;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?o:null}(r,t);return i?s.map(lT).concat({type:t,attrs:n}).concat(i.map(lT)):null}(a,e.type,i);if(!l)return null;if(o.wrap(a,l),e.keepMarks&&e.editor){const{selection:n,storedMarks:r}=t,{splittableMarks:s}=e.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){const e=i.filter(e=>s.includes(e.type.name));o.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";s().updateAttributes(t,i).run()}const c=o.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&hT(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&o.join(n.from-1)},undoable:e.undoable})}var DI,RI,PI=class e extends eO{constructor(){super(...arguments),this.type="node"}static create(t={}){const n="function"==typeof t?t():t;return new e(n)}configure(e){return super.configure(e)}extend(e){const t="function"==typeof e?e():e;return super.extend(t)}},zI=class{constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,n,r,s,i,o,a;const{view:l}=this.editor,c=e.target,u=3===c.nodeType?null==(t=c.parentElement)?void 0:t.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null==(n=this.contentDOM)?void 0:n.contains(c))||!u)return;let d=0,h=0;if(this.dom!==u){const t=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),a=null!=(s=e.offsetX)?s:null==(r=e.nativeEvent)?void 0:r.offsetX,l=null!=(o=e.offsetY)?o:null==(i=e.nativeEvent)?void 0:i.offsetY;d=n.x-t.x+a,h=n.y-t.y+l}const p=this.dom.cloneNode(!0);try{const e=this.dom.getBoundingClientRect();p.style.width=`${Math.round(e.width)}px`,p.style.height=`${Math.round(e.height)}px`,p.style.boxSizing="border-box",p.style.pointerEvents="none"}catch{}let f=null;try{f=document.createElement("div"),f.style.position="absolute",f.style.top="-9999px",f.style.left="-9999px",f.style.pointerEvents="none",f.appendChild(p),document.body.appendChild(f),null==(a=e.dataTransfer)||a.setDragImage(p,d,h)}finally{f&&setTimeout(()=>{try{null==f||f.remove()}catch{}},0)}const m=this.getPos();if("number"!=typeof m)return;const g=YM.create(l.state.doc,m),y=l.state.tr.setSelection(g);l.dispatch(y)}stopEvent(e){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!(null==(t=this.contentDOM)?void 0:t.contains(n))))return!1;const r=e.type.startsWith("drag"),s="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!r)return!0;const{isEditable:i}=this.editor,{isDragging:o}=this,a=!!this.node.type.spec.draggable,l=YM.isSelectable(this.node),c="copy"===e.type,u="paste"===e.type,d="cut"===e.type,h="mousedown"===e.type;if(!a&&l&&r&&e.target===this.dom&&e.preventDefault(),a&&r&&!o&&e.target===this.dom)return e.preventDefault(),!1;if(a&&i&&!o&&h){const e=n.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(o||s||c||u||d||h&&l)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"==typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&(MO()||SO())&&this.editor.isFocused){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const n=this.getPos();return"number"==typeof n&&(t.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if("number"!=typeof e)return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}};function FI(e){return new nO({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const i=mL(e.getAttributes,void 0,r,s);if(!1===i||null===i)return null;const{tr:o}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const r=l.search(/\S/),s=n.from+l.indexOf(a),u=s+a.length;if(zL(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>s).length)return null;u<n.to&&o.delete(u,n.to),s>n.from&&o.delete(n.from+r,s),c=n.from+r+a.length,o.addMark(n.from+r,c,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}var HI=(RI||(RI=1,DI=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;for(s of t.entries())if(!e(s[1],n.get(s[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(t[s]!==n[s])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!==s--;){var o=i[s];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}),DI);const VI=ve(HI);var $I,BI,UI={exports:{}},ZI={};var WI=(BI||(BI=1,UI.exports=function(){if($I)return ZI;$I=1;var e=Ce(),t=tS(),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return ZI.useSyncExternalStoreWithSelector=function(e,t,l,c,u){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=o(function(){function e(e){if(!i){if(i=!0,r=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return s=t}return s=e}if(t=s,n(r,e))return t;var o=c(e);return void 0!==u&&u(t,o)?(r=e,t):(r=e,s=o)}var r,s,i=!1,o=void 0===l?null:l;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,l,c,u]);var p=r(e,d[0],d[1]);return i(function(){h.hasValue=!0,h.value=p},[p]),a(p),p},ZI}()),UI.exports),qI=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},GI=({contentComponent:e})=>{const t=nS.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return he.jsx(he.Fragment,{children:Object.values(t)})};var JI=class extends xe.Component{constructor(e){var t;super(e),this.editorContentRef=xe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null==(t=e.editor)?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:H.createPortal(r.reactElement,r.element,n)},e.forEach(e=>e())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!(null==(e=t.view.dom)?void 0:e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return he.jsxs(he.Fragment,{children:[he.jsx("div",{ref:qI(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&he.jsx(GI,{contentComponent:e.contentComponent})]})}},KI=de.forwardRef((e,t)=>{const n=xe.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return xe.createElement(JI,{key:n,innerRef:t,...e})}),YI=xe.memo(KI),QI="undefined"!=typeof window?de.useLayoutEffect:de.useEffect,XI=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};var eD="undefined"==typeof window,tD=eD||Boolean("undefined"!=typeof window&&window.next),nD=class e{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?eD||tD?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onBeforeCreate)?void 0:n.call(t,...e)},onBlur:(...e)=>{var t,n;return null==(n=(t=this.options.current).onBlur)?void 0:n.call(t,...e)},onCreate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onCreate)?void 0:n.call(t,...e)},onDestroy:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDestroy)?void 0:n.call(t,...e)},onFocus:(...e)=>{var t,n;return null==(n=(t=this.options.current).onFocus)?void 0:n.call(t,...e)},onSelectionUpdate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onSelectionUpdate)?void 0:n.call(t,...e)},onTransaction:(...e)=>{var t,n;return null==(n=(t=this.options.current).onTransaction)?void 0:n.call(t,...e)},onUpdate:(...e)=>{var t,n;return null==(n=(t=this.options.current).onUpdate)?void 0:n.call(t,...e)},onContentError:(...e)=>{var t,n;return null==(n=(t=this.options.current).onContentError)?void 0:n.call(t,...e)},onDrop:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDrop)?void 0:n.call(t,...e)},onPaste:(...e)=>{var t,n;return null==(n=(t=this.options.current).onPaste)?void 0:n.call(t,...e)},onDelete:(...e)=>{var t,n;return null==(n=(t=this.options.current).onDelete)?void 0:n.call(t,...e)}};return new AI(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null==(r=t.extensions)?void 0:r[n])}):e[n]===t[n]))}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===t.length?e.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{this.isComponentMounted&&this.instanceId===e?t&&t.setOptions(this.options.current):t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function rD(e={},t=[]){const n=de.useRef(e);n.current=e;const[r]=de.useState(()=>new nD(n)),s=nS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return de.useDebugValue(s),de.useEffect(r.onRender(t)),function(e){var t;const[n]=de.useState(()=>new XI(e.editor)),r=WI.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!=(t=e.equalityFn)?t:VI);QI(()=>n.watch(e.editor),[e.editor,n]),de.useDebugValue(r)}({editor:s,selector:({transactionNumber:t})=>!1===e.shouldRerenderOnTransaction||void 0===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===t?0:t+1}),s}de.createContext({editor:null}).Consumer;var sD=de.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),iD=xe.forwardRef((e,t)=>{const{onDragStart:n}=de.useContext(sD),r=e.as||"div";return he.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function oD(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}function aD(e){return!("object"!=typeof e||!e.$$typeof||"Symbol(react.forward_ref)"!==e.$$typeof.toString()&&"react.forward_ref"!==e.$$typeof.description)}var lD=class{constructor(e,{editor:t,props:n={},as:r="div",className:s=""}){this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?P.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,n=this.props,r=this.editor,s=function(){try{if(de.version)return parseInt(de.version.split(".")[0],10)>=19}catch{}return!1}(),i=function(e){if(oD(e))return!0;if(aD(e))return!0;if(function(e){return!("object"!=typeof e||!e.$$typeof||"Symbol(react.memo)"!==e.$$typeof.toString()&&"react.memo"!==e.$$typeof.description)}(e)){const t=e.type;if(t)return oD(t)||aD(t)}return!1}(t),o={...n};!o.ref||s||i||delete o.ref,o.ref||!s&&!i||(o.ref=e=>{this.ref=e}),this.reactElement=he.jsx(t,{...o}),null==(e=null==r?void 0:r.contentComponent)||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;null==(e=null==t?void 0:t.contentComponent)||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}};xe.createContext({markViewContentRef:()=>{}});var cD=class extends zI{constructor(e,t,n){if(super(e,t,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const e=this.dom.querySelector("[data-node-view-content]");if(!e)return;e.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode(),ref:de.createRef()};if(!this.component.displayName){const e=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=e(this.extension.name)}const t={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&(e.hasAttribute("data-node-view-wrapper")&&e.removeAttribute("data-node-view-wrapper"),e.appendChild(this.contentDOMElement))}},n=this.component,r=de.memo(e=>he.jsx(sD.Provider,{value:t,children:de.createElement(n,e)}));r.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:i=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new lD(r,{editor:this.editor,props:e,as:s,className:`node-${this.node.type.name} ${i}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null==(e=this.renderer.element.firstElementChild)?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n)if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,n){const r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){const s=this.node,i=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:t,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){const t=this.editor.extensionManager.attributes,n=vL(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};var uD=(e,t)=>{if("slot"===e)return 0;if(e instanceof Function)return e(t);const{children:n,...r}=null!=t?t:{};if("svg"===e)throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},dD=/^\s*>\s$/,hD=PI.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return uD("blockquote",{...xL(this.options.HTMLAttributes,e),children:uD("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[II({find:dD,type:this.type})]}}),pD=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,fD=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,mD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,gD=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,yD=tO.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return uD("strong",{...xL(this.options.HTMLAttributes,e),children:uD("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[LI({find:pD,type:this.type}),LI({find:mD,type:this.type})]},addPasteRules(){return[FI({find:fD,type:this.type}),FI({find:gD,type:this.type})]}}),xD=/(^|[^`])`([^`]+)`(?!`)$/,vD=/(^|[^`])`([^`]+)`(?!`)/g,bD=tO.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[LI({find:xD,type:this.type})]},addPasteRules(){return[FI({find:vD,type:this.type})]}}),CD=/^```([a-z]+)?[\s\n]$/,wD=/^~~~([a-z]+)?[\s\n]$/,kD=PI.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const r=[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",xL(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=null!=(t=this.options.tabSize)?t:4,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?e.commands.insertContent(a):e.commands.command(({tr:e})=>{const{from:t,to:n}=s,i=r.doc.textBetween(t,n,"\n","\n").split("\n").map(e=>a+e).join("\n");return e.replaceWith(t,n,r.schema.text(i)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=null!=(t=this.options.tabSize)?t:4,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type===this.type&&(o?e.commands.command(({tr:e})=>{var t;const{pos:s}=i,o=i.start(),a=i.end(),l=r.doc.textBetween(o,a,"\n","\n").split("\n");let c=0,u=0;const d=s-o;for(let n=0;n<l.length;n+=1){if(u+l[n].length>=d){c=n;break}u+=l[n].length+1}const h=(null==(t=l[c].match(/^ */))?void 0:t[0])||"",p=Math.min(h.length,n);if(0===p)return!0;let f=o;for(let n=0;n<c;n+=1)f+=l[n].length+1;e.delete(f,f+p);return s-f<=p&&e.setSelection(JM.create(e.doc,f)),!0}):e.commands.command(({tr:e})=>{const{from:t,to:i}=s,o=r.doc.textBetween(t,i,"\n","\n").split("\n").map(e=>{var t;const r=(null==(t=e.match(/^ */))?void 0:t[0])||"",s=Math.min(r.length,n);return e.slice(s)}).join("\n");return e.replaceWith(t,i,r.schema.text(o)),!0}))},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith("\n\n");return!(!i||!o)&&e.chain().command(({tr:e})=>(e.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type)return!1;if(!(s.parentOffset===s.parent.nodeSize-2))return!1;const o=s.after();if(void 0===o)return!1;return r.nodeAt(o)?e.commands.command(({tr:e})=>(e.setSelection(ZM.near(r.resolve(o))),!0)):e.commands.exitCode()}}},addInputRules(){return[OI({find:CD,type:this.type,getAttributes:e=>({language:e[1]})}),OI({find:wD,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new uN({key:new pN("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=null==s?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(JM.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),SD=PI.create({name:"doc",topNode:!0,content:"block+"}),MD=PI.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",xL(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:e,storedMarks:s}=n;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:o}=r.extensionManager,a=s||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&a&&i){const t=a.filter(e=>o.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ND=PI.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,xL(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>OI({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),_D=PI.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{},nextNodeType:"paragraph"}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",xL(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!function(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof YM){const e=r.index();return r.parent.canReplaceWith(e,e+1,t)}let s=r.depth;for(;s>=0;){const e=r.index(s);if(r.node(s).contentMatchAt(e).matchType(t))return!0;s-=1}return!1}(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return WL(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:e,tr:t,dispatch:n})=>{if(n){const{$to:n}=t.selection,r=n.end();if(n.nodeAfter)n.nodeAfter.isTextblock?t.setSelection(JM.create(t.doc,n.pos+1)):n.nodeAfter.isBlock?t.setSelection(YM.create(t.doc,n.pos)):t.setSelection(JM.create(t.doc,n.pos));else{const s=e.schema.nodes[this.options.nextNodeType]||n.parent.type.contentMatch.defaultType,i=null==s?void 0:s.create();i&&(t.insert(r,i),t.setSelection(JM.create(t.doc,r+1)))}t.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(e={find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type},new KL({find:e.find,handler:({state:t,range:n,match:r})=>{const s=mL(e.getAttributes,void 0,r)||{},{tr:i}=t,o=n.from;let a=n.to;const l=e.type.create(s);if(r[1]){let e=o+r[0].lastIndexOf(r[1]);e>a?e=a:a=e+r[1].length;const t=r[0][r[0].length-1];i.insertText(t,o+r[0].length-1),i.replaceWith(e,a,l)}else if(r[0]){const t=e.type.isInline?o:o-1;i.insert(t,e.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:e.undoable}))];var e}}),jD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ED=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,TD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,LD=tO.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[LI({find:jD,type:this.type}),LI({find:TD,type:this.type})]},addPasteRules(){return[FI({find:ED,type:this.type}),FI({find:AD,type:this.type})]}});const OD="numeric",ID="ascii",DD="alpha",RD="asciinumeric",PD="alphanumeric",zD="domain",FD="emoji",HD="scheme",VD="slashscheme",$D="whitespace";function BD(e,t){return e in t||(t[e]=[]),t[e]}function UD(e,t,n){t[OD]&&(t[RD]=!0,t[PD]=!0),t[ID]&&(t[RD]=!0,t[DD]=!0),t[RD]&&(t[PD]=!0),t[DD]&&(t[PD]=!0),t[PD]&&(t[zD]=!0),t[FD]&&(t[zD]=!0);for(const r in t){const t=BD(r,n);t.indexOf(e)<0&&t.push(e)}}function ZD(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ZD.groups={},ZD.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const n=t.jr[r][0],s=t.jr[r][1];if(s&&n.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){let s;return r=r||ZD.groups,t&&t.j?s=t:(s=new ZD(t),n&&r&&UD(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const i=e.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(e[o]);return s.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||ZD.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const i=t;let o,a=s.go(e);if(a?(o=new ZD,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new ZD,i){if(r)if(o.t&&"string"==typeof o.t){const e=Object.assign(function(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(o.t,r),n);UD(i,e,r)}else n&&UD(i,n,r);o.t=i}return s.j[e]=o,o}};const WD=(e,t,n,r,s)=>e.ta(t,n,r,s),qD=(e,t,n,r,s)=>e.tr(t,n,r,s),GD=(e,t,n,r,s)=>e.ts(t,n,r,s),JD=(e,t,n,r,s)=>e.tt(t,n,r,s),KD="WORD",YD="UWORD",QD="ASCIINUMERICAL",XD="ALPHANUMERICAL",eR="LOCALHOST",tR="TLD",nR="UTLD",rR="SCHEME",sR="SLASH_SCHEME",iR="NUM",oR="WS",aR="NL",lR="OPENBRACE",cR="CLOSEBRACE",uR="OPENBRACKET",dR="CLOSEBRACKET",hR="OPENPAREN",pR="CLOSEPAREN",fR="OPENANGLEBRACKET",mR="CLOSEANGLEBRACKET",gR="FULLWIDTHLEFTPAREN",yR="FULLWIDTHRIGHTPAREN",xR="LEFTCORNERBRACKET",vR="RIGHTCORNERBRACKET",bR="LEFTWHITECORNERBRACKET",CR="RIGHTWHITECORNERBRACKET",wR="FULLWIDTHLESSTHAN",kR="FULLWIDTHGREATERTHAN",SR="AMPERSAND",MR="APOSTROPHE",NR="ASTERISK",_R="AT",jR="BACKSLASH",ER="BACKTICK",TR="CARET",AR="COLON",LR="COMMA",OR="DOLLAR",IR="DOT",DR="EQUALS",RR="EXCLAMATION",PR="HYPHEN",zR="PERCENT",FR="PIPE",HR="PLUS",VR="POUND",$R="QUERY",BR="QUOTE",UR="FULLWIDTHMIDDLEDOT",ZR="SEMI",WR="SLASH",qR="TILDE",GR="UNDERSCORE",JR="EMOJI",KR="SYM";var YR=Object.freeze({__proto__:null,ALPHANUMERICAL:XD,AMPERSAND:SR,APOSTROPHE:MR,ASCIINUMERICAL:QD,ASTERISK:NR,AT:_R,BACKSLASH:jR,BACKTICK:ER,CARET:TR,CLOSEANGLEBRACKET:mR,CLOSEBRACE:cR,CLOSEBRACKET:dR,CLOSEPAREN:pR,COLON:AR,COMMA:LR,DOLLAR:OR,DOT:IR,EMOJI:JR,EQUALS:DR,EXCLAMATION:RR,FULLWIDTHGREATERTHAN:kR,FULLWIDTHLEFTPAREN:gR,FULLWIDTHLESSTHAN:wR,FULLWIDTHMIDDLEDOT:UR,FULLWIDTHRIGHTPAREN:yR,HYPHEN:PR,LEFTCORNERBRACKET:xR,LEFTWHITECORNERBRACKET:bR,LOCALHOST:eR,NL:aR,NUM:iR,OPENANGLEBRACKET:fR,OPENBRACE:lR,OPENBRACKET:uR,OPENPAREN:hR,PERCENT:zR,PIPE:FR,PLUS:HR,POUND:VR,QUERY:$R,QUOTE:BR,RIGHTCORNERBRACKET:vR,RIGHTWHITECORNERBRACKET:CR,SCHEME:rR,SEMI:ZR,SLASH:WR,SLASH_SCHEME:sR,SYM:KR,TILDE:qR,TLD:tR,UNDERSCORE:GR,UTLD:nR,UWORD:YD,WORD:KD,WS:oR});const QR=/[a-z]/,XR=new RegExp("\\p{L}","u"),eP=new RegExp("\\p{Emoji}","u"),tP=/\d/,nP=/\s/;let rP=null,sP=null;function iP(e,t){const n=function(e){const t=[],n=e.length;let r=0;for(;r<n;){let s,i=e.charCodeAt(r),o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=e,l=null,c=0,u=null,d=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[o].length,h++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=h,c-=d,s.push({t:u.t,v:t.slice(i-c,i),s:i-c,e:i})}return s}function oP(e,t,n,r,s){let i;const o=t.length;for(let a=0;a<o-1;a++){const n=t[a];e.j[n]?i=e.j[n]:(i=new ZD(r),i.jr=s.slice(),e.j[n]=i),e=i}return i=new ZD(n),i.jr=s.slice(),e.j[t[o-1]]=i,i}function aP(e){const t=[],n=[];let r=0;for(;r<e.length;){let s=0;for(;"0123456789".indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+s),10);t>0;t--)n.pop();r+=s}else n.push(e[r]),r++}return t}const lP={defaultProtocol:"http",events:null,format:uP,formatHref:uP,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function cP(e,t=null){let n=Object.assign({},lP);e&&(n=Object.assign(n,e instanceof cP?e.o:e));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}function uP(e){return e}function dP(e,t){this.t="token",this.v=e,this.tk=t}function hP(e,t){class n extends dP{constructor(t,n){super(t,n),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}cP.prototype={o:lP,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=null!=t;let s=this.o[e];return s?("object"==typeof s?(s=n.t in s?s[n.t]:lP[e],"function"==typeof s&&r&&(s=s(t,n))):"function"==typeof s&&r&&(s=s(t,n.t,n)),s):s},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},dP.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=lP.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),i=this.toFormattedString(e),o={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};const pP=hP("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),fP=hP("text"),mP=hP("nl"),gP=hP("url",{isLink:!0,toHref(e=lP.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==eR&&e[1].t===AR}}),yP=e=>new ZD(e);function xP(e,t,n){const r=n[0].s,s=n[n.length-1].e;return new e(t.slice(r,s),n)}const vP="undefined"!=typeof console&&console&&console.warn||(()=>{}),bP={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function CP(e,t=!1){if(bP.initialized&&vP(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');bP.customSchemes.push([e,t])}function wP(){bP.scanner=function(e=[]){const t={};ZD.groups=t;const n=new ZD;null==rP&&(rP=aP("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==sP&&(sP=aP("ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2")),JD(n,"'",MR),JD(n,"{",lR),JD(n,"}",cR),JD(n,"[",uR),JD(n,"]",dR),JD(n,"(",hR),JD(n,")",pR),JD(n,"<",fR),JD(n,">",mR),JD(n,"（",gR),JD(n,"）",yR),JD(n,"「",xR),JD(n,"」",vR),JD(n,"『",bR),JD(n,"』",CR),JD(n,"＜",wR),JD(n,"＞",kR),JD(n,"&",SR),JD(n,"*",NR),JD(n,"@",_R),JD(n,"`",ER),JD(n,"^",TR),JD(n,":",AR),JD(n,",",LR),JD(n,"$",OR),JD(n,".",IR),JD(n,"=",DR),JD(n,"!",RR),JD(n,"-",PR),JD(n,"%",zR),JD(n,"|",FR),JD(n,"+",HR),JD(n,"#",VR),JD(n,"?",$R),JD(n,'"',BR),JD(n,"/",WR),JD(n,";",ZR),JD(n,"~",qR),JD(n,"_",GR),JD(n,"\\",jR),JD(n,"・",UR);const r=qD(n,tP,iR,{[OD]:!0});qD(r,tP,r);const s=qD(r,QR,QD,{[RD]:!0}),i=qD(r,XR,XD,{[PD]:!0}),o=qD(n,QR,KD,{[ID]:!0});qD(o,tP,s),qD(o,QR,o),qD(s,tP,s),qD(s,QR,s);const a=qD(n,XR,YD,{[DD]:!0});qD(a,QR),qD(a,tP,i),qD(a,XR,a),qD(i,tP,i),qD(i,QR),qD(i,XR,i);const l=JD(n,"\n",aR,{[$D]:!0}),c=JD(n,"\r",oR,{[$D]:!0}),u=qD(n,nP,oR,{[$D]:!0});JD(n,"￼",u),JD(c,"\n",l),JD(c,"￼",u),qD(c,nP,u),JD(u,"\r"),JD(u,"\n"),qD(u,nP,u),JD(u,"￼",u);const d=qD(n,eP,JR,{[FD]:!0});JD(d,"#"),qD(d,eP,d),JD(d,"️",d);const h=JD(d,"‍");JD(h,"#"),qD(h,eP,d);const p=[[QR,o],[tP,s]],f=[[QR,null],[XR,a],[tP,i]];for(let m=0;m<rP.length;m++)oP(n,rP[m],tR,KD,p);for(let m=0;m<sP.length;m++)oP(n,sP[m],nR,YD,f);UD(tR,{tld:!0,ascii:!0},t),UD(nR,{utld:!0,alpha:!0},t),oP(n,"file",rR,KD,p),oP(n,"mailto",rR,KD,p),oP(n,"http",sR,KD,p),oP(n,"https",sR,KD,p),oP(n,"ftp",sR,KD,p),oP(n,"ftps",sR,KD,p),UD(rR,{scheme:!0,ascii:!0},t),UD(sR,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let m=0;m<e.length;m++){const t=e[m][0],r=e[m][1]?{[HD]:!0}:{[VD]:!0};t.indexOf("-")>=0?r[zD]=!0:QR.test(t)?tP.test(t)?r[RD]=!0:r[ID]=!0:r[OD]=!0,GD(n,t,t,r)}return GD(n,"localhost",eR,{ascii:!0}),n.jd=new ZD(KR),{start:n,tokens:Object.assign({groups:t},YR)}}(bP.customSchemes);for(let e=0;e<bP.tokenQueue.length;e++)bP.tokenQueue[e][1]({scanner:bP.scanner});bP.parser=function({groups:e}){const t=e.domain.concat([SR,NR,_R,jR,ER,TR,OR,DR,PR,iR,zR,FR,HR,VR,WR,KR,qR,GR]),n=[MR,AR,LR,IR,RR,zR,$R,BR,ZR,fR,mR,lR,cR,dR,uR,hR,pR,gR,yR,xR,vR,bR,CR,wR,kR],r=[SR,MR,NR,jR,ER,TR,OR,DR,PR,lR,cR,zR,FR,HR,VR,$R,WR,KR,qR,GR],s=yP(),i=JD(s,qR);WD(i,r,i),WD(i,e.domain,i);const o=yP(),a=yP(),l=yP();WD(s,e.domain,o),WD(s,e.scheme,a),WD(s,e.slashscheme,l),WD(o,r,i),WD(o,e.domain,o);const c=JD(o,_R);JD(i,_R,c),JD(a,_R,c),JD(l,_R,c);const u=JD(i,IR);WD(u,r,i),WD(u,e.domain,i);const d=yP();WD(c,e.domain,d),WD(d,e.domain,d);const h=JD(d,IR);WD(h,e.domain,d);const p=yP(pP);WD(h,e.tld,p),WD(h,e.utld,p),JD(c,eR,p);const f=JD(d,PR);JD(f,PR,f),WD(f,e.domain,d),WD(p,e.domain,d),JD(p,IR,h),JD(p,PR,f);const m=JD(p,AR);WD(m,e.numeric,pP);const g=JD(o,PR),y=JD(o,IR);JD(g,PR,g),WD(g,e.domain,o),WD(y,r,i),WD(y,e.domain,o);const x=yP(gP);WD(y,e.tld,x),WD(y,e.utld,x),WD(x,e.domain,o),WD(x,r,i),JD(x,IR,y),JD(x,PR,g),JD(x,_R,c);const v=JD(x,AR),b=yP(gP);WD(v,e.numeric,b);const C=yP(gP),w=yP();WD(C,t,C),WD(C,n,w),WD(w,t,C),WD(w,n,w),JD(x,WR,C),JD(b,WR,C);const k=JD(a,AR),S=JD(l,AR),M=JD(S,WR),N=JD(M,WR);WD(a,e.domain,o),JD(a,IR,y),JD(a,PR,g),WD(l,e.domain,o),JD(l,IR,y),JD(l,PR,g),WD(k,e.domain,C),JD(k,WR,C),JD(k,$R,C),WD(N,e.domain,C),WD(N,t,C),JD(N,WR,C);const _=[[lR,cR],[uR,dR],[hR,pR],[fR,mR],[gR,yR],[xR,vR],[bR,CR],[wR,kR]];for(let j=0;j<_.length;j++){const[e,r]=_[j],s=JD(C,e);JD(w,e,s),JD(s,r,C);const i=yP(gP);WD(s,t,i);const o=yP();WD(s,n),WD(i,t,i),WD(i,n,o),WD(o,t,i),WD(o,n,o),JD(i,r,C),JD(o,r,C)}return JD(s,eR,x),JD(s,aR,mP),{start:s,tokens:YR}}(bP.scanner.tokens);for(let e=0;e<bP.pluginQueue.length;e++)bP.pluginQueue[e][1]({scanner:bP.scanner,parser:bP.parser});return bP.initialized=!0,bP}function kP(e){return bP.initialized||wP(),function(e,t,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=e,l=null,c=null,u=0,d=null,h=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,s++,u++;if(h<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(xP(fP,t,o)),o=[]),s-=h,u-=h;const e=d.t,r=n.slice(s-u,s);i.push(xP(e,t,r))}}return o.length>0&&i.push(xP(fP,t,o)),i}(bP.parser.start,e,iP(bP.scanner.start,e))}function SP(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new cP(n),s=kP(e),i=[];for(let o=0;o<s.length;o++){const e=s[o];!e.isLink||t&&e.t!==t||!r.check(e)||i.push(e.toFormattedObject(r))}return i}kP.scan=iP;var MP="[\0-   ᠎ -\u2029 　]",NP=new RegExp(MP),_P=new RegExp(`${MP}$`),jP=new RegExp(MP,"g");function EP(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{const t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(jP,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var TP=tO.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate),this.options.protocols.forEach(e=>{"string"!=typeof e?CP(e.scheme,e.optionalSlashes):CP(e)})},onDestroy(){ZD.groups={},bP.scanner=null,bP.parser=null,bP.tokenQueue=[],bP.pluginQueue=[],bP.customSchemes=[],bP.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!EP(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!(!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!EP(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!EP(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",xL(this.options.HTMLAttributes,e),0]:["a",xL(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!EP(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return!(n&&!this.options.isAllowedUri(n,{defaultValidate:e=>!!EP(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[FI({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=SP(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!EP(e,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null==(t=e.data)?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(function(e){return new uN({key:new pN("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(e=>e.docChanged)&&!n.doc.eq(r.doc),i=t.some(e=>e.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r;return LL(iL(n.doc,[...t])).forEach(({newRange:t})=>{const n=function(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}(r.doc,t,e=>e.isTextblock);let s,i;if(n.length>1)s=n[0],i=r.doc.textBetween(s.pos,s.pos+s.node.nodeSize,void 0," ");else if(n.length){const e=r.doc.textBetween(t.from,t.to," "," ");if(!_P.test(e))return;s=n[0],i=r.doc.textBetween(s.pos,t.to,void 0," ")}if(s&&i){const t=i.split(NP).filter(Boolean);if(t.length<=0)return!1;const n=t[t.length-1],l=s.pos+i.lastIndexOf(n);if(!n)return!1;const c=kP(n).map(t=>t.toObject(e.defaultProtocol));if(!(1===(a=c).length?a[0].isLink:3===a.length&&a[1].isLink&&["()","[]"].includes(a[0].value+a[2].value)))return!1;c.filter(e=>e.isLink).map(e=>({...e,from:l+e.start+1,to:l+e.end+1})).filter(e=>!r.schema.marks.code||!r.doc.rangeHasMark(e.from,e.to,r.schema.marks.code)).filter(t=>e.validate(t.value)).filter(t=>e.shouldAutoLink(t.value)).forEach(t=>{zL(t.from,t.to,r.doc).some(t=>t.mark.type===e.type)||o.addMark(t.from,t.to,e.type.create({href:t.href}))})}var a}),o.steps.length?o:void 0}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!EP(e,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),!0===this.options.openOnClick&&e.push(function(e){return new uN({key:new pN("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,i;if(0!==r.button)return!1;if(!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let e=r.target;const t=[];for(;"DIV"!==e.nodeName;)t.push(e),e=e.parentNode;o=t.find(e=>"A"===e.nodeName)}if(!o)return!1;const a=TL(t.state,e.type.name),l=null!=(s=null==o?void 0:o.href)?s:a.href,c=null!=(i=null==o?void 0:o.target)?i:a.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),!(!o||!l||(window.open(l,c),0))}}})}({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(function(e){return new uN({key:new pN("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:s}=t,{selection:i}=s,{empty:o}=i;if(o)return!1;let a="";r.content.forEach(e=>{a+=e.textContent});const l=SP(a,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===a);return!(!a||!l)&&e.editor.commands.setMark(e.type,{href:l.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),AP=Object.defineProperty,LP="textStyle",OP=/^\s*([-+*])\s$/,IP=PI.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(LP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=II({find:OP,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=II({find:OP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(LP),editor:this.editor})),[e]}}),DP=PI.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",xL(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});((e,t)=>{for(var n in t)AP(e,n,{get:t[n],enumerable:!0})})({},{findListItemPos:()=>RP,getNextListDepth:()=>PP,handleBackspace:()=>VP,handleDelete:()=>UP,hasListBefore:()=>zP,hasListItemAfter:()=>ZP,hasListItemBefore:()=>FP,listItemHasSubList:()=>HP,nextListIsDeeper:()=>$P,nextListIsHigher:()=>BP});var RP=(e,t)=>{const{$from:n}=t.selection,r=jL(e,t.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&null===a;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return null===a?null:{$pos:t.doc.resolve(o),depth:a}},PP=(e,t)=>{const n=RP(e,t);if(!n)return!1;const[,r]=((e,t,n,r=20)=>{const s=e.doc.resolve(n);let i=r,o=null;for(;i>0&&null===o;){const e=s.node(i);(null==e?void 0:e.type.name)===t?o=e:i-=1}return[o,i]})(t,e,n.$pos.pos+4);return r},zP=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),i=e.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},FP=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return 0!==s.index()&&(null==(n=s.nodeBefore)?void 0:n.type.name)===e},HP=(e,t,n)=>{if(!n)return!1;const r=jL(e,t.schema);let s=!1;return n.descendants(e=>{e.type===r&&(s=!0)}),s},VP=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!$L(e.state,t)&&zP(e.state,t,n)){const{$anchor:n}=e.state.selection,r=e.state.doc.resolve(n.before()-1),s=[];r.node().descendants((e,n)=>{e.type.name===t&&s.push({node:e,pos:n})});const i=s.at(-1);if(!i)return!1;const o=e.state.doc.resolve(r.start()+i.pos+1);return e.chain().cut({from:n.start()-1,to:n.end()+1},o.end()).joinForward().run()}if(!$L(e.state,t))return!1;if(!(e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)})(e.state))return!1;const r=RP(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=HP(t,e.state,s);return FP(t,e.state)&&!i?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},$P=(e,t)=>{const n=PP(e,t),r=RP(e,t);return!(!r||!n)&&n>r.depth},BP=(e,t)=>{const n=PP(e,t),r=RP(e,t);return!(!r||!n)&&n<r.depth},UP=(e,t)=>{if(!$L(e.state,t))return!1;if(!((e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const n=uL(e=>e.type.name===t)(e.selection);if(!n)return!1;const r=e.doc.resolve(n.pos+1);return s.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)})(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!(!n.empty&&r.sameParent(s))&&($P(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():BP(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward())},ZP=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return s.index()!==s.parent.childCount-1&&(null==(n=s.nodeAfter)?void 0:n.type.name)===e},WP=aO.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&UP(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{void 0!==e.state.schema.nodes[n]&&UP(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&VP(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{void 0!==e.state.schema.nodes[n]&&VP(e,n,r)&&(t=!0)}),t}}}}),qP="textStyle",GP=/^(\d+)\.\s$/,JP=PI.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",xL(this.options.HTMLAttributes,n),0]:["ol",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(qP)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=II({find:GP,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=II({find:GP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(qP)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),KP=/^\s*(\[([( |x])?\])\s$/,YP=PI.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return""===t||"true"===t},renderHTML:e=>({"data-checked":e.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",xL(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=e=>{var t,n;a.ariaLabel=(null==(n=null==(t=this.options.a11y)?void 0:t.checkboxLabel)?void 0:n.call(t,e,a.checked))||`Task item checkbox for ${e.textContent||"empty task item"}`};return c(e),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",e=>e.preventDefault()),a.addEventListener("change",t=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:s}=t.target;r.isEditable&&"function"==typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:e})=>{const t=n();if("number"!=typeof t)return!1;const r=e.doc.nodeAt(t);return e.setNodeMarkup(t,void 0,{...null==r?void 0:r.attrs,checked:s}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,s)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([e,t])=>{s.setAttribute(e,t)}),s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(t).forEach(([e,t])=>{s.setAttribute(e,t)}),{dom:s,contentDOM:l,update:e=>e.type===this.type&&(s.dataset.checked=e.attrs.checked,a.checked=e.attrs.checked,c(e),!0)}}},addInputRules(){return[II({find:KP,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}}),QP=PI.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",xL(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});aO.create({name:"listKit",addExtensions(){const e=[];return!1!==this.options.bulletList&&e.push(IP.configure(this.options.bulletList)),!1!==this.options.listItem&&e.push(DP.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(WP.configure(this.options.listKeymap)),!1!==this.options.orderedList&&e.push(JP.configure(this.options.orderedList)),!1!==this.options.taskItem&&e.push(YP.configure(this.options.taskItem)),!1!==this.options.taskList&&e.push(QP.configure(this.options.taskList)),e}});var XP=PI.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ez=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nz=tO.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[LI({find:ez,type:this.type})]},addPasteRules(){return[FI({find:tz,type:this.type})]}}),rz=PI.create({name:"text",group:"inline"}),sz=tO.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML({HTMLAttributes:e}){return["u",xL(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function iz(e={}){return new uN({view:t=>new oz(t,e)})}class oz{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r=this.editorView.dom,s=r.getBoundingClientRect(),i=s.width/r.offsetWidth,o=s.height/r.offsetHeight;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let s=t.getBoundingClientRect(),i=n?s.bottom:s.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let a=this.width/2*o;e={left:s.left,right:s.right,top:i-a,bottom:i+a}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos),n=this.width/2*i;e={left:t.left-n,right:t.left+n,top:t.top,bottom:t.bottom}}let a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{let e=c.getBoundingClientRect(),t=e.width/c.offsetWidth,n=e.height/c.offsetHeight;a=e.left-c.scrollLeft*t,l=e.top-c.scrollTop*n}this.element.style.left=(e.left-a)/i+"px",this.element.style.top=(e.top-l)/o+"px",this.element.style.width=(e.right-e.left)/i+"px",this.element.style.height=(e.bottom-e.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,s="function"==typeof r?r(this.editorView,t,e):r;if(t&&!s){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=TM(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class az extends ZM{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return az.valid(n)?new az(n):ZM.near(n)}content(){return hS.empty}eq(e){return e instanceof az&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new az(e.resolve(t.pos))}getBookmark(){return new lz(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&az.valid(e))return e;let r=e.pos,s=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){s=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let o=e.doc.resolve(r);if(az.valid(o))return o}for(;;){let i=t>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!YM.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*t),n=!1;continue e}break}s=i,r+=t;let o=e.doc.resolve(r);if(az.valid(o))return o}return null}}}az.prototype.visible=!1,az.findFrom=az.findGapCursorFrom,ZM.jsonID("gapcursor",az);class lz{constructor(e){this.pos=e}map(e){return new lz(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return az.valid(t)?new az(t):ZM.near(t)}}const cz=$E({ArrowLeft:uz("horiz",-1),ArrowRight:uz("horiz",1),ArrowUp:uz("vert",-1),ArrowDown:uz("vert",1)});function uz(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,s){let i=e.selection,o=t>0?i.$to:i.$from,a=i.empty;if(i instanceof JM){if(!s.endOfTextblock(n)||0==o.depth)return!1;a=!1,o=e.doc.resolve(t>0?o.after():o.before())}let l=az.findGapCursorFrom(o,t,a);return!!l&&(r&&r(e.tr.setSelection(new az(l))),!0)}}function dz(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!az.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return!(s&&s.inside>-1&&YM.isSelectable(e.state.doc.nodeAt(s.inside)))&&(e.dispatch(e.state.tr.setSelection(new az(r))),!0)}function hz(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof az))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=oS.empty;for(let o=r.length-1;o>=0;o--)s=oS.from(r[o].createAndFill(null,s));let i=e.state.tr.replace(n.pos,n.pos,new hS(s,0,0));return i.setSelection(JM.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function pz(e){if(!(e.selection instanceof az))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Xj.create(e.doc,[Kj.widget(e.selection.head,t,{key:"gapcursor"})])}var fz=200,mz=function(){};mz.prototype.append=function(e){return e.length?(e=mz.from(e),!this.length&&e||e.length<fz&&this.leafAppend(e)||this.length<fz&&e.leafPrepend(this)||this.appendInner(e)):this},mz.prototype.prepend=function(e){return e.length?mz.from(e).append(this):this},mz.prototype.appendInner=function(e){return new yz(this,e)},mz.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?mz.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},mz.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},mz.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},mz.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},mz.from=function(e){return e instanceof mz?e:e&&e.length?new gz(e):mz.empty};var gz=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var s=t;s<n;s++)if(!1===e(this.values[s],r+s))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var s=t-1;s>=n;s--)if(!1===e(this.values[s],r+s))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=fz)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=fz)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(mz);mz.empty=new gz([]);var yz=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var s=this.left.length;return!(t<s&&!1===this.left.forEachInner(e,t,Math.min(n,s),r))&&(!(n>s&&!1===this.right.forEachInner(e,Math.max(t-s,0),Math.min(this.length,n)-s,r+s))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var s=this.left.length;return!(t>s&&!1===this.right.forEachInvertedInner(e,t-s,Math.max(n,s)-s,r+s))&&(!(n<s&&!1===this.left.forEachInvertedInner(e,Math.min(t,s),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(mz),xz=mz;class vz{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,s=this.items.length;for(;;s--){if(this.items.get(s-1).selection){--s;break}}t&&(n=this.remapping(s,this.items.length),r=n.maps.length);let i,o,a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(s,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new bz(e.map));let t,s=e.step.map(n.slice(r));s&&a.maybeStep(s).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new bz(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,o=new vz(this.items.slice(0,s).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:o,transform:a,selection:i}}addTransform(e,t,n,r){let s=[],i=this.eventCount,o=this.items,a=!r&&o.length?o.get(o.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new bz(e.mapping.maps[c],l,t);(n=a&&a.merge(u))&&(u=n,c?s.pop():o=o.slice(0,o.length-1)),s.push(u),t&&(i++,t=void 0),r||(a=u)}let l=i-n.depth;return l>wz&&(o=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(o,l),i-=l),new vz(o.append(s),i)}remapping(e,t){let n=new xM;return this.items.forEach((t,r)=>{let s=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,s)},e,t),n}addMaps(e){return 0==this.eventCount?this:new vz(this.items.append(e.map(e=>new bz(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),s=e.mapping,i=e.steps.length,o=this.eventCount;this.items.forEach(e=>{e.selection&&o--},r);let a=t;this.items.forEach(t=>{let r=s.getMirror(--a);if(null==r)return;i=Math.min(i,r);let l=s.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(s.slice(a+1,r));c&&o++,n.push(new bz(l,i,c))}else n.push(new bz(l))},r);let l=[];for(let d=t;d<i;d++)l.push(new bz(s.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new vz(c,o);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],s=0;return this.items.forEach((i,o)=>{if(o>=e)r.push(i),i.selection&&s++;else if(i.step){let e=i.step.map(t.slice(n)),o=e&&e.getMap();if(n--,o&&t.appendMap(o,n),e){let a=i.selection&&i.selection.map(t.slice(n));a&&s++;let l,c=new bz(o.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else i.map&&n--},this.items.length,0),new vz(xz.from(r.reverse()),s)}}vz.empty=new vz(xz.empty,0);class bz{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new bz(t.getMap().invert(),t,this.selection)}}}class Cz{constructor(e,t,n,r,s){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=s}}const wz=20;function kz(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,s)=>t.push(r,s));return t}function Sz(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}let Mz=!1,Nz=null;function _z(e){let t=e.plugins;if(Nz!=t){Mz=!1,Nz=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Mz=!0;break}}return Mz}const jz=new pN("history"),Ez=new pN("closeHistory");function Tz(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new uN({key:jz,state:{init:()=>new Cz(vz.empty,vz.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let s,i=n.getMeta(jz);if(i)return i.historyState;n.getMeta(Ez)&&(e=new Cz(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(o&&o.getMeta(jz))return o.getMeta(jz).redo?new Cz(e.done.addTransform(n,void 0,r,_z(t)),e.undone,kz(n.mapping.maps),e.prevTime,e.prevComposition):new Cz(e.done,e.undone.addTransform(n,void 0,r,_z(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(s=n.getMeta("rebased"))?new Cz(e.done.rebased(n,s),e.undone.rebased(n,s),Sz(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Cz(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Sz(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let s=n.getMeta("composition"),i=0==e.prevTime||!o&&e.prevComposition!=s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let s=0;s<t.length;s+=2)e<=t[s+1]&&r>=t[s]&&(n=!0)}),n}(n,e.prevRanges)),a=o?Sz(e.prevRanges,n.mapping):kz(n.mapping.maps);return new Cz(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,_z(t)),vz.empty,a,n.time,null==s?e.prevComposition:s)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?Lz:"historyRedo"==n?Oz:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function Az(e,t){return(n,r)=>{let s=jz.getState(n);if(!s||0==(e?s.undone:s.done).eventCount)return!1;if(r){let i=function(e,t,n){let r=_z(t),s=jz.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),s,r),l=new Cz(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(jz,{redo:n,historyState:l})}(s,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const Lz=Az(!1,!0),Oz=Az(!0,!0);aO.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(e=>""!==e).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc;if("textSize"===((null==e?void 0:e.mode)||this.options.mode)){const e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=e=>{const t=(null==e?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new uN({key:new pN("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(null==s||0===s)return void(e=!0);const i=this.storage.characters({node:r.doc});if(i>s){const t=0,n=i-s,o=r.tr.deleteRange(t,n);return e=!0,o}e=!0},filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||0===n||null==n)return!0;const r=this.storage.characters({node:t.doc}),s=this.storage.characters({node:e.doc});if(s<=n)return!0;if(r>n&&s>n&&s<=r)return!0;if(r>n&&s>n&&s>r)return!1;if(!e.getMeta("paste"))return!1;const i=e.selection.$head.pos,o=i-(s-n),a=i;e.deleteRange(o,a);return!(this.storage.characters({node:e.doc})>n)}})]}});var Iz=aO.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[iz(this.options)]}});aO.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new uN({key:new pN("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,i=[];if(!n||!r)return Xj.create(e,[]);let o=0;"deepest"===this.options.mode&&e.descendants((e,t)=>{if(e.isText)return;if(!(s>=t&&s<=t+e.nodeSize-1))return!1;o+=1});let a=0;return e.descendants((e,t)=>{if(e.isText)return!1;if(!(s>=t&&s<=t+e.nodeSize-1))return!1;a+=1;if("deepest"===this.options.mode&&o-a>0||"shallowest"===this.options.mode&&a>1)return"deepest"===this.options.mode;i.push(Kj.node(t,t+e.nodeSize,{class:this.options.className}))}),Xj.create(e,i)}}})]}});var Dz=aO.create({name:"gapCursor",addProseMirrorPlugins:()=>[new uN({props:{decorations:pz,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&az.valid(n)?new az(n):null,handleClick:dz,handleKeyDown:cz,handleDOMEvents:{beforeinput:hz}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!=(t=mL(dL(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))?t:null}}}),Rz=aO.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new uN({key:new pN("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const i=this.editor.isEmpty;return e.descendants((e,t)=>{const n=r>=t&&r<=t+e.nodeSize,o=!e.isLeaf&&ZL(e);if((n||!this.options.showOnlyCurrent)&&o){const r=[this.options.emptyNodeClass];i&&r.push(this.options.emptyEditorClass);const o=Kj.node(t,t+e.nodeSize,{class:r.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});s.push(o)}return this.options.includeChildren}),Xj.create(e,s)}}})]}});function Pz({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(null==t?void 0:t.type)===e}aO.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new uN({key:new pN("selection"),props:{decorations:n=>n.selection.empty||e.isFocused||!e.isEditable||WL(n.selection)||e.view.dragging?null:Xj.create(n.doc,[Kj.inline(n.selection.from,n.selection.to,{class:t.className})])}})]}});var zz=aO.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:[]}),addProseMirrorPlugins(){const e=new pN(this.name),t=Object.entries(this.editor.schema.nodes).map(([,e])=>e).filter(e=>(this.options.notAfter||[]).concat(this.options.node).includes(e.name));return[new uN({key:e,appendTransaction:(t,n,r)=>{const{doc:s,tr:i,schema:o}=r,a=e.getState(r),l=s.content.size,c=o.nodes[this.options.node];if(a)return i.insert(l,c.create())},state:{init:(e,n)=>!Pz({node:n.tr.doc.lastChild,types:t}),apply:(e,n)=>{if(!e.docChanged)return n;return!Pz({node:e.doc.lastChild,types:t})}}})]}}),Fz=aO.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>Lz(e,t),redo:()=>({state:e,dispatch:t})=>Oz(e,t)}),addProseMirrorPlugins(){return[Tz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Hz=aO.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return!1!==this.options.bold&&s.push(yD.configure(this.options.bold)),!1!==this.options.blockquote&&s.push(hD.configure(this.options.blockquote)),!1!==this.options.bulletList&&s.push(IP.configure(this.options.bulletList)),!1!==this.options.code&&s.push(bD.configure(this.options.code)),!1!==this.options.codeBlock&&s.push(kD.configure(this.options.codeBlock)),!1!==this.options.document&&s.push(SD.configure(this.options.document)),!1!==this.options.dropcursor&&s.push(Iz.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&s.push(Dz.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&s.push(MD.configure(this.options.hardBreak)),!1!==this.options.heading&&s.push(ND.configure(this.options.heading)),!1!==this.options.undoRedo&&s.push(Fz.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&s.push(_D.configure(this.options.horizontalRule)),!1!==this.options.italic&&s.push(LD.configure(this.options.italic)),!1!==this.options.listItem&&s.push(DP.configure(this.options.listItem)),!1!==this.options.listKeymap&&s.push(WP.configure(null==(e=this.options)?void 0:e.listKeymap)),!1!==this.options.link&&s.push(TP.configure(null==(t=this.options)?void 0:t.link)),!1!==this.options.orderedList&&s.push(JP.configure(this.options.orderedList)),!1!==this.options.paragraph&&s.push(XP.configure(this.options.paragraph)),!1!==this.options.strike&&s.push(nz.configure(this.options.strike)),!1!==this.options.text&&s.push(rz.configure(this.options.text)),!1!==this.options.underline&&s.push(sz.configure(null==(n=this.options)?void 0:n.underline)),!1!==this.options.trailingNode&&s.push(zz.configure(null==(r=this.options)?void 0:r.trailingNode)),s}}),Vz=Rz;function $z(e,t=10){const n=e.trim().split(/\s+/);if(3!==n.length)throw new Error(`Invalid HSL format: "${e}". Expected format: "H S% L%"`);const r=parseFloat(n[0]),s=parseFloat(n[1]),i=parseFloat(n[2]);if(isNaN(r)||isNaN(s)||isNaN(i))throw new Error(`Invalid HSL values in: "${e}"`);return function(e,t,n){const r=t/100,s=n/100,i=(1-Math.abs(2*s-1))*r,o=i*(1-Math.abs(e/60%2-1)),a=s-i/2;let l=0,c=0,u=0;e>=0&&e<60?(l=i,c=o,u=0):e>=60&&e<120?(l=o,c=i,u=0):e>=120&&e<180?(l=0,c=i,u=o):e>=180&&e<240?(l=0,c=o,u=i):e>=240&&e<300?(l=o,c=0,u=i):e>=300&&e<360&&(l=i,c=0,u=o);const d=Math.round(255*(l+a)),h=Math.round(255*(c+a)),p=Math.round(255*(u+a)),f=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t};return`#${f(d)}${f(h)}${f(p)}`.toUpperCase()}(r,s,Math.min(100,i+t))}const Bz={hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.025,delayChildren:0}}};function Uz({node:e,extension:t,selected:n,editor:r,getPos:s}){const[i,o]=de.useState(!1),a=e.attrs,{id:l,name:c,promptContent:u}=a,d=t.options,h=d?.onEditShortcut,p=de.useMemo(()=>{let e="",t="";if("undefined"!=typeof window)try{const n=getComputedStyle(document.documentElement).getPropertyValue("--accent-secondary-100").trim();n&&(e=$z(n,40),t=$z(n,0))}catch{}return{hidden:{y:4,opacity:0,scale:.9,color:e},visible:{y:0,opacity:1,scale:1,color:t,transition:{y:{type:"spring",stiffness:450,damping:20,velocity:8},opacity:{duration:.2,ease:"easeOut"},scale:{type:"spring",stiffness:400,damping:10},color:{duration:.3,ease:"linear"}}}}},[]),f=qx(0);de.useEffect(()=>{gv(f,1,{duration:.35,ease:"easeOut"})},[f]);const m=Jx`linear-gradient(
    90deg,
    black ${Kx(f,[0,1],[-20,100])}%,
    transparent ${Kx(f,[0,1],[0,120])}%
  )`,g=de.useCallback(()=>{if(!r||"function"!=typeof s)return;const t=u;if(!t)return;const n=s();void 0!==n&&r.chain().focus().deleteRange({from:n,to:n+e.nodeSize}).insertContentAt(n,t).run()},[r,s,u,e.nodeSize]),y=de.useCallback(e=>{h&&(e.preventDefault(),e.stopPropagation(),h(l))},[h,l]),x=he.jsxs(he.Fragment,{children:[he.jsx("span",{className:R("absolute -inset-y-0.5 -left-0.5 -right-1 rounded-md pointer-events-none",n&&"bg-accent-secondary-900",i&&!n&&"bg-accent-secondary-900/50")}),he.jsxs(gn.span,{className:"relative pl-5",style:{maskImage:m},children:[he.jsx(gn.span,{initial:{opacity:0},animate:{opacity:1},className:R("absolute top-1/2 -translate-y-1/2 left-0","w-4 h-4 flex items-center justify-center","select-none"),children:he.jsx(Sx,{size:16})}),he.jsx(gn.span,{className:"relative [&::selection]:bg-transparent inline-flex will-change-transform",variants:Bz,initial:"hidden",animate:"visible",children:c.split("").map((e,t)=>he.jsx(gn.span,{variants:p,className:R("inline-block select-none will-change-transform"," "===e&&"whitespace-pre"),children:e},t))})]})]});return he.jsx(iD,{as:"span",className:R("inline-flex relative cursor-pointer group",n?"text-accent-secondary-000":"text-accent-secondary-100"),contentEditable:!1,"data-drag-handle":!0,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:h?y:void 0,onDoubleClick:e=>{e.preventDefault(),e.stopPropagation(),g()},children:x})}const Zz=PI.create({name:"shortcutChip",addOptions:()=>({onEditShortcut:void 0}),group:"inline",inline:!0,atom:!0,addAttributes:()=>({id:{default:null},name:{default:""},promptContent:{default:null}}),parseHTML:()=>[{tag:"span[data-shortcut-chip]"}],renderHTML:({HTMLAttributes:e})=>["span",xL(e,{"data-shortcut-chip":""}),0],renderText:({node:e})=>`[[shortcut:${e.attrs.id}:${e.attrs.name}]]`,addNodeView:()=>function(e,t){return n=>n.editor.contentComponent?new cD(e,n,t):{}}(Uz),addCommands(){return{insertShortcutChip:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addKeyboardShortcuts(){return{Backspace:()=>{const{selection:e}=this.editor.state,{$from:t,empty:n}=e;if(!n)return!1;const r=t.nodeBefore;if(r&&r.type.name===this.name){const e=t.pos-r.nodeSize;return this.editor.chain().setNodeSelection(e).run(),!0}return!1},Delete:()=>{const{selection:e}=this.editor.state,{$from:t,empty:n}=e;if(!n)return!1;const r=t.nodeAfter;return!(!r||r.type.name!==this.name)&&(this.editor.chain().setNodeSelection(t.pos).run(),!0)}}}});function Wz(e){var t;const{char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:a}=e,l=r&&!s,c=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");const u=new RegExp(`\\s${c}$`),d=o?"^":"",h=s?"":c,p=l?new RegExp(`${d}${c}.*?(?=\\s${h}|$)`,"gm"):new RegExp(`${d}(?:^)?${c}[^\\s${h}]*`,"gm"),f=(null==(t=a.nodeBefore)?void 0:t.isText)&&a.nodeBefore.text;if(!f)return null;const m=a.pos-f.length,g=Array.from(f.matchAll(p)).pop();if(!g||void 0===g.input||void 0===g.index)return null;const y=g.input.slice(Math.max(0,g.index-1),g.index),x=new RegExp(`^[${null==i?void 0:i.join("")}\0]?$`).test(y);if(null!==i&&!x)return null;const v=m+g.index;let b=v+g[0].length;return l&&u.test(f.slice(b-1,b+1))&&(g[0]+=" ",b+=1),v<a.pos&&b>=a.pos?{range:{from:v,to:b},query:g[0].slice(n.length),text:g[0]}:null}var qz=new pN("suggestion");var Gz=function({pluginKey:e=qz,editor:t,char:n="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:i=[" "],startOfLine:o=!1,decorationTag:a="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:u="is-empty",command:d=()=>null,items:h=()=>[],render:p=()=>({}),allow:f=()=>!0,findSuggestionMatch:m=Wz}){let g;const y=null==p?void 0:p(),x=()=>{const e=t.state.selection.$anchor.pos,n=t.view.coordsAtPos(e),{top:r,right:s,bottom:i,left:o}=n;try{return new DOMRect(o,r,s-o,i-r)}catch{return null}},v=(n,r)=>r?()=>{const r=e.getState(t.state),s=null==r?void 0:r.decorationId,i=n.dom.querySelector(`[data-decoration-id="${s}"]`);return(null==i?void 0:i.getBoundingClientRect())||null}:x,b=new uN({key:e,view(){return{update:async(e,n)=>{var r,s,i,o,a,l,c;const u=null==(r=this.key)?void 0:r.getState(n),p=null==(s=this.key)?void 0:s.getState(e.state),f=u.active&&p.active&&u.range.from!==p.range.from,m=!u.active&&p.active,x=u.active&&!p.active,b=!m&&!x&&u.query!==p.query,C=m||f&&b,w=b||f,k=x||f&&b;if(!C&&!w&&!k)return;const S=k&&!C?u:p,M=e.dom.querySelector(`[data-decoration-id="${S.decorationId}"]`);g={editor:t,range:S.range,query:S.query,text:S.text,items:[],command:e=>d({editor:t,range:S.range,props:e}),decorationNode:M,clientRect:v(e,M)},C&&(null==(i=null==y?void 0:y.onBeforeStart)||i.call(y,g)),w&&(null==(o=null==y?void 0:y.onBeforeUpdate)||o.call(y,g)),(w||C)&&(g.items=await h({editor:t,query:S.query})),k&&(null==(a=null==y?void 0:y.onExit)||a.call(y,g)),w&&(null==(l=null==y?void 0:y.onUpdate)||l.call(y,g)),C&&(null==(c=null==y?void 0:y.onStart)||c.call(y,g))},destroy:()=>{var e;g&&(null==(e=null==y?void 0:y.onExit)||e.call(y,g))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(a,l,c,u){const{isEditable:d}=t,{composing:h}=t.view,{selection:p}=a,{empty:g,from:y}=p,x={...l},v=a.getMeta(e);if(v&&v.exit)return x.active=!1,x.decorationId=null,x.range={from:0,to:0},x.query=null,x.text=null,x;if(x.composing=h,d&&(g||t.view.composing)){!(y<l.range.from||y>l.range.to)||h||l.composing||(x.active=!1);const e=m({char:n,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:i,startOfLine:o,$position:p.$from}),a=`id_${Math.floor(4294967295*Math.random())}`;e&&f({editor:t,state:u,range:e.range,isActive:l.active})?(x.active=!0,x.decorationId=l.decorationId?l.decorationId:a,x.range=e.range,x.query=e.query,x.text=e.text):x.active=!1}else x.active=!1;return x.active||(x.decorationId=null,x.range={from:0,to:0},x.query=null,x.text=null),x}},props:{handleKeyDown(n,r){var s,i,o,a;const{active:l,range:c}=b.getState(n.state);if(!l)return!1;if("Escape"===r.key||"Esc"===r.key){const a=b.getState(n.state),l=null!=(s=null==g?void 0:g.decorationNode)?s:null,c=null!=l?l:(null==a?void 0:a.decorationId)?n.dom.querySelector(`[data-decoration-id="${a.decorationId}"]`):null;if((null==(i=null==y?void 0:y.onKeyDown)?void 0:i.call(y,{view:n,event:r,range:a.range}))||!1)return!0;const u={editor:t,range:a.range,query:a.query,text:a.text,items:[],command:e=>d({editor:t,range:a.range,props:e}),decorationNode:c,clientRect:c?()=>c.getBoundingClientRect()||null:null};return null==(o=null==y?void 0:y.onExit)||o.call(y,u),function(n,r){var s;try{const r=e.getState(n.state),i=(null==r?void 0:r.decorationId)?n.dom.querySelector(`[data-decoration-id="${r.decorationId}"]`):null,o={editor:t,range:(null==r?void 0:r.range)||{from:0,to:0},query:(null==r?void 0:r.query)||null,text:(null==r?void 0:r.text)||null,items:[],command:e=>d({editor:t,range:(null==r?void 0:r.range)||{from:0,to:0},props:e}),decorationNode:i,clientRect:v(n,i)};null==(s=null==y?void 0:y.onExit)||s.call(y,o)}catch{}const i=n.state.tr.setMeta(r,{exit:!0});n.dispatch(i)}(n,e),!0}return(null==(a=null==y?void 0:y.onKeyDown)?void 0:a.call(y,{view:n,event:r,range:c}))||!1},decorations(e){const{active:t,range:n,decorationId:r,query:s}=b.getState(e);if(!t)return null;const i=!(null==s?void 0:s.length),o=[l];return i&&o.push(u),Xj.create(e.doc,[Kj.inline(n.from,n.to,{nodeName:a,class:o.join(" "),"data-decoration-id":r,"data-decoration-content":c})])}}});return b};function Jz(e){return Array.isArray?Array.isArray(e):"[object Array]"===nF(e)}function Kz(e){return"string"==typeof e}function Yz(e){return"number"==typeof e}function Qz(e){return!0===e||!1===e||function(e){return Xz(e)&&null!==e}(e)&&"[object Boolean]"==nF(e)}function Xz(e){return"object"==typeof e}function eF(e){return null!=e}function tF(e){return!e.trim().length}function nF(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const rF=Object.prototype.hasOwnProperty;class sF{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=iF(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function iF(e){let t=null,n=null,r=null,s=1,i=null;if(Kz(e)||Jz(e))r=e,t=oF(e),n=aF(e);else{if(!rF.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const o=e.name;if(r=o,rF.call(e,"weight")&&(s=e.weight,s<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(o));t=oF(o),n=aF(o),i=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:i}}function oF(e){return Jz(e)?e:e.split(".")}function aF(e){return Jz(e)?e.join("."):e}const lF={useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const s=(e,t,i)=>{if(eF(e))if(t[i]){const o=e[t[i]];if(!eF(o))return;if(i===t.length-1&&(Kz(o)||Yz(o)||Qz(o)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(Jz(o)){r=!0;for(let e=0,n=o.length;e<n;e+=1)s(o[e],t,i+1)}else t.length&&s(o,t,i+1)}else n.push(e)};return s(e,Kz(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var cF={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...lF};const uF=/[^ ]+/g;class dF{constructor({getFn:e=cF.getFn,fieldNormWeight:t=cF.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const s=t.match(uF).length;if(n.has(s))return n.get(s);const i=1/Math.pow(s,.5*e),o=parseFloat(Math.round(i*r)/r);return n.set(s,o),o},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Kz(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Kz(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!eF(e)||tF(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,r)=>{let s=t.getFn?t.getFn(e):this.getFn(e,t.path);if(eF(s))if(Jz(s)){let e=[];const t=[{nestedArrIndex:-1,value:s}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(eF(r))if(Kz(r)&&!tF(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else Jz(r)&&r.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[r]=e}else if(Kz(s)&&!tF(s)){let e={v:s,n:this.norm.get(s)};n.$[r]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function hF(e,t,{getFn:n=cF.getFn,fieldNormWeight:r=cF.fieldNormWeight}={}){const s=new dF({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(iF)),s.setSources(t),s.create(),s}function pF(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=cF.distance,ignoreLocation:i=cF.ignoreLocation}={}){const o=t/e.length;if(i)return o;const a=Math.abs(r-n);return s?o+a/s:a?1:o}const fF=32;function mF(e,t,n,{location:r=cF.location,distance:s=cF.distance,threshold:i=cF.threshold,findAllMatches:o=cF.findAllMatches,minMatchCharLength:a=cF.minMatchCharLength,includeMatches:l=cF.includeMatches,ignoreLocation:c=cF.ignoreLocation}={}){if(t.length>fF)throw new Error(`Pattern length exceeds max of ${fF}.`);const u=t.length,d=e.length,h=Math.max(0,Math.min(r,d));let p=i,f=h;const m=a>1||l,g=m?Array(d):[];let y;for(;(y=e.indexOf(t,f))>-1;){let e=pF(t,{currentLocation:y,expectedLocation:h,distance:s,ignoreLocation:c});if(p=Math.min(e,p),f=y+u,m){let e=0;for(;e<u;)g[y+e]=1,e+=1}}f=-1;let x=[],v=1,b=u+d;const C=1<<u-1;for(let k=0;k<u;k+=1){let r=0,i=b;for(;r<i;){pF(t,{errors:k,currentLocation:h+i,expectedLocation:h,distance:s,ignoreLocation:c})<=p?r=i:b=i,i=Math.floor((b-r)/2+r)}b=i;let a=Math.max(1,h-i+1),l=o?d:Math.min(h+i,d)+u,y=Array(l+2);y[l+1]=(1<<k)-1;for(let o=l;o>=a;o-=1){let r=o-1,i=n[e.charAt(r)];if(m&&(g[r]=+!!i),y[o]=(y[o+1]<<1|1)&i,k&&(y[o]|=(x[o+1]|x[o])<<1|1|x[o+1]),y[o]&C&&(v=pF(t,{errors:k,currentLocation:r,expectedLocation:h,distance:s,ignoreLocation:c}),v<=p)){if(p=v,f=r,f<=h)break;a=Math.max(1,2*h-f)}}if(pF(t,{errors:k+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:c})>p)break;x=y}const w={isMatch:f>=0,score:Math.max(.001,v)};if(m){const e=function(e=[],t=cF.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=e.length;i<o;i+=1){let o=e[i];o&&-1===r?r=i:o||-1===r||(s=i-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}(g,a);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function gF(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class yF{constructor(e,{location:t=cF.location,threshold:n=cF.threshold,distance:r=cF.distance,includeMatches:s=cF.includeMatches,findAllMatches:i=cF.findAllMatches,minMatchCharLength:o=cF.minMatchCharLength,isCaseSensitive:a=cF.isCaseSensitive,ignoreLocation:l=cF.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:gF(e),startIndex:t})},u=this.pattern.length;if(u>fF){let e=0;const t=u%fF,n=u-t;for(;e<n;)c(this.pattern.substr(e,fF),e),e+=fF;if(t){const e=u-fF;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],u=0,d=!1;this.chunks.forEach(({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:f,score:m,indices:g}=mF(e,t,h,{location:r+p,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});f&&(d=!0),u+=m,f&&g&&(c=[...c,...g])});let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=c),h}}class xF{constructor(e){this.pattern=e}static isMultiMatch(e){return vF(e,this.multiRegex)}static isSingleMatch(e){return vF(e,this.singleRegex)}search(){}}function vF(e,t){const n=e.match(t);return n?n[1]:null}class bF extends xF{constructor(e,{location:t=cF.location,threshold:n=cF.threshold,distance:r=cF.distance,includeMatches:s=cF.includeMatches,findAllMatches:i=cF.findAllMatches,minMatchCharLength:o=cF.minMatchCharLength,isCaseSensitive:a=cF.isCaseSensitive,ignoreLocation:l=cF.ignoreLocation}={}){super(e),this._bitapSearch=new yF(e,{location:t,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class CF extends xF{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const r=[],s=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+s,r.push([t,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const wF=[class extends xF{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},CF,class extends xF{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends xF{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends xF{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends xF{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends xF{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},bF],kF=wF.length,SF=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const MF=new Set([bF.type,CF.type]);class NF{constructor(e,{isCaseSensitive:t=cF.isCaseSensitive,includeMatches:n=cF.includeMatches,minMatchCharLength:r=cF.minMatchCharLength,ignoreLocation:s=cF.ignoreLocation,findAllMatches:i=cF.findAllMatches,location:o=cF.location,threshold:a=cF.threshold,distance:l=cF.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:s,location:o,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map(e=>{let n=e.trim().split(SF).filter(e=>e&&!!e.trim()),r=[];for(let s=0,i=n.length;s<i;s+=1){const e=n[s];let i=!1,o=-1;for(;!i&&++o<kF;){const n=wF[o];let s=n.isMultiMatch(e);s&&(r.push(new n(s,t)),i=!0)}if(!i)for(o=-1;++o<kF;){const n=wF[o];let s=n.isSingleMatch(e);if(s){r.push(new n(s,t));break}}}return r})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let s=0,i=[],o=0;for(let a=0,l=t.length;a<l;a+=1){const r=t[a];i.length=0,s=0;for(let t=0,a=r.length;t<a;t+=1){const a=r[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){o=0,s=0,i.length=0;break}if(s+=1,o+=u,n){const e=a.constructor.type;MF.has(e)?i=[...i,...c]:i.push(c)}}if(s){let e={isMatch:!0,score:o/s};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const _F=[];function jF(e,t){for(let n=0,r=_F.length;n<r;n+=1){let r=_F[n];if(r.condition(e,t))return new r(e,t)}return new yF(e,t)}const EF="$and",TF="$or",AF="$path",LF="$val",OF=e=>!(!e[EF]&&!e[TF]),IF=e=>({[EF]:Object.keys(e).map(t=>({[t]:e[t]}))});function DF(e,t,{auto:n=!0}={}){const r=e=>{let s=Object.keys(e);const i=(e=>!!e[AF])(e);if(!i&&s.length>1&&!OF(e))return r(IF(e));if((e=>!Jz(e)&&Xz(e)&&!OF(e))(e)){const r=i?e[AF]:s[0],o=i?e[LF]:e[r];if(!Kz(o))throw new Error((e=>`Invalid value for key ${e}`)(r));const a={keyId:aF(r),pattern:o};return n&&(a.searcher=jF(o,t)),a}let o={children:[],operator:s[0]};return s.forEach(t=>{const n=e[t];Jz(n)&&n.forEach(e=>{o.children.push(r(e))})}),o};return OF(e)||(e=IF(e)),r(e)}function RF(e,t){const n=e.matches;t.matches=[],eF(n)&&n.forEach(e=>{if(!eF(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let s={indices:n,value:r};e.key&&(s.key=e.key.src),e.idx>-1&&(s.refIndex=e.idx),t.matches.push(s)})}function PF(e,t){t.score=e.score}class zF{constructor(e,t={},n){this.options={...cF,...t},this.options.useExtendedSearch,this._keyStore=new sF(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof dF))throw new Error("Incorrect 'index' type");this._myIndex=t||hF(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){eF(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];e(s,n)&&(this.removeAt(n),n-=1,r-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:i,ignoreFieldNorm:o}=this.options;let a=Kz(e)?Kz(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=cF.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:r,score:s})=>{const i=e?e.weight:null;n*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(t?1:r))}),e.score=n})}(a,{ignoreFieldNorm:o}),s&&a.sort(i),Yz(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:n=cF.includeMatches,includeScore:r=cF.includeScore}={}){const s=[];return n&&s.push(RF),r&&s.push(PF),e.map(e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return s.length&&s.forEach(t=>{t(e,r)}),r})}(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=jF(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:e,i:n,n:s})=>{if(!eF(e))return;const{isMatch:i,score:o,indices:a}=t.searchIn(e);i&&r.push({item:e,idx:n,matches:[{score:o,value:e,norm:s,indices:a}]})}),r}_searchLogical(e){const t=DF(e,this.options),n=(e,t,r)=>{if(!e.children){const{keyId:n,searcher:s}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:s});return i&&i.length?[{idx:r,item:t,matches:i}]:[]}const s=[];for(let i=0,o=e.children.length;i<o;i+=1){const o=e.children[i],a=n(o,t,r);if(a.length)s.push(...a);else if(e.operator===EF)return[]}return s},r=this._myIndex.records,s={},i=[];return r.forEach(({$:e,i:r})=>{if(eF(e)){let o=n(t,e,r);o.length&&(s[r]||(s[r]={idx:r,item:e,matches:[]},i.push(s[r])),o.forEach(({matches:e})=>{s[r].matches.push(...e)}))}}),i}_searchObjectList(e){const t=jF(e,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach(({$:e,i:r})=>{if(!eF(e))return;let i=[];n.forEach((n,r)=>{i.push(...this._findMatches({key:n,value:e[r],searcher:t}))}),i.length&&s.push({idx:r,item:e,matches:i})}),s}_findMatches({key:e,value:t,searcher:n}){if(!eF(t))return[];let r=[];if(Jz(t))t.forEach(({v:t,i:s,n:i})=>{if(!eF(t))return;const{isMatch:o,score:a,indices:l}=n.searchIn(t);o&&r.push({score:a,key:e,value:t,idx:s,norm:i,indices:l})});else{const{v:s,n:i}=t,{isMatch:o,score:a,indices:l}=n.searchIn(s);o&&r.push({score:a,key:e,value:s,norm:i,indices:l})}return r}}zF.version="7.0.0",zF.createIndex=hF,zF.parseIndex=function(e,{getFn:t=cF.getFn,fieldNormWeight:n=cF.fieldNormWeight}={}){const{keys:r,records:s}=e,i=new dF({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(s),i},zF.config=cF,zF.parseQuery=DF,function(...e){_F.push(...e)}(NF);const FF=de.createContext(void 0);function HF({children:e,items:t,onSelect:n,onClickOutside:r,submenuItems:s,onSubmenuSelect:i,onOpenModal:o,onEditShortcut:a}){const[l,c]=de.useState(0),[u,d]=de.useState(null),[h,p]=de.useState(-1),[f,m]=de.useState("keyboard"),[g,y]=de.useState(!1),x=de.useCallback(e=>{if(!g)return;const n=t.findIndex(t=>t.id===e);n>=0&&c(n),m("mouse")},[t,g]);return de.useEffect(()=>{const e=t.findIndex(e=>!e.isSeparator);c(e>=0?e:0)},[t]),de.useEffect(()=>{const e=()=>{g||(y(!0),m("mouse"))};return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e)},[g]),de.useEffect(()=>{const e=t[l];if(e&&"submenu"===e.action&&s?.[e.id]){const t=setTimeout(()=>{d(e.id),p(-1)},150);return()=>clearTimeout(t)}d(null)},[l,t,s]),de.useEffect(()=>{const e=e=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Tab"].includes(e.key)&&m("keyboard"),"Escape"===e.key)return e.preventDefault(),e.stopImmediatePropagation(),void r();if("ArrowRight"===e.key){e.preventDefault(),e.stopImmediatePropagation();const n=t[l];if("submenu"===n?.action)if(u!==n.id){d(n.id);const e=(s?.[n.id]||[]).findIndex(e=>!e.isSeparator);p(e>=0?e:0)}else if(-1===h){const e=(s?.[n.id]||[]).findIndex(e=>!e.isSeparator);p(e>=0?e:0)}}else if("ArrowLeft"===e.key)e.preventDefault(),e.stopImmediatePropagation(),u&&(d(null),p(-1));else if("ArrowDown"===e.key)if(e.preventDefault(),e.stopImmediatePropagation(),u&&h>=0){const e=s?.[u]||[];p(t=>{let n=t+1;for(;n<e.length&&e[n].isSeparator;)n++;return n<e.length?n:t})}else c(e=>{let n=e+1;for(;n<t.length&&t[n].isSeparator;)n++;return n<t.length?n:e});else if("ArrowUp"===e.key)if(e.preventDefault(),e.stopImmediatePropagation(),u&&h>=0){const e=s?.[u]||[];p(t=>{let n=t-1;for(;n>=0&&e[n].isSeparator;)n--;return n>=0?n:t})}else c(e=>{let n=e-1;for(;n>=0&&t[n].isSeparator;)n--;return n>=0?n:e});else if("Enter"===e.key||"Tab"===e.key)if(e.preventDefault(),e.stopImmediatePropagation(),u&&h>=0){const e=(s?.[u]||[])[h];e&&("open-modal"===e.action?o(e):i(e))}else{const e=t[l];if(e&&!e.isSeparator)if("submenu"===e.action){d(e.id);const t=(s?.[e.id]||[]).findIndex(e=>!e.isSeparator);p(t>=0?t:0)}else"open-modal"===e.action?o(e):n(e)}};return document.addEventListener("keydown",e,!0),()=>document.removeEventListener("keydown",e,!0)},[t,l,n,r,u,h,s,i,o]),he.jsx(FF.Provider,{value:{items:t,onSelect:n,activeIndex:l,setActiveItemById:x,onClickOutside:r,submenuOpen:u,submenuActiveIndex:h,submenuItems:s,setSubmenuOpen:d,setSubmenuActiveIndex:p,onSubmenuSelect:i,onOpenModal:o,onEditShortcut:a,interactionMode:f,hasMouseMoved:g},children:e})}function VF(){const e=de.useContext(FF);if(!e)throw new Error("useShortcutMenu must be used within ShortcutMenuProvider");return e}function $F({item:e,index:t,isSubmenuItem:r=!1}){const s=n(),{activeIndex:i,setActiveItemById:o,onSelect:a,submenuOpen:l,submenuActiveIndex:c,onSubmenuSelect:u,onOpenModal:d,onEditShortcut:h,hasMouseMoved:p}=VF(),f=r?c===t:i===t,m="submenu"===e.action,g=l===e.id,y="string"==typeof e.icon?null:e.icon,x="/"===e.icon,v="chip"===e.action&&h;return he.jsxs("div",{onMouseEnter:()=>{p&&o(e.id)},className:R("group flex items-center gap-1 px-2.5 py-2 rounded-lg transition-colors","hover:bg-bg-200",f&&"bg-bg-200"),children:[he.jsxs("button",{onClick:()=>{"submenu"!==e.action&&("open-modal"!==e.action?r?u(e):a(e):d(e))},className:R("flex-1 min-w-0 text-left flex items-center gap-2","hover:text-text-000",f&&"text-text-000",!f&&"text-text-300"),children:[(x||y)&&he.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0",children:x?he.jsx("span",{className:"text-text-500/50 font-mono text-sm",children:"/"}):y?he.jsx(y,{size:18}):null}),he.jsx("span",{className:"flex-1 truncate text-sm",children:e.name}),e.metadata&&!m&&he.jsx("span",{className:"text-text-400 text-xs ml-auto",children:e.metadata}),m&&he.jsx(_r,{size:14,className:R("text-text-400 ml-auto transition-transform",g&&"text-text-300")})]}),v&&he.jsx("button",{onClick:t=>{t.stopPropagation(),h(e)},className:R("p-1 rounded transition-all","opacity-0 group-hover:opacity-100","hover:bg-bg-300",f&&"opacity-100"),"aria-label":s.formatMessage({defaultMessage:"Edit {name}",id:"s3IOQQ+nJU"},{name:e.name}),children:he.jsx(L,{size:12,className:"text-text-400"})})]})}function BF(){return he.jsx("div",{className:"my-1.5 border-t-[0.5px] border-border-300"})}function UF({clientRect:e}){const t=de.useRef(null),n=de.useRef(null),[r,s]=de.useState({}),{items:i,onClickOutside:o,submenuOpen:a,submenuItems:l}=VF();de.useEffect(()=>{if(!t.current)return;const n=document.querySelector("[data-chat-input-container]");if(!n){const t=e?.();return void(t&&s({position:"fixed",bottom:window.innerHeight-t.top+8,left:t.left}))}const r=n.getBoundingClientRect();s({position:"fixed",bottom:window.innerHeight-r.top+8,left:r.left})},[e,i]),de.useEffect(()=>{if(!n.current||!t.current||!a)return;const e=t.current.getBoundingClientRect(),r=n.current,s=r.getBoundingClientRect();let i=e.right+4,o=e.top;const l=i+s.width>window.innerWidth-8,c=e.left-s.width-4>=8;l&&(c?i=e.left-s.width-4:(i=e.right-s.width,o=e.bottom-s.height)),o+s.height>window.innerHeight-8&&(o=window.innerHeight-s.height-8),o<8&&(o=8),r.style.position="fixed",r.style.top=`${o}px`,r.style.left=`${i}px`},[a,l]),de.useEffect(()=>{const e=e=>{const r=e.target;!t.current||t.current.contains(r)||n.current&&n.current.contains(r)||o()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o]);const c=a?l[a]:[];return he.jsxs(he.Fragment,{children:[he.jsx(gn.div,{ref:t,style:r,initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:R("z-dropdown bg-bg-000 border-0.5 border-border-200 rounded-xl","backdrop-blur-xl shadow-[0px_2px_8px_0px_hsl(var(--always-black)/8%)]","dark:shadow-[0px_2px_8px_0px_hsl(var(--always-black)/24%)]","p-1.5 w-[340px] max-h-[300px] overflow-y-auto"),children:i.map((e,t)=>e.isSeparator?he.jsx(BF,{},e.id):he.jsx($F,{item:e,index:t},e.id))}),he.jsx(yn,{children:a&&c.length>0&&he.jsx(gn.div,{ref:n,initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5},transition:{duration:.15},className:R("z-dropdown bg-bg-000 border-0.5 border-border-200 rounded-xl","backdrop-blur-xl shadow-[0px_2px_8px_0px_hsl(var(--always-black)/8%)]","dark:shadow-[0px_2px_8px_0px_hsl(var(--always-black)/24%)]","p-1.5 w-[300px] max-h-[300px] overflow-y-auto"),children:c.map((e,t)=>e.isSeparator?he.jsx(BF,{},e.id):he.jsx($F,{item:e,index:t,isSubmenuItem:!0},e.id))})})]})}function ZF(e){const t=xn(e),n=[];return t.forEach(e=>{n.push({id:e.command,name:e.command,icon:"/",action:"execute",groupId:"system",keywords:e.description,metadata:e.description})}),n.push({id:"separator-1",name:"",isSeparator:!0}),n.push({id:"shortcuts",name:e?e.formatMessage({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}):"Shortcuts",icon:Sx,action:"submenu",groupId:"navigation",keywords:"shortcuts prompts saved"}),n}async function WF(e,t=!0){const n=[],r=(await be.getAllPrompts()).sort((e,t)=>t.usageCount!==e.usageCount?t.usageCount-e.usageCount:t.createdAt-e.createdAt),s=e?e.formatMessage({defaultMessage:"untitled",id:"zZuYUk2GGf"}):"untitled";return r.forEach(e=>{n.push({id:e.id,name:e.command||s,icon:Sx,action:"chip",groupId:"shortcuts-list",promptContent:e.prompt,keywords:e.command,url:e.url})}),n.length>0&&n.push({id:"shortcuts-separator",name:"",isSeparator:!0}),t&&n.push({id:"record-workflow",name:e?e.formatMessage({defaultMessage:"Record workflow",id:"6pwz+Cv63v"}):"Record workflow",icon:Iy,action:"open-modal",groupId:"shortcuts-actions",keywords:"record teach workflow automation"}),n.push({id:"create-shortcut",name:e?e.formatMessage({defaultMessage:"Create shortcut",id:"AzO4h7b149"}):"Create shortcut",icon:vn,action:"open-modal",groupId:"shortcuts-actions",keywords:"create new shortcut prompt"}),n}const qF=["system","navigation","shortcuts-list","shortcuts-actions"];function GF({items:e,command:t,clientRect:r,editor:s,range:i,onClose:o,onRecordWorkflow:a,onCreateShortcut:l,onBrowseShortcuts:c,onEditShortcut:u,recordWorkflowEnabled:d=!0}){const h=n(),[p,f]=de.useState({});de.useEffect(()=>{(async()=>{const e=await async function(e,t,n=!0){return WF(t,n)}(0,h,d);f({shortcuts:e})})()},[h,d]);if(de.useEffect(()=>{s&&s.view.dom.focus()},[s]),!e||0===e.length)return null;return he.jsx(HF,{items:e,onSelect:e=>{t(e)},onClickOutside:()=>{o()},submenuItems:p,onSubmenuSelect:e=>{"chip"===e.action&&setTimeout(()=>{t(e),o()},150)},onOpenModal:e=>{s&&i&&s.chain().focus().deleteRange(i).run(),"record-workflow"===e.id&&a?a():"create-shortcut"===e.id&&l?l():"browse-shortcuts"===e.id&&c&&c(),o()},onEditShortcut:e=>{s&&i&&s.chain().focus().deleteRange(i).run(),u?.(e),o()},children:he.jsx(UF,{clientRect:r})})}const JF={keys:[{name:"name",weight:2},{name:"keywords",weight:1}],threshold:.3,ignoreLocation:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,findAllMatches:!0,shouldSort:!0};let KF=null,YF=null;async function QF(){if(!KF){const e=ZF().filter(e=>!e.isSeparator&&!1!==e.showInFilteredList),t=(await WF()).filter(e=>!e.isSeparator&&!1!==e.showInFilteredList);KF=[...e,...t]}return KF}function XF(e){const t=e.getRecordWorkflowEnabled??(()=>!0);return{items:async({query:t})=>{if(!t)return ZF(e.intl);if(t.startsWith(" "))return[];const n=t.trim();if(!n)return[];const r=await async function(){if(!YF){const e=await QF();YF=new zF(e,JF)}return YF}(),s=await QF(),i=r.search(n),o=[],a=[];i.forEach(e=>{const t=e.item,r=e.score||0;t.name.toLowerCase()===n.toLowerCase()||t.keywords?.toLowerCase()?.includes(n.toLowerCase())?o.push(t):r<=.4&&a.push(t)});let l=[...o,...a];if(0===l.length&&n.length<=3){l=s.filter(e=>e.name.toLowerCase().startsWith(n.toLowerCase())||e.keywords?.toLowerCase()?.startsWith(n.toLowerCase()))}const c=Array.from(new Map(l.map(e=>[e.id,e])).values());if(c.length<=1)return c;const u=new Map;if(c.forEach(e=>{const t=e.groupId||"default";u.has(t)||u.set(t,[]),u.get(t).push(e)}),u.size<=1)return c;const d=[];let h=0,p=!1;return qF.forEach(e=>{if(u.has(e)){const t=u.get(e);p&&d.push({id:"dynamic-separator-"+h++,name:"",isSeparator:!0}),d.push(...t),p=!0}}),d},command:({editor:t,range:n,props:r})=>{if("execute"===r.action)return t.chain().focus().deleteRange(n).run(),void e.onExecuteSystemCommand?.(`/${r.id}`);if("submenu"!==r.action&&"open-modal"!==r.action&&"chip"===r.action){if(r.url&&"undefined"!=typeof window)try{const e=new URLSearchParams(window.location.search).get("tabId");e&&chrome.tabs.update(parseInt(e),{url:r.url})}catch(s){}t.chain().focus().deleteRange(n).insertContent({type:"shortcutChip",attrs:{id:r.id,name:r.name,promptContent:r.promptContent}}).insertContent(" ").run()}},render:()=>{let n=null,r=null,s=!1;const i=()=>{s||(s=!0,r&&(r.destroy(),r=null),n&&n.parentNode&&(n.parentNode.removeChild(n),n=null))};return{onStart:o=>{s=!1,r=new lD(GF,{props:{...o,range:o.range,query:o.query,onClose:i,onRecordWorkflow:e.onRecordWorkflow,onCreateShortcut:e.onCreateShortcut,onBrowseShortcuts:e.onBrowseShortcuts,onEditShortcut:e.onEditShortcut,recordWorkflowEnabled:t()},editor:o.editor}),n=r.element,document.body.appendChild(n)},onUpdate:n=>{r&&r.updateProps({...n,range:n.range,query:n.query,onClose:i,onRecordWorkflow:e.onRecordWorkflow,onEditShortcut:e.onEditShortcut,onCreateShortcut:e.onCreateShortcut,onBrowseShortcuts:e.onBrowseShortcuts,recordWorkflowEnabled:t()})},onKeyDown:({event:e})=>"Escape"===e.key?(i(),!0):"Enter"===e.key||"Tab"===e.key||("ArrowUp"===e.key||"ArrowDown"===e.key||("ArrowLeft"===e.key||"ArrowRight"===e.key)),onExit:()=>{i()}}}}}const eH=aO.create({name:"shortcut-suggestion",addOptions:()=>({onRecordWorkflow:void 0,onCreateShortcut:void 0,onBrowseShortcuts:void 0,onEditShortcut:void 0,onExecuteSystemCommand:void 0,intl:void 0,getRecordWorkflowEnabled:()=>!0}),addProseMirrorPlugins(){return[Gz({editor:this.editor,char:"/",allowSpaces:!0,...XF({onRecordWorkflow:this.options.onRecordWorkflow,onCreateShortcut:this.options.onCreateShortcut,onBrowseShortcuts:this.options.onBrowseShortcuts,onEditShortcut:this.options.onEditShortcut,onExecuteSystemCommand:this.options.onExecuteSystemCommand,intl:this.options.intl,getRecordWorkflowEnabled:this.options.getRecordWorkflowEnabled})})]}}),tH=de.forwardRef(({value:e,onChange:t,onEmptyChange:r,onKeyDown:s,onPaste:i,placeholder:o,className:a,onRecordWorkflow:l,onCreateShortcut:c,onBrowseShortcuts:u,onEditShortcut:d,onExecuteSystemCommand:h,recordWorkflowEnabled:p=!0},f)=>{const m=n(),g=de.useRef(!1),y=de.useRef(e),x=de.useRef(!0),v=de.useRef(o);v.current=o;const b=de.useRef(h);b.current=h;const C=de.useRef(l);C.current=l;const w=de.useRef(c);w.current=c;const k=de.useRef(u);k.current=u;const S=de.useRef(d);S.current=d;const M=de.useRef(p);M.current=p;const N=rD({extensions:[Hz.configure({blockquote:!1,codeBlock:!1,heading:!1,horizontalRule:!1,bulletList:!1,orderedList:!1,listItem:!1}),Vz.configure({placeholder:()=>v.current||"",emptyEditorClass:"is-editor-empty"}),Zz.configure({onEditShortcut:e=>S.current?.(e)}),eH.configure({onRecordWorkflow:()=>C.current?.(),onCreateShortcut:()=>w.current?.(),onBrowseShortcuts:()=>k.current?.(),onEditShortcut:e=>S.current?.(e.id),onExecuteSystemCommand:e=>b.current?.(e),intl:m,getRecordWorkflowEnabled:()=>M.current})],content:e,editorProps:{attributes:{class:"w-full resize-none focus:outline-none focus:ring-0 focus:border-transparent text-text-100 overflow-y-auto text-sm prose prose-sm max-w-none",style:"min-height: 24px; max-height: 50vh; outline: none;","data-test-id":"message-input"},handleKeyDown:(e,t)=>{if("Enter"===t.key&&!t.shiftKey){if(!("true"===e.dom.dataset.shortcutMenuOpen)){const e=new KeyboardEvent("keydown",{key:"Enter",bubbles:!0});if(s?.(e),!t.shiftKey)return!0}}return!1},handlePaste:(e,t)=>(i?.(t),!1)},onUpdate:({editor:e})=>{g.current=!0;const n=e.getText();t(n);const s=e.isEmpty;if(s!==x.current&&(x.current=s,r?.(s)),n.startsWith("/")&&n.includes(" ")){const t=n.match(/^\/(\w+)\s/);if(t){const n=t[1];"compact"!==n&&"share"!==n||(b.current?.(`/${n}`),e.commands.clearContent())}}}});de.useEffect(()=>{if(N){if(""===e)return N.isEmpty||N.commands.clearContent(),y.current="",g.current=!1,void(!0!==x.current&&(x.current=!0,r?.(!0)));if(g.current)g.current=!1;else if(e!==y.current){y.current=e;N.getText()!==e&&N.commands.setContent(e||"")}}},[e,N,r]),de.useEffect(()=>{N&&N.isEmpty&&r?.(!0)},[N,r]),de.useEffect(()=>{N&&N.view.dispatch(N.state.tr)},[N,o]),de.useEffect(()=>{const e=()=>{KF=null,YF=null};return window.addEventListener("prompts-changed",e),()=>window.removeEventListener("prompts-changed",e)},[]),de.useImperativeHandle(f,()=>({focus:()=>{N?.commands.focus()},getText:()=>N?.getText()||"",getTextWithChips:()=>{if(!N)return{text:"",chips:[]};let e="";const t=[];return N.state.doc.descendants(n=>{if(n.isText)e+=n.text;else if("shortcutChip"===n.type.name){const r=n.attrs;r.promptContent&&(e+=r.promptContent),t.push({id:r.id,name:r.name,promptContent:r.promptContent})}}),{text:e,chips:t}},clear:()=>{N?.commands.clearContent()},setContent:e=>{N?.commands.setContent(e)},isEmpty:()=>N?.isEmpty??!0}),[N]);const _=de.useCallback(e=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"].includes(e.key)||s?.(e)},[s]);return he.jsx("div",{className:a,onKeyDown:_,children:he.jsx(YI,{editor:N})})});function nH({inputText:e,setInputText:t,attachments:s,isUploading:i,uploadingCount:o,hasBlockingWarning:c,permissionMode:u,setPermissionMode:d,supportedPermissionModes:h,canSkipPermissions:p,shouldDisableSkipPermissions:f,messages:m,isAgentRunning:g,recordingState:y,isSpeechRecording:x,isSpeechSupported:v,hasSpeechPermission:b,isGeneratingSummary:C,setIsGeneratingSummary:w,handleDrop:k,handlePaste:S,handleFiles:M,removeAttachment:N,handleSend:_,cancel:j,captureSelection:E,sendMessage:T,stopRecording:A,togglePause:L,setShowWorkflowModeSelectionModal:O,setPromptToSave:I,setPromptToEdit:D,activeBanner:R,chromeExtEligibility:P,messageStopWarning:z,error:F,onRetryError:H,onClearError:$,messageLimit:B,lastStopReason:U,selectedModel:Z,modelConfig:W,setSkipPermissionsWarningDismissed:q,setIsMessageLimitDismissed:G,announcementConfig:J,handleEnableNotifications:K,handleDismissNotificationBanner:Y,handleDismissAnnouncement:Q,handleRetryWithFallback:X,handleSendFeedbackForRefusal:ee,recordWorkflowEnabled:te,isCapturing:ne,currentUrl:re,useSessionsAPI:se=!1,autoScrollRef:ie,sentinelRef:oe,fileInputRef:ae,chatInputContainerRef:le,isStreaming:ce=!1,analytics:ue,createAnthropicMessage:pe}){const fe=n(),me=de.useRef(null),[ge,xe]=de.useState(!0),ve=de.useCallback(t=>{if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent?.isComposing){t.preventDefault();const n=s.some(e=>!e.error),r=s.some(e=>e.error);(e.trim()||n)&&!g&&!r&&!c&&_()}},[s,e,g,c,_]),Ce=de.useCallback(e=>{t(""),T(e)},[T,t]),we=de.useCallback(()=>{O(!0)},[O]),ke=de.useCallback(()=>{const t=e||"";if(t.startsWith("/")){const e=t.slice(1).split(" ")[0];I({prompt:"",command:e})}else I({prompt:t})},[e,I]),Se=de.useCallback(async e=>{const t=(await be.getAllPrompts()).find(t=>t.id===e);t&&D(t)},[D]);return he.jsxs("div",{className:"mx-3 md:mx-0",children:[!y.isRecording&&he.jsx($x,{autoscrollRef:ie,sentinelElement:oe.current,isStreaming:ce,scrollThreshold:50}),he.jsxs("div",{className:"bg-bg-100",children:[he.jsx("div",{className:"px-3 md:px-2",children:he.jsx(yn,{mode:"wait",children:(()=>{if("eligibility"===R)return he.jsx(Gk,{isEligible:P,onBlockingStateChange:()=>{}},"eligibility");if("error"===R){const e=F?.toLowerCase().includes("connection error")||F?.toLowerCase().includes("network error")||F?.toLowerCase().includes("failed to fetch");return he.jsxs(xv,{type:"error",onDismiss:$,dismissWithGradient:!0,children:[F,H&&e&&he.jsxs(he.Fragment,{children:[" ",he.jsx("button",{onClick:H,className:"underline hover:opacity-80 transition-opacity",children:he.jsx(r,{defaultMessage:"Retry",id:"62nsdyMyIO"})})]})]},"error")}if("refusal"===R)return z;if("messageLimit"===R)return he.jsx(qk,{messageLimit:B,currentModel:Z,onBlockingStateChange:()=>{},onDismiss:()=>G(!0)},"messageLimit");if("highRisk"===R)return he.jsx(xv,{type:"high-risk",onDismiss:()=>q(!0),dismissWithGradient:!0,children:he.jsx(r,{defaultMessage:"<bold>HIGH RISK:</bold> Claude can take most actions on the internet now. This setting could put your data at risk. <link>See safe use tips</link>",id:"sbllSdx3rS",values:{bold:e=>he.jsx("span",{className:"font-bold",children:e}),link:e=>he.jsx("button",{onClick:()=>chrome.tabs.create({url:Kk}),className:"underline hover:opacity-80 transition-colors",children:e})}})},"highRisk");if("notification"===R)return he.jsx(xv,{type:"notification",onAction:K,onDismiss:Y,actionText:fe.formatMessage({defaultMessage:"Notify me",id:"ipGe+BIJx7"}),actionIcon:he.jsx(qr,{size:16}),children:he.jsx(r,{defaultMessage:"Get notified when tasks complete or need input",id:"wJ41IHBkzE"})},"notification");if("announcement"===R){const e=J.text??"";return he.jsx(xv,{type:"announcement",onDismiss:Q,children:he.jsxs("div",{className:"flex items-start gap-2",children:[he.jsx(nx,{vectorSizeOverride:16}),e]})},"announcement")}return null})()})}),(()=>{const e="refusal"===U?.reason?W.modelFallbacks?.[Z]:null;return e?he.jsx(vv,{currentModelName:e.currentModelName,fallbackModelName:e.fallbackModelName,fallbackDisplayName:e.fallbackDisplayName,learnMoreUrl:e.learnMoreUrl,onRetry:X,onSendFeedback:ee}):null})(),!("refusal"===U?.reason&&W.modelFallbacks?.[Z])&&he.jsxs(he.Fragment,{children:[he.jsx("div",{ref:le,"data-chat-input-container":"true",className:"bg-bg-000 rounded-2xl relative z-30 transition-all focus-within:outline-none cursor-text shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-300)/0.15)] hover:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)]",onClick:()=>me.current?.focus(),children:he.jsxs(bn,{onDrop:k,children:[he.jsx(Cn,{attachments:s,onRemove:N,isUploading:i,uploadingCount:o}),he.jsx(yn,{initial:!1,children:!y.isRecording&&he.jsx(gn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"overflow-hidden",children:he.jsx("div",{className:"px-4 pt-4 pb-2",children:he.jsxs("div",{className:"relative",children:[he.jsx(tH,{ref:me,value:e,onChange:t,onEmptyChange:xe,onKeyDown:ve,onPaste:S,placeholder:0===m.length?"":fe.formatMessage({defaultMessage:"Reply to Claude",id:"l+dE/S7JbF"}),onRecordWorkflow:we,onCreateShortcut:ke,onEditShortcut:Se,onExecuteSystemCommand:Ce,recordWorkflowEnabled:te}),he.jsx(Jk,{isVisible:0===m.length&&ge})]})})})}),he.jsx("input",{ref:ae,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>{e.target.files&&M(e.target.files),e.target.value=""}}),he.jsxs("div",{className:`flex items-center ${y.isRecording?"justify-center":"justify-between"} px-3 ${y.isRecording?"py-3":"pb-3"} relative`,children:[!y.isRecording&&p?he.jsx(wn,{permissionMode:u,permissionModeOptions:h,onChange:e=>{d(e),ue?.track("claude_chrome.permission_mode.changed",{from:u,to:e,method:"menu"})},disabled:f}):y.isRecording?null:he.jsx("div",{}),he.jsxs("div",{className:"flex items-center "+(y.isRecording?"gap-4 justify-between w-full":"gap-2"),children:[y.isRecording?he.jsxs(he.Fragment,{children:[he.jsx(a,{tooltipContent:fe.formatMessage({defaultMessage:"Discard",id:"nmpevlUATU"}),side:"top",children:he.jsx(l,{variant:"ghost",size:"icon_sm",onClick:()=>{A()},"aria-label":fe.formatMessage({defaultMessage:"Discard",id:"nmpevlUATU"}),className:"text-danger-000 hover:bg-danger-900",children:he.jsx(V,{size:12})})}),he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx(a,{tooltipContent:y.isPaused?fe.formatMessage({defaultMessage:"Resume",id:"3y9DGgura7"}):fe.formatMessage({defaultMessage:"Pause",id:"tFFMkFDBMO"}),side:"top",children:he.jsx(l,{variant:"secondary",size:"icon_sm",onClick:L,"aria-label":y.isPaused?fe.formatMessage({defaultMessage:"Resume",id:"3y9DGgura7"}):fe.formatMessage({defaultMessage:"Pause",id:"tFFMkFDBMO"}),children:y.isPaused?he.jsx(Gr,{size:12}):he.jsx(zm,{size:12,weight:"light"})})}),v&&he.jsx(a,{tooltipContent:x?fe.formatMessage({defaultMessage:"Voice narration active",id:"yq8mEk+Hev"}):b?fe.formatMessage({defaultMessage:"Voice narration paused",id:"i5E6OW65QG"}):fe.formatMessage({defaultMessage:"Microphone permission needed",id:"FPK1O1X8S1"}),side:"top",children:he.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-lg "+(x?"text-accent-main-100 animate-pulse":b?"text-text-400":"text-danger-000"),children:he.jsx(rs,{size:12})})}),he.jsx(l,{variant:"primary",size:"sm",onClick:async()=>{w(!0);let e="";if(y.steps.length>0)try{const{generateWorkflowSummary:t}=await ye(async()=>{const{generateWorkflowSummary:e}=await import("./ModelSelector-GDUcHpDy.js").then(e=>e.as);return{generateWorkflowSummary:e}},__vite__mapDeps([8,1,3,4,6]));e=await t(y.steps,pe)}catch(t){}w(!1),I({prompt:e}),A()},disabled:C,"aria-label":fe.formatMessage({defaultMessage:"Save as shortcut",id:"z9VjDwhyoe"}),children:C?he.jsx(r,{defaultMessage:"Generating...",id:"A/lLjOnjl0"}):he.jsx(r,{defaultMessage:"Save as shortcut",id:"z9VjDwhyoe"})})]})]}):he.jsxs(he.Fragment,{children:[te&&he.jsx(a,{tooltipContent:fe.formatMessage({defaultMessage:"Teach Claude",id:"cXTNE0Hbj4"}),side:"top",children:he.jsx("button",{onClick:()=>{O(!0)},className:"inline-flex items-center justify-center relative shrink-0 select-none font-medium h-7 w-7 rounded-lg active:scale-95 transition-all duration-200 text-text-300 hover:text-text-200 hover:bg-bg-200",type:"button","aria-label":fe.formatMessage({defaultMessage:"Teach Claude",id:"cXTNE0Hbj4"}),children:he.jsx(Iy,{size:12})})}),he.jsx(a,{tooltipContent:fe.formatMessage({defaultMessage:"Actions",id:"wL7VAE/fRX"}),side:"top",children:he.jsx(kn,{onScreenshot:()=>E(),onUpload:()=>ae.current?.click(),disabled:i||ne,currentUrl:re,showConnectors:se,isAgentRunning:g})})]}),!y.isRecording&&he.jsx(he.Fragment,{children:g?he.jsx("button",{"data-test-id":"stop-button",onClick:j,className:"inline-flex items-center justify-center relative shrink-0 select-none font-medium h-7 w-7 rounded-lg active:scale-95 text-text-300 hover:text-text-200 hover:bg-bg-200 transition-colors",type:"button","aria-label":fe.formatMessage({defaultMessage:"Stop message",id:"0YIsn/UOa0"}),children:he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 256 256",children:he.jsx("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm40-112v56a12,12,0,0,1-12,12H100a12,12,0,0,1-12-12V100a12,12,0,0,1,12-12h56A12,12,0,0,1,168,100Z"})})}):he.jsx("button",{"data-test-id":"send-button",onClick:_,disabled:!e.trim()&&0===s.length||s.some(e=>e.error)||c,className:"inline-flex items-center justify-center relative shrink-0 select-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none disabled:drop-shadow-none font-medium transition-colors h-7 w-7 rounded-lg active:scale-95 "+("skip_all_permission_checks"===u?"bg-[#BF8534] hover:bg-[#A06F2C] text-white":"bg-accent-main-000 hover:bg-accent-main-200 text-oncolor-100"),type:"button","aria-label":fe.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:he.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 256 256",className:"transition-colors",children:he.jsx("path",{d:"M208.49,120.49a12,12,0,0,1-17,0L140,69V216a12,12,0,0,1-24,0V69L64.49,120.49a12,12,0,0,1-17-17l72-72a12,12,0,0,1,17,0l72,72A12,12,0,0,1,208.49,120.49Z"})})})})]})]})]})}),he.jsx("div",{className:"flex justify-center py-1.5 text-text-500 bg-bg-100",children:he.jsx("a",{href:"https://support.anthropic.com/en/articles/8525154-claude-is-providing-incorrect-or-misleading-responses-what-s-going-on",target:"_blank",rel:"noopener noreferrer",className:"text-[11px] hover:text-text-300 transition-colors text-center",children:he.jsx(r,{defaultMessage:"Claude is AI and can make mistakes. Please double-check responses.",id:"Hz3uf5n9Ga"})})})]})]})]})}tH.displayName="TipTapEditor";class rH{static async startTaskRun(e,t,n,r){const s={id:`${e}_${Date.now()}`,taskId:e,taskName:t,timestamp:Date.now(),status:"started",prompt:n,url:r,messages:[{role:"system",content:`Task "${t}" started`,timestamp:Date.now()}]};return await this.saveLog(s),s}static async addLogMessage(e,t){const n=await this.getAllLogs(),r=n.find(t=>t.id===e);r&&(r.messages.push(t),await this.saveLogs(n))}static async updateTaskRunStatus(e,t,n){const r=await this.getAllLogs(),s=r.find(t=>t.id===e);s&&(s.status=t,n&&(s.error=n),"completed"!==t&&"failed"!==t||(s.duration=Date.now()-s.timestamp),await this.saveLogs(r),await this.updateStats(s.taskId,"completed"===t))}static async getTaskLogs(e){return(await this.getAllLogs()).filter(t=>t.taskId===e).sort((e,t)=>t.timestamp-e.timestamp)}static async getAllLogs(){return await fe(me.SCHEDULED_TASK_LOGS)||[]}static async saveLog(e){const t=await this.getAllLogs();t.push(e),await this.saveLogs(t)}static async saveLogs(e){const t=Date.now()-2592e6;let n=e.filter(e=>e.timestamp>t);const r=new Map;n.forEach(e=>{const t=r.get(e.taskId)||[];t.push(e),r.set(e.taskId,t)}),n=[],r.forEach(e=>{const t=e.sort((e,t)=>t.timestamp-e.timestamp);n.push(...t.slice(0,50))}),n=n.sort((e,t)=>t.timestamp-e.timestamp).slice(0,500),await ge(me.SCHEDULED_TASK_LOGS,n)}static async updateStats(e,t){const n=await fe(me.SCHEDULED_TASK_STATS)||{},r=n[e]||{totalRuns:0,successfulRuns:0,failedRuns:0,averageDuration:0};r.totalRuns++,t?r.successfulRuns++:r.failedRuns++,r.lastRunDate=Date.now();const s=(await this.getTaskLogs(e)).filter(e=>e.duration).map(e=>e.duration);s.length>0&&(r.averageDuration=s.reduce((e,t)=>e+t,0)/s.length),n[e]=r,await ge(me.SCHEDULED_TASK_STATS,n)}static async getTaskStats(e){return(await fe(me.SCHEDULED_TASK_STATS)||{})[e]||null}static async exportLogs(e){const t=e?await this.getTaskLogs(e):await this.getAllLogs();return JSON.stringify({exportDate:(new Date).toISOString(),taskId:e||"all",logs:t},null,2)}static async clearTaskLogs(e){const t=(await this.getAllLogs()).filter(t=>t.taskId!==e);await ge(me.SCHEDULED_TASK_LOGS,t);const n=await fe(me.SCHEDULED_TASK_STATS)||{};delete n[e],await ge(me.SCHEDULED_TASK_STATS,n)}static async clearAllLogs(){await chrome.storage.local.remove([me.SCHEDULED_TASK_LOGS,me.SCHEDULED_TASK_STATS])}}const sH=Wn(e=>({sessionId:crypto.randomUUID(),deviceId:void 0,existingSessionIdToLoad:void 0,existingConversationUuidToLoad:void 0,currentScheduledTaskRunId:null,currentScheduledTaskName:null,inputText:"",pendingPrompt:null,promptToSave:null,promptToEdit:null,setSessionId:t=>e({sessionId:t}),setDeviceId:t=>e({deviceId:t}),setExistingSessionIdToLoad:t=>e({existingSessionIdToLoad:t}),setExistingConversationUuidToLoad:t=>e({existingConversationUuidToLoad:t}),setCurrentScheduledTask:(t,n)=>e({currentScheduledTaskRunId:t,currentScheduledTaskName:n}),clearCurrentScheduledTask:()=>e({currentScheduledTaskRunId:null,currentScheduledTaskName:null}),setInputText:t=>e({inputText:t}),setPendingPrompt:t=>e({pendingPrompt:t}),setPromptToSave:t=>e({promptToSave:t}),setPromptToEdit:t=>e({promptToEdit:t}),generateNewSessionId:()=>{const t=crypto.randomUUID();return e({sessionId:t}),t}}));we().then(e=>{sH.getState().setDeviceId(e)});const iH=()=>{if("undefined"!=typeof window){if("true"===new URLSearchParams(window.location.search).get("skipPermissions"))return"skip_all_permission_checks"}return"ask"},oH=Wn(e=>({permissionPrompt:null,permissionMode:iH(),setPermissionPrompt:t=>e({permissionPrompt:t}),setPermissionMode:t=>e({permissionMode:t}),resetOnSessionClear:()=>e({permissionPrompt:null})}));const aH=new class{calculateMetricsFromMessages(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r&&"role"in r&&"assistant"===r.role&&"usage"in r&&r.usage)return this.calculateMetricsFromUsage(r.usage,t)}return null}calculateMetricsFromUsage(e,t){const n=e.input_tokens||0,r=e.output_tokens||0,s=e.cache_creation_input_tokens||0,i=e.cache_read_input_tokens||0,o=s+i,a=n+s+i,l=a+r,c=2e5-t,u=Math.round(l/c*100);return{inputTokens:a,outputTokens:r,totalTokens:l,cacheTokens:o,contextWindow:c,percentUsed:u,percentRemaining:Math.max(0,100-u),isWarning:l>=c-2e4,isError:l>=c-1e4}}getColorForPercentage(e){return e>30?"text-green-500":e>10?"text-yellow-500":"text-red-500"}formatTokenDisplay(e){return`Context: ${e.percentRemaining}% remaining`}getDetailedBreakdown(e){return`${e.totalTokens.toLocaleString()} / ${e.contextWindow.toLocaleString()} tokens${e.cacheTokens>0?` (${e.cacheTokens.toLocaleString()} cached)`:""}`}};class lH{createMessage;constructor(e){this.createMessage=e}async compactConversation(e,t,n=!1){if(0===e.length)throw new Error("Not enough messages to compact");const r=aH.calculateMetricsFromMessages(e,t),s=r?.totalTokens||0,i=await async function(){try{const e=await We("zepher_prompt");if(e?.prompt&&"string"==typeof e.prompt&&e.prompt.trim())return e.prompt}catch(e){}return'Your task is to create a detailed summary of the conversation so far, with EXTREME EMPHASIS on preserving ALL user instructions, requirements, and feedback. User instructions are the most critical element and must be preserved verbatim when possible.\n\nBefore providing your final summary, wrap your analysis in <analysis> tags to organize your thoughts and ensure you\'ve covered all necessary points. In your analysis process:\n\n1. CRITICAL - Extract ALL user instructions:\n   - The initial task definition (preserve as close to verbatim as possible)\n   - Any modifications or clarifications to the task\n   - Specific requirements, criteria, or rules they provided\n   - Warnings, constraints, or "DO NOT" instructions\n   - Any feedback that changed your approach\n   - Instructions about how to continue or when to stop\n\n2. Identify if this is a REPEATABLE TASK WORKFLOW:\n   - Is there a pattern being repeated (e.g., reviewing multiple candidates, processing multiple items)?\n   - What is the atomic unit of work being repeated?\n   - What are the specific steps in each iteration?\n   - What decision criteria or rules are being applied consistently?\n\n3. Chronologically analyze each message and section of the conversation. For each section thoroughly identify:\n   - The user\'s explicit requests and intents\n   - Your approach to addressing the user\'s requests\n   - Key browser interactions and automation steps\n   - Specific details like:\n     - URLs visited\n     - Elements clicked or interacted with\n     - Form data entered\n     - Screenshots taken\n     - Navigation patterns\n   - Errors that you ran into and how you fixed them\n   - Pay special attention to specific user feedback that you received, especially if the user told you to do something differently.\n\n4. Double-check that you have captured EVERY user instruction, especially:\n   - Initial requirements\n   - Process modifications\n   - Corrections to your behavior\n   - Explicit "IMPORTANT" or emphasized instructions\n\nYour summary should include the following sections:\n\n1. USER INSTRUCTIONS (MOST CRITICAL): Preserve verbatim or as close as possible:\n   - Complete initial task definition\n   - ALL specific requirements and criteria\n   - Every "IMPORTANT", "DO NOT", "ALWAYS", "MUST" instruction\n   - Process modifications and corrections\n   - Feedback that changed behavior\n   - Instructions about when/how to continue\n\n2. Task Template (if applicable): If this is a repeatable workflow, describe:\n   - The pattern/template of the repeated task\n   - Complete decision criteria and evaluation rules\n   - Standard workflow steps for each iteration\n   - Example of a completed iteration\n\n3. Constraints and Rules: Organize all user-specified rules:\n   - Critical constraints that must never be violated\n   - Specific acceptance/rejection criteria\n   - Process requirements and warnings\n   - Edge cases and exceptions\n\n4. Key Browser Context: Current page URL, domain, and any important page state\n\n5. Pages and Interactions: List all pages visited, elements interacted with, and actions taken\n\n6. Automation Steps: Document the sequence of browser automation steps performed\n\n7. Errors and fixes: List all errors that you ran into, and how you fixed them\n\n8. User Feedback History: Chronological list of:\n   - Initial instructions\n   - Corrections received\n   - Process refinements\n   - Confirmations or approvals\n\n9. Progress Tracking: For repeatable tasks:\n   - How many items have been processed\n   - Where we are in the current iteration\n   - Any items that need revisiting\n\n10. Current Work: Describe in detail precisely what was being worked on immediately before this summary request\n\n11. Next Step: For repeatable tasks, specify exactly where to resume (e.g., "Continue reviewing candidates starting with the next one in the queue")\n\nHere\'s an example of how your output should be structured:\n\n<example>\n<analysis>\n[Your thought process, identifying if this is a repeatable task, what the pattern is, and ensuring all points are covered thoroughly and accurately]\n</analysis>\n\n<summary>\n1. USER INSTRUCTIONS (MOST CRITICAL):\n   Initial Task: "[Verbatim or near-verbatim initial request from user]"\n\n   Key Requirements:\n   - [Specific requirement 1 as stated by user]\n   - [Specific requirement 2 as stated by user]\n\n   Critical Constraints:\n   - [Any DO NOT instruction from user]\n   - [Any MUST/ALWAYS instruction from user]\n\n   User Corrections/Feedback:\n   - [Any modification to original instructions]\n   - [Any correction to behavior]\n\n2. Task Template (if applicable):\n   - Pattern: Processing multiple items from a list/queue\n   - Decision Criteria:\n     * [Specific criteria for evaluation]\n     * [Required qualifications or attributes]\n     * [Disqualifying factors]\n   - Workflow Steps:\n     1. Navigate to item page\n     2. Review item details\n     3. Evaluate against criteria\n     4. Take appropriate action (approve/reject/modify)\n     5. Move to next item\n   - Example Iteration: [Brief description of one completed cycle]\n\n3. Constraints and Rules:\n   - IMPORTANT: [Key instructions that must always be followed]\n   - DO NOT: [Actions to avoid]\n   - ALWAYS: [Required behaviors]\n   - Edge cases: [Special handling instructions]\n\n4. Key Browser Context:\n   - Current URL: [Current page URL]\n   - Current Domain: [Domain]\n   - Page State: [Important state information]\n\n5. Pages and Interactions:\n   - [Page/Section]: [Actions taken]\n   - [Buttons/Forms]: [Interactions performed]\n\n6. Automation Steps:\n   - [Step-by-step workflow description]\n\n7. Errors and fixes:\n   - [Error description]: [How it was resolved]\n   - [User feedback on errors if any]\n\n8. User Feedback History:\n   - Initial: [Complete task definition]\n   - Corrections: [Any process refinements]\n   - Feedback: [Important guidance received]\n\n9. Progress Tracking:\n   - Processed: [Number and summary of items completed]\n   - Current: [What\'s being worked on now]\n   - Remaining: [What\'s left to do]\n\n10. Current Work:\n   [Precise description of the immediate task being performed]\n\n11. Next Step:\n   [Exactly what should be done next to continue the workflow]\n\n</summary>\n</example>\n\nPlease provide your summary based on the conversation so far, following this structure and ensuring precision and thoroughness in your response.'}(),o=this.prepareMessagesForAPI(e);o.push({role:"user",content:i});try{const t=await this.createMessage({maxTokens:1e4,messages:o,system:[{type:"text",text:"You are a helpful AI assistant tasked with summarizing browser automation conversations."}]}),r=function(e,t){const n=function(e){let t=e;const n=t.match(/<analysis>([\s\S]*?)<\/analysis>/);if(n){const e=n[1]||"";t=t.replace(/<analysis>[\s\S]*?<\/analysis>/,`Analysis:\n${e.trim()}`)}const r=t.match(/<summary>([\s\S]*?)<\/summary>/);if(r){const e=r[1]||"";t=t.replace(/<summary>[\s\S]*?<\/summary>/,`Summary:\n${e.trim()}`)}return t=t.replace(/\n\n+/g,"\n\n"),t.trim()}(e),r=`The conversation history was compressed to save context space. Here's a summary of what we discussed:\n\n${n}`;return t?`${r}\n\nI'll continue from where we left off without asking additional questions.`:`${r}\n\nHow would you like to proceed?`}(this.extractTextFromResponse(t),n),i={role:"user",content:r,isCompactSummary:!0},a=this.preserveRecentContext(e),l=[{role:"assistant",content:"This conversation has been summarized so we can keep going.",isCompactionMessage:!0},i,...a],c=1600,u=Math.round(r.length/4+a.reduce((e,t)=>{let n=0;if("string"==typeof t.content)n=t.content.length/4;else if(Array.isArray(t.content)){n=t.content.filter(e=>"type"in e&&"image"===e.type).length*c;n+=JSON.stringify(t.content.filter(e=>"type"in e&&"image"!==e.type)).length/4}else n=JSON.stringify(t.content).length/4;return e+n},0));return{summaryMessage:i,messagesAfterCompacting:l,preCompactTokenCount:s,postCompactTokenCount:u,tokensSaved:Math.max(0,s-u)}}catch(a){throw new Error(`Failed to compact conversation: ${a}`)}}prepareMessagesForAPI(e){const t=[];for(const n of e)!n.content||"string"==typeof n.content&&""===n.content.trim()||Array.isArray(n.content)&&0===n.content.length||!("role"in n)||"user"!==n.role&&"assistant"!==n.role||t.push({role:n.role,content:n.content});return t.length>0&&"assistant"===t[0].role&&t.unshift({role:"user",content:"Continue the conversation."}),t}extractTextFromResponse(e){if(!e.content||0===e.content.length)throw new Error("No content in API response");const t=e.content.filter(e=>"text"===e.type);if(0===t.length)throw new Error("No text content in API response");return t.map(e=>e.text).join("\n")}preserveRecentContext(e){const t=[];let n=0;for(let r=e.length-1;r>=0&&n<3;r--){const s=e[r];if(s&&"role"in s&&("user"===s.role&&Array.isArray(s.content))){if(s.content.some(e=>"type"in e&&"image"===e.type&&"source"in e&&e.source)){const e=s.content.filter(e=>"type"in e&&"image"===e.type&&"source"in e&&e.source);e.length>0&&(t.unshift({...s,content:e}),n++)}}}return t}}function cH(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uH,dH={exports:{}};uH||(uH=1,dH.exports=function e(t,n,r){function s(o,a){if(!n[o]){if(!t[o]){if(!a&&cH)return cH(o);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return s(n||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var i=cH,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(a(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(o(n))for(i=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,l=0;l<r;l++)c[l].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var r,s,i,o,a;a=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),i="ie"===(r=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(s={name:"version"===r[1]?r[3]:r[1],version:i||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}})[s.name]=!0,s[s.name+parseInt(s.version,10)]=!0,s.platform[s.platform.name]=!0,t.exports=s},{}],3:[function(e,t,n){var r,s,i,o=function(e,t){for(var n in t)a.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},c=[].slice;r=e("events").EventEmitter,i=e("./browser.coffee"),s=function(e){var t,n;function r(e){var n,r,s;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),t)s=t[r],null==(n=this.options)[r]&&(n[r]=s)}return o(r,e),t={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},n={delay:500,copy:!1},r.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},r.prototype.setOptions=function(e){var t,n,r;for(t in n=[],e)a.call(e,t)&&(r=e[t],n.push(this.setOption(t,r)));return n},r.prototype.addFrame=function(e,t){var r,s;for(s in null==t&&(t={}),(r={}).transparent=this.options.transparent,n)r[s]=t[s]||n[s];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)r.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?r.data=this.getContextData(e):r.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");t.copy?r.data=this.getImageData(e):r.image=e}return this.frames.push(r)},r.prototype.render=function(){var e,t,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,t,n;for(n=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)n.push(null);return n}.call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0,n=t;0<=n?e<n:e>n;0<=n?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},r.prototype.abort=function(){for(var e;null!=(e=this.activeWorkers.shift());)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},r.prototype.spawnWorkers=function(){var e,t,n;return e=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=t=this.freeWorkers.length;t<=e?r<e:r>e;t<=e?r++:r--)n.push(r);return n}.apply(this).forEach(function(e){return function(t){var n;return e.log("spawning worker "+t),(n=new Worker(e.options.workerScript)).onmessage=function(t){return e.activeWorkers.splice(e.activeWorkers.indexOf(n),1),e.freeWorkers.push(n),e.frameFinished(t.data)},e.freeWorkers.push(n)}}(this)),e},r.prototype.frameFinished=function(e){var t,n;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,n=this.freeWorkers.length;1<=n?t<n:t>n;1<=n?++t:--t)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},r.prototype.finishRendering=function(){var e,t,n,r,s,i,o,a,l,c,u,d,h,p,f,m;for(a=0,s=0,l=(p=this.imageParts).length;s<l;s++)a+=((t=p[s]).data.length-1)*t.pageSize+t.cursor;for(a+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),e=new Uint8Array(a),d=0,i=0,c=(f=this.imageParts).length;i<c;i++)for(n=o=0,u=(m=(t=f[i]).data).length;o<u;n=++o)h=m[n],e.set(h,d),n===t.data.length-1?d+=t.cursor:d+=t.pageSize;return r=new Blob([e],{type:"image/gif"}),this.emit("finished",r,e)},r.prototype.renderNextFrame=function(){var e,t,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(t)},r.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},r.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(t=this._canvas.getContext("2d")).setFill=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},r.prototype.getTask=function(e){var t,n;if(n={index:t=this.frames.indexOf(e),last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===i.name},null!=e.data)n.data=e.data;else if(null!=e.context)n.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");n.data=this.getImageData(e.image)}return n},r.prototype.log=function(){1<=arguments.length&&c.call(arguments,0),this.options.debug},r}(r),t.exports=s},{"./browser.coffee":2,events:1}]},{},[3])(3));var hH=(e=>(e.Share="share",e.Compact="compact",e))(hH||{});async function pH(e){const{messages:t,systemPrompt:n,messageHistory:r,onShareRequested:s}=e;if(s){if(!(await s()))return!1}try{let e=null;n&&(e="string"==typeof n?[{type:"text",text:n}]:n);await async function(e,t,n){const r=(new Date).toISOString();let s={};try{const e=await ze.getAllGroups(),t=e.map(e=>({mainTabId:e.mainTabId,chromeGroupId:e.chromeGroupId,memberCount:e.memberTabs.length,memberTabs:e.memberTabs.map(e=>({id:e.tabId,url:e.url})),indicatorStates:Array.from(e.memberStates.entries()).map(([e,t])=>({tabId:e,state:t.indicatorState}))}));let n;try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e&&e.id&&(n={id:e.id,indicatorState:ze.getTabIndicatorState(e.id)})}catch{}s={groups:t,currentTab:n,totalGroups:e.length}}catch(d){s={error:`Failed to get tab orchestration debug info: ${d}`}}const i={version:chrome.runtime.getManifest().version,timestamp:r,systemPrompt:n,messages:e,preCompactionMessages:t,extensionId:chrome.runtime.id,userAgent:navigator.userAgent,debug:{tabs:s},environment:"production",buildType:"external"},o=JSON.stringify(i,null,2),a=new Blob([o],{type:"application/json"}),l=URL.createObjectURL(a),c=`claude-browser-conversation-${r.replace(/[:.]/g,"-")}.json`,u=document.createElement("a");return u.href=l,u.download=c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l),c}(t,r,e);return!0}catch(i){return!1}}function fH(e){const t=e["anthropic-ratelimit-unified-status"];if(!t||"allowed"===t)return{type:"within_limit"};const n={},r=e["anthropic-ratelimit-unified-5h-status"],s=e["anthropic-ratelimit-unified-5h-reset"];r&&(n["5h"]={status:"rejected"===r?"exceeded_limit":"allowed_warning"===r?"approaching_limit":"within_limit",resets_at:s?parseInt(s,10):Date.now()/1e3});const i=e["anthropic-ratelimit-unified-7d-status"],o=e["anthropic-ratelimit-unified-7d-reset"];i&&(n["7d"]={status:"rejected"===i?"exceeded_limit":"allowed_warning"===i?"approaching_limit":"within_limit",resets_at:o?parseInt(o,10):Date.now()/1e3});const a=e["anthropic-ratelimit-unified-7d_opus-status"],l=e["anthropic-ratelimit-unified-7d_opus-reset"];a&&(n["7d_opus"]={status:"rejected"===a?"exceeded_limit":"allowed_warning"===a?"approaching_limit":"within_limit",resets_at:l?parseInt(l,10):Date.now()/1e3});const c=e["anthropic-ratelimit-unified-overage-status"],u=e["anthropic-ratelimit-unified-overage-reset"];c&&(n.overage={status:"rejected"===c?"exceeded_limit":"allowed_warning"===c?"approaching_limit":"within_limit",resets_at:u?parseInt(u,10):Date.now()/1e3});const d=e["anthropic-ratelimit-unified-reset"],h=d?parseInt(d,10):Date.now()/1e3+3600,p="rejected"===t?"exceeded_limit":"allowed_warning"===t?"approaching_limit":"within_limit";let f;f="within_limit"===p?{type:"within_limit",windows:n}:"approaching_limit"===p?{type:"approaching_limit",resetsAt:h,windows:n,remaining:5}:{type:"exceeded_limit",resetsAt:h,windows:n};const m=e["anthropic-ratelimit-unified-overage-disabled-reason"];return m&&"within_limit"!==f.type&&(f.overageDisabledReason=m),f}function mH(e){if(e instanceof qn&&429===e.status)try{const t=e.message,n=t.indexOf("{");if(-1!==n){const e=t.substring(n),r=JSON.parse(e);if("error"===r.type&&r.error){const e=r.error;if("rate_limit_error"===e.type&&e.message)try{const t=JSON.parse(e.message);if("exceeded_limit"===t.type||"approaching_limit"===t.type)return t}catch{}}if("rate_limit_error"===r.type&&r.message)try{const e=JSON.parse(r.message);if("exceeded_limit"===e.type||"approaching_limit"===e.type)return e}catch{}if("exceeded_limit"===r.type||"approaching_limit"===r.type)return r}}catch{}if(e&&"object"==typeof e&&"status"in e){const t=e;if(429===t.status){let e=Math.floor(Date.now()/1e3)+18e3;if(t.headers&&"get"in t.headers){const n=t.headers,r=n.get("x-ratelimit-reset"),s=n.get("retry-after");if(r)e=parseInt(r);else if(s){const t=parseInt(s);isNaN(t)||(e=Math.floor(Date.now()/1e3)+t)}}return{type:"exceeded_limit",resetsAt:e}}}return null}function gH(e,t){if(e.type!==t.type)return!0;if("within_limit"!==t.type&&"within_limit"!==e.type){if(e.resetsAt!==t.resetsAt)return!0;if(e.overageDisabledReason!==t.overageDisabledReason)return!0;const n=e.windows?.overage?.status,r=t.windows?.overage?.status;if(n!==r)return!0;if("approaching_limit"===e.type&&"approaching_limit"===t.type){if(e.remaining!==t.remaining)return!0}}return!1}const yH=()=>{const e=pe("chrome_ext_system_prompt",{}),t=pe("chrome_ext_skip_perms_system_prompt",{}),n=pe("chrome_ext_multiple_tabs_system_prompt",{}),r=pe("chrome_ext_explicit_permissions_prompt",{}),s=pe("chrome_ext_tool_usage_prompt",{});return de.useMemo(()=>{const i=n.multipleTabsSystemPrompt??"";return{systemPrompt:e.systemPrompt,skipPermissionsSystemPrompt:t.skipPermissionsSystemPrompt,multipleTabsSystemPrompt:i||void 0,explicitPermissionsPrompt:r.prompt,toolUsagePrompt:s.prompt}},[e.systemPrompt,t.skipPermissionsSystemPrompt,n.multipleTabsSystemPrompt,r.prompt,s.prompt])};function xH(e,t,n,r){if("system"===t||"non-script"===t){const n=["navigate","update_plan","TodoWrite","turn_answer_start"];if(!n.includes(e))return{allowed:!1,errorMessage:`Tool ${e} is not available on ${t} pages.`,suggestedGuidance:`Available tools: ${n.join(", ")}. Use navigate to go to a regular webpage first.`}}return"update_plan"===e&&"follow_a_plan"!==n?{allowed:!0}:qe(n,r)&&"update_plan"!==e&&"turn_answer_start"!==e?{allowed:!1,errorMessage:"You must use update_plan to create and get approval for a plan first.",suggestedGuidance:"Use update_plan to present your approach and get user approval before using other tools."}:{allowed:!0}}ke.NAVIGATE,ke.READ_PAGE_CONTENT,ke.TYPE,ke.UPLOAD_IMAGE,ke.CLICK,ke.READ_PAGE_CONTENT;const vH=xt({skill:vt()}),bH=Mn(vt());function CH(e){try{const t=new URL(e);return t.hostname.toLowerCase().replace(/^www\./,"")}catch{return""}}function wH(e){return"string"==typeof e?e.length:Array.isArray(e)?e.reduce((e,t)=>{const n=t.type;if("text"===n)return e+(t.text?.length||0);if("image"===n){const n=t.source?.data;return e+(n?.length||0)}return e+JSON.stringify(t).length},0):JSON.stringify(e).length}function kH(e,t,n=26214400){const r=function(e,t=26214400){const n=[];let r=0,s=!1;for(let i=0;i<e.length;i++){const o=e[i];if(r+=wH(o.content),!s&&r>=t&&(s=!0),Array.isArray(o.content))for(let e=0;e<o.content.length;e++){const t=o.content[e];if("image"===t.type){const r=t;if(r.source&&"data"in r.source&&"base64"===r.source.type){const t=r.source.data,s=r.source.media_type||"image/png",o=`img_${i}_${e}_${t.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;n.push({id:o,base64Data:t,mediaType:s,messageIndex:i,contentIndex:e})}}else if("tool_result"===t.type&&Array.isArray(t.content)){const r=t.content;for(let t=0;t<r.length;t++){const s=r[t];if("image"===s.type){const r=s;if(r.source&&"data"in r.source&&"base64"===r.source.type){const s=r.source.data,o=r.source.media_type||"image/png",a=`img_${i}_${e}_${t}_${s.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;n.push({id:a,base64Data:s,mediaType:o,messageIndex:i,contentIndex:e,nestedIndex:t})}}}}}}return{exceedsThreshold:s,currentSize:r,extractedImages:n,imagesToUpload:s?n:[]}}(e,n);if(!r.exceedsThreshold)return;const{imagesToUpload:s,messagesWithImagesRemoved:i,changedMessageIndices:o}=function(e,t,n){const r=[];let s=t;const i=new Set;for(let a=0;a<e.length&&!(s<n);a++){const t=e[a];if(Array.isArray(t.content))for(let e=0;e<t.content.length&&!(s<n);e++){const o=t.content[e];if("image"===o.type){const t=o;if(t.source&&"data"in t.source&&"base64"===t.source.type){const n=t.source.data,o=t.source.media_type||"image/png",l=Math.ceil(n.length/4*3),c=`img_${a}_${e}_${n.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;r.push({id:c,base64Data:n,mediaType:o,messageIndex:a,contentIndex:e}),s-=l,i.add(a)}}else if("tool_result"===o.type&&Array.isArray(o.content)){const t=o.content;for(let o=0;o<t.length&&!(s<n);o++){const n=t[o];if("image"===n.type){const t=n;if(t.source&&"data"in t.source&&"base64"===t.source.type){const n=t.source.data,l=t.source.media_type||"image/png",c=Math.ceil(n.length/4*3),u=`img_${a}_${e}_${o}_${n.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;r.push({id:u,base64Data:n,mediaType:l,messageIndex:a,contentIndex:e,nestedIndex:o}),s-=c,i.add(a)}}}}}}const o=e.map((e,t)=>{if(!i.has(t)||!Array.isArray(e.content))return e;const n=new Set(r.map(e=>e.id)),s=e.content.map((e,r)=>{if("image"===e.type){const s=e;if(s.source&&"data"in s.source){const e=s.source.data,i=`img_${t}_${r}_${e.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;if(n.has(i))return null}}else if("tool_result"===e.type&&Array.isArray(e.content)){const s=e.content.filter((e,s)=>{if("image"===e.type){const i=e;if(i.source&&"data"in i.source){const e=i.source.data,o=`img_${t}_${r}_${s}_${e.substring(0,16).replace(/[^a-zA-Z0-9]/g,"")}`;return!n.has(o)}}return!0});return{...e,content:s}}return e}).filter(e=>null!==e);return 0===s.length?{...e,content:""}:{...e,content:s}});return{imagesToUpload:r,messagesWithImagesRemoved:o,changedMessageIndices:i}}(e,r.currentSize,n);if(0===s.length)return;const a={};o.forEach(e=>{a[e]=i[e]});s.reduce((e,t)=>e+Math.ceil(t.base64Data.length/4*3),0);t(a)}async function SH(e,t){try{if(!e||""===e.trim())return"";const n=[{role:"user",content:function(e){return`<message>\n${e}\n</message>\n\nBased on this message, generate a 7-word-or-less status describing the high-level task or goal Claude is working on. Put it between <status> tags.`}(e.slice(0,500))},{role:"assistant",content:"Here is the status:\n\n<status>"}];return function(e){if(!e.content||0===e.content.length)return"";const t=e.content.filter(e=>"text"===e.type).map(e=>"text"in e?e.text:"").join("\n"),n=t.match(/<status>(.*?)<\/status>/s);if(n&&n[1])return n[1].trim();const r=t.match(/^(.*?)<\/status>/s);return r&&r[1]?r[1].trim():""}(await t({maxTokens:128,messages:n,system:"Generate ultra-concise status updates describing the current high-level task or goal.\nYour status should describe WHAT Claude is trying to accomplish, not the specific action.\n\nREQUIREMENTS:\n- Maximum 7 words\n- Describe the goal/task, not the action\n- Be high-level and task-oriented\n- No punctuation at the end\n\nExamples of GOOD statuses (goal-oriented):\n- Researching company information\n- Looking up flight options\n- Completing checkout process\n- Finding product details\n- Setting up account\n- Analyzing search results\n- Gathering page content\n\nExamples of BAD statuses (too action-specific):\n- Clicking submit button\n- Reading page content\n- Taking screenshot\n- Typing into form field",modelClass:"small_fast"}))}catch(n){return""}}const MH=[".pdf",".png",".jpg",".jpeg",".gif",".webp",".svg"];let NH=null;function _H(e){NH={tabId:e,timestamp:Date.now()}}function jH(){const e=Me("chrome_ext_downloads");de.useEffect(()=>{if(!e)return;const t=async e=>{if("complete"!==e.state?.current)return;const t=NH;if(t&&!(Date.now()-t.timestamp>1e4))try{const[n]=await chrome.downloads.search({id:e.id});if(!n?.filename)return;if(!function(e){const t=e.toLowerCase();return MH.some(e=>t.endsWith(e))}(n.filename))return;await ze.initialize();const r=await ze.findGroupByTab(t.tabId);if(!r)return;const s=`file://${n.filename}`,i=await chrome.tabs.create({url:s,active:!1});i.id&&await ze.addTabToGroup(r.mainTabId,i.id),NH=null}catch(n){}};return chrome.downloads.onChanged.addListener(t),()=>{chrome.downloads.onChanged.removeListener(t)}},[e])}const EH=1e4,TH=(e,t)=>{};function AH({apiKey:e,authToken:t,refreshTokenIfNeeded:n,sessionId:r,deviceId:s,model:i,modelRef:o,onPermissionRequired:a,tabId:l,currentDomain:c,onShowNotificationBanner:u,onSendNotification:d,onShareRequested:h,permissionManager:p,permissionMode:f}){const[m,g]=de.useState([]),y=de.useRef(new Set),x=de.useRef([]);de.useEffect(()=>{x.current=m},[m]),de.useEffect(()=>{Hx.getState().setMessages(m)},[m]);const v=de.useRef(!1);de.useEffect(()=>{const e=setTimeout(()=>{fe(me.TEST_DATA_MESSAGES).then(e=>{e&&e.length>0&&g(e)})},100);return()=>clearTimeout(e)},[]);const[b,C]=de.useState([]),[w,k]=de.useState(!1),[S,M]=de.useState(!1),[N,_]=de.useState(!1),[j,E]=de.useState(null),[T,A]=de.useState({type:"within_limit"}),[L,O]=de.useState(null),[I,D]=de.useState(null),[R,P]=de.useState(""),{analytics:z}=B(),[H,V]=de.useState([]),Z=yH(),W=(()=>{const{getFeatureValue:e}=Se(),t=pe("crochet_domain_skills",{});return de.useMemo(()=>{if(!t||0===Object.keys(t).length)return{};const n=bH.safeParse(t);if(!n.success)return{};const r=n.data,s={},i=[...new Set(Object.values(r))];for(const t of i)try{const n=e(t,{skill:""}),i=vH.safeParse(n);if(i.success){const e=i.data.skill;for(const[n,i]of Object.entries(r))i===t&&(s[n]=e)}}catch(j){}return s},[t,e])})(),q=pe("chrome_ext_custom_tool_prompts",{}),G=de.useRef(null),J=de.useRef(null),K=de.useRef(!1),Y=de.useRef(null),Q=de.useRef(!1),X=de.useRef(null),ee=de.useRef(!1),te=de.useRef(null),ne=de.useRef(new Set),re=de.useRef([Ge,Je,Ke,Ye,Qe,Xe,et,tt,nt,rt,st,it,ot,at,lt,ct]),{userProfile:se}=F(),ie=!0,oe=Ne(),ae=$(),le=de.useCallback(e=>e?e.startsWith("chrome://")||e.startsWith("chrome-extension://")||"about:blank"===e?"system":e.startsWith("https://chromewebstore.google.com/")?"non-script":"regular":"regular",[]);de.useEffect(()=>{e||t?(E(null),e?G.current=new Gn({baseURL:oe.apiBaseUrl,apiKey:e,dangerouslyAllowBrowser:!0}):t&&(G.current=new Gn({baseURL:oe.apiBaseUrl,authToken:t,dangerouslyAllowBrowser:!0}))):E("No API key or Auth Token provided.")},[e,t,oe.apiBaseUrl]),de.useEffect(()=>{i&&r&&f&&z?.track("claude_chrome.chat.session_started",{model:o.current,sessionId:r,permissions:f})},[z,i,o,r,f]),de.useEffect(()=>{q&&0!==Object.keys(q).length&&re.current.forEach(e=>{"update_plan"===e.name&&q.update_plan&&e.setPromptsConfig?.(q.update_plan)})},[q]);const ce=de.useCallback(async()=>{if(!l)return;const e="skip_all_permission_checks"!==f&&"follow_a_plan"!==f||!Z.skipPermissionsSystemPrompt?Z.systemPrompt:Z.skipPermissionsSystemPrompt;if(!e)throw V(null),new Error("Unable to initialize the chat session. Please check your connection and try again.");const t=navigator.platform.toUpperCase().indexOf("MAC")>=0||navigator.userAgent.toUpperCase().indexOf("MAC")>=0,n=t?"Mac":"Windows/Linux",r=t?"cmd":"ctrl",s=(new Date).toLocaleString(),o=U(i,ae),a=[{type:"text",text:e.replace(/{{currentDateTime}}/g,s).replace(/{{modelName}}/g,o)}],c=await fe(me.SYSTEM_PROMPT);c&&a.push({type:"text",text:c}),a.push({type:"text",text:`Platform-specific information:\n- You are on a ${n} system\n- Use "${r}" as the modifier key for keyboard shortcuts (e.g., "${r}+a" for select all, "${r}+c" for copy, "${r}+v" for paste)`}),Z.multipleTabsSystemPrompt&&a.push({type:"text",text:Z.multipleTabsSystemPrompt}),a.push({type:"text",text:"<turn_answer_start_instructions>\nBefore outputting any text response to the user this turn, call turn_answer_start first.\n\nWITH TOOL CALLS: After completing all tool calls, call turn_answer_start, then write your response.\nWITHOUT TOOL CALLS: Call turn_answer_start immediately, then write your response.\n\nRULES:\n- Call exactly once per turn\n- Call immediately before your text response\n- NEVER call during intermediate thoughts, reasoning, or while planning to use more tools\n- No more tools after calling this\n</turn_answer_start_instructions>"}),a[a.length-1].cache_control={type:"ephemeral"},V(a)},[l,Z,f,ae,i]),ue=de.useCallback(async()=>{g([]),C([]),E(null),O(null),P(""),A({type:"within_limit"}),D(null),te.current=null,ne.current.clear(),v.current=!1,l&&ze.removePrefix(l).catch(()=>{}),await p.clearOncePermissions(),p.clearTurnApprovedDomains();try{await ce()}catch(e){E(LH(e))}},[ce,p,l]);de.useEffect(()=>{if(ee.current)ce().catch(e=>{E(LH(e))});else{ee.current=!0;(async()=>{await ue();try{await ce()}catch(e){E(LH(e))}})()}},[f,ue,ce]),de.useEffect(()=>()=>{X.current&&(clearTimeout(X.current),X.current=null)},[]);const he=de.useCallback(()=>{K.current=!0,J.current&&(J.current.abort(),J.current=null),k(!1),M(!1),_(!1),P("")},[]),ge=de.useCallback((e,t=!1)=>{const n=e.role;if("string"==typeof e.content)return t?{role:n,content:[{type:"text",text:e.content,cache_control:{type:"ephemeral"}}]}:{role:n,content:e.content};if(Array.isArray(e.content)){const r=JSON.parse(JSON.stringify(e.content));return t&&r.length>0&&(r[r.length-1].cache_control={type:"ephemeral"}),{role:n,content:r}}return{role:n,content:""}},[]),ye=de.useCallback(e=>{const t=e.filter(e=>!("type"in e&&"result"===e.type));let n=-1;for(let s=t.length-1;s>=0;s--)if("assistant"===t[s].role){n=s;break}const r=t.map((e,t)=>ge(e,t===n));if(n>=0){const e=n+1;r.length}return r},[ge]),xe=de.useCallback(async(e,t,i)=>{if(!G.current)throw new Error("Client not initialized");return await n(),async function({params:e,client:t,currentModel:n,modelConfig:r,userAccountUuid:s,sessionId:i,deviceId:o,permissionMode:a,traceHeadersEnabled:l,loggedConfigsRef:c,evalLog:u,abortSignal:d,parentSpan:h,spanName:p}){const{modelClass:f,maxTokens:m,model:g,...y}=e;let x=n;g?x=g:"small_fast"===f&&(x=r.small_fast_model||"claude-haiku-4-5-20251001");const v=await qg(y.messages),b={...y,messages:v,max_tokens:m,model:x,betas:["oauth-2025-04-20"]},C=p||"anthropic_message_create",w=await Jn(C,async e=>{if(s){const t=`user_${o??"unknown"}_account_${s}_session_${i??"unknown"}`;b.metadata={user_id:t},e.setAttribute("account_uuid",s)}e.setAttribute("session_id",i||""),e.setAttribute("permissions",a),e.setAttribute("model",n);const{traceId:r,headers:h}=Kn(l);e.setAttribute("sampling_trace_id",r),c.has(C)||(c.add(C),u("sampling_config",{configId:C,toolset:b.tools||[],systemPrompt:b.system,maxTokens:b.max_tokens,headers:h,model:b.model,metadata:b.metadata,betas:b.betas})),b.messages?.length>0&&b.messages.forEach(e=>{u("message",{...e,sampling_config_id:C})});const p={headers:h};return d&&(p.signal=d),await t.beta.messages.create(b,p)},h);return u("message",{...w,sampling_config_id:C}),w}({params:e,client:G.current,currentModel:o.current,modelConfig:ae,userAccountUuid:se?.account.uuid,sessionId:r,deviceId:s,permissionMode:f,traceHeadersEnabled:ie,loggedConfigsRef:y.current,evalLog:TH,abortSignal:J.current?.signal,parentSpan:t,spanName:i})},[o,ae,se?.account.uuid,ie,n,r,s,f]),ve=de.useCallback(async(e,t,n,s)=>{const i=t.action;return await Jn(`tool_execution_${e}${i?"_"+i:""}`,async s=>{s.setAttribute("session_id",r||""),s.setAttribute("permissions",f),s.setAttribute("tool_name",e),i&&s.setAttribute("action",i);const o={toolUseId:n,tabId:l,sessionId:r,createAnthropicMessage:(e,t)=>xe(e,s,t),permissionManager:p,messages:x.current},a=re.current.find(t=>t.name===e);if(!a)throw new Error(`Unknown tool: ${e}`);const u={name:e,sessionId:r,permissions:f};"computer"===e&&i&&(u.action=i),c&&(u.domain=c);try{const n=ut(e,t,re.current),r=await a.execute(n,o);return"type"in r?(u.success=!1,s.setAttribute("success",!1),s.setAttribute("failure_reason","needs_permission")):(u.success=!r.error,s.setAttribute("success",!r.error)),z?.track("claude_chrome.chat.tool_called",u),r}catch(d){throw z?.track("claude_chrome.chat.tool_called",{...u,success:!1,failureReason:"exception"}),d}},s)},[l,r,xe,p,f,z,c]),be=de.useCallback(e=>{const t=[];if(!W)return t;for(const n of e)if(n.url){const e=CH(n.url);e&&W[e]&&!ne.current.has(e)&&(t.push({domain:e,skill:W[e]}),ne.current.add(e))}return t},[W]),Ce=de.useCallback((e,t,n)=>{if(!e)return!1;const r=JSON.stringify(e.availableTabs.map(e=>({id:e.id,title:e.title,url:e.url})));if(te.current!==r){const s={};s.availableTabs=e.availableTabs,null===te.current&&(s.initialTabId=n);const i=be(e.availableTabs);i.length>0&&(s.domainSkills=i);const o=`<system-reminder>${dt(s)}</system-reminder>`;return t.push({type:"text",text:o}),te.current=r,!0}return!1},[be]),we=de.useCallback(async(e,t,n)=>{const r=[];let s;const i=e=>{if(e.error)return e.error;const t=[];if(e.output&&t.push({type:"text",text:e.output}),e.base64Image){const n=e.imageFormat?`image/${e.imageFormat}`:"image/png";t.push({type:"image",source:{type:"base64",media_type:n,data:e.base64Image}})}return t.length>0?t:""},o=(e,t)=>{const n=!!t.error;return{type:"tool_result",tool_use_id:e,content:i(t),...n&&{is_error:!0}}};for(const u of e){u.input;try{const e=xH(u.name,t,f,v.current);if(!e.allowed){r.push(o(u.id,{error:`${e.errorMessage}\n\n${e.suggestedGuidance}`}));continue}const i=await ve(u.name,u.input,u.id,n),c=i;if("tabContext"in c&&c.tabContext&&(s={availableTabs:c.tabContext.availableTabs}),"type"in i&&"permission_required"===i.type){const e={...i};if(!a){r.push(o(u.id,{error:"Permission required but no handler available"}));continue}let t=!1;if("update_plan"===u.name&&"follow_a_plan"!==f?t=!0:(u.name,t=await a(e)),!t){r.push(o(u.id,{error:"update_plan"===u.name?"Plan rejected by user. Ask the user how they would like to change the plan.":"Permission denied by user"}));continue}if("update_plan"===u.name){const{approach:e,domains:t}=u.input;let n="User has approved your plan. You can now start executing the plan.";e&&e.length>0?n+="\n\nPlan steps:\n"+e.map((e,t)=>`${t+1}. ${e}`).join("\n")+"\n\nStart by using the TodoWrite tool to track your progress through these steps.":n+=" Start with updating your todo list if applicable.",v.current=!0,await ht(t,p),r.push(o(u.id,{output:n}));continue}const c=await ve(u.name,u.input,u.id,n);if("type"in c&&"permission_required"===c.type)throw new Error("Permission still required after granting");const d=c;"tabContext"in d&&d.tabContext&&(s={availableTabs:d.tabContext.availableTabs}),r.push(o(u.id,c)),"computer"!==u.name||!u.input?.action?.toLowerCase().includes("click")||"error"in c&&c.error||!l||_H(l)}else r.push(o(u.id,i)),"computer"!==u.name||!u.input?.action?.toLowerCase().includes("click")||"error"in i&&i.error||!l||_H(l)}catch(c){const e=LH(c);r.push(o(u.id,{error:e}))}}return{toolResults:r,lastTabContext:s}},[ve,a,l,f,p]),ke=de.useCallback(async(e,t,i,a,c,x=!1)=>{if(!G.current)throw new Error("Client not initialized");if(!l)throw new Error("No active tab");if(!H)throw new Error("Unable to initialize the chat session. Please check your connection and try again.");"follow_a_plan"!==f||a||(v.current=!1,p.clearTurnApprovedDomains());const w=aH.calculateMetricsFromMessages(m,EH);w&&(w.percentRemaining<20&&w.percentRemaining>=10||w.percentRemaining);let S=m;const N=await async function(e){const t=function(e){const t=e.trim();return"/share"===t?"share":"/compact"===t?"compact":null}(e.message);return t?e.supportedCommands&&!e.supportedCommands.includes(t)?null:"share"===t?(await pH({messages:e.messages,systemPrompt:e.systemPrompt??null,messageHistory:e.messageHistory,onShareRequested:e.onShareRequested}),"share"):"compact"===t?"compact":null:null}({message:e,messages:m,systemPrompt:H,messageHistory:b,onShareRequested:h});if(N===hH.Share)return void k(!1);const j=N===hH.Compact,L=aH.calculateMetricsFromMessages(m,EH);let I;for(let n=m.length-1;n>=0;n--){const e=m[n];if(e&&"role"in e&&"assistant"===e.role){I=e;break}}const R=!j&&L&&L.isError;if(j||R){const e=j?"manual":"auto";_(!0),E(null),J.current=new AbortController;try{if(!G.current)throw new Error("Client not initialized");const t=new lH(e=>xe(e,c,"sampling_compaction")),n=await t.compactConversation(m,EH,!j);if(g(n.messagesAfterCompacting),C(m),O(n.tokensSaved),te.current=null,ne.current.clear(),S=n.messagesAfterCompacting,z?.track(`claude_chrome.chat.${e}_compact`,{preTokens:n.preCompactTokenCount,postTokens:n.postCompactTokenCount,savedTokens:n.tokensSaved,sessionId:r,permissions:f}),j)return void _(!1)}catch(Z){return"Request was aborted."===LH(Z)||Z instanceof Error&&"AbortError"===Z.name||K.current||E(Z instanceof Error?Z.message:`Failed to ${e}-compact conversation`),void _(!1)}finally{_(!1),J.current&&(J.current=null)}}k(!0),E(null),P(""),Y.current=Date.now(),Q.current=!1;let F;if(0===m.length&&u&&(X.current=setTimeout(()=>{u(),X.current=null},3e4)),z?.track("claude_chrome.chat.user_message_sent",{model:o.current,sessionId:r,permissions:f}),x)F=[...S];else{const n={role:"user",content:e?[{type:"text",text:e}]:[],...a&&{isDomainTransitionMessage:!0}};if(t&&t.length>0&&Array.isArray(n.content)){i&&n.content.push({type:"text",text:"<system-reminder>\nCONTEXT ABOUT ANNOTATIONS IN USER SCREENSHOTS:\n\nThe GLOWING BLUE OUTLINES you see are USER-SELECTED REGIONS on the user's screenshot. These markings:\n- Are regions selected by the user to point out specific areas\n- Are NOT part of the website/interface/UI\n- Will NOT appear in screenshots you take yourself\n- Have white outlines for visibility on all backgrounds\n\nUser screenshots may show a different viewport/responsive layout than what you see. Page elements may be in different positions due to:\n- Different screen sizes or browser window dimensions\n- Responsive design breakpoints\n- Mobile vs desktop views\n- Zoom levels or scaling\n\nINSTRUCTIONS FOR HANDLING ANNOTATED USER SCREENSHOTS:\n1. FIRST, take your own screenshot to see the current page state and layout\n2. Compare the user's annotated screenshot with your view to identify layout differences\n3. The blue outlines indicate regions the user selected - focus on what's inside or near these areas\n4. Look for what UI element the annotation is highlighting based on visual context\n5. Account for responsive changes - an element marked on the right might be below on your screen\n6. Use the user's description combined with the annotation to determine intent\n7. Find and interact with the actual UI element being indicated\n\nFor example: If a blue outline highlights a menu item that appears horizontally in the user's screenshot but is in a hamburger menu on your view, open the hamburger menu first to find the item.\n</system-reminder>"});for(const e of t)e.id&&n.content.push({type:"text",text:`<system-reminder>[Image ID: ${e.id}]</system-reminder>`}),n.content.push({type:"image",source:{type:"base64",media_type:e.mediaType,data:e.base64}})}F=[...S,n];try{const e={availableTabs:await ze.getValidTabsWithMetadata(l)};Array.isArray(n.content)&&Ce(e,n.content,l)}catch(Z){}Array.isArray(n.content)&&qe(f,v.current)&&n.content.push({type:"text",text:pt()})}if(g(F),!l)return E("No active tab"),void k(!1);if(!x){(0===S.length||S.every(e=>e.isCompactSummary||e.isCompactionMessage))&&!j&&(async()=>{try{const e=F[F.length-1],t=await Nn(e,e=>xe(e,c,"sampling_title_generation"));t&&(await ze.initialize(),await ze.updateGroupTitle(l,t,!0))}catch(Z){}})()}let V="regular";try{const e=await chrome.tabs.get(l);V=le(e.url)}catch(Z){}let $=null;try{$=await ft(re.current,{tabId:l})}catch(Z){const e=LH(Z);return E(e),void k(!1)}$.length>0&&($[$.length-1].cache_control={type:"ephemeral"}),K.current=!1,D(null);let B=!0,U=0;for(;B&&!K.current;){if(U++,B=!1,k(!0),J.current=new AbortController,U>1)try{const e=await chrome.tabs.get(l),t=le(e.url);t!==V&&(V=t)}catch(Z){}let e;const t=new Promise(t=>{e=t});let i;if(l){const e=await ze.findGroupByMainTab(l);if(e)try{const t=await chrome.tabGroups.get(e.chromeGroupId);t.title&&"Claude"!==t.title&&await ze.addLoadingPrefix(l)}catch(Z){}}const a=10;let u,h=0;do{u=!1,await Jn("message_streaming",async p=>{p.setAttribute("session_id",r||""),p.setAttribute("permissions",f),p.setAttribute("model",o.current);try{let a=ye(F);a=await qg(a),kH(a,e=>{g(t=>t.map((t,n)=>e[n]||t)),a=a.map((t,n)=>e[n]||t),F=F.map((t,n)=>e[n]||t)});const{traceId:u,headers:d}=Kn(ie);p.setAttribute("sampling_trace_id",u);const h={signal:J.current?.signal,headers:d},m={role:"assistant",content:[],...u&&{traceId:u}};F.push(m),g([...F]);let v="";const b={messages:a,model:o.current,max_tokens:EH,tools:$||[],system:H,betas:["oauth-2025-04-20"]};if(se?.account.uuid){const e=`user_${s??"unknown"}_account_${se.account.uuid}_session_${r??"unknown"}`;b.metadata={user_id:e},p.setAttribute("account_uuid",se.account.uuid),c?.setAttribute("account_uuid",se.account.uuid)}await n();const C=JSON.stringify({toolset:$||[],systemPrompt:H,maxTokens:b.max_tokens,model:b.model,betas:b.betas}),w=`send_user_message_${Array.from((new TextEncoder).encode(C)).reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"").slice(0,16)}`;if(y.current.has(w)||(y.current.add(w),b.max_tokens,b.model,b.metadata,b.betas),1===U&&!x){F[F.length-2]}const k=G.current.beta.messages.stream(b,h).on("connect",()=>{if(k.response){const e={};if(k.response.headers.forEach((t,n)=>{n.startsWith("anthropic-ratelimit-")&&(e[n]=t)}),Object.keys(e).length>0){const t=fH(e);t&&gH(T,t)&&A(t)}}}).on("text",e=>{v+=e;const t=F[F.length-1];t&&"assistant"===t.role&&(t.content=[{type:"text",text:v}]),g([...F])}).on("message",async t=>{try{"stop_reason"in t&&t.stop_reason&&(i=t.stop_reason,D({reason:t.stop_reason,messageId:t.id}));const n=F.pop(),r={...t,...n&&"traceId"in n&&{traceId:n.traceId},..."usage"in t&&t.usage&&{usage:t.usage}};if(F.push(r),g([...F]),Array.isArray(t.content)){t.content.forEach((e,t)=>{});const n=t.content.filter(e=>"tool_use"===e.type);if(n.length>0){v&&!v.toLowerCase().includes("<answer>")?SH(v,xe).then(e=>{e&&P(e)}).catch(e=>{}):v&&v.toLowerCase().includes("<answer>")&&P("");const t=["read_page","get_page_text","find","turn_answer_start"];n.some(e=>!t.includes(e.name))&&M(!0);let r,s=[];if(K.current)s=n.map(e=>({type:"tool_result",tool_use_id:e.id,content:"Tool execution cancelled by user",is_error:!0}));else{const e=await we(n,V,p);s=e.toolResults,r=e.lastTabContext,K.current}if(r&&s.length>0){const e=s[s.length-1];if("string"==typeof e.content&&(e.content=[{type:"text",text:e.content}]),Array.isArray(e.content)){const t=JSON.stringify(r.availableTabs.map(e=>({id:e.id,title:e.title,url:e.url})));if(te.current!==t){const n={};n.availableTabs=r.availableTabs,null===te.current&&(n.initialTabId=l);const s=be(r.availableTabs);s.length>0&&(n.domainSkills=s);const i=`<system-reminder>${dt(n)}</system-reminder>`;e.content.push({type:"text",text:i}),te.current=t}}}const i={role:"user",content:s};return F.push(i),g([...F]),B=!0,void e()}}v&&!v.toLowerCase().includes("<answer>")?SH(v,xe).then(e=>{e&&P(e)}).catch(e=>{}):v&&v.toLowerCase().includes("<answer>")&&P(""),F.length,F[F.length-1],e()}catch(Z){throw e(),Z}}).on("finalMessage",e=>{if(e?.message_limit&&gH(T,e.message_limit)&&A(e.message_limit),e&&"usage"in e){const t=e.usage;z?.track("claude_chrome.chat.usage",{usage:t,sessionId:r,permissions:f})}});await k.done(),await t}catch(Z){const t=LH(Z);if("Request was aborted."===t)return;p.setStatus({code:Yn.ERROR,message:t});const n=t.toLowerCase(),r=mH(Z);if(r)A(r),E(null);else if((n.startsWith("overloaded")||n.startsWith("internal server error")||n.startsWith("network error")||n.startsWith("connection error")||n.startsWith("failed to fetch")||n.startsWith("499")||n.startsWith("this request would exceed the rate limit"))&&h+1<a){h++;let e=Math.pow(2,h);e+=Math.random()*e,await new Promise(t=>setTimeout(t,1e3*e)),u=!0,F.pop(),g([...F])}else Z instanceof Error&&Z.stack,Z instanceof Error&&Z.constructor.name,E(t),A({type:"within_limit"});return}finally{if(J.current=null,!B){k(!1),M(!1);try{await mt.detachDebugger(l)}catch(Z){}z?.track("claude_chrome.chat.assistant_response_stopped",{model:o.current,cancelled:K.current,sessionId:r,permissions:f,stopReason:i}),K.current}const e=F[F.length-1];if(e&&"assistant"===e.role){const t=e.content;Array.isArray(t)&&(0===t.length||1===t.length&&"text"===t[0].type&&""===t[0].text)&&(F.pop(),g([...F]))}const t=Y.current?Date.now()-Y.current:0;!B&&Y.current&&t>6e4&&!Q.current&&d&&(d(),Q.current=!0),!B&&l&&ze.addCompletionPrefix(l).catch(()=>{}),B||(Y.current=null,Q.current=!1)}},c)}while(u&&h<a)}},[l,H,o,m,b,T,z,le,ye,ie,se?.account.uuid,n,u,h,we,d,xe,f,r,s,Ce,be,p]),Me=de.useCallback(async(e,t,n,s)=>{await Jn("send_user_message",async i=>(i.setAttribute("session_id",r||""),i.setAttribute("permissions",f),i.setAttribute("model",o.current),await ke(e,t,n,s,i,!1)))},[ke,r,f,o]),_e=de.useCallback(async()=>{const e=[...m];for(let t=e.length-1;t>=0;t--)if("assistant"===e[t].role){e.splice(t,1);break}g(e),D(null),await Jn("retry_last_message",async e=>(e.setAttribute("session_id",r||""),e.setAttribute("permissions",f),e.setAttribute("model",o.current),await ke("",void 0,void 0,void 0,e,!0)))},[m,ke,r,f,o]),je=de.useCallback(()=>{E(null)},[]);return{messages:m,messageHistory:b,sendMessage:Me,retryLastMessage:_e,cancel:he,clearMessages:ue,clearError:je,isLoading:w,isInitializing:!1,hasInteractiveTools:S,isCompacting:N,error:j,messageLimit:T,setMessages:g,tokensSaved:L,createAnthropicMessage:xe,lastStopReason:I,currentStatus:R,conversationUuid:null}}function LH(e){if("string"==typeof e){const t=e.match(/^(\d{3})\s+(\{.+\})$/s);let n=e;t&&(n=t[2]);try{const t=JSON.parse(n);return t?.error?.message?t.error.message:t?.message?t.message:e}catch{return e}}if(e instanceof Error){const t=e.message,n=t.match(/^(\d{3})\s+(\{.+\})$/s);let r=t;n&&(r=n[2]);try{const e=JSON.parse(r);if(e?.error?.message)return e.error.message;if(e?.message)return e.message}catch{}return e.message}if(e&&"object"==typeof e){if("error"in e&&"object"==typeof e.error&&e.error&&"message"in e.error)return String(e.error.message);if("message"in e)return String(e.message)}return String(e)}function OH(){const[e,t]=de.useState(""),[n,r]=de.useState(!1),[s,i]=de.useState({isBlocked:!1,hasUpdate:!1,currentVersion:"",minSupportedVersion:null}),o=pe("chrome_ext_version_info",{});return de.useEffect(()=>{const e=chrome.runtime.getManifest().version;t(e);(async()=>{const e=await fe(me.UPDATE_AVAILABLE);r(!!e)})();const n=e=>{e[me.UPDATE_AVAILABLE]&&r(!0===e[me.UPDATE_AVAILABLE].newValue)};return chrome.storage.onChanged.addListener(n),()=>{chrome.storage.onChanged.removeListener(n)}},[]),de.useEffect(()=>{if(!e)return;const t=o?.min_supported_version,r=!!t&&function(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<Math.max(n.length,r.length);s++){const e=n[s]||0,t=r[s]||0;if(e<t)return-1;if(e>t)return 1}return 0}(e,t)<0;i({isBlocked:r,hasUpdate:n,currentVersion:e,minSupportedVersion:t||null})},[e,o,n]),s}function IH(){return he.jsx("div",{className:"flex flex-col h-screen bg-bg-100 items-center justify-center p-4",children:he.jsx(Z,{})})}const DH=e=>{if("user"!==e.role)return!1;if("string"==typeof e.content)return e.content.trim().length>0;return(Array.isArray(e.content)?e.content:[]).some(e=>"text"===e.type&&e.text?.trim().length>0)},RH=e=>{const t=Array.isArray(e.content)?e.content:[];if("assistant"===e.role){return t.some(e=>"tool_use"===e.type)}if("user"===e.role){const e=t.filter(e=>"text"===e.type&&"text"in e&&e.text?.trim().length>0);return t.filter(e=>"tool_result"===e.type).length>0&&0===e.length}return!1},PH=(e,t)=>((e,t=!1)=>{const n=[];let r=0;for(;r<e.length;){const s=e[r],i=e.slice(r+1).some(DH);if(RH(s)||t&&"assistant"===s.role&&!i){const i={type:"tool_group",messages:[s],startIndex:r,endIndex:r};let o=r+1;for(;o<e.length;){const n=e[o],r=e.slice(o+1).some(DH);if(!(RH(n)||t&&"assistant"===n.role&&!r))break;i.messages.push(n),i.endIndex=o,o++}n.push(i),r=o}else n.push({type:"single",messages:[s],startIndex:r,endIndex:r}),r++}return n})(e,t),zH=({className:e=""})=>he.jsx("svg",{width:"21",height:"10",viewBox:"0 0 21 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:he.jsx("path",{d:"M1.748 1.776V4.266H4.748V5.322H1.748V7.944H5.402V9H0.356V0.719999H5.336L5.18 1.776H1.748ZM12.7773 6.66C12.7773 7.148 12.6513 7.582 12.3993 7.962C12.1513 8.338 11.7913 8.632 11.3193 8.844C10.8513 9.056 10.2853 9.162 9.62131 9.162C8.94931 9.162 8.35931 9.062 7.85131 8.862C7.34731 8.658 6.92131 8.388 6.57331 8.052L7.33531 7.2C7.63131 7.468 7.96531 7.68 8.33731 7.836C8.70931 7.988 9.13531 8.064 9.61531 8.064C9.92731 8.064 10.2133 8.016 10.4733 7.92C10.7333 7.82 10.9413 7.672 11.0973 7.476C11.2533 7.276 11.3313 7.026 11.3313 6.726C11.3313 6.482 11.2813 6.276 11.1813 6.108C11.0813 5.94 10.9073 5.788 10.6593 5.652C10.4153 5.516 10.0733 5.384 9.63331 5.256C9.04931 5.08 8.55931 4.884 8.16331 4.668C7.76731 4.452 7.46731 4.194 7.26331 3.894C7.06331 3.59 6.96331 3.222 6.96331 2.79C6.96331 2.342 7.08531 1.95 7.32931 1.614C7.57731 1.278 7.91531 1.018 8.34331 0.834C8.77531 0.645999 9.26331 0.551999 9.80731 0.551999C10.4073 0.551999 10.9313 0.638 11.3793 0.81C11.8273 0.982 12.2273 1.228 12.5793 1.548L11.8473 2.376C11.5553 2.12 11.2413 1.934 10.9053 1.818C10.5733 1.702 10.2353 1.644 9.89131 1.644C9.61131 1.644 9.35731 1.684 9.12931 1.764C8.90131 1.844 8.72131 1.962 8.58931 2.118C8.45731 2.274 8.39131 2.472 8.39131 2.712C8.39131 2.924 8.44931 3.106 8.56531 3.258C8.68531 3.41 8.88531 3.552 9.16531 3.684C9.44931 3.812 9.83731 3.95 10.3293 4.098C10.7933 4.234 11.2093 4.402 11.5773 4.602C11.9493 4.802 12.2413 5.064 12.4533 5.388C12.6693 5.712 12.7773 6.136 12.7773 6.66ZM17.6866 0.551999C18.2466 0.551999 18.7186 0.625999 19.1026 0.774C19.4906 0.918 19.8506 1.126 20.1826 1.398L19.4566 2.262C19.2086 2.054 18.9426 1.9 18.6586 1.8C18.3746 1.7 18.0726 1.65 17.7526 1.65C17.3406 1.65 16.9606 1.754 16.6126 1.962C16.2646 2.17 15.9846 2.508 15.7726 2.976C15.5646 3.444 15.4606 4.068 15.4606 4.848C15.4606 5.612 15.5606 6.228 15.7606 6.696C15.9606 7.164 16.2346 7.504 16.5826 7.716C16.9306 7.928 17.3206 8.034 17.7526 8.034C18.1966 8.034 18.5646 7.962 18.8566 7.818C19.1486 7.67 19.4066 7.504 19.6306 7.32L20.3026 8.178C20.0266 8.446 19.6766 8.678 19.2526 8.874C18.8286 9.066 18.3126 9.162 17.7046 9.162C17.0046 9.162 16.3746 8.998 15.8146 8.67C15.2586 8.338 14.8186 7.852 14.4946 7.212C14.1746 6.572 14.0146 5.784 14.0146 4.848C14.0146 3.92 14.1806 3.138 14.5126 2.502C14.8446 1.862 15.2886 1.378 15.8446 1.05C16.4006 0.717999 17.0146 0.551999 17.6866 0.551999Z",fill:"currentColor"})}),FH=({tool:e,url:t,screenshot:n,coordinate:s,typeText:i,uploadImageData:o,onAllow:a,onDeny:l,disableAlwaysAllow:c=!1})=>{const[u,d]=de.useState(null);let h="";try{const e=new URL(t);h=e.host}catch{h=t}const p=de.useMemo(()=>({type:"netloc",netloc:h}),[h]),f=de.useCallback(()=>{a(_e.ONCE,p)},[a,p]),m=de.useCallback(()=>{c||a(_e.ALWAYS,p)},[a,p,c]);return de.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key?(e.preventDefault(),c||(d("always"),setTimeout(()=>{m()},150))):"Enter"===e.key?(e.preventDefault(),d("once"),setTimeout(()=>{f()},150)):"Escape"===e.key&&(e.preventDefault(),d("deny"),setTimeout(()=>{l()},150))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,f,l,c]),he.jsxs("div",{className:"bg-bg-000 rounded-[14px]",children:[he.jsxs("div",{className:"flex items-center gap-2 py-[10px] px-4",children:[he.jsx(_n,{size:20,className:"text-text-100"}),he.jsx("h3",{className:"font-base text-text-100",children:he.jsx(r,{defaultMessage:"New permissions required",id:"/CBk9UV8iS"})})]}),he.jsx("div",{className:"border-t border-border-300 mb-4"}),he.jsxs("div",{className:"space-y-4 px-4",children:[he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100",children:he.jsx(r,{defaultMessage:"Claude wants to {toolAction}:",id:"cELBBLzSZE",values:{toolAction:je(e)}})}),he.jsx("p",{className:"font-claude-response-code text-text-200",children:h})]}),e===ke.CLICK&&n&&s&&he.jsx("div",{children:he.jsx(jy,{screenshot:n,coordinates:s,className:"mx-auto"})}),e===ke.TYPE&&i&&he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Text to be typed:",id:"8laklrhkfX"})}),he.jsx("div",{className:"p-3 bg-bg-100 border border-border-200 rounded-lg max-h-[300px] overflow-y-auto",children:he.jsx("code",{className:"font-claude-response-code text-text-200 whitespace-pre-wrap break-words overflow-wrap-anywhere",children:i})})]}),e===ke.UPLOAD_IMAGE&&o&&he.jsx("div",{children:he.jsx(_y,{dataUrl:o,className:"mx-auto"})})]}),he.jsxs("div",{className:"px-3 py-[10px] space-y-[5px] mt-[10px] mb-0.5",children:[he.jsxs(mx,{onClick:f,isActive:"once"===u,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Allow this action",id:"6Ss5IpaxlL"})}),he.jsx(fx,{className:"text-text-500"})]}),he.jsxs(mx,{onClick:l,isActive:"deny"===u,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Decline",id:"pvtgR26QWY"})}),he.jsx(zH,{className:"text-text-500"})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 my-3 -mx-3"}),c?he.jsx("p",{className:"font-small text-text-500 px-1 mt-2",children:he.jsx(r,{defaultMessage:"Site-level permissions are disabled for this site.",id:"xsy6u5jY4z"})}):he.jsxs(mx,{onClick:m,isActive:"always"===u,height:"55px",children:[he.jsxs("div",{className:"flex flex-col items-start",children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Always allow actions on this site",id:"IjBl43b/I/"})}),he.jsx("span",{className:"font-small text-text-500",children:he.jsx(r,{defaultMessage:"Browse, click, and type",id:"6baLmoYEwS"})})]}),he.jsxs("span",{className:"flex items-center gap-0.5",children:[he.jsx(Xy,{className:"text-text-500"}),he.jsx(fx,{className:"text-text-500"})]})]}),he.jsx("p",{className:"font-small text-text-500 px-1 mt-2",children:he.jsx(r,{defaultMessage:"Claude will not purchase items, create accounts, or bypass captchas without input. Revoke site permissions in <settingsButton>settings</settingsButton>.",id:"zPbO6HcY5Z",values:{settingsButton:e=>he.jsx("button",{onClick:()=>chrome.runtime.openOptionsPage(),className:"inline-link hover:text-text-400",children:e})}})})]})]})},HH=({fromDomain:e,toDomain:t,onAllow:n,onDeny:s})=>{const[i,o]=de.useState(null),a=de.useMemo(()=>({type:"domain_transition",fromDomain:e,toDomain:t}),[e,t]),l=de.useCallback(()=>{n(_e.ONCE,a)},[n,a]),c=de.useCallback(()=>{n(_e.ALWAYS,a)},[n,a]);return de.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key?(e.preventDefault(),o("always"),setTimeout(()=>{c()},150)):"Enter"===e.key?(e.preventDefault(),o("once"),setTimeout(()=>{l()},150)):"Escape"===e.key&&(e.preventDefault(),o("deny"),setTimeout(()=>{s()},150))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,l,s]),he.jsxs("div",{className:"bg-bg-000 rounded-[14px]",children:[he.jsxs("div",{className:"flex items-center gap-2 py-[10px] px-4",children:[he.jsx(_n,{size:20,className:"text-text-100"}),he.jsx("h3",{className:"font-base text-text-100",children:he.jsx(r,{defaultMessage:"New permissions required",id:"/CBk9UV8iS"})})]}),he.jsx("div",{className:"border-t border-border-300 mb-4"}),he.jsx("div",{className:"space-y-4 px-4",children:he.jsx("div",{children:he.jsx("p",{className:"font-base-bold text-text-100",children:he.jsx(r,{defaultMessage:"Claude paused due to a navigation from <strong>{fromDomain}</strong> to <strong>{toDomain}</strong>",id:"xgz5co4oqe",values:{fromDomain:e,toDomain:t,strong:e=>he.jsx("strong",{children:e})}})})})}),he.jsxs("div",{className:"px-3 py-[10px] space-y-[5px] mt-[10px] mb-0.5",children:[he.jsxs(mx,{onClick:l,isActive:"once"===i,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Continue",id:"acrOozm08x"})}),he.jsx(fx,{className:"text-text-500"})]}),he.jsxs(mx,{onClick:s,isActive:"deny"===i,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Stop",id:"q/uwLTb3Zf"})}),he.jsx(zH,{className:"text-text-500"})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 my-3 -mx-3"}),he.jsxs(mx,{onClick:c,isActive:"always"===i,height:"55px",children:[he.jsxs("div",{className:"flex flex-col items-start",children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Always continue",id:"T40fliCDxK"})}),he.jsx("span",{className:"font-small text-text-500",children:he.jsx(r,{defaultMessage:"When navigating between these sites",id:"/5FoUj4Va+"})})]}),he.jsxs("span",{className:"flex items-center gap-0.5",children:[he.jsx(Xy,{className:"text-text-500"}),he.jsx(fx,{className:"text-text-500"})]})]}),he.jsx("p",{className:"font-small text-text-500 px-1 mt-2",children:he.jsx(r,{defaultMessage:"Claude will not purchase items, create accounts, or bypass captchas without input. Revoke site permissions in <settingsButton>settings</settingsButton>.",id:"zPbO6HcY5Z",values:{settingsButton:e=>he.jsx("button",{onClick:()=>chrome.runtime.openOptionsPage(),className:"inline-link hover:text-text-400",children:e})}})})]})]})},VH=({serverName:e,serverIconUrl:t,toolDisplayName:n,onAllow:s,onDeny:i})=>{const[o,a]=de.useState(null),l=de.useMemo(()=>({type:"netloc",netloc:""}),[]),c=de.useCallback(()=>{s(_e.ONCE,l)},[s,l]),u=de.useCallback(()=>{s(_e.ALWAYS,l)},[s,l]);return de.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key?(e.preventDefault(),a("always"),setTimeout(()=>{u()},150)):"Enter"===e.key?(e.preventDefault(),a("once"),setTimeout(()=>{c()},150)):"Escape"===e.key&&(e.preventDefault(),a("deny"),setTimeout(()=>{i()},150))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,c,i]),he.jsxs("div",{className:"bg-bg-000 rounded-[14px]",children:[he.jsxs("div",{className:"flex items-center gap-2 py-[10px] px-4",children:[he.jsx(_n,{size:20,className:"text-text-100"}),he.jsx("h3",{className:"font-base text-text-100",children:he.jsx(r,{defaultMessage:"New permissions required",id:"/CBk9UV8iS"})})]}),he.jsx("div",{className:"border-t border-border-300 mb-4"}),he.jsx("div",{className:"space-y-4 px-4",children:he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Claude wants to use:",id:"tX+S0cc3I4"})}),he.jsxs("div",{className:"flex items-center gap-2",children:[he.jsx(Ot,{url:t,size:16,fadeInOnLoad:!0,fallbackSvg:he.jsx(Et,{letter:e,size:16,hideBorder:!0})}),he.jsx("p",{className:"font-claude-response-code text-text-200",children:n})]})]})}),he.jsxs("div",{className:"px-3 py-[10px] space-y-[5px] mt-[10px] mb-0.5",children:[he.jsxs(mx,{onClick:c,isActive:"once"===o,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Allow once",id:"O2tb5KUxpc"})}),he.jsx(fx,{className:"text-text-500"})]}),he.jsxs(mx,{onClick:i,isActive:"deny"===o,children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Decline",id:"pvtgR26QWY"})}),he.jsx(zH,{className:"text-text-500"})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 my-3 -mx-3"}),he.jsxs(mx,{onClick:u,isActive:"always"===o,height:"55px",children:[he.jsxs("div",{className:"flex flex-col items-start",children:[he.jsx("span",{children:he.jsx(r,{defaultMessage:"Allow for all chats",id:"7wuY3W3ryd"})}),he.jsx("span",{className:"font-small text-text-500",children:he.jsx(r,{defaultMessage:"{serverName}: {toolDisplayName}",id:"7DuHI9a2sT",values:{serverName:e,toolDisplayName:n}})})]}),he.jsxs("span",{className:"flex items-center gap-0.5",children:[he.jsx(Xy,{className:"text-text-500"}),he.jsx(fx,{className:"text-text-500"})]})]}),he.jsx("p",{className:"font-small text-text-500 px-1 mt-2",children:he.jsx(r,{defaultMessage:"You can manage permissions on the Claude <settingsLink>settings</settingsLink> page.",id:"EsGNUZDLMi",values:{settingsLink:e=>he.jsx("a",{href:"https://claude.ai/settings/connectors",target:"_blank",rel:"noopener noreferrer",className:"inline-link hover:text-text-400",children:e})}})})]})]})},$H=({tool:e,url:t,screenshot:n,coordinate:r,typeText:s,uploadImageData:i,plan:o,fromDomain:a,toDomain:l,actionData:c,onAllow:u,onDeny:d,disableAlwaysAllow:h=!1})=>e===ke.PLAN_APPROVAL&&o?he.jsx(gx,{planStructure:o,onApprove:()=>{u(_e.ONCE,{type:"netloc",netloc:""})},onReject:d}):e===ke.REMOTE_MCP&&c?.remoteMcp?he.jsx(VH,{serverName:c.remoteMcp.serverName,serverIconUrl:c.remoteMcp.serverIconUrl,toolDisplayName:c.remoteMcp.toolDisplayName,toolDescription:c.remoteMcp.toolDescription,onAllow:u,onDeny:d}):e===ke.DOMAIN_TRANSITION?he.jsx(HH,{fromDomain:a,toDomain:l,onAllow:(e,t)=>u(e,t),onDeny:d}):he.jsx(FH,{tool:e,url:t,screenshot:n,coordinate:r,typeText:s,uploadImageData:i,onAllow:u,onDeny:d,disableAlwaysAllow:h}),BH=e=>he.jsx(j,{...e,children:he.jsx("path",{d:"M13.4996 3.5C13.7758 3.5 13.9996 3.72386 13.9996 4C13.9996 4.27614 13.7758 4.5 13.4996 4.5H12.9996V8.84375L16.7965 14.3672C17.7085 15.6942 16.7583 17.5 15.1481 17.5H4.8511C3.24107 17.4998 2.2909 15.6941 3.20265 14.3672L6.99956 8.84375V4.5H6.49956C6.22353 4.49986 5.99955 4.27606 5.99955 4C5.99955 3.72394 6.22353 3.50014 6.49956 3.5H13.4996ZM4.02688 14.9336C3.57109 15.597 4.04619 16.4998 4.8511 16.5H15.1481C15.9532 16.5 16.4283 15.5971 15.9723 14.9336L14.9869 13.5H5.01224L4.02688 14.9336ZM7.99957 9C7.99957 9.10111 7.96894 9.19987 7.91168 9.2832L5.69974 12.5H14.2994L12.0875 9.2832C12.0303 9.1999 11.9996 9.10107 11.9996 9V4.5H7.99957V9Z"})}),UH=({onAccept:e})=>he.jsx("div",{className:"w-full h-screen bg-bg-100 flex items-center justify-center p-5",children:he.jsxs("div",{className:"max-w-[520px] w-full",children:[he.jsx("h1",{className:"text-center text-text-300 mb-[22px]",style:{fontFamily:"Anthropic Sans, var(--font-ui-serif)",fontSize:"26px",fontWeight:500,lineHeight:"130%"},children:he.jsx(r,{defaultMessage:"Claude can now{br}control your browser",id:"jz5L9A3Vjy",values:{br:he.jsx("br",{})}})}),he.jsxs("div",{className:"border border-border-300 rounded-[24px] mb-[22px]",children:[he.jsxs("div",{className:"flex gap-3 pt-5 pb-4 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(Fr,{size:20,className:"text-text-100"})}),he.jsx("p",{className:"text-[12px] text-text-300 flex-1 leading-[140%]",children:he.jsx(r,{defaultMessage:"Claude can view the URL of tabs where the panel is open and take screenshots when responding. For privacy, avoid using Claude on sensitive sites like health and dating platforms.",id:"hItngLUKCl"})})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 px-4"}),he.jsxs("div",{className:"flex gap-3 py-4 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(BH,{size:20,className:"text-text-100"})}),he.jsx("p",{className:"text-[12px] text-text-300 flex-1 leading-[140%]",children:he.jsx(r,{defaultMessage:"This is a beta feature with unique risks distinct from other Claude products. You are fully responsible for all risks associated with use of this product.",id:"9anUl9Q74Z"})})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 px-4"}),he.jsxs("div",{className:"flex gap-3 pt-4 pb-5 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(_,{size:20,className:"text-danger-000"})}),he.jsx("div",{className:"flex-1",children:he.jsx("p",{className:"text-[12px] text-danger-000 leading-[140%]",children:he.jsx(r,{defaultMessage:"Malicious code buried in sites may override your instructions in order to steal your data, inject malware into your systems, or take over your system to attack other users. {learnMoreLink}",id:"bmDayxG7DJ",values:{learnMoreLink:he.jsx("button",{onClick:()=>{chrome.tabs.create({url:Kk})},className:"text-danger-000 inline-link hover:no-underline focus:outline-none",children:he.jsx(r,{defaultMessage:"Learn more",id:"TdTXXf940t"})})}})})})]})]}),he.jsx("div",{className:"flex justify-end",children:he.jsx("button",{onClick:e,className:"px-4 py-2.5 rounded-[14px] bg-text-100 hover:bg-text-200 active:bg-text-000 text-bg-100 font-button transition-all hover:shadow-md",children:he.jsx(r,{defaultMessage:"I understand",id:"p5wxjR3WJg"})})})]})});function ZH({permissionPrompt:e,onAllow:t,onDeny:n,disableAlwaysAllow:s}){const[i,o]=de.useState(!1),[a,l]=de.useState(e);if(de.useEffect(()=>{fe(me.BROWSER_CONTROL_PERMISSION_ACCEPTED).then(e=>{o(!0===e)})},[]),de.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("requestId");if(e){const t=`mcp_prompt_${e}`;chrome.storage.local.get(t).then(e=>{const n=e[t];n&&l(n.prompt)})}},[]),!i)return he.jsx("div",{className:"flex items-center justify-center h-screen bg-bg-100 p-3",children:he.jsx("div",{className:"w-full max-w-md",children:he.jsx(UH,{onAccept:()=>{ge(me.BROWSER_CONTROL_PERMISSION_ACCEPTED,!0).then(()=>{o(!0)})}})})});const c=a||e;return c?he.jsx("div",{className:"flex items-center justify-center h-screen bg-bg-100 p-3",children:he.jsx("div",{className:"w-full max-w-sm border border-border-300 rounded-[14px]",children:he.jsx($H,{tool:c.tool,url:c.url,screenshot:c.actionData?.screenshot,coordinate:c.actionData?.coordinate,typeText:c.actionData?.text,fromDomain:c.actionData?.fromDomain,toDomain:c.actionData?.toDomain,onAllow:t,onDeny:n,disableAlwaysAllow:s})})}):he.jsx("div",{className:"flex items-center justify-center h-screen bg-bg-100",children:he.jsx("div",{className:"text-text-200 text-sm",children:he.jsx(r,{defaultMessage:"Waiting for permission request...",id:"6x5YwESShd"})})})}const WH=({onNext:e})=>{const t=()=>{chrome.tabs.create({url:Kk})};return he.jsx("div",{className:"w-full h-screen bg-bg-100 flex items-center justify-center p-5",children:he.jsxs("div",{className:"max-w-[520px] w-full",children:[he.jsx("h1",{className:"font-claude-response-heading text-center text-text-100 mb-5",children:he.jsx(r,{defaultMessage:"This is a beta feature",id:"/06n65wN4J"})}),he.jsxs("div",{className:"border border-border-300 rounded-xl mb-5",children:[he.jsxs("div",{className:"flex gap-3 pt-5 pb-4 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(BH,{size:20,className:"text-text-100"})}),he.jsx("p",{className:"font-base text-text-300 flex-1",children:he.jsx(r,{defaultMessage:"This beta feature has unique risks distinct from other Claude products. You are fully responsible for all risks associated with use of this product.",id:"RWrtnxjH8o"})})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 px-4"}),he.jsxs("div",{className:"flex gap-3 py-4 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(Fr,{size:20,className:"text-text-100"})}),he.jsx("p",{className:"font-base text-text-300 flex-1",children:he.jsx(r,{defaultMessage:"Claude can take screenshots when responding. For privacy, avoid using Claude on sensitive sites like health and dating platforms.",id:"Ddc1eapnSI"})})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 px-4"}),he.jsxs("div",{className:"flex gap-3 pt-4 pb-5 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(_,{size:20,className:"text-danger-000"})}),he.jsx("div",{className:"flex-1",children:he.jsx("p",{className:"font-base text-danger-000",children:he.jsx(r,{defaultMessage:"Malicious actors can hide instructions in websites, emails, and documents that trick AI into taking harmful actions without your knowledge. <link>Learn more</link>",id:"DvXQDnOGPc",values:{link:e=>he.jsx("button",{onClick:t,className:"text-danger-000 inline-link hover:no-underline focus:outline-none",children:e})}})})})]})]}),he.jsx("div",{className:"flex justify-center",children:he.jsx(l,{onClick:e,variant:"primary","data-test-id":"onboarding-continue",children:he.jsx(r,{defaultMessage:"I understand",id:"p5wxjR3WJg"})})})]})})},qH=({onNext:e})=>{const t=n(),s=yt();return he.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen h-full px-10",children:he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("img",{src:s?"/assets/usecase_dark-B8e6CElR.svg":"/assets/usecase-DTXLdUtN.svg",alt:t.formatMessage({defaultMessage:"Onboarding illustration",id:"IvNiHZimcV"}),className:"w-[168px] h-[122px]"}),he.jsx("div",{className:"text-text-100 text-base font-semibold mt-7 text-center font-claude-response",children:he.jsx(r,{defaultMessage:"Automate your repetitive tasks",id:"5U/pkz4osv"})}),he.jsx("div",{className:"text-text-300 text-sm font-normal mt-2 text-center max-w-[320px] font-base",children:he.jsx(r,{defaultMessage:"Claude can take on your multi-step work like QA testing, researching sales leads, and data entry across multiple sites. You can focus elsewhere knowing Claude is working in background.",id:"yLeYIHrySb"})}),he.jsx(l,{onClick:e,variant:"primary",className:"mt-7","data-test-id":"onboarding-continue",children:he.jsx(r,{defaultMessage:"Next",id:"9+DdtuCqLw"})})]})})},GH=({onNext:e})=>{const t=n(),s=yt();return he.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen h-full px-10",children:he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("img",{src:s?jn:En,alt:t.formatMessage({defaultMessage:"Onboarding illustration",id:"IvNiHZimcV"}),className:"w-[212px] h-[120px]"}),he.jsx("div",{className:"text-text-100 text-base font-semibold mt-7 text-center font-claude-response",children:he.jsx(r,{defaultMessage:"Claude has tab group access",id:"RuX+iObJu9"})}),he.jsx("div",{className:"text-text-300 text-sm font-normal mt-2 text-center max-w-[320px] font-base",children:he.jsx(r,{defaultMessage:"If Claude is open in a tab group, it can access the URL, context and information of all the tabs in that group.",id:"jN7b0qJSmv"})}),he.jsx(l,{onClick:e,variant:"primary",className:"mt-7","data-test-id":"onboarding-continue",children:he.jsx(r,{defaultMessage:"Next",id:"9+DdtuCqLw"})})]})})},JH=({onNext:e})=>{const t=n(),s=yt();return he.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen h-full px-10",children:he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("img",{src:s?"/assets/shortcuts_dark-DelMLMgh.svg":"/assets/shortcuts-D9M-y4eQ.svg",alt:t.formatMessage({defaultMessage:"Onboarding illustration",id:"IvNiHZimcV"}),className:"w-[212px] h-[120px]"}),he.jsx("div",{className:"text-text-100 text-base font-semibold mt-7 text-center font-claude-response",children:he.jsx(r,{defaultMessage:"Use shortcuts to save time",id:"sDX6Oo6Pj4"})}),he.jsx("div",{className:"text-text-300 text-sm font-normal mt-2 text-center max-w-[320px] font-base",children:he.jsx(r,{defaultMessage:"Shortcuts make it easy to send instructions to Claude. Great for tasks you repeat often! Type / in the chat to find and create shortcuts.",id:"oCBOPo+ZDe"})}),he.jsx(l,{onClick:e,variant:"primary",className:"mt-7","data-test-id":"onboarding-continue",children:he.jsx(r,{defaultMessage:"Let's go",id:"wVu1FLTwAn"})})]})})},KH=({onAccept:e})=>{const[t,n]=de.useState(1),r=()=>{n(t+1)};switch(t){case 1:return he.jsx(WH,{onNext:r});case 2:return he.jsx(qH,{onNext:r});case 3:return he.jsx(GH,{onNext:r});case 4:return he.jsx(JH,{onNext:e})}},YH=({currentVersion:e,minSupportedVersion:t})=>he.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-bg-100 p-4",children:he.jsx("div",{className:"max-w-md w-full",children:he.jsx("div",{className:"bg-bg-000 rounded-xl shadow-sm border border-border-200 p-6",children:he.jsxs("div",{className:"flex flex-col items-center text-center",children:[he.jsx("div",{className:"w-12 h-12 bg-danger-900 rounded-full flex items-center justify-center mb-3",children:he.jsx(Ty,{className:"w-6 h-6 text-danger-200"})}),he.jsx("h2",{className:"font-xl-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Extension Update Required",id:"bWSwU/3iyK"})}),he.jsx("p",{className:"font-base-sm text-text-300 mb-4",children:he.jsx(r,{defaultMessage:"Your extension version ({currentVersion}) is no longer supported. Please update to version {minSupportedVersion} or later to continue using Claude.",id:"kWxPgoo7qQ",values:{currentVersion:e,minSupportedVersion:t}})}),he.jsx("button",{onClick:()=>{chrome.runtime.reload()},className:"w-full px-4 py-2 bg-accent-main-200 text-oncolor-100 font-button-lg rounded-lg hover:bg-accent-main-100 transition-colors",children:he.jsx(r,{defaultMessage:"Update Extension",id:"TDyP36qHxV"})}),he.jsx("p",{className:"font-caption text-text-400 mt-3",children:he.jsx(r,{defaultMessage:"Clicking the button will reload the extension to apply any pending updates.",id:"j111DEvZ03"})})]})})})}),QH=({className:e=""})=>he.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"44",height:"54",viewBox:"0 0 44 54",fill:"none",className:e,children:[he.jsx("path",{d:"M21.7123 19.6053C21.6411 19.4884 18.9303 14.7128 19.6611 10.6981C20.3919 6.6834 24.1296 1.49002 29.3189 1.1021C34.5083 0.714185 39.3603 1.8108 41.5565 8.03863C43.7527 14.2665 40.9756 20.59 36.2422 22.2772C31.5089 23.9644 27.0316 23.0655 27.0316 23.0655C27.0316 23.0655 26.6706 17.9629 26.5919 16.9844C26.5132 16.0059 24.5244 15.2487 23.8947 15.6888C23.2651 16.129 22.8191 16.4373 22.6043 17.5265C22.3894 18.6156 21.7123 19.6028 21.7123 19.6028V19.6053Z",fill:"hsl(var(--bg-500))"}),he.jsx("path",{d:"M0.721235 51.5865C0.717916 50.4591 0.714597 49.3317 0.711278 48.2043C0.711278 46.512 0.591797 46.512 0.591797 44.8209C0.591797 43.1298 0.761062 43.1298 0.761062 41.4375C0.758573 40.3101 0.755669 39.1823 0.75235 38.0541C0.756084 37.1849 0.769775 36.741 0.792177 36.2971C0.804623 36.0746 0.822048 35.8507 0.858141 35.571C0.897968 35.2912 0.953975 34.9542 1.07968 34.5078C1.20663 34.0614 1.34478 33.7319 1.47795 33.4646C1.61112 33.196 1.73932 32.9883 1.88245 32.7894C2.02309 32.5892 2.18364 32.3989 2.39771 32.1726C2.61925 31.9538 2.90302 31.6976 3.33863 31.4427C3.77673 31.1903 4.13766 31.0809 4.43388 31.0038C4.58198 30.9615 4.7164 30.9379 4.84459 30.9155C4.96905 30.8882 5.09725 30.8807 5.22046 30.867C5.46938 30.8421 5.73075 30.8434 6.06306 30.8869C6.22983 30.9192 6.41528 30.9541 6.62064 31.0349C6.826 31.1082 7.05003 31.2276 7.27903 31.3967C7.32882 31.4378 7.37611 31.4775 7.42341 31.5161L7.45825 31.5447L7.47568 31.5596L7.50306 31.587C7.51675 31.6006 7.53044 31.6143 7.54289 31.6268L7.55658 31.6417C7.57276 31.6591 7.5852 31.674 7.59516 31.6852C7.61383 31.7076 7.62379 31.715 7.62876 31.7138C7.6325 31.7126 7.62876 31.7138 7.63872 31.7039C7.64868 31.6952 7.64992 31.669 7.64743 31.6516C7.64619 31.6143 7.64494 31.587 7.64619 31.5671C7.64619 31.5621 7.64619 31.5546 7.64868 31.5472C7.67481 31.4688 7.69846 31.4005 7.71962 31.3395C7.77936 31.1704 7.83661 31.0237 7.89386 30.8894C8.00712 30.6233 8.10794 30.4119 8.22244 30.2055C8.33694 29.9991 8.45767 29.7939 8.63191 29.5452C8.8074 29.299 9.03267 29.0031 9.41228 28.6624C9.79561 28.3229 10.1516 28.1314 10.454 28.0059C10.7602 27.8828 11.0178 27.8169 11.2754 27.782L11.3725 27.7671L11.4621 27.7597C11.5219 27.7547 11.5841 27.7497 11.6463 27.7435C11.7098 27.7385 11.7745 27.7335 11.8417 27.7273C11.9114 27.7273 11.9849 27.7248 12.0608 27.7236C12.1379 27.7236 12.2164 27.7186 12.3047 27.7236C12.3931 27.7298 12.4852 27.736 12.5848 27.7435C12.6818 27.746 12.7926 27.7721 12.9059 27.7895C12.9631 27.8007 13.0216 27.8082 13.0826 27.8243C13.1448 27.843 13.2083 27.8616 13.273 27.8803C13.8007 28.0419 14.1679 28.318 14.4181 28.5642C14.4492 28.5965 14.479 28.6276 14.5077 28.6574L14.5512 28.7034L14.5624 28.7146C14.5624 28.7146 14.5599 28.7109 14.5599 28.7096C14.5562 28.7047 14.5512 28.6997 14.5462 28.6947C14.5512 28.6985 14.5587 28.7022 14.5637 28.7047C14.5749 28.7096 14.5836 28.7146 14.5911 28.7159C14.6197 28.7246 14.6222 28.6848 14.6247 28.7072C14.6334 28.6935 14.6383 28.7096 14.657 28.7022C14.6657 28.6985 14.6769 28.6885 14.6906 28.6649L14.6981 28.6512L14.7018 28.6437L14.7043 28.64L14.7155 28.6139C14.7479 28.5381 14.7777 28.4585 14.8163 28.3739C14.8898 28.2048 14.9819 28.0158 15.0976 27.8032C15.3366 27.3792 15.5793 27.0795 15.8108 26.8544C16.0435 26.6294 16.2576 26.4702 16.4903 26.3396C16.7231 26.2103 16.9695 26.0997 17.2893 26.0139C17.4487 25.9716 17.6266 25.9343 17.8283 25.9144C18.0262 25.8883 18.2651 25.8833 18.5352 25.9107C18.8065 25.9393 19.0455 26.0039 19.2471 26.0823C19.4512 26.1581 19.6192 26.2476 19.7649 26.3372C20.0548 26.5175 20.259 26.6915 20.4444 26.8743C20.4892 26.9203 20.5378 26.9663 20.5788 27.0161C20.6 27.0409 20.6224 27.0646 20.6448 27.0894L20.6771 27.1255H20.6821C20.6958 27.1317 20.7045 27.1317 20.712 27.1305C20.7269 27.1305 20.7319 27.123 20.7356 27.1342C20.7394 27.1454 20.7431 27.1653 20.7481 27.1976C20.7556 27.2275 20.7531 27.2784 20.7717 27.3195C20.7941 27.3667 20.8041 27.3692 20.8128 27.271C20.8165 27.2225 20.824 27.1951 20.8327 27.1665C20.8389 27.1516 20.8439 27.1379 20.8489 27.1243L20.8576 27.1019L20.8601 27.0957L20.8651 27.0584L20.875 26.98C20.9273 26.5597 20.9808 26.1382 21.0518 25.2964C21.2011 23.6078 21.0754 23.5966 21.2484 21.9043C21.3368 21.0575 21.4115 20.6347 21.4824 20.2132C21.521 20.0006 21.5583 19.788 21.6056 19.5231C21.6305 19.3876 21.6579 19.2396 21.6878 19.0705C21.7164 18.9014 21.7624 18.7111 21.8048 18.4935C21.9977 17.6231 22.1508 17.1817 22.3262 16.7378C22.376 16.6271 22.4134 16.5165 22.4793 16.3983C22.5428 16.2814 22.6001 16.1559 22.6946 16.0203C22.7419 15.9519 22.783 15.8798 22.8428 15.8065C22.9037 15.7318 22.9672 15.6548 23.0382 15.5727C23.1215 15.4931 23.2024 15.4086 23.3082 15.3252C23.4178 15.2432 23.5323 15.1574 23.6841 15.0853C23.9778 14.936 24.2927 14.8726 24.569 14.8826C24.7034 14.8913 24.8478 14.9099 24.9187 14.9286C25.0059 14.946 25.0855 14.9684 25.1627 14.9895C25.4701 15.079 25.7078 15.1897 25.9356 15.319C26.1633 15.4483 26.3799 15.61 26.6226 15.84C26.8603 16.0713 27.1292 16.3934 27.3358 16.8758C27.5436 17.3595 27.5847 17.7325 27.6332 18.0359C27.6469 18.1876 27.6594 18.3232 27.6706 18.4513C27.6768 18.5632 27.6818 18.6689 27.6867 18.7745C27.7091 19.1973 27.7315 19.6201 27.7166 20.4669C27.6855 22.1592 27.571 22.1592 27.5399 23.8503C27.515 24.9785 27.4905 26.1071 27.4664 27.2362C27.4353 28.9285 27.4565 28.9285 27.4241 30.6208C27.3967 31.749 27.3694 32.8777 27.342 34.0067C27.3345 34.4295 27.3333 34.7478 27.3358 35.0114C27.3358 35.0413 27.3358 35.0711 27.3358 35.0997L27.3382 35.1196C27.3407 35.132 27.342 35.1432 27.3445 35.1556C27.3482 35.178 27.3532 35.1967 27.3582 35.2128C27.3768 35.2812 27.3955 35.3074 27.3943 35.423C27.3943 35.4528 27.3918 35.4827 27.3893 35.5138C27.3868 35.5473 27.4191 35.5685 27.4303 35.5635C27.444 35.5535 27.4515 35.5498 27.4652 35.5424C27.4913 35.5274 27.5312 35.474 27.6257 35.2924C27.637 35.27 27.6482 35.2489 27.6581 35.229C27.6706 35.2029 27.6631 35.2166 27.7179 35.1146C27.8 34.9642 27.8709 34.8311 27.9369 34.7117C28.0688 34.4705 28.1759 34.2778 28.2879 34.0838C28.3999 33.8911 28.5169 33.6996 28.6774 33.4671C28.7583 33.3527 28.8542 33.2221 28.96 33.0878C29.067 32.956 29.1827 32.8068 29.3271 32.6414C29.8984 31.9787 30.2033 31.6479 30.5219 31.3221C30.6812 31.1592 30.8493 31.0001 31.0745 30.8123C31.3023 30.627 31.5886 30.4094 32.0229 30.1757C32.4585 29.9431 32.8244 29.8225 33.1294 29.7479C33.2825 29.7069 33.4219 29.6845 33.5538 29.6634C33.6857 29.6385 33.8102 29.6335 33.9334 29.6211C34.1848 29.6024 34.4636 29.6037 34.8096 29.6534C34.8979 29.6733 34.99 29.6932 35.0871 29.7156C35.1842 29.7355 35.2875 29.7815 35.3958 29.8188C35.6123 29.9021 35.8488 30.0364 36.089 30.2291C36.1998 30.3336 36.3081 30.4331 36.3915 30.5375C36.4699 30.6444 36.5533 30.7427 36.6068 30.8434C36.6615 30.9441 36.7163 31.0386 36.7574 31.1294C36.7922 31.2214 36.8258 31.3084 36.8582 31.3918C36.8918 31.4751 36.9042 31.5534 36.9254 31.6292C36.9428 31.7051 36.9652 31.7785 36.9752 31.8481C36.9939 31.9861 37.0163 32.1192 37.0237 32.2472C37.0275 32.3741 37.0362 32.5034 37.0337 32.6377C37.0262 32.7695 37.0237 32.9112 37.0075 33.0629C36.9976 33.1375 36.9876 33.2171 36.9764 33.3004C36.9665 33.385 36.954 33.472 36.9341 33.5628C36.9154 33.6536 36.8955 33.7506 36.8756 33.8538C36.8681 33.901 36.8457 33.9706 36.8296 34.0303C36.8109 34.0925 36.7947 34.1584 36.7698 34.2206C36.5819 34.7291 36.3666 35.0313 36.1923 35.27C36.0131 35.5075 35.86 35.6767 35.7057 35.8395C35.3983 36.1653 35.0809 36.4675 34.5146 37.0855C33.9533 37.7022 33.7031 38.0181 33.4604 38.3401C33.3397 38.5018 33.224 38.6646 33.0871 38.8698C32.9526 39.0775 32.7896 39.3262 32.6116 39.6718C32.4336 40.0187 32.3303 40.2898 32.2606 40.5199C32.1909 40.7499 32.1524 40.9377 32.1212 41.1254C32.1026 41.2187 32.0926 41.3132 32.0802 41.4139C32.0739 41.4636 32.0665 41.5146 32.059 41.5681C32.054 41.6215 32.0491 41.6775 32.0441 41.7372C32.0379 41.7969 32.0316 41.859 32.0242 41.9249C32.0179 41.9971 32.0105 42.0742 32.003 42.155C31.9856 42.3179 31.9657 42.5007 31.9433 42.7083C31.7553 44.382 31.6545 44.3733 31.4803 46.0532C31.3098 47.7355 31.3421 47.7393 31.1778 49.4217C31.0957 50.2635 31.0372 50.6813 30.9787 51.1003C30.9501 51.3092 30.9202 51.5193 30.8878 51.7817C30.8804 51.8476 30.8717 51.916 30.863 51.9894C30.853 52.0851 30.8418 52.1871 30.8306 52.2952C30.8169 52.4432 30.7933 52.5962 30.731 52.7392C30.67 52.8846 30.573 53.0264 30.4373 53.1445C30.2817 53.2801 30.1013 53.3584 29.9594 53.3907C29.8175 53.4255 29.7067 53.423 29.6769 53.4268C29.4814 53.4305 29.306 53.433 29.1454 53.4367C29.0185 53.4405 28.9015 53.4429 28.7932 53.4467C28.5766 53.4541 28.3887 53.4604 28.1933 53.4678C27.805 53.4815 27.3893 53.4939 26.6637 53.5001C24.9698 53.5126 24.9685 53.4355 23.2746 53.4479C21.5807 53.4591 21.5807 53.5263 19.8868 53.5362C18.1917 53.5461 18.1917 53.5225 16.4965 53.5312C15.3673 53.5412 14.238 53.5507 13.1087 53.5598C11.4136 53.5648 11.4136 53.6394 9.7172 53.6406C8.01957 53.6406 8.01957 53.5325 6.32193 53.5263C4.62306 53.5163 4.62554 53.4977 2.92044 53.4703C2.26205 53.4579 1.87125 53.3895 1.63602 53.2713C1.57752 53.2415 1.53023 53.2092 1.49413 53.1756C1.48044 53.1594 1.44933 53.1383 1.42817 53.1172C1.40701 53.096 1.39083 53.0749 1.37838 53.0537C1.32984 52.9679 1.34851 52.8846 1.38461 52.7951C1.4207 52.7056 1.47048 52.6248 1.50907 52.5477C1.51902 52.529 1.52774 52.5104 1.5352 52.493C1.54267 52.4755 1.54392 52.4594 1.56756 52.4432C1.6049 52.4109 1.64971 52.3835 1.70322 52.3587C1.91481 52.2592 2.2969 52.2082 2.94658 52.2206C4.62928 52.248 4.63177 52.2766 6.32193 52.2865C7.45037 52.2915 8.57839 52.2961 9.706 52.3002C11.3987 52.299 11.3974 52.197 13.0901 52.192C14.7827 52.1858 14.7827 52.2841 16.4754 52.2766C18.168 52.2679 18.1668 52.1025 19.8594 52.0926C21.5521 52.0826 21.5521 52.11 23.2448 52.0975C24.9374 52.0851 24.9374 52.1634 26.6301 52.151C27.3607 52.1485 27.7763 52.1473 28.1672 52.146C28.5256 52.146 28.8616 52.146 29.4429 52.146C29.4478 52.1448 29.4902 52.1547 29.5263 52.1274C29.5599 52.1025 29.5636 52.0627 29.5648 52.0329C29.5773 51.9036 29.5897 51.7904 29.5997 51.686C29.6271 51.4223 29.6482 51.2122 29.6706 51.0021C29.7129 50.5805 29.7553 50.1603 29.8411 49.3172C30.0067 47.6323 30.049 47.6373 30.2195 45.9525C30.3937 44.2676 30.3639 44.2651 30.553 42.5778C30.5779 42.3664 30.5991 42.1811 30.6178 42.0157C30.6364 41.8503 30.6526 41.7061 30.6763 41.5606C30.6962 41.4176 30.7148 41.2895 30.741 41.1702C30.7659 41.0508 30.7845 40.9364 30.8144 40.8257C30.8679 40.6019 30.9314 40.3793 31.0248 40.107C31.1218 39.836 31.2488 39.5152 31.4566 39.1073C31.886 38.3028 32.1449 37.936 32.3913 37.563C32.6427 37.1961 32.9091 36.8318 33.4878 36.1952C34.0666 35.5635 34.3354 35.2576 34.5818 34.9455C34.7063 34.7901 34.822 34.6346 34.954 34.4444C35.0834 34.2542 35.229 34.0241 35.3348 33.7406C35.3659 33.6685 35.3746 33.6063 35.3958 33.5454C35.412 33.4658 35.4269 33.3912 35.4418 33.3203C35.4767 33.1786 35.4829 33.058 35.5016 32.9473C35.5265 32.7272 35.5327 32.5556 35.5265 32.3915C35.5277 32.3492 35.524 32.3094 35.5178 32.2696C35.5128 32.2298 35.509 32.1888 35.5041 32.1478C35.5016 32.1042 35.4904 32.0657 35.4804 32.0247C35.4705 31.9836 35.4618 31.9389 35.4505 31.8953C35.3945 31.7262 35.3099 31.5422 35.1394 31.3843C35.1182 31.3632 35.0921 31.3507 35.0709 31.3333C35.0473 31.3184 35.0311 31.2972 35.0062 31.2861C34.9564 31.2649 34.9179 31.2338 34.8706 31.2177C34.822 31.2027 34.781 31.1841 34.7361 31.1692C34.6889 31.1605 34.6453 31.1505 34.603 31.1406C34.5631 31.1269 34.5146 31.1306 34.4748 31.1244C34.4325 31.1219 34.3939 31.112 34.3516 31.1132C34.2657 31.117 34.1935 31.1107 34.1064 31.1194C33.9296 31.1344 33.7554 31.1543 33.5438 31.2077C33.331 31.2562 33.0821 31.3408 32.7622 31.5061C32.4448 31.6765 32.2121 31.8344 32.0229 31.9774C31.8325 32.1192 31.6807 32.241 31.5325 32.3703C31.2363 32.629 30.9414 32.8988 30.4062 33.518C30.2718 33.671 30.1585 33.814 30.0565 33.9371C29.9519 34.0627 29.8772 34.1671 29.8013 34.2653C29.6569 34.4655 29.5462 34.6309 29.4379 34.8C29.3321 34.9704 29.2276 35.142 29.0994 35.3596C29.0371 35.4702 28.9662 35.5896 28.8903 35.7289C28.8703 35.7649 28.8504 35.801 28.8293 35.8383C28.7882 35.9129 28.7471 35.9863 28.7073 36.0658C28.6252 36.2225 28.5393 36.3904 28.4472 36.5682C28.3576 36.7535 28.2742 36.9276 28.1945 37.0904C28.1161 37.2558 28.0427 37.4237 27.9742 37.5741C27.9058 37.7296 27.8398 37.8651 27.7776 37.9932C27.7465 38.0578 27.7166 38.12 27.6867 38.1809C27.6718 38.2108 27.6581 38.2406 27.6432 38.2705C27.6357 38.2841 27.6282 38.3016 27.622 38.3127L27.6021 38.3314C27.5498 38.3811 27.5013 38.4284 27.454 38.4744C27.4303 38.4968 27.4079 38.5192 27.3843 38.5415C27.3656 38.5515 27.3482 38.5627 27.3308 38.5726C27.2611 38.6124 27.1914 38.6559 27.1441 38.6709C27.118 38.682 27.0918 38.6932 27.0657 38.7044C27.0445 38.7119 27.0234 38.7206 27.001 38.7293C26.9611 38.7455 26.9201 38.7616 26.8728 38.7803C26.8454 38.789 26.7682 38.7927 26.6799 38.7766C26.594 38.7604 26.4957 38.7181 26.4558 38.6845C26.4023 38.6323 26.3525 38.5614 26.2841 38.4732C26.2654 38.4458 26.248 38.4197 26.2306 38.3936C26.2131 38.3662 26.1969 38.3476 26.1783 38.3115C26.1434 38.2431 26.1098 38.1971 26.0824 38.1113C26.0688 38.0703 26.0526 38.0417 26.0414 37.9957C26.0314 37.9484 26.0202 37.9024 26.0115 37.8576C26.0053 37.8054 26.004 37.7445 25.9991 37.6898C25.9991 37.6264 26.0003 37.5654 26.0015 37.5058C26.009 37.0233 26.0152 36.6366 26.0215 36.2499C26.0302 35.6941 26.0401 35.137 26.0588 34.0254C26.0899 32.3355 26.0352 32.3355 26.0663 30.6457C26.0974 28.9558 26.1994 28.9571 26.2306 27.2673C26.2617 25.5762 26.0899 25.5749 26.121 23.8851C26.1434 22.7585 26.1658 21.6324 26.1882 20.5067C26.2044 19.6611 26.2119 19.2396 26.2206 18.8168C26.2231 18.7111 26.2243 18.6054 26.2268 18.4935C26.2293 18.4326 26.2243 18.3953 26.2218 18.3431C26.2194 18.2946 26.2181 18.2436 26.2156 18.1901C26.2156 18.1354 26.2057 18.0832 26.1982 18.026C26.1907 17.97 26.182 17.9104 26.1721 17.8469C26.1571 17.7873 26.1409 17.7251 26.1248 17.6579C26.1098 17.5896 26.0775 17.5299 26.0551 17.4577C25.9431 17.1854 25.8074 17.03 25.6804 16.9094C25.5522 16.79 25.4328 16.7079 25.2971 16.6408C25.1639 16.5724 25.0196 16.5102 24.8229 16.4593C24.7731 16.4493 24.7221 16.4344 24.6648 16.4232C24.6362 16.4182 24.6076 16.412 24.5777 16.407C24.5653 16.407 24.5553 16.407 24.5441 16.4045C24.4993 16.4045 24.4533 16.4083 24.3811 16.4406C24.233 16.5115 24.0687 16.6756 23.9504 16.8298C23.9206 16.8696 23.8882 16.9032 23.8608 16.943C23.8335 16.984 23.8073 17.0225 23.7812 17.0598C23.7264 17.132 23.6816 17.2115 23.6356 17.2911C23.4563 17.6094 23.2746 17.9576 23.0991 18.7397C23.0606 18.9374 23.022 19.109 22.9958 19.2645C22.9722 19.4211 22.951 19.5592 22.9311 19.6847C22.8925 19.9359 22.8739 20.1473 22.849 20.3525C22.8054 20.769 22.7606 21.1856 22.6735 22.0199C22.5017 23.6936 22.5727 23.7011 22.4246 25.381C22.3536 26.2215 22.3287 26.643 22.3051 27.0646C22.2503 27.8678 22.1943 28.6723 22.0835 30.2801C22.0835 30.2963 22.0811 30.3137 22.0798 30.3236L22.0711 30.392C22.0674 30.4132 22.0661 30.443 22.0587 30.448C22.0462 30.4691 22.035 30.489 22.0238 30.5089C22.0002 30.5487 21.9778 30.5872 21.9566 30.6245C21.913 30.6967 21.8707 30.7651 21.8321 30.8297C21.7911 30.9105 21.76 30.9081 21.7276 30.9279C21.6965 30.9441 21.6666 30.959 21.638 30.9727C21.6106 30.9851 21.5807 31.005 21.5596 31.0075C21.5397 31.0113 21.5197 31.015 21.5011 31.0187C21.4824 31.0224 21.465 31.0274 21.4476 31.0324C21.4276 31.0374 21.4264 31.0423 21.3579 31.0523C21.2982 31.061 21.2185 31.0548 21.2123 31.0399C21.2049 31.0249 21.1999 31.01 21.1924 30.9926C21.1775 30.959 21.1601 30.9205 21.1314 30.877C21.104 30.8322 21.0692 30.7837 21.0119 30.7265C20.9559 30.6681 20.8813 30.6071 20.7419 30.4853C20.712 30.4629 20.6684 30.4132 20.6323 30.3746C20.6137 30.3535 20.595 30.3361 20.5763 30.3137C20.5552 30.2789 20.5353 30.2441 20.5154 30.2105C20.4954 30.1769 20.4755 30.1433 20.4569 30.111C20.4469 30.0936 20.4369 30.0799 20.4282 30.06C20.4208 30.0277 20.4121 29.9941 20.4046 29.9618C20.3735 29.8325 20.3424 29.7069 20.3125 29.585C20.1942 29.1536 20.0897 28.8502 19.9802 28.6201C19.9528 28.5617 19.9267 28.5032 19.9005 28.4473C19.8719 28.3963 19.8445 28.3478 19.8171 28.2993C19.7897 28.2521 19.7649 28.2023 19.7362 28.1588C19.7076 28.1165 19.679 28.0742 19.6504 28.0332L19.608 27.9723L19.5869 27.9424C19.5794 27.9313 19.5719 27.9213 19.5707 27.9201L19.5271 27.8691C19.4985 27.8355 19.4699 27.8032 19.44 27.7733C19.323 27.6515 19.1998 27.5445 19.0405 27.4438C18.8799 27.3443 18.6895 27.2486 18.4008 27.2113C18.2552 27.1939 18.1232 27.1964 17.9975 27.2138C17.9664 27.2175 17.9353 27.2212 17.9067 27.225C17.878 27.2312 17.8507 27.2374 17.8233 27.2424C17.7685 27.2523 17.7187 27.266 17.6727 27.2809C17.486 27.3381 17.3503 27.4102 17.2197 27.4923C17.0915 27.5794 16.9707 27.6788 16.8301 27.8256C16.6907 27.9735 16.5301 28.17 16.3534 28.4809C16.2663 28.6375 16.1953 28.7805 16.1381 28.9148C16.1082 28.9807 16.0833 29.0454 16.0584 29.1051C16.0522 29.12 16.046 29.1349 16.0398 29.1498C16.0286 29.1809 16.0186 29.212 16.0074 29.2431C15.9863 29.304 15.9651 29.3637 15.9452 29.4221C15.7908 29.9009 15.7 30.3199 15.6278 30.8061L15.5905 31.0921C15.5855 31.1219 15.5842 31.1617 15.5743 31.1791C15.5432 31.2687 15.5133 31.3594 15.4809 31.4539C15.4735 31.4825 15.4635 31.49 15.4536 31.5037L15.4249 31.5422C15.405 31.5683 15.3851 31.5957 15.3652 31.623C15.344 31.6554 15.3266 31.6653 15.3067 31.6852C15.288 31.7026 15.2681 31.7213 15.2482 31.7399C15.2096 31.7735 15.176 31.7946 15.1387 31.8245C15.1088 31.8444 15.0764 31.8643 15.0428 31.8866C15.0167 31.9028 14.9881 31.9215 14.9582 31.9401C14.947 31.9476 14.9346 31.955 14.9221 31.9637C14.9184 31.9675 14.9047 31.9737 14.8711 31.9774C14.84 31.9811 14.8026 31.9811 14.784 31.9787C14.7192 31.9264 14.6496 31.8929 14.4952 31.8332L14.4716 31.8245C14.4616 31.8195 14.4467 31.8083 14.4342 31.8008C14.4093 31.7847 14.3845 31.7685 14.3596 31.7523C14.311 31.7213 14.2637 31.6914 14.2189 31.6628C14.1679 31.5447 14.1181 31.4291 14.0683 31.3159C14.0434 31.2587 14.0185 31.2015 13.9949 31.1455C13.97 31.0884 13.9439 31.0374 13.9277 30.9565C13.8903 30.8073 13.853 30.6569 13.8157 30.5052C13.797 30.4281 13.7783 30.351 13.7584 30.2727C13.751 30.2266 13.7335 30.213 13.7211 30.1831L13.68 30.1048C13.6252 29.9979 13.5692 29.8884 13.5107 29.7728L13.4883 29.7293C13.4796 29.7143 13.4622 29.692 13.4485 29.6746L13.4274 29.646C13.4211 29.6373 13.4224 29.641 13.4199 29.6373L13.4087 29.6273C13.395 29.6136 13.3801 29.5987 13.3664 29.585C13.2469 29.4719 13.1087 29.3587 12.8474 29.2742C12.5823 29.1909 12.3296 29.1685 12.1118 29.1635C12.0023 29.1598 11.904 29.1536 11.8044 29.1598C11.7098 29.1635 11.6077 29.1598 11.5269 29.1672C11.3626 29.1747 11.2008 29.202 11.0041 29.2667C10.81 29.3339 10.5822 29.4458 10.3196 29.6733C10.0595 29.9058 9.89269 30.1247 9.76699 30.3174C9.64128 30.5114 9.55665 30.6793 9.47451 30.8496C9.39361 31.0212 9.32142 31.199 9.23554 31.4241C9.19323 31.5372 9.14718 31.6616 9.09864 31.8071C9.08619 31.8431 9.07374 31.8804 9.0613 31.919C9.04387 31.9737 9.02645 32.0296 9.00778 32.0868C8.95924 32.2572 8.90448 32.435 8.85594 32.6352C8.83727 32.7148 8.8186 32.7919 8.79993 32.8652C8.78251 32.9398 8.76882 33.0157 8.75513 33.0841C8.7265 33.2196 8.70534 33.3365 8.69165 33.421C8.67049 33.4932 8.65058 33.5703 8.62942 33.6337C8.60204 33.6809 8.5759 33.7282 8.55101 33.7729C8.53857 33.7953 8.52612 33.8177 8.51367 33.8401C8.50123 33.86 8.48878 33.8699 8.47634 33.8848C8.45145 33.9134 8.4278 33.9408 8.40415 33.9682C8.3581 34.0167 8.32076 34.044 8.28093 34.0801C8.24733 34.1037 8.21373 34.1298 8.1851 34.1485C8.15648 34.1659 8.13532 34.182 8.10296 34.197C8.06437 34.2144 7.98596 34.2343 7.92125 34.2405C7.88889 34.2442 7.85902 34.2442 7.84035 34.2442C7.82043 34.2442 7.81421 34.2442 7.80674 34.243L7.76318 34.2405C7.72086 34.2355 7.68228 34.2355 7.60387 34.2144C7.5852 34.2094 7.56902 34.2069 7.54911 34.2019C7.52297 34.1907 7.49684 34.1783 7.46946 34.1659C7.44207 34.1534 7.41469 34.141 7.38731 34.1286L7.36615 34.1186L7.33877 34.0938C7.3201 34.0763 7.30143 34.0602 7.28277 34.0428C7.24543 34.008 7.20685 33.9719 7.16702 33.9358L7.13715 33.9085C7.13715 33.9085 7.12719 33.901 7.12221 33.8923L7.10977 33.86C7.09234 33.8165 7.07492 33.7729 7.05749 33.7282C6.98655 33.5529 6.91188 33.3477 6.83222 33.196C6.79239 33.1127 6.75132 33.0281 6.71025 32.9398C6.70527 32.9299 6.70029 32.9162 6.69407 32.9088L6.64553 32.8491C6.62313 32.8217 6.60073 32.7944 6.57832 32.767C6.55592 32.7396 6.53227 32.711 6.50987 32.6824L6.47502 32.6389C6.46631 32.629 6.46382 32.629 6.4576 32.624C6.43644 32.6078 6.41528 32.5892 6.39288 32.5705C6.19623 32.4163 6.00456 32.3666 5.83281 32.3305C5.65358 32.3082 5.5005 32.302 5.33621 32.3169C5.17566 32.3306 4.99893 32.3529 4.79357 32.4064C4.58696 32.4561 4.348 32.532 4.06423 32.6899C3.78544 32.8528 3.60248 33.0157 3.45935 33.1637C3.31996 33.3166 3.21292 33.4459 3.12082 33.5926C3.02499 33.7344 2.93787 33.8886 2.84203 34.09C2.7462 34.2927 2.64041 34.5464 2.53711 34.9094C2.33673 35.6406 2.26578 36.036 2.18364 36.4264C2.10896 36.8194 2.04051 37.2198 2.03553 38.0417C2.03553 39.7315 2.00442 39.7328 2.00442 41.4251C2.00442 43.1186 2.05545 43.1186 2.05545 44.8122C2.05545 46.5058 2.09527 46.507 2.09527 48.2018C2.09527 49.8966 2.01935 49.8966 2.01935 51.5915C2.01935 52.8983 1.75799 52.7939 1.37092 52.7939C0.983846 52.7939 0.713768 52.8983 0.713768 51.5915L0.721235 51.5865Z",fill:"hsl(var(--text-100))"}),he.jsx("path",{d:"M27.8162 22.5869C28.1398 22.6678 28.309 22.6901 28.4733 22.72C28.6401 22.7436 28.8069 22.7722 29.1429 22.8095C29.4802 22.8443 29.652 22.8282 29.8225 22.8058C29.993 22.7871 30.1622 22.7623 30.4995 22.766C30.6688 22.7635 30.7957 22.7735 30.9015 22.7871C31.0073 22.7983 31.0932 22.8157 31.1791 22.8331C31.3508 22.8692 31.5251 22.8978 31.8673 22.868C32.2084 22.8331 32.3776 22.8058 32.5469 22.7797C32.6315 22.7672 32.7162 22.7523 32.8207 22.7324C32.9253 22.7113 33.0535 22.6939 33.2202 22.6578C33.5563 22.5907 33.7168 22.526 33.8774 22.4651C33.957 22.434 34.0379 22.4042 34.1375 22.3656C34.2371 22.3271 34.3603 22.2935 34.5208 22.24C34.8444 22.1393 35.0087 22.097 35.1755 22.056C35.2589 22.0373 35.341 22.015 35.4418 21.9801C35.5414 21.9453 35.6646 21.9068 35.8189 21.8359C36.1301 21.6991 36.2782 21.6158 36.4263 21.535C36.501 21.4952 36.5744 21.4542 36.6653 21.3995C36.7549 21.3447 36.8681 21.2875 37.0113 21.1993C37.1544 21.111 37.2602 21.0426 37.3436 20.9779C37.4257 20.912 37.488 20.8561 37.5514 20.7989C37.6149 20.7429 37.6771 20.687 37.7543 20.6161C37.8315 20.5452 37.931 20.4718 38.0592 20.3674C38.1887 20.2642 38.2845 20.1859 38.3654 20.1212C38.4451 20.0553 38.5073 20.0018 38.5708 19.9496C38.7002 19.8464 38.8209 19.7332 39.0512 19.497C39.1607 19.3739 39.2466 19.2856 39.32 19.2122C39.3885 19.1351 39.4457 19.0755 39.5042 19.017C39.6225 18.9001 39.7282 18.7733 39.9212 18.5022C40.1029 18.2138 40.1738 18.0558 40.2423 17.8992C40.3132 17.7425 40.3642 17.5784 40.5298 17.2849C40.6144 17.1394 40.6692 17.0263 40.7202 16.933C40.7712 16.841 40.8135 16.7689 40.8571 16.6955C40.8994 16.6222 40.9467 16.5513 40.9927 16.4568C41.0376 16.361 41.0873 16.2454 41.1496 16.09C41.2803 15.7791 41.3363 15.6224 41.4097 15.4682C41.4445 15.3911 41.4794 15.3141 41.5192 15.2158C41.5528 15.1163 41.5877 14.9945 41.63 14.8316C41.7196 14.5058 41.7022 14.3305 41.7009 14.1601C41.6984 14.0743 41.6972 13.9898 41.7009 13.8853C41.7009 13.7796 41.7059 13.6553 41.7258 13.4912C41.737 13.4091 41.7457 13.337 41.7544 13.2723C41.7594 13.2077 41.7656 13.1517 41.7719 13.0995C41.7843 12.9963 41.7968 12.9142 41.8105 12.8309C41.8428 12.6655 41.8503 12.4989 41.849 12.1657C41.8378 11.8324 41.8366 11.6645 41.8478 11.4954C41.8478 11.3276 41.8478 11.1572 41.798 10.824C41.732 10.4932 41.681 10.3316 41.6051 10.1762C41.5703 10.0978 41.5354 10.0207 41.4993 9.92249C41.4806 9.87275 41.4632 9.81804 41.4433 9.75587C41.4209 9.69494 41.3973 9.62531 41.3724 9.54448C41.3226 9.38532 41.2939 9.26222 41.2653 9.1615C41.2367 9.06078 41.2168 8.97872 41.1969 8.89665C41.177 8.81458 41.1595 8.73127 41.1272 8.63055C41.0923 8.53108 41.0475 8.41171 40.9828 8.25628C40.7015 7.64077 40.6505 7.66564 40.3219 7.07625C40.2348 6.93077 40.1763 6.81886 40.1315 6.72187C40.0854 6.62613 40.0493 6.54779 40.0157 6.46821C39.9821 6.38863 39.9473 6.30905 39.8975 6.2133C39.8465 6.1188 39.7755 6.01187 39.676 5.8726C39.2628 5.32797 39.1682 5.40382 38.7189 4.90023C38.4911 4.6503 38.389 4.51476 38.2882 4.3755C38.2385 4.30462 38.1874 4.23623 38.1152 4.15789C38.043 4.07956 37.9572 3.98506 37.8277 3.87563C37.6983 3.76621 37.6012 3.68539 37.5203 3.617C37.4382 3.55234 37.371 3.50011 37.305 3.44789C37.239 3.39442 37.1731 3.34344 37.0872 3.28375C37.0013 3.22531 36.9017 3.14573 36.7599 3.06118C36.4798 2.88088 36.3317 2.81622 36.1849 2.74037C36.0293 2.67447 35.8787 2.59738 35.5688 2.46433C35.4132 2.39842 35.2962 2.34869 35.1991 2.30765C35.1021 2.26662 35.0212 2.23926 34.9428 2.20818C34.8631 2.17834 34.7847 2.14849 34.6851 2.10995C34.5856 2.07264 34.4623 2.04031 34.3005 1.99182C33.6459 1.81525 33.6272 1.89732 32.9663 1.77795C32.2992 1.69464 32.3054 1.61381 31.6271 1.5877C31.2874 1.57651 31.1181 1.61257 30.9513 1.6449C30.8679 1.66231 30.7833 1.67474 30.68 1.69215C30.5755 1.7108 30.451 1.72821 30.283 1.74313C29.9482 1.7767 29.7864 1.83017 29.6233 1.86996C29.4628 1.92219 29.3022 1.96944 28.9761 2.04156C28.6525 2.12238 28.487 2.14725 28.3252 2.18828C28.1634 2.22807 27.9954 2.25419 27.683 2.3748C27.3669 2.48422 27.215 2.55759 27.0595 2.61727C26.9026 2.67571 26.752 2.75032 26.4508 2.89829C26.1546 3.05372 25.9978 3.11838 25.836 3.17433C25.6804 3.24148 25.5199 3.30489 25.2386 3.4939C24.966 3.69409 24.8254 3.78984 24.6997 3.90423C24.635 3.95894 24.5703 4.01365 24.4906 4.08204C24.4495 4.11562 24.4047 4.15292 24.3537 4.1952C24.3052 4.23996 24.2504 4.2897 24.1882 4.3469C24.0625 4.46005 23.9741 4.55082 23.9044 4.63165C23.8384 4.7162 23.7911 4.78708 23.7438 4.8592C23.6493 5.00219 23.5522 5.14021 23.3344 5.39512C23.1091 5.64256 22.9933 5.76442 22.8664 5.88006C22.8042 5.9385 22.7407 5.9957 22.6698 6.07404C22.6013 6.15486 22.5229 6.25558 22.4258 6.3936C22.3773 6.46323 22.335 6.52416 22.2976 6.57887C22.264 6.63607 22.2341 6.68581 22.2068 6.73182C22.1545 6.82383 22.1122 6.89844 22.0711 6.9718C22.0313 7.04641 21.9852 7.11853 21.9379 7.21303C21.8894 7.30753 21.8309 7.42068 21.7488 7.56865C21.7077 7.64202 21.6703 7.70668 21.638 7.76512C21.6081 7.82356 21.5795 7.87578 21.5546 7.92179C21.5023 8.01505 21.4575 8.08717 21.4127 8.16053C21.3679 8.2339 21.3206 8.30602 21.2721 8.40052C21.2248 8.49626 21.1713 8.61314 21.1065 8.77106C20.9709 9.08565 20.936 9.256 20.8887 9.42014C20.8427 9.58427 20.7966 9.74841 20.7045 10.0767C20.6572 10.2396 20.6162 10.3614 20.5801 10.4609C20.5465 10.5616 20.5191 10.6424 20.4917 10.7233C20.4631 10.8041 20.4357 10.8849 20.4046 10.9869C20.3735 11.0888 20.3386 11.2119 20.315 11.381C20.2042 12.0525 20.2801 12.0612 20.2291 12.7314C20.2092 13.4029 20.1893 13.4041 20.2316 14.0731C20.2714 14.4063 20.2826 14.573 20.3224 14.7359C20.3386 14.8179 20.3548 14.9 20.376 15.0019C20.3946 15.1052 20.4158 15.2283 20.4606 15.3887C20.5017 15.5503 20.5365 15.6709 20.5676 15.7704C20.6025 15.8686 20.6398 15.9445 20.6734 16.0216C20.7444 16.1733 20.8016 16.3287 20.931 16.6346C21.048 16.9454 21.1028 17.1021 21.1489 17.265C21.1737 17.3458 21.1949 17.4291 21.2335 17.5261C21.2758 17.6219 21.3318 17.735 21.414 17.8818C21.7612 18.4575 21.745 18.4687 22.147 19.012C22.4781 19.4112 22.3822 19.6263 22.0923 19.8849C21.8035 20.1423 21.5359 20.2381 21.1601 19.783C20.707 19.1712 20.7319 19.1538 20.3399 18.5047C20.2478 18.3381 20.1781 18.2138 20.1208 18.1106C20.0661 18.0049 20.0287 17.9178 19.9876 17.832C19.9092 17.6592 19.8209 17.4901 19.6852 17.1344C19.5383 16.7838 19.4662 16.6072 19.3815 16.4344C19.3404 16.3474 19.2969 16.2603 19.2546 16.1484C19.216 16.0352 19.1749 15.8972 19.1289 15.7107C19.1065 15.6174 19.0853 15.5366 19.0729 15.462C19.0617 15.3874 19.0542 15.3228 19.048 15.2631C19.0355 15.1437 19.0305 15.048 19.0268 14.951C19.0119 14.7595 19.0231 14.5667 18.9808 14.19C18.9322 13.4352 18.7617 13.4377 18.7841 12.6693C18.7841 12.4765 18.8115 12.3348 18.8215 12.2166C18.8364 12.0985 18.8476 12.0028 18.86 11.9083C18.8787 11.718 18.926 11.5327 18.9832 11.156C19.0094 10.967 19.0467 10.8302 19.0816 10.7158C19.1152 10.6014 19.145 10.5119 19.1749 10.4211C19.206 10.3316 19.2347 10.2408 19.2695 10.1289C19.3093 10.0182 19.3529 9.88394 19.4064 9.70364C19.4599 9.52334 19.4973 9.38781 19.5371 9.27714C19.5782 9.16772 19.6118 9.08068 19.6441 8.99239C19.7138 8.81831 19.7686 8.6405 19.9167 8.29607C19.9889 8.12323 20.0436 7.99391 20.0885 7.88573C20.1357 7.7788 20.1806 7.69673 20.2216 7.61217C20.2639 7.52886 20.305 7.44431 20.3573 7.33986C20.3834 7.28764 20.412 7.22919 20.4432 7.16329C20.478 7.09863 20.5178 7.02651 20.5626 6.94445C20.7419 6.61493 20.8402 6.45453 20.9522 6.30283C21.0057 6.22574 21.0592 6.14864 21.1252 6.05166C21.1576 6.00316 21.1924 5.94845 21.2335 5.88752C21.2758 5.82784 21.3231 5.76069 21.3779 5.6836C21.4837 5.52941 21.5633 5.41253 21.6305 5.31678C21.699 5.22228 21.755 5.14643 21.8097 5.06934C21.923 4.91888 22.0238 4.75972 22.2777 4.47995C22.4034 4.33944 22.493 4.23001 22.5739 4.14422C22.6548 4.05842 22.7195 3.99003 22.7843 3.92164C22.849 3.85325 22.9137 3.78486 22.9946 3.69906C23.0792 3.617 23.1838 3.52125 23.3244 3.39442C23.3941 3.33101 23.4551 3.27505 23.5086 3.22283C23.5634 3.17433 23.6119 3.13081 23.6555 3.08978C23.7414 3.00895 23.8086 2.93932 23.8745 2.87093C24.004 2.72918 24.1496 2.60484 24.4582 2.38102C24.7731 2.16714 24.9324 2.06145 25.088 1.9483C25.2498 1.84758 25.4079 1.73691 25.7464 1.5591C26.0899 1.38999 26.2629 1.30917 26.4434 1.24451C26.6238 1.17985 26.7968 1.10027 27.1578 0.974684C27.515 0.839149 27.7017 0.796872 27.8859 0.744647C28.0688 0.689936 28.2555 0.651389 28.6252 0.560618C28.9961 0.477307 29.1877 0.461143 29.3757 0.43503C29.5661 0.423839 29.754 0.400214 30.1311 0.361667C30.3203 0.345503 30.4609 0.330581 30.5792 0.318147C30.6974 0.304469 30.792 0.301982 30.8866 0.292035C31.0758 0.277113 31.2662 0.255975 31.6458 0.268409C31.7404 0.270896 31.8238 0.273383 31.8985 0.27587C31.9731 0.280844 32.0379 0.288304 32.0964 0.294521C32.2146 0.308199 32.3092 0.31939 32.4038 0.330581C32.5929 0.350476 32.7784 0.393997 33.1555 0.437517C33.9023 0.569322 33.906 0.556888 34.6403 0.753351C35.0062 0.856557 35.1892 0.907538 35.3734 0.958519C35.4655 0.984631 35.5588 1.00701 35.6721 1.04556C35.7841 1.08659 35.9173 1.13757 36.094 1.21094C36.272 1.28057 36.3952 1.35518 36.4997 1.41362C36.6031 1.4733 36.6839 1.52677 36.7636 1.579C36.8433 1.63246 36.9242 1.69464 37.0262 1.76054C37.1283 1.82644 37.2502 1.90478 37.412 2.01047C37.5776 2.10995 37.6971 2.18828 37.8053 2.24175C37.9136 2.29646 38.0045 2.33501 38.0916 2.37729C38.18 2.41832 38.2696 2.45935 38.3754 2.52028C38.4799 2.58245 38.5957 2.66825 38.7425 2.79135C38.8894 2.91445 38.9914 3.01517 39.0798 3.09475C39.1682 3.17558 39.2379 3.24023 39.3038 3.30862C39.4382 3.44416 39.5764 3.57472 39.8328 3.85574C40.1705 4.23374 40.492 4.6246 40.7973 5.0283C40.9081 5.18249 40.9915 5.29689 41.0612 5.39388C41.1272 5.49211 41.1794 5.57169 41.2317 5.65002C41.284 5.7296 41.3363 5.80794 41.401 5.90742C41.462 6.00938 41.5354 6.13124 41.6337 6.29413C41.8254 6.6224 41.8752 6.81264 41.9337 6.99418C41.981 7.18319 42.0357 7.36473 42.1876 7.70916C42.261 7.88324 42.3183 8.01256 42.3668 8.1195C42.4153 8.22768 42.4477 8.31596 42.485 8.403C42.5572 8.57833 42.6356 8.75117 42.7427 9.1155C42.7713 9.20627 42.7962 9.2846 42.8186 9.35548C42.8397 9.42635 42.8584 9.48977 42.8758 9.54573C42.9107 9.65888 42.9418 9.74965 42.9729 9.84042C43.0401 10.0207 43.0849 10.2072 43.1571 10.5828C43.2144 10.9608 43.2442 11.151 43.2778 11.34C43.2978 11.5303 43.3289 11.7217 43.3438 12.106C43.3438 12.4914 43.3077 12.6842 43.2442 12.8719C43.2156 12.9664 43.187 13.0597 43.1621 13.1778C43.1496 13.2363 43.1384 13.3009 43.1297 13.3743C43.1185 13.4476 43.1036 13.5297 43.0936 13.623C43.0712 13.8107 43.0588 13.9525 43.0513 14.0706C43.0401 14.1887 43.0314 14.2832 43.0227 14.3777C43.0028 14.5667 43.0015 14.762 42.902 15.1288C42.8547 15.3128 42.8223 15.4521 42.7974 15.569C42.7651 15.6834 42.7427 15.7754 42.719 15.8674C42.668 16.0502 42.6369 16.2429 42.49 16.5936C42.4178 16.7701 42.3643 16.9019 42.3195 17.0113C42.2722 17.1208 42.2249 17.2028 42.1838 17.2874C42.1415 17.3719 42.098 17.4565 42.0444 17.5622C41.9909 17.6679 41.9324 17.7972 41.8378 17.9613C41.6536 18.2909 41.5852 18.4687 41.5005 18.6378C41.4159 18.8069 41.3313 18.9772 41.1284 19.2956C40.9056 19.6126 40.7625 19.7519 40.6107 19.8775C40.536 19.9409 40.4613 20.0056 40.3754 20.0901C40.2858 20.1722 40.1825 20.2717 40.0543 20.4146C39.9249 20.5564 39.8241 20.6571 39.7457 20.7479C39.6673 20.8387 39.6038 20.9108 39.5378 20.9817C39.4731 21.0525 39.4084 21.1247 39.3237 21.2104C39.2379 21.295 39.1283 21.3883 38.9802 21.5101C38.8321 21.632 38.7164 21.7165 38.6255 21.7961C38.5347 21.8744 38.4625 21.9379 38.3878 22C38.3144 22.0622 38.2397 22.1244 38.1451 22.1977C38.0493 22.2711 37.9273 22.347 37.7643 22.4477C37.6012 22.5484 37.4718 22.6131 37.3685 22.6727C37.2639 22.7324 37.1805 22.7784 37.0947 22.8207C36.9242 22.909 36.7561 22.9985 36.4064 23.1515C36.2334 23.2323 36.0977 23.2795 35.9882 23.3255C35.8774 23.3703 35.7891 23.4064 35.6995 23.4375C35.5202 23.5021 35.3423 23.5705 34.9801 23.6824C34.7996 23.7433 34.659 23.767 34.542 23.7881C34.425 23.808 34.3292 23.8167 34.2321 23.8204C34.0404 23.8304 33.85 23.8441 33.4828 23.9174C33.2999 23.9585 33.1592 23.9746 33.0447 23.9933C32.929 24.0107 32.8356 24.0231 32.7423 24.0306C32.5556 24.0492 32.3702 24.0691 31.998 24.1077C31.6259 24.1412 31.4392 24.1686 31.2525 24.1885C31.1592 24.1984 31.0658 24.2096 30.9488 24.2196C30.8318 24.2258 30.69 24.2308 30.502 24.2333C30.1249 24.232 29.9357 24.2308 29.7478 24.2308C29.5586 24.2308 29.3682 24.2283 28.9911 24.1885C28.6127 24.1462 28.4273 24.0927 28.2431 24.0443C28.0589 23.9883 27.8747 23.9423 27.5038 23.8503C26.93 23.6998 27.0557 23.4561 27.1677 23.088C27.281 22.715 27.3208 22.4539 27.8162 22.5845V22.5869Z",fill:"hsl(var(--text-100))"}),he.jsx("path",{d:"M35.5078 17.1108C34.9813 16.6607 35.0448 16.5873 34.5183 16.136C33.9919 15.6846 34.0143 15.6597 33.4878 15.2084C32.9614 14.757 32.8966 14.8328 32.3702 14.3815C31.8437 13.9301 31.8163 13.9612 31.2899 13.5111C30.7634 13.0597 30.8617 12.9453 30.3352 12.4939C29.8088 12.0426 29.7777 12.0799 29.2512 11.6285C28.7247 11.1771 28.7135 11.1896 28.1871 10.7382C27.6594 10.2868 27.6992 10.2408 27.1715 9.78944C26.6438 9.33807 26.6039 9.38532 26.0762 8.93395C25.6867 8.60071 25.8173 8.34207 26.0538 8.06727C26.2903 7.79247 26.4932 7.66067 26.8827 7.99515C27.4092 8.44528 27.4901 8.35202 28.0166 8.80215C28.543 9.25352 28.4522 9.35921 28.9786 9.80934C29.5051 10.2607 29.4889 10.2794 30.0154 10.7295C30.5418 11.1809 30.6414 11.0652 31.1679 11.5166C31.6943 11.968 31.6197 12.0537 32.1474 12.5051C32.6738 12.9565 32.6664 12.9652 33.1928 13.4153C33.7193 13.8667 33.7305 13.8543 34.257 14.3056C34.7847 14.757 34.8531 14.6774 35.3796 15.1288C35.9073 15.5801 35.9272 15.5578 36.4537 16.0091C36.8433 16.3424 36.5794 16.6023 36.3429 16.8771C36.1065 17.1519 35.8986 17.4428 35.5103 17.1096L35.5078 17.1108Z",fill:"hsl(var(--text-100))"}),he.jsx("path",{d:"M26.5044 16.7216C26.9624 16.2019 27.0346 16.2653 27.4913 15.7443C27.9493 15.2233 27.9742 15.2457 28.4323 14.7259C28.8903 14.2049 28.8156 14.1402 29.2724 13.6192C29.7304 13.0982 29.6993 13.0721 30.1573 12.5511C30.6153 12.0301 30.7285 12.1296 31.1866 11.6086C31.6446 11.0876 31.6085 11.0565 32.0652 10.5367C32.5233 10.0157 32.5108 10.0046 32.9688 9.48355C33.4268 8.96255 33.4729 9.00234 33.9309 8.48134C34.3889 7.96034 34.3416 7.91806 34.7996 7.39706C35.1382 7.01159 35.3945 7.14588 35.6671 7.38462C35.9397 7.62337 36.0679 7.82853 35.7293 8.21276C35.2713 8.73252 35.3647 8.81458 34.9079 9.33558C34.4499 9.85659 34.3453 9.76457 33.8873 10.2843C33.4293 10.8053 33.4107 10.7892 32.9539 11.3089C32.4959 11.8299 32.6104 11.9294 32.1524 12.4504C31.6943 12.9714 31.6085 12.8956 31.1505 13.4166C30.6924 13.9376 30.6837 13.9289 30.227 14.4499C29.769 14.9709 29.7814 14.9821 29.3234 15.5018C28.8654 16.0228 28.9438 16.0924 28.4858 16.6134C28.0278 17.1345 28.0502 17.1543 27.5921 17.6766C27.2536 18.0621 26.9972 17.7947 26.7247 17.556C26.4521 17.3172 26.1646 17.1059 26.5031 16.7204L26.5044 16.7216Z",fill:"hsl(var(--text-100))"})]}),XH=({isMainTabBlocked:e=!0,category:t})=>{const s=yt(),i=n();return he.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-bg-100 p-8",children:he.jsxs("div",{className:"max-w-md text-center",children:[he.jsx("div",{className:"flex items-center justify-center mx-auto",children:e?he.jsx("img",{src:s?"/assets/darkshield-C5QZAT-q.svg":"/assets/lightshield-Dx3kyqnQ.svg",alt:i.formatMessage({defaultMessage:"Shield",id:"ivOuJVNgF2"}),className:"w-12 h-12"}):he.jsx(QH,{})}),he.jsx("h2",{className:"font-large-bold text-text-100 mt-[22px]",children:e?i.formatMessage({defaultMessage:"Can't access this page",id:"5mDrlUu7+N"}):i.formatMessage({defaultMessage:"Workflow stopped",id:"j1niUi0cRv"})}),he.jsx("p",{className:"font-base text-text-300 mt-[7px]",children:"category_org_blocked"===t?i.formatMessage({defaultMessage:"This site is blocked by your organization's policy.",id:"Rc2RmGjQRw"}):e?i.formatMessage({defaultMessage:"Claude cannot assist with the content on this page.",id:"WDCnAlgy2l"}):i.formatMessage({defaultMessage:"Claude landed on a blocked site and can't complete your request.",id:"hGdb967wOL"})}),!e&&he.jsx("button",{onClick:async()=>{try{const t=new URLSearchParams(window.location.search).get("tabId");if(!t)return;const n=parseInt(t);await ze.initialize();const r=await ze.getBlockedTabsInfo(n);for(const s of r.blockedTabs)if(s.tabId!==n)try{await chrome.tabs.remove(s.tabId)}catch(e){}}catch(e){}},className:"mt-[14px] px-[14px] py-2 border border-border-300 text-text-200 rounded-[6px] hover:bg-bg-200 transition-colors font-ui font-medium text-[14px]",children:he.jsx(r,{defaultMessage:"Close blocked site",id:"OarD7TkDBO"})})]})})},eV=({isOpen:e,onClose:t,onConfirm:n})=>{if(!e)return null;return he.jsx("div",{className:"w-full h-screen bg-bg-100 flex items-center justify-center p-5 absolute inset-0 z-50",children:he.jsxs("div",{className:"max-w-[520px] w-full",children:[he.jsx("div",{className:"flex justify-start mb-4",children:he.jsx(QH,{})}),he.jsx("h2",{className:"text-text-100 font-ui font-medium text-[20px] leading-[140%] mb-4",children:he.jsx(r,{defaultMessage:"Skip all permissions across the internet?",id:"DcOPulvEDu"})}),he.jsxs("div",{className:"bg-danger-900 border-[0.5px] border-danger-200 rounded-lg p-4 mb-4",children:[he.jsxs("h3",{className:"text-[14px] font-ui font-medium text-danger-000 leading-[140%] mb-2.5 flex items-center gap-1",children:[he.jsx(_,{size:16,className:"text-danger-000"}),he.jsx(r,{defaultMessage:"WARNING",id:"RIrR6dJyeb"})]}),he.jsxs("ul",{className:"text-[14px] font-ui font-normal text-danger-000 leading-[140%] ml-4 list-disc space-y-2",children:[he.jsx("li",{children:he.jsx(r,{defaultMessage:"This allows Claude to take any action on the internet.",id:"2yTW8KQyIr"})}),he.jsx("li",{children:he.jsx(r,{defaultMessage:"This mode puts your data and the data of others at risk from malicious code.",id:"xeH1mSU1MS"})}),he.jsx("li",{children:he.jsx(r,{defaultMessage:"You should oversee Claude when it is in this mode. You are fully responsible for all risks associated with permission-less Claude.",id:"1cBbdp1n7Q"})}),he.jsx("li",{children:he.jsx(r,{defaultMessage:"Review {risksLink} before you begin.",id:"fOUfZ3Wftl",values:{risksLink:he.jsx("button",{onClick:()=>chrome.tabs.create({url:Kk}),className:"text-danger-000 inline-link hover:no-underline focus:outline-none",children:he.jsx(r,{defaultMessage:"risks",id:"BfcxKxig7S"})})}})})]})]}),he.jsxs("div",{className:"flex justify-end gap-3",children:[he.jsx("button",{onClick:t,className:"px-[14px] py-2 border border-border-300 text-text-200 rounded-[14px] hover:bg-bg-200 transition-colors font-ui font-medium text-[14px]",children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),he.jsx("button",{onClick:async()=>{await n(),t()},className:"px-[14px] py-2 bg-text-100 text-bg-100 rounded-[14px] hover:bg-text-200 transition-colors font-ui font-medium text-[14px]",children:he.jsx(r,{defaultMessage:"Skip permissions",id:"c0/oTKLaf+"})})]})]})})},tV=({isOpen:e,onClose:t})=>{if(!e)return null;return he.jsx("div",{className:"w-full h-screen bg-bg-100 flex items-center justify-center p-5 absolute inset-0 z-50",children:he.jsxs("div",{className:"max-w-[520px] w-full",children:[he.jsx("h1",{className:"text-center text-text-000 mb-3",style:{fontFamily:"Anthropic Sans, var(--font-ui-serif)",fontSize:"26px",fontWeight:500,lineHeight:"140%"},children:he.jsx(r,{defaultMessage:"Test the newest{br}Claude experience",id:"kDcz4TuVQh",values:{br:he.jsx("br",{})}})}),he.jsx("p",{className:"text-center text-text-300 mb-[22px] px-4",style:{fontSize:"14px",lineHeight:"140%"},children:he.jsx(r,{defaultMessage:"Please help us Antfood the latest version of Claude. Your testing accelerates our development.",id:"wLZuGWqTtQ"})}),he.jsxs("div",{className:"border border-border-300 rounded-[24px] mb-[22px]",children:[he.jsxs("div",{className:"flex gap-3 pt-5 pb-4 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(Rr,{size:20,className:"text-text-100"})}),he.jsxs("div",{className:"flex-1",children:[he.jsx("h3",{className:"text-[14px] text-text-100 font-medium mb-1",children:he.jsx(r,{defaultMessage:"Step 1: Download the Ant-only version",id:"MMLgwunXx4"})}),he.jsx("p",{className:"text-[12px] text-text-300 leading-[140%]",children:he.jsx(r,{defaultMessage:"Click below to get the latest internal build from the Chrome Web Store.",id:"s5uJOAoEr4"})})]})]}),he.jsx("div",{className:"border-t-[0.5px] border-border-300 px-4"}),he.jsxs("div",{className:"flex gap-3 pt-4 pb-5 px-4",children:[he.jsx("div",{className:"mt-0.5",children:he.jsx(Cr,{size:20,className:"text-text-100"})}),he.jsxs("div",{className:"flex-1",children:[he.jsx("h3",{className:"text-[14px] text-text-100 font-medium mb-1",children:he.jsx(r,{defaultMessage:"Step 2: Remove this extension",id:"xFdRKGza1P"})}),he.jsx("p",{className:"text-[12px] text-text-300 leading-[140%]",children:he.jsx(r,{defaultMessage:"Uninstall this version after installing the new one to avoid conflicts.",id:"Iu0/PCYXfB"})})]})]})]}),he.jsxs("div",{className:"flex flex-col gap-3",children:[he.jsx("button",{onClick:()=>{window.open("https://chromewebstore.google.com/detail/claude/dngcpimnedloihjnnfngkgjoidhnaolf","_blank")},className:"w-full px-4 py-2.5 rounded-[14px] bg-text-100 hover:bg-text-200 active:bg-text-000 text-bg-100 font-button transition-all hover:shadow-md",children:he.jsx(r,{defaultMessage:"Get the Ant-only extension",id:"O+2FnUTQ6S"})}),he.jsx("button",{onClick:t,className:"w-full px-4 py-2.5 rounded-[14px] bg-transparent hover:bg-bg-200 text-text-300 hover:text-text-100 font-button transition-colors",children:he.jsx(r,{defaultMessage:"Later",id:"uQDRsYlg+S"})})]})]})})},nV=[{value:"ui_bug",label:"UI bug"},{value:"incorrect_assumptions",label:"Made incorrect assumptions"},{value:"incomplete_request",label:"Incomplete request"},{value:"too_much_input",label:"Asked for too much input"},{value:"ui_misunderstanding",label:"Didn't understand the UI"},{value:"unauthorized_action",label:"Did something it shouldn't have done"},{value:"navigation_error",label:"Navigation, clicking, typing, scrolling error"},{value:"report_content",label:"Report content"},{value:"other",label:"Other"}],rV=({onClose:e,onSubmit:t,feedbackType:s,message:i,hardcodedType:o=null,messageId:a=null})=>{const l=n(),[c,u]=de.useState(""),[d,h]=de.useState(""),[p,f]=de.useState(!1);return he.jsxs("div",{className:"bg-bg-000 rounded-[14px]",children:[he.jsxs("div",{className:"flex items-center justify-between py-[10px] px-4",children:[he.jsxs("div",{className:"flex items-center gap-2",children:["positive"===s?he.jsx(es,{size:20,className:"text-text-100"}):he.jsx(Xr,{size:20,className:"text-text-100"}),he.jsx("h3",{className:"font-ui text-[14px] font-normal leading-[140%] text-text-100",children:he.jsx(r,{defaultMessage:"Share {feedbackType} feedback",id:"xUedNbOuGK",values:{feedbackType:s}})})]}),he.jsx("button",{onClick:e,className:"p-1 text-text-300 hover:bg-bg-100 rounded transition-colors","aria-label":l.formatMessage({defaultMessage:"Close",id:"rbrahOGMC3"}),children:he.jsx(Ly,{size:16})})]}),he.jsx("div",{className:"border-t border-border-300 mb-4"}),he.jsxs("div",{className:"space-y-4 px-4",children:["negative"===s&&he.jsxs(he.Fragment,{children:[!o&&he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"What type of issue do you wish to report? (optional)",id:"IFWIi9rs1t"})}),he.jsxs("div",{className:"relative",children:[he.jsxs("select",{value:c,onChange:e=>u(e.target.value),className:"w-full h-10 px-3 bg-bg-100 border border-border-200 rounded-lg text-text-100 text-sm font-normal font-ui leading-tight focus:outline-none focus:ring-2 focus:ring-accent-main-200 focus:border-transparent appearance-none",children:[he.jsx("option",{value:"",children:l.formatMessage({defaultMessage:"Select",id:"kQAf2d9u+x"})}),nV.map(e=>he.jsx("option",{value:e.value,children:e.label},e.value))]}),he.jsx(D,{className:"absolute right-3 top-3 w-4 h-4 text-text-300 pointer-events-none"})]})]}),"report_content"===c?he.jsx("div",{className:"p-4 bg-bg-100 border border-border-200 rounded-lg",children:he.jsx("p",{className:"text-sm font-normal font-ui text-text-100",children:he.jsx(r,{defaultMessage:"Please use this <link>form</link> to report violative content.",id:"QSjqvNNsUq",values:{link:e=>he.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeO9Hzkyf_hQ2fYkfP_cqAcJG5kdlkg1wF4drQEFK9Z6db7jg/viewform",target:"_blank",rel:"noopener noreferrer",className:"inline-link cursor-pointer hover:text-text-200",children:e})}})})}):he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Please provide details: (optional)",id:"og1W/bIZdx"})}),he.jsx("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:l.formatMessage({defaultMessage:"What was unsatisfying about this response?",id:"+DB/t6WTki"}),className:"w-full h-28 p-3 bg-bg-100 border border-border-200 rounded-lg text-text-100 placeholder-text-400 text-sm font-normal font-ui leading-tight resize-none focus:outline-none focus:ring-2 focus:ring-accent-main-200 focus:border-transparent"})]})]}),"positive"===s&&he.jsx(he.Fragment,{children:he.jsxs("div",{children:[he.jsx("p",{className:"font-base-bold text-text-100 mb-2",children:he.jsx(r,{defaultMessage:"Please provide details: (optional)",id:"og1W/bIZdx"})}),he.jsx("textarea",{value:d,onChange:e=>h(e.target.value),placeholder:l.formatMessage({defaultMessage:"What was satisfying about this response?",id:"yJFWG3mK1I"}),className:"w-full h-28 p-3 bg-bg-100 border border-border-200 rounded-lg text-text-100 placeholder-text-400 text-sm font-normal font-ui leading-tight resize-none focus:outline-none focus:ring-2 focus:ring-accent-main-200 focus:border-transparent"})]})}),"report_content"!==c&&he.jsx("div",{className:"text-text-300",children:he.jsx("p",{className:"text-xs font-small font-ui",children:he.jsx(r,{defaultMessage:"Submitting this report will send the entire current conversation to Anthropic for future improvements to our models. <link>Learn more</link>",id:"04w/1piSXb",values:{link:e=>he.jsx("a",{href:"https://support.claude.com/en/articles/10023548-how-long-do-you-store-my-data",target:"_blank",rel:"noopener noreferrer",className:"inline-link cursor-pointer hover:text-text-200",children:e})}})})})]}),he.jsx("div",{className:"px-3 py-[10px] space-y-[5px] mt-[10px] mb-0.5",children:he.jsxs("div",{className:"flex justify-end gap-2",children:[he.jsx("button",{onClick:e,className:"h-8 min-w-20 px-3.5 py-[3px] rounded-lg outline outline-[0.50px] outline-offset-[-0.50px] outline-border-200/30 flex justify-center items-center gap-2 overflow-hidden hover:bg-bg-100 transition-colors",children:he.jsx("div",{className:"flex-1 text-center justify-start text-text-100 text-sm font-medium font-ui leading-tight",children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})})}),"report_content"!==c&&he.jsx("button",{onClick:()=>{f(!0);try{t({thumbs:s,type:o||c,message:d,messageId:a||i?.id||"unknown"})}finally{f(!1),e()}},className:"h-8 min-w-20 px-3.5 py-[3px] bg-text-100 rounded-lg flex justify-center items-center gap-2 overflow-hidden hover:bg-text-200 transition-colors",children:he.jsx("div",{className:"flex-1 text-center justify-start text-bg-100 text-sm font-medium font-ui leading-tight",children:p?he.jsx(r,{defaultMessage:"Submitting...",id:"txkW56MpkQ"}):he.jsx(r,{defaultMessage:"Submit",id:"wSZR47Y5kj"})})})]})})]})},sV=({strokeColor:e,strokeWidth:t=2,dashLength:n=10,gapLength:r=10,borderRadius:s=16})=>{const i=de.useRef(null),[o,a]=de.useState({width:0,height:0});de.useEffect(()=>{const e=()=>{if(i.current){const e=i.current.getBoundingClientRect();a({width:e.width,height:e.height})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const{width:l,height:c}=o,u=Math.min(s,Math.min(l,c)/2),d=2*(l+c-4*u)+2*Math.PI*u,h=n+r,p=d/Math.round(d/h),f=n/h*p,m=p-f;return he.jsx("div",{ref:i,className:"absolute inset-0 pointer-events-none overflow-hidden",style:{zIndex:41},children:o.width>0&&o.height>0&&he.jsx("svg",{width:o.width,height:o.height,style:{position:"absolute",top:0,left:0,overflow:"hidden"},children:he.jsx("rect",{x:t/2,y:t/2,width:o.width-t,height:o.height-t,rx:u,ry:u,fill:"none",stroke:e,strokeWidth:t,strokeDasharray:`${f} ${m}`,strokeDashoffset:f/2,pathLength:d})})})},iV=({isActive:e})=>he.jsx(yn,{children:e&&he.jsxs(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeOut"},className:"absolute inset-0 pointer-events-none z-[60]",children:[he.jsx("div",{className:"absolute inset-0",style:{border:"2px solid #F7CE46",borderRadius:"16px",boxSizing:"border-box"}}),he.jsx(sV,{strokeColor:"#31290E",strokeWidth:2,dashLength:9,gapLength:9,borderRadius:16})]})});function oV({messages:e,isAgentRunning:t,currentUrl:n,createAnthropicMessage:r}){const[s,i]=de.useState(!1),[o,a]=de.useState(null),[l,c]=de.useState(!1);return{isConvertingToTask:s,conversionError:o,showConversionError:l,handleConvertToScheduledTask:async()=>{if(!s){if(t)return c(!0),void a("Please wait for Claude to finish before creating a scheduled task.");if(0===e.length)return c(!0),void a("Start a conversation first to create a scheduled task from it. The scheduled task feature converts your chat history into an automated task that can run on a schedule.");i(!0),a(null),c(!1);try{const t="Convert our conversation into a scheduled task that could recreate the actions we performed.\n\nIMPORTANT: Even if the original conversation wasn't about scheduling, your job is to create a scheduled task that would REPRODUCE the same actions that were performed.\n\nFor example:\n- If the user asked \"What do you see?\" and you took a screenshot, create a task that takes screenshots\n- If the user asked to fill out a form, create a task that fills out that same form\n- If the user asked to check something on a page, create a task that checks the same thing\n\nExtract and infer from our conversation:\n- A concise title describing what the task does (max 50 characters)\n- A detailed prompt that would recreate the same actions (be specific about what was done)\n- The most sensible frequency (once/daily/weekly/monthly/annually) - default to 'once' if unclear\n- The starting URL from the conversation (or the current page URL if actions were performed)\n- A reasonable time (use current time + 1 hour for 'once', or 09:00 for recurring)\n\nCRITICAL: If the conversation involved corrections, refinements, or multiple attempts to get something right, incorporate those lessons into the task prompt so it will succeed correctly on the first try. Don't replicate the mistakes - preserve the final working approach.\n\nThe scheduled task should be written as if instructing someone to repeat exactly what was done in this conversation.\n\nFormat your response ONLY as XML with no other text or explanation:\n<scheduled_task>\n  <title>...</title>\n  <prompt>...</prompt>\n  <frequency>once|daily|weekly|monthly|annually</frequency>\n  <url>...</url>\n  <datetime>...</datetime>\n</scheduled_task>",s=function(e){const t=[];for(const n of e)!n.content||"string"==typeof n.content&&""===n.content.trim()||Array.isArray(n.content)&&0===n.content.length||!("role"in n)||"user"!==n.role&&"assistant"!==n.role||t.push({role:n.role,content:n.content});t.length>0&&"assistant"===t[0].role&&t.unshift({role:"user",content:"Continue the conversation."});return t}(e);s.push({role:"user",content:t});const i=function(e){if(!e.content||0===e.content.length)throw new Error("No content in API response");const t=e.content.filter(e=>"text"===e.type);if(0===t.length)throw new Error("No text content in API response");return t.map(e=>"text"===e.type?e.text:"").join("\n")}(await r({maxTokens:2e3,messages:s,system:[{type:"text",text:"You are a helpful AI assistant tasked with converting browser automation conversations into scheduled tasks."}],modelClass:"small_fast"},void 0,"convert_conversation_to_scheduled_task")),o=i.match(/<scheduled_task>([\s\S]*?)<\/scheduled_task>/);if(!o)throw new Error("Could not parse the task configuration");const l=o[1],u=e=>{const t=l.match(new RegExp(`<${e}>([\\s\\S]*?)<\\/${e}>`));return t?t[1].trim():""},d=u("title"),h=u("prompt"),p=u("frequency"),f=u("url")||n||"",m=u("datetime"),g={command:(e=>e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-_]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""))(d||"converted-task"),prompt:h||"Task converted from chat",url:f,createdAt:Date.now(),usageCount:0,repeatType:p||"once"},y=(new Date).toISOString().split("T")[0];if("once"===p&&m){const e=m.match(/^(\d{4}-\d{2}-\d{2})/);if(e){const t=e[1];g.specificDate=t>=y?t:""}const t=m.match(/(\d{1,2}):(\d{2})/);t&&(g.specificTime=`${t[1].padStart(2,"0")}:${t[2]}`)}else if("daily"===p&&m){const e=m.match(/(\d{1,2}):(\d{2})/);e&&(g.specificTime=`${e[1].padStart(2,"0")}:${e[2]}`)}else if("weekly"===p&&m){g.dayOfWeek=1;const e=m.match(/(\d{1,2}):(\d{2})/);e&&(g.specificTime=`${e[1].padStart(2,"0")}:${e[2]}`)}else if("monthly"===p&&m){g.dayOfMonth=1;const e=m.match(/(\d{1,2}):(\d{2})/);e&&(g.specificTime=`${e[1].padStart(2,"0")}:${e[2]}`)}else if("annually"===p&&m){g.monthAndDay="1-1";const e=m.match(/(\d{1,2}):(\d{2})/);e&&(g.specificTime=`${e[1].padStart(2,"0")}:${e[2]}`)}await ge(me.PENDING_SCHEDULED_TASK,g),await new Promise((e,t)=>{chrome.runtime.sendMessage({type:"OPEN_OPTIONS_WITH_TASK",task:g},n=>{chrome.runtime.lastError?t(new Error(`Failed to open options page: ${chrome.runtime.lastError.message}`)):n?.success?e():t(new Error(n?.error||"Failed to open options page"))})}),c(!1),a(null)}catch(o){c(!0),a("Failed to create scheduled task. Please try again.")}finally{i(!1)}}}}}function aV({prompt:e,onClose:t,onSave:s,onDelete:i,sessionId:o,generateName:a,currentModel:c}){const u=n(),{analytics:d}=B(),h=yt(),p=!(!e||!("id"in e)),f=p?e:null,m=f?.prompt||(e&&!("id"in e)?e.prompt:"")||"",g=f?.command||(e&&!("id"in e)?e.command:"")||"",[y,x]=de.useState(g),[v,b]=de.useState(m),[C,w]=de.useState(""),[k,S]=de.useState(!1),[M,N]=de.useState(!1),[_,j]=de.useState(!1),[E,T]=de.useState(!1),[A,L]=de.useState(!1),[O,I]=de.useState(!1),[D,R]=de.useState(!1),P=de.useRef(null),F=de.useRef(null),H=de.useRef(!1),U=de.useRef(!1),[Z,Y]=de.useState(Boolean(f?.repeatType&&"none"!==f.repeatType)),[Q,X]=de.useState(f?.repeatType&&"none"!==f.repeatType?f.repeatType:"once"),[ee,te]=de.useState(f?.specificTime||"09:00"),[ne,re]=de.useState(f?.dayOfWeek??0),[se,ie]=de.useState(f?.dayOfMonth||1),[oe,ae]=de.useState(f?.monthAndDay&&parseInt(f.monthAndDay.split("-")[0])||1),[le,ce]=de.useState(f?.monthAndDay&&parseInt(f.monthAndDay.split("-")[1])||1),[ue,pe]=de.useState(()=>{const e=f?.specificDate;if(!e)return"";return e>=(new Date).toISOString().split("T")[0]?e:""}),[fe,me]=de.useState(f?.url||""),ge=$(),[ye,xe]=de.useState(f?.model||c||ge.default||"claude-sonnet-4-5-20250929"),ve=[u.formatMessage({defaultMessage:"Sunday",id:"mJR06Pgp0X"}),u.formatMessage({defaultMessage:"Monday",id:"azMsfMtNvt"}),u.formatMessage({defaultMessage:"Tuesday",id:"YAgYL60fLm"}),u.formatMessage({defaultMessage:"Wednesday",id:"lxblglMBAV"}),u.formatMessage({defaultMessage:"Thursday",id:"qAhUUOIWbF"}),u.formatMessage({defaultMessage:"Friday",id:"QrihTZnk0x"}),u.formatMessage({defaultMessage:"Saturday",id:"WMNHPhDie+"})],Ce=[u.formatMessage({defaultMessage:"January",id:"t8QlFE5KKF"}),u.formatMessage({defaultMessage:"February",id:"0TR0PDvKax"}),u.formatMessage({defaultMessage:"March",id:"T5W0CVKXi6"}),u.formatMessage({defaultMessage:"April",id:"h7xti1PjS7"}),u.formatMessage({defaultMessage:"May",id:"zUpHdfwzIp"}),u.formatMessage({defaultMessage:"June",id:"xBaHKeE0uO"}),u.formatMessage({defaultMessage:"July",id:"NGWumBAsap"}),u.formatMessage({defaultMessage:"August",id:"lINtN6vYsg"}),u.formatMessage({defaultMessage:"September",id:"TFf5u+qBgM"}),u.formatMessage({defaultMessage:"October",id:"EuK7yRq90M"}),u.formatMessage({defaultMessage:"November",id:"pn+jQDsOvh"}),u.formatMessage({defaultMessage:"December",id:"SsiZK7n81x"})],we=de.useCallback(()=>{T(!0),j(!1),setTimeout(()=>{t()},200)},[t]),ke=de.useCallback(async()=>{if(v&&a&&!p&&!U.current){R(!0),U.current=!0;try{const e=await a(v);e&&!y&&x(e)}catch(e){}finally{R(!1),H.current||setTimeout(()=>{P.current?.focus(),P.current?.select(),H.current=!0},100)}}},[v,a,y,p]);de.useEffect(()=>{setTimeout(()=>{j(!0)},10),!p&&!g&&m&&a?ke():H.current||setTimeout(()=>{P.current?.focus(),H.current=!0},50),p||chrome.tabs.query({active:!0,currentWindow:!0},e=>{if(e[0]?.url)try{const t=e[0].url;t&&t.startsWith("http")&&me(t)}catch{}})},[p,g,m,a,ke]),de.useEffect(()=>{const e=e=>{F.current&&!F.current.contains(e.target)&&I(!1)};if(O)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[O]);const Se=de.useCallback(async()=>{if(L(!0),y.trim()&&v.trim()){S(!0),w("");try{if(p&&f){const e={prompt:v.trim(),command:y.trim(),url:fe.trim()||void 0};Z?(e.repeatType=Q,e.specificTime=ee,e.model=ye,"once"===Q?e.specificDate=ue:"weekly"===Q?e.dayOfWeek=ne:"monthly"===Q?e.dayOfMonth=se:"annually"===Q&&(e.monthAndDay=`${oe}-${le}`)):(e.repeatType="none",e.specificTime=void 0,e.dayOfWeek=void 0,e.dayOfMonth=void 0,e.monthAndDay=void 0,e.specificDate=void 0,e.model=void 0),await be.updatePrompt(f.id,e),d?.track("claude_chrome.chat.shortcut_updated",{sessionId:o||"",commandName:y.trim(),oldCommandName:f.command||""}),window.dispatchEvent(new Event("prompts-changed"))}else{const e={prompt:v.trim(),command:y.trim(),url:fe.trim()||void 0,createdAt:Date.now(),usageCount:0};Z&&(e.repeatType=Q,e.specificTime=ee,e.model=ye,"once"===Q?e.specificDate=ue:"weekly"===Q?e.dayOfWeek=ne:"monthly"===Q?e.dayOfMonth=se:"annually"===Q&&(e.monthAndDay=`${oe}-${le}`)),await be.savePrompt(e),d?.track("claude_chrome.chat.shortcut_created",{sessionId:o||"",commandName:y.trim()}),window.dispatchEvent(new Event("prompts-changed"))}s(y.trim()),we()}catch(e){w(e instanceof Error?e.message:"Failed to save"),S(!1)}}},[y,v,d,o,s,we,p,f,Z,Q,ee,ue,ne,se,oe,le,fe,ye]);de.useEffect(()=>{const e=e=>{if("Escape"===e.key)we();else if("Enter"===e.key){const t=document.activeElement;"INPUT"===t?.tagName||"TEXTAREA"===t?.tagName||k||M||(e.preventDefault(),Se())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[we,Se,k,M]);return he.jsxs(he.Fragment,{children:[he.jsx("div",{className:"fixed inset-0 z-40 transition-opacity duration-200 "+(_&&!E?"bg-black/20":"bg-black/0"),onClick:()=>we()}),he.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-bg-000 border-t-[0.5px] border-border-300 rounded-t-2xl shadow-xl transition-transform duration-200 ease-out "+(_&&!E?"translate-y-0":"translate-y-full"),children:he.jsxs("div",{className:"px-4 pb-4 pt-4",children:[he.jsxs("div",{className:"flex items-center justify-between mb-4",children:[he.jsx("h3",{className:"font-large-bold text-text-000",children:p?he.jsx(r,{defaultMessage:"Edit shortcut",id:"R592aOW18A"}):he.jsx(r,{defaultMessage:"Create shortcut",id:"AzO4h7b149"})}),he.jsxs("div",{className:"flex items-center gap-2",children:[p&&he.jsxs("div",{className:"relative",ref:F,children:[he.jsx("button",{onClick:()=>I(!O),className:"p-1 hover:bg-bg-200 rounded transition-colors","aria-label":u.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:he.jsx(W,{size:16,className:"text-text-300"})}),O&&he.jsx("div",{className:"absolute right-0 top-full mt-2 bg-bg-000 border-0.5 border-border-200 rounded-xl backdrop-blur-xl shadow-[0px_2px_8px_0px_hsl(var(--always-black)/8%)] dark:shadow-[0px_2px_8px_0px_hsl(var(--always-black)/24%)] p-1.5 min-w-[120px] z-dropdown",children:he.jsxs("button",{onClick:()=>{I(!1),(async()=>{if(p&&f){N(!0);try{await be.deletePrompt(f.id),d?.track("claude_chrome.chat.shortcut_deleted",{sessionId:o||"",commandName:f.command||""}),window.dispatchEvent(new Event("prompts-changed")),i?.(),we()}catch(e){w(e instanceof Error?e.message:"Failed to delete prompt"),N(!1)}}})()},disabled:M,className:"w-full px-2 py-2 text-left rounded-lg hover:bg-bg-200 flex items-center gap-2 text-danger-100 hover:text-danger-000 transition-colors",children:[M?he.jsx("div",{className:"w-4 h-4 border-2 border-danger-100 border-t-transparent rounded-full animate-spin"}):he.jsx(V,{size:16}),he.jsx("span",{className:"text-sm",children:he.jsx(r,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})]})})]}),he.jsx("button",{onClick:()=>we(),className:"p-1 hover:bg-bg-200 rounded transition-colors","aria-label":u.formatMessage({defaultMessage:"Close",id:"rbrahOGMC3"}),children:he.jsx(z,{size:16,className:"text-text-300"})})]})]}),he.jsxs("div",{className:"space-y-4",children:[he.jsxs("div",{className:"relative",children:[he.jsx(q,{ref:P,label:u.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"}),type:"text",value:y,onChange:e=>{const t=e.target.value.replace(/\s/g,"-").replace(/[^a-zA-Z0-9-_]/g,"");x(t),C&&w("")},prepend:he.jsx("span",{className:"text-text-300",children:"/"}),placeholder:D?"":u.formatMessage({defaultMessage:"e.g., summarize",id:"3jVWWj+aj4"}),disabled:D,className:"w-full text-sm",error:A&&!y.trim()||C?.includes("already in use")}),(A&&!y.trim()||C?.includes("already in use"))&&he.jsx(G,{className:"mt-1",children:A&&!y.trim()?he.jsx(r,{defaultMessage:"Name is required",id:"Gvxoji2HqE"}):C}),D&&!y&&he.jsxs("div",{className:"absolute left-[24px] top-[31px] pointer-events-none",children:[he.jsx("span",{className:"text-[14px] relative inline-block",style:{color:"transparent",background:h?"linear-gradient(90deg, #808080 0%, #808080 35%, #c0c0c0 50%, #808080 65%, #808080 100%)":"linear-gradient(90deg, #9ca3af 0%, #9ca3af 35%, #6b7280 50%, #9ca3af 65%, #9ca3af 100%)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:"shimmerSweep 2s ease-in-out infinite"},children:he.jsx(r,{defaultMessage:"Generating...",id:"A/lLjOnjl0"})}),he.jsx("style",{children:"\n                    @keyframes shimmerSweep {\n                      0% { background-position: 200% 0; }\n                      100% { background-position: -200% 0; }\n                    }\n                  "})]})]}),he.jsx(J,{label:u.formatMessage({defaultMessage:"Prompt",id:"iWKE8shLIt"}),required:!0,value:v,onChange:e=>b(e.target.value),className:"min-h-32 max-h-64 overflow-y-auto font-large text-sm",placeholder:u.formatMessage({defaultMessage:"Enter your prompt text...",id:"xvBEtpDq86"}),error:A&&!v.trim()?u.formatMessage({defaultMessage:"Prompt is required",id:"E8uSl+czLg"}):void 0}),he.jsx(K,{scheduleEnabled:Z,setScheduleEnabled:Y,repeatType:Q,setRepeatType:X,specificDate:ue,setSpecificDate:pe,dayOfWeek:ne,setDayOfWeek:re,dayOfMonth:se,setDayOfMonth:ie,month:oe,setMonth:ae,day:le,setDay:ce,specificTime:ee,setSpecificTime:te,monthLabels:Ce,daysOfWeekLabels:ve,url:fe,setUrl:me,compact:!0,model:ye,setModel:xe,modelConfig:ge})]}),he.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[he.jsx(l,{onClick:()=>we(),variant:"secondary",children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),he.jsx(l,{onClick:Se,loading:k,children:p?he.jsx(r,{defaultMessage:"Save changes",id:"X0ha1a+WYV"}):he.jsx(r,{defaultMessage:"Create shortcut",id:"AzO4h7b149"})})]})]})})]})}var lV=(e=>(e.HORIZON_SPARK_CONNECT="horizon_spark_connect",e))(lV||{}),cV=(e=>(e.INTERACTED="interacted",e.DISMISSED="dismissed",e.NOT_TARGETED="not_targeted",e))(cV||{});async function uV(e,t,n){return Ae.fetch(`/api/oauth/organizations/${e}/spotlight/action`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spotlight:t,action:n})})}const dV=({spotlight:e,organizationUuid:t,isOpen:r,onClose:s,children:i,className:o})=>{const{analytics:a}=B(),l=n();de.useEffect(()=>{r&&a?.track("spotlight.shown",{spotlight:e})},[r,e,a]);const c=async()=>{a?.track("spotlight.dismissed",{spotlight:e});try{await uV(t,e,cV.DISMISSED)}catch(n){}s()};return r?he.jsx(yn,{children:r&&he.jsxs(he.Fragment,{children:[he.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-always-black/50 z-50",onClick:c}),he.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none p-0 sm:p-[11.5px]",children:he.jsxs(gn.div,{initial:{y:"100%",opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},exit:{y:"100%",opacity:0,scale:.95},transition:{type:"spring",damping:30,stiffness:300},className:R("relative w-full sm:max-w-[500px] pointer-events-auto","bg-bg-000 border-[0.5px] border-border-300","rounded-t-[14px] sm:rounded-[14px]","overflow-hidden",o),children:[he.jsx("button",{onClick:c,className:"absolute top-4 right-4 z-10 p-1.5 bg-bg-000/80 backdrop-blur-sm rounded-full hover:bg-bg-200 transition-colors","aria-label":l.formatMessage({defaultMessage:"Close",id:"rbrahOGMC3"}),children:he.jsx(z,{size:16,className:"text-text-300"})}),"function"==typeof i?i({handleDismiss:c,handleAction:async n=>{a?.track("spotlight.action_clicked",{spotlight:e,action_name:n});try{await uV(t,e,cV.INTERACTED)}catch(r){}s()}}):i]})})]})}):null},hV=({variant:e})=>he.jsx("div",{className:"inline-flex",children:he.jsx("span",{className:"px-2 py-1 text-xs font-base-bold bg-accent-secondary-100/10 text-accent-secondary-100 rounded-md",children:"NEW"===e?he.jsx(r,{defaultMessage:"New",id:"bW7B87wFFp"}):he.jsx(r,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}),pV=({children:e})=>he.jsx("h1",{className:"font-title text-text-100",children:e}),fV=({organizationUuid:e,onClose:t})=>{const s=n();return he.jsx(dV,{spotlight:lV.HORIZON_SPARK_CONNECT,organizationUuid:e,isOpen:!0,onClose:t,className:"overflow-hidden",children:({handleAction:e})=>he.jsxs("div",{className:"flex flex-col",children:[he.jsx("div",{className:"relative w-full flex-1",children:he.jsx("img",{src:"/assets/horizon-spark-connect-C83O8AQN.png",alt:s.formatMessage({defaultMessage:"Chrome extension with connected apps",id:"4aIpD3RYB/"}),className:"w-full h-full object-cover"})}),he.jsxs("div",{className:"flex flex-col gap-6 p-6 flex-[2] overflow-y-auto",children:[he.jsx(hV,{variant:"NEW"}),he.jsx(pV,{children:he.jsx(r,{defaultMessage:"Extend what you can do in Chrome",id:"MM/ULko3j1"})}),he.jsxs("div",{className:"flex flex-col gap-3",children:[he.jsxs("div",{className:"flex gap-3",children:[he.jsx("div",{className:"shrink-0 mt-0.5",children:he.jsx(Er,{size:20,className:"text-text-300"})}),he.jsx("span",{className:"text-text-200 font-base",children:he.jsx(r,{defaultMessage:"Chats are now saved—refer back or restart",id:"dPfJcsF2EP"})})]}),he.jsxs("div",{className:"flex gap-3",children:[he.jsx("div",{className:"shrink-0 mt-0.5",children:he.jsx(Tn,{size:20,className:"text-text-300"})}),he.jsx("span",{className:"text-text-200 font-base",children:he.jsx(r,{defaultMessage:"Access and work with your connected apps while chatting in the extension",id:"gHpDMF2yPM"})})]}),he.jsxs("div",{className:"flex gap-3",children:[he.jsx("div",{className:"shrink-0 mt-0.5",children:he.jsx(Hr,{size:20,className:"text-text-300"})}),he.jsx("span",{className:"text-text-200 font-base",children:he.jsx(r,{defaultMessage:"Move beyond chat by creating downloadable docs, spreadsheets, and code",id:"oTdWIw/nMo"})})]})]}),he.jsx("p",{className:"text-xs text-text-400 font-base",children:he.jsx(r,{defaultMessage:"Ant-only: All future chats will use the new experience (Sessions API). Use the overflow (⋮) toggle between experiences.",id:"VOW1L8jo1E"})}),he.jsx(l,{variant:"primary",size:"lg",className:"w-full",onClick:async()=>{await ge(me.USE_SESSIONS_API,!0),await e("try_whats_new")},children:he.jsx(r,{defaultMessage:"Try what's new",id:"eH5gdeveIM"})})]})]})})},mV=({organizationUuid:e})=>{const[t,n]=de.useState(null),[r,s]=de.useState(!0);de.useEffect(()=>{if(!e)return void s(!1);(async()=>{try{const t=await async function(e){return Ae.fetch(`/api/oauth/organizations/${e}/spotlight`,{method:"GET",headers:{"Content-Type":"application/json"}})}(e);n(t.spotlight)}catch(t){n(null)}finally{s(!1)}})()},[e]);const i=()=>{n(null)};return!r&&t&&e&&t===lV.HORIZON_SPARK_CONNECT?he.jsx(fV,{organizationUuid:e,onClose:i}):null};const gV=({mainTabId:e,onSwitchToMainTab:t})=>{const s=n(),i=yt(),[o,a]=de.useState(!0);de.useEffect(()=>{let t,n=!0;return(async()=>{try{const[r]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!r?.id)return;const s=r.id;t=setTimeout(async()=>{if(n)try{await ze.promoteToMainTab(e,s),window.location.reload()}catch(t){a(!1)}},3e3),chrome.runtime.sendMessage({type:"SECONDARY_TAB_CHECK_MAIN",secondaryTabId:s,mainTabId:e,timestamp:Date.now()},r=>{n&&(clearTimeout(t),r?.success?a(!1):ze.promoteToMainTab(e,s).then(()=>{window.location.reload()}).catch(e=>{a(!1)}))})}catch(r){n&&a(!1)}})(),()=>{n=!1,t&&clearTimeout(t)}},[e]);return o?he.jsx(Y,{}):he.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen h-full",children:he.jsxs("div",{className:"flex flex-col items-center",children:[he.jsx("img",{src:i?jn:En,alt:s.formatMessage({defaultMessage:"Tab group illustration",id:"XLN5nvmwda"}),className:"w-[212px] h-[120px]"}),he.jsx("div",{className:"text-text-200 text-base font-semibold mt-7 text-center font-claude-response",children:he.jsx(r,{defaultMessage:"Claude is active in this tab group",id:"DflDZ51Hia"})}),he.jsx("div",{className:"text-text-300 text-sm font-normal mt-2 text-center max-w-[320px] font-base",children:he.jsx(r,{defaultMessage:"Claude can research across sites, compare information, or handle multi-tab tasks.",id:"F3l7yioCLQ"})}),he.jsx("button",{onClick:async()=>{try{await chrome.tabs.update(e,{active:!0});const n=await chrome.tabs.get(e);n.windowId&&await chrome.windows.update(n.windowId,{focused:!0}),await chrome.runtime.sendMessage({type:"open_side_panel",tabId:e}),t()}catch(n){}},className:"mt-7 px-5 py-[10px] border border-border-300 text-text-200 rounded-[14px] hover:bg-bg-200 transition-colors font-ui font-medium text-[14px]",children:he.jsx(r,{defaultMessage:"Open chat",id:"un14bsOIsH"})})]})})};async function yV(e,t){const n=["ANTHROPIC_MAGIC_STRING_TRIGGER_BROWESER_USE_N7D2H29PTWHFAYEH7THV49E7F99HN8ETMNHWDPSCQVR7NGUZB8TDAWJ7MMHVY3HB"],r=navigator.platform.toUpperCase().indexOf("MAC")>=0||navigator.userAgent.toUpperCase().indexOf("MAC")>=0,s=r?"Mac":"Windows/Linux",i=r?"cmd":"ctrl",o=await fe(me.SYSTEM_PROMPT);return o&&n.push(o),n.push(`<platform-instructions>Platform-specific information:\n- You are on a ${s} system\n- Use "${i}" as the modifier key for keyboard shortcuts (e.g., "${i}+a" for select all, "${i}+c" for copy, "${i}+v" for paste)</platform-instructions>`),e.multipleTabsSystemPrompt&&n.push(e.multipleTabsSystemPrompt),e.toolUsagePrompt&&n.push(e.toolUsagePrompt),n.push("<turn_answer_start_instructions>\nBefore outputting any text response to the user this turn, call turn_answer_start first.\n\nWITH TOOL CALLS: After completing all tool calls, call turn_answer_start, then write your response.\nWITHOUT TOOL CALLS: Call turn_answer_start immediately, then write your response.\n\nRULES:\n- Call exactly once per turn\n- Call immediately before your text response\n- NEVER call during intermediate thoughts, reasoning, or while planning to use more tools\n- No more tools after calling this\n</turn_answer_start_instructions>"),n.join("\n\n")}const xV=async()=>null;function vV(e,t,n){const[r,s]=de.useState([]),[i,o]=de.useState(!1),[a,l]=de.useState(null),[c,u]=de.useState(null),[d,h]=de.useState(0),[p,f]=de.useState(!0),m=de.useRef(!1),g=de.useRef(t),y=de.useRef(n);g.current=t,y.current=n;const x=de.useCallback(async e=>{try{const t=await async function(e){return Ae.fetch(`/v1/sessions/${e}`,{method:"GET",headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29"}})}(e);return t.session_context.model||null}catch(t){return null}},[]),v=de.useCallback(async()=>{if(e){o(!0),l(null),h(0);try{const n=await An({platforms:["CLAUDE_BROWSER_EXTENSION"],limit:30}),r=n.filter(e=>e.name.startsWith(Ln)),i=n.filter(e=>!e.name.startsWith(Ln)),o=await xV(),a=new Map,l=[];for(const e of r)if(e.session_id)try{const t=await x(e.session_id);if(!t){l.push(e);continue}a.has(t)||a.set(t,[]),a.get(t).push(e)}catch(t){l.push(e)}else l.push(e);if(o)for(const[e,t]of a.entries())if(t.length>0){const n=t[0];o.addExistingPooledSession({sessionId:n.session_id,conversationUuid:n.uuid},e),t.length>1&&l.push(...t.slice(1))}l.length>0&&Promise.all(l.map(t=>On({organizationUuid:e,conversationUuid:t.uuid}).catch(e=>{})));const c=g.current,u=y.current;if(o&&c&&u&&!m.current&&(m.current=!0,!o.hasSessionForModel(c))){const t=await yV(u);o.warm(e,c,t).catch(e=>{})}s(i),f(30===n.length),h(30)}catch(t){l(t instanceof Error?t.message:"Failed to fetch conversations")}finally{o(!1)}}},[e,x]),b=de.useCallback(async()=>{if(e&&!i&&p){o(!0);try{const e=await An({platforms:["CLAUDE_BROWSER_EXTENSION"],limit:20,offset:d}),t=e.filter(e=>!e.name.startsWith(Ln));s(e=>[...e,...t]),f(20===e.length),h(e=>e+20)}catch(t){l(t instanceof Error?t.message:"Failed to load more conversations")}finally{o(!1)}}},[e,d,i,p]);de.useEffect(()=>{v()},[v]),de.useEffect(()=>{if(!(m.current&&e&&t&&n))return;(async()=>{const r=await xV();if(r&&!r.hasSessionForModel(t)){const s=await yV(n);r.warm(e,t,s).catch(e=>{})}})()},[t,e,n]);const C=de.useCallback(async e=>{try{const t=await async function(e){const t=new URLSearchParams,n=`/v1/sessions/${e}/events${t.toString()?`?${t.toString()}`:""}`;return Ae.fetch(n,{method:"GET",headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29"}})}(e);return t.data}catch(t){throw t}},[]),w=de.useCallback(async t=>{if(e)try{await On({organizationUuid:e,conversationUuid:t}),s(e=>e.filter(e=>e.uuid!==t));const n=r.find(e=>e.uuid===t);n?.session_id===c&&u(null),await v()}catch(n){l(n instanceof Error?n.message:"Failed to delete conversation")}},[e,c,r,v]),k=de.useCallback(()=>{const e=r.find(e=>e.session_id===c);return e?.settings?.enabled_mcp_tools||{}},[r,c]);return{sessions:r,isLoading:i,error:a,activeSessionId:c,setActiveSessionId:u,refreshSessions:v,loadSessionEvents:C,deleteConversationById:w,getCurrentConversationMcpTools:k,getSessionModel:x,loadMore:b,hasMore:p}}const bV=({sessions:e,activeSessionId:t,onSelectSession:n,onConversationDelete:s,onConversationRename:i,isLoading:o=!1,onLoadMore:a,hasMore:l=!1,open:c,onOpenChange:u,trigger:d})=>he.jsx(Q,{align:"end",side:"bottom",sideOffset:8,unstyledTrigger:!0,open:c,onOpenChange:u,className:"w-64 max-w-[280px]",trigger:d,children:o&&0===e.length?he.jsx("div",{className:"px-2 py-2 text-sm text-text-400",children:he.jsx(r,{defaultMessage:"Loading conversations...",id:"vWBKqpDTBm"})}):0===e.length?he.jsx("div",{className:"px-2 py-2 text-sm text-text-400",children:he.jsx(r,{defaultMessage:"Chat sessions will appear here",id:"zYPk/n3qmG"})}):he.jsxs(he.Fragment,{children:[e.map(e=>he.jsx(CV,{session:e,isActive:e.session_id===t,onSelect:()=>{e.session_id&&n(e.session_id),u?.(!1)},onDelete:s?()=>{s(e.uuid),u?.(!1)}:void 0,onRename:i?()=>{i(e.uuid,e.name||""),u?.(!1)}:void 0},e.uuid)),o&&he.jsx("div",{className:"px-2 py-2 text-center text-sm text-text-400",children:he.jsx(r,{defaultMessage:"Loading more...",id:"tL4WC1FPW1"})})]})}),CV=({session:e,isActive:t,onSelect:s,onDelete:i,onRename:o})=>{const c=n(),[u,d]=de.useState(!1),[h,p]=de.useState(!1),f=de.useRef(null),m=e.name||he.jsx("span",{className:"opacity-60",children:he.jsx(r,{defaultMessage:"Untitled",id:"3kbIhS7KZS"})});return de.useEffect(()=>{if(f.current&&e.name){const e=f.current.scrollWidth>f.current.clientWidth;p(e)}},[e.name]),he.jsxs("div",{className:R("px-2 py-1.5 cursor-pointer transition-colors flex items-center justify-between gap-2 group relative rounded-lg","hover:bg-bg-200"),onClick:s,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.name&&h?he.jsx(a,{tooltipContent:e.name,children:he.jsx("div",{ref:f,className:"flex-1 min-w-0 text-sm text-text-200 truncate",children:m})}):he.jsx("div",{ref:f,className:"flex-1 min-w-0 text-sm text-text-200 truncate",children:m}),he.jsx("div",{className:"flex items-center shrink-0 w-6 h-6 justify-center",onClick:e=>e.stopPropagation(),children:t&&!u?he.jsx(Ky,{size:16,className:"text-accent-secondary-100"}):(i||o)&&he.jsxs(Q,{align:"start",side:"left",sideOffset:4,unstyledTrigger:!0,modal:!1,trigger:he.jsx(l,{variant:"ghost",onClick:e=>{e.stopPropagation()},className:"!p-1 opacity-0 group-hover:opacity-100 !min-w-0 !h-auto","aria-label":c.formatMessage({defaultMessage:"More actions",id:"S8/4ZI1Fhf"}),children:he.jsx(ex,{size:12})}),children:[o&&he.jsx(X,{onSelect:e=>{e.preventDefault(),o()},icon:he.jsx(tx,{size:16}),children:he.jsx("span",{className:"text-sm",children:he.jsx(r,{defaultMessage:"Rename",id:"iXNbPfQDIZ"})})}),i&&he.jsx(X,{onSelect:e=>{e.preventDefault(),i()},danger:!0,icon:he.jsx(ux,{size:16}),children:he.jsx("span",{className:"text-sm",children:he.jsx(r,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})})]})};function wV({conversationUuid:e,onClose:t,onDelete:s}){const[i,o]=de.useState(!1),a=n();return he.jsxs(M,{isOpen:null!==e,onClose:t,title:a.formatMessage({defaultMessage:"Delete chat",id:"ngIzbjIFxF"}),modalSize:"sm",className:"bg-bg-100",hasCloseButton:!0,autoCloseOnFocusOut:!0,overlayClassName:"[background-color:hsl(var(--always-black)/0.5)!important]",children:[he.jsx("p",{className:"text-text-200 font-base mt-4",children:he.jsx(r,{defaultMessage:"Are you sure you want to delete this chat?",id:"eoF+zSJr4t"})}),he.jsxs(N,{layout:"right",className:"!flex-row !mt-6",children:[he.jsx(l,{variant:"secondary",onClick:t,disabled:i,children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),he.jsx(l,{variant:"danger",onClick:async()=>{if(e){o(!0);try{await s(e),t()}catch(n){}finally{o(!1)}}},loading:i,children:he.jsx(r,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})]})]})}function kV({conversationUuid:e,currentName:t,onClose:s,onRename:i}){const o=n(),[a,c]=de.useState(t),[u,d]=de.useState(!1),[h,p]=de.useState(""),f=de.useRef(null);de.useEffect(()=>{e&&(c(t),p(""))},[e,t]);const m=async()=>{if(e&&a.trim()){d(!0);try{await i(e,a.trim()),s()}catch(t){p(o.formatMessage({defaultMessage:"Failed to rename conversation",id:"rbG4gZ94o6"}))}finally{d(!1)}}else p(o.formatMessage({defaultMessage:"Name is required",id:"Gvxoji2HqE"}))};return he.jsxs(M,{isOpen:null!==e,onClose:s,title:o.formatMessage({defaultMessage:"Rename chat",id:"Oi9LAY6C5H"}),modalSize:"sm",className:"bg-bg-100",hasCloseButton:!0,autoCloseOnFocusOut:!0,overlayClassName:"[background-color:hsl(var(--always-black)/0.5)!important]",children:[he.jsx(q,{className:"mt-4 text-sm",ref:f,type:"text",value:a,onChange:e=>{c(e.target.value),h&&p("")},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},disabled:u,error:!!h}),h&&he.jsx(G,{className:"mt-1",children:h}),he.jsxs(N,{layout:"right",className:"!flex-row !mt-6",children:[he.jsx(l,{variant:"secondary",onClick:s,disabled:u,children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),he.jsx(l,{variant:"primary",onClick:m,loading:u,children:he.jsx(r,{defaultMessage:"Save",id:"jvo0vs3nF0"})})]})]})}function SV({pendingLocale:e,onClose:t,onConfirm:s}){const i=n();return he.jsxs(M,{isOpen:null!==e,onClose:t,title:i.formatMessage({defaultMessage:"Change language",id:"jOuyTp+O9P"}),modalSize:"sm",className:"bg-bg-100",hasCloseButton:!0,autoCloseOnFocusOut:!0,overlayClassName:"[background-color:hsl(var(--always-black)/0.5)!important]",children:[he.jsx("p",{className:"text-text-200 font-base mt-4",children:he.jsx(r,{defaultMessage:"Changing the language will start a new chat.",id:"yPUC8ZWYmE"})}),he.jsxs(N,{layout:"right",className:"!flex-row !mt-6",children:[he.jsx(l,{variant:"secondary",onClick:t,children:he.jsx(r,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),he.jsx(l,{variant:"primary",onClick:()=>{e&&(s(e),t())},children:he.jsx(r,{defaultMessage:"Continue",id:"acrOozm08x"})})]})]})}const MV=({onConvertToScheduledTask:e,isConvertingToTask:t,isAgentRunning:s,onOpenSettings:i,useSessionsAPI:o,onSessionsToggle:a,hasMessages:l})=>{const c=n(),[u,d]=de.useState(!1),{locale:h,setLocale:p}=ee(),[m,g]=de.useState(null),y=de.useCallback(e=>{e&&requestAnimationFrame(()=>{const t=e.closest("[data-radix-popper-content-wrapper]");if(!t)return;const n=document.querySelector("[data-radix-popper-content-wrapper]:not(:has(.language-submenu))");if(!n)return;const r=n.getBoundingClientRect();t.style.left=`${r.left}px`,t.style.top=`${r.top+96}px`,t.style.transform="none"})},[]);return he.jsxs(he.Fragment,{children:[he.jsx(SV,{pendingLocale:m,onClose:()=>g(null),onConfirm:e=>{p(e)}}),he.jsxs(Q,{align:"end",side:"bottom",sideOffset:8,unstyledTrigger:!0,className:"w-[240px]",open:u,onOpenChange:d,trigger:he.jsx("button",{className:"hide-focus-ring p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":c.formatMessage({defaultMessage:"Menu",id:"tKMlOcHz9T"}),children:he.jsx(W,{size:12})}),children:[he.jsx(X,{onSelect:()=>e(),disabled:t||s,icon:t?he.jsx("div",{className:"animate-spin",children:he.jsx(te,{size:16})}):he.jsx(te,{size:16}),children:he.jsx("span",{className:"text-sm",children:he.jsx(r,{defaultMessage:"Convert to task",id:"Z7sL1cCQpI"})})}),he.jsx(X,{onSelect:()=>i(),icon:he.jsx(In,{size:16}),children:he.jsx("span",{className:"text-sm",children:he.jsx(r,{defaultMessage:"Settings",id:"D3idYvSLF9"})})}),he.jsxs(ne,{children:[he.jsx(re,{children:he.jsxs("div",{className:"flex items-center gap-2 w-full",children:[he.jsx(Vr,{size:16,className:"text-text-300"}),he.jsx("span",{className:"flex-1 text-sm",children:he.jsx(r,{defaultMessage:"Language",id:"y1Z3orIe9Z"})}),he.jsx(Rt,{size:16,className:"text-text-300"})]})}),he.jsx(se,{children:he.jsx(ie,{ref:y,sideOffset:0,className:"font-base !min-w-44 language-submenu",children:oe.map(e=>he.jsx(X,{onSelect:()=>{var t;(t=e)!==h&&(l?g(t):p(t))},trailing:h===e?he.jsx(f,{size:14,className:"text-accent-secondary-200"}):void 0,children:he.jsx("span",{className:"text-sm",children:ae[e]})},e))})})]}),!1]})]})},NV=({showModelSelector:e,selectedModel:t,onModelChange:s,modelConfig:i,availableModelOptions:o,handleStickyModelChange:l,useSessionsAPI:c,onNewConversation:u,onClearChat:d,onSessionsToggle:h,sessions:p,activeSessionId:f,onSelectSession:m,onConversationDelete:g,onConversationRename:y,isLoadingSessions:x,onLoadMoreSessions:v,hasMoreSessions:b,onConvertToScheduledTask:C,isConvertingToTask:w,isAgentRunning:k,onOpenOptions:S,hasMessages:M})=>{const N=n(),[_,j]=de.useState(!1),[E,T]=de.useState(null),[A,L]=de.useState(null),O=de.useCallback(e=>{T(e)},[]);return he.jsxs("div",{className:"flex justify-between items-center px-4 pt-3 pb-3",children:[he.jsx("div",{className:"flex items-center gap-3",children:e?he.jsx(Dn,{currentModel:t,onChange:s,modelConfig:{...i,options:o},onModelChange:l,disabled:c&&null!==f}):he.jsx("span",{className:"text-[12px] text-text-300 font-ui font-normal leading-[140%] tracking-[-0.3px]",children:he.jsx(r,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}),he.jsxs("div",{className:"flex items-center gap-2.5",children:[c?he.jsxs(he.Fragment,{children:[he.jsx(a,{tooltipContent:N.formatMessage({defaultMessage:"New conversation",id:"PQ8A3IzhiS"}),children:he.jsx("button",{onClick:u,className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":N.formatMessage({defaultMessage:"New conversation",id:"PQ8A3IzhiS"}),children:he.jsx(Vy,{size:12})})}),he.jsx(bV,{sessions:p,activeSessionId:f,onSelectSession:m,onConversationDelete:O,onConversationRename:(e,t)=>{L({uuid:e,currentName:t})},isLoading:x,onLoadMore:v,hasMore:b,open:_,onOpenChange:j,trigger:he.jsx("button",{className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":N.formatMessage({defaultMessage:"Chat history",id:"Z17cukDtG+"}),title:N.formatMessage({defaultMessage:"Chat history",id:"Z17cukDtG+"}),children:he.jsx(Gy,{size:12})})})]}):he.jsx(a,{tooltipContent:N.formatMessage({defaultMessage:"Clear chat",id:"I4AiMx3dsz"}),children:he.jsx("button",{onClick:d,className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":N.formatMessage({defaultMessage:"Clear chat",id:"I4AiMx3dsz"}),children:he.jsx(Jy,{size:12})})}),he.jsx(MV,{onConvertToScheduledTask:C,isConvertingToTask:w,isAgentRunning:k,onOpenSettings:S,useSessionsAPI:c,onSessionsToggle:h,hasMessages:M})]}),he.jsx(wV,{conversationUuid:E,onClose:()=>T(null),onDelete:g}),he.jsx(kV,{conversationUuid:A?.uuid||null,currentName:A?.currentName||"",onClose:()=>L(null),onRename:y})]})};class _V{static instance=null;static getInstance(){return _V.instance||(_V.instance=new _V),_V.instance}async injectElementSelector(e){return new Promise(t=>{const n=async(r,s)=>{if(s.tab?.id===e&&"ELEMENT_SELECTION"===r.type)if(chrome.runtime.onMessage.removeListener(n),r.cancelled)t(null);else if(r.elementInfo){const n=s.tab?.id||e;t({element:r.elementInfo,url:r.url||"",timestamp:Date.now(),tabId:n,viewportWidth:r.viewportWidth,viewportHeight:r.viewportHeight,clickCoordinates:r.clickCoordinates,typedText:r.typedText,typedInElement:r.typedInElement})}"CANCEL_ELEMENT_SELECTOR"===r.type&&(chrome.runtime.onMessage.removeListener(n),t(null))};chrome.runtime.onMessage.addListener(n),setTimeout(()=>{chrome.runtime.onMessage.removeListener(n),t(null)},6e4);chrome.scripting.executeScript({target:{tabId:e},func:()=>{const e=window;if(e.__clickListenerActive)return;e.__clickListenerActive=!0;const t=n=>{"CANCEL_ELEMENT_SELECTOR"===n.type&&(document.removeEventListener("click",c,!0),document.removeEventListener("keydown",u,!0),document.removeEventListener("keydown",l,!0),document.removeEventListener("focus",a,!0),chrome.runtime.onMessage.removeListener(t),e.__clickListenerActive=!1,e.__keystrokeListenersActive=!1)};chrome.runtime.onMessage.addListener(t);let n=!1,r=[],s=null;const i=e=>e.className&&null!==e.className?"object"==typeof e.className&&"baseVal"in e.className?e.className.baseVal||"":String(e.className):"",o=!e.__keystrokeListenersActive,a=e=>{const t=e.target;if(s&&t!==s&&r.length>0){const e=i(s);chrome.runtime.sendMessage({type:"KEYSTROKE_UPDATE",text:r.join(""),element:{tagName:s.tagName.toLowerCase(),selector:s.id?`#${s.id}`:e?`${s.tagName.toLowerCase()}.${e.trim().split(/\s+/).join(".")}`:s.tagName.toLowerCase(),name:s.getAttribute("name")||s.getAttribute("placeholder")||s.getAttribute("aria-label")||""},isFinal:!0}),r=[]}s=t};o&&document.addEventListener("focus",a,!0);const l=e=>{if(e.target&&e.target.tagName&&["INPUT","TEXTAREA"].includes(e.target.tagName.toUpperCase())&&(s=e.target),!s)return;const t=s.tagName.toLowerCase();if(!("textarea"===t||"input"===t&&!["submit","button","checkbox","radio","file"].includes(s.type)||"true"===s.getAttribute("contenteditable")))return;const n=e.key;if("Backspace"===n){r.pop();const e=i(s);return void chrome.runtime.sendMessage({type:"KEYSTROKE_UPDATE",text:r.join(""),element:{tagName:s.tagName.toLowerCase(),selector:s.id?`#${s.id}`:e?`${s.tagName.toLowerCase()}.${e.trim().split(/\s+/).join(".")}`:s.tagName.toLowerCase(),name:s.getAttribute("name")||s.getAttribute("placeholder")||s.getAttribute("aria-label")||""}})}if("Enter"===n){r.push("\n");const e=i(s);return void chrome.runtime.sendMessage({type:"KEYSTROKE_UPDATE",text:r.join(""),element:{tagName:s.tagName.toLowerCase(),selector:s.id?`#${s.id}`:e?`${s.tagName.toLowerCase()}.${e.trim().split(/\s+/).join(".")}`:s.tagName.toLowerCase(),name:s.getAttribute("name")||s.getAttribute("placeholder")||s.getAttribute("aria-label")||""}})}if("Tab"===n){r.push("\t");const e=i(s);return void chrome.runtime.sendMessage({type:"KEYSTROKE_UPDATE",text:r.join(""),element:{tagName:s.tagName.toLowerCase(),selector:s.id?`#${s.id}`:e?`${s.tagName.toLowerCase()}.${e.trim().split(/\s+/).join(".")}`:s.tagName.toLowerCase(),name:s.getAttribute("name")||s.getAttribute("placeholder")||s.getAttribute("aria-label")||""}})}if(!["Control","Shift","Alt","Meta"].includes(n)&&!(e.ctrlKey||e.altKey||e.metaKey||n.startsWith("Arrow")||n.startsWith("F")&&n.length<=3||["Home","End","PageUp","PageDown","Delete","Insert","Escape"].includes(n)||1!==n.length)){r.push(n);const e=i(s);chrome.runtime.sendMessage({type:"KEYSTROKE_UPDATE",text:r.join(""),element:{tagName:s.tagName.toLowerCase(),selector:s.id?`#${s.id}`:e?`${s.tagName.toLowerCase()}.${e.trim().split(/\s+/).join(".")}`:s.tagName.toLowerCase(),name:s.getAttribute("name")||s.getAttribute("placeholder")||s.getAttribute("aria-label")||""}})}};o&&(document.addEventListener("keydown",l,!0),e.__keystrokeListenersActive=!0);const c=async o=>{if(o.preventDefault(),o.stopPropagation(),!n){n=!0;try{const e=document.elementFromPoint(o.clientX,o.clientY);if(!e)return void(n=!1);const t=e.getBoundingClientRect(),a=e.tagName.toLowerCase(),l=[];e.id&&l.push(`#${e.id}`);const c=i(e);if(c){const e=c.trim().split(/\s+/).filter(e=>e);e.length>0&&l.push(`${a}.${e.join(".")}`)}const u=Array.from(e.attributes).filter(e=>e.name.startsWith("data-")).slice(0,2);if(u.length>0){const e=u.map(e=>`[${e.name}="${e.value}"]`).join("");l.push(`${a}${e}`)}const d=e.getAttribute("aria-label");if(d&&l.push(`${a}[aria-label="${d}"]`),["button","a"].includes(a)&&e.textContent){const t=e.textContent.trim().substring(0,50);l.push(`${a}:contains("${t}")`)}if("input"===a){const t=e.getAttribute("type")||"text",n=e.getAttribute("name");n?l.push(`input[name="${n}"]`):l.push(`input[type="${t}"]`)}const h=l[0]||a,p={};["id","class","name","type","href","aria-label","aria-description","role","title","data-tooltip","data-tip","data-original-title","data-testid","placeholder","alt","value"].forEach(t=>{const n=e.getAttribute(t);n&&(p[t]=n)});const f={selector:h,tagName:a,text:e.textContent?.trim().substring(0,100)||"",attributes:p,boundingRect:{x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left}};let m,g=null;r.length>0&&(m=r.join(""),g=s,r=[],s=null);try{chrome.runtime.sendMessage({type:"ELEMENT_SELECTION",elementInfo:f,url:window.location.href,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,needsScreenshot:!0,clickCoordinates:{x:o.clientX,y:o.clientY},typedText:m,typedInElement:g?{tagName:g.tagName.toLowerCase(),selector:g.id?`#${g.id}`:i(g)?`${g.tagName.toLowerCase()}.${i(g).trim().split(/\s+/).join(".")}`:g.tagName.toLowerCase(),name:g.getAttribute("name")||g.getAttribute("placeholder")||g.getAttribute("aria-label")||""}:void 0})}catch{}setTimeout(()=>{try{if("function"==typeof e.click)e.click();else{const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}}catch{}finally{n=!1}},300)}catch{n=!1}finally{document.removeEventListener("click",c,!0),document.removeEventListener("keydown",u,!0),chrome.runtime.onMessage.removeListener(t),e.__clickListenerActive=!1}}},u=n=>{"Escape"===n.key&&(n.preventDefault(),chrome.runtime.sendMessage({type:"ELEMENT_SELECTION",cancelled:!0}),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",u,!0),document.removeEventListener("keydown",l,!0),document.removeEventListener("focus",a,!0),chrome.runtime.onMessage.removeListener(t),e.__clickListenerActive=!1,e.__keystrokeListenersActive=!1)};document.addEventListener("click",c,!0),document.addEventListener("keydown",u,!0)}},()=>{chrome.runtime.lastError&&(chrome.runtime.onMessage.removeListener(n),t(null))})})}}const jV=_V.getInstance();const EV=e=>!!e&&!(e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("about:")||e.startsWith("edge://")||e.startsWith("brave://")),TV=({tabId:e,onComplete:t,createMessage:n})=>{const[r,s]=de.useState({isRecording:!1,isPaused:!1,steps:[],startTime:null}),[i,o]=de.useState(null),[a,l]=de.useState(new Set),c=de.useRef(new Set),u=de.useRef(new Set),[d,h]=de.useState(e),p=de.useRef(void 0),f=de.useRef(!1),m=de.useRef(!1),g=de.useRef(""),y=de.useRef(null),x=de.useRef(new Set),v=de.useRef(0),[b,C]=de.useState(""),w=de.useRef(new Set),k=de.useRef(e),{isRecording:S,speechSegments:M,error:N,isSupported:_,hasPermission:j,startRecording:E,stopRecording:T}=(()=>{const[e,t]=de.useState(!1),[n,r]=de.useState([]),[s,i]=de.useState(""),[o,a]=de.useState(null),[l,c]=de.useState(!1),u=de.useRef(null),d=de.useRef(!1),h=de.useRef(0),p=de.useRef(0),f="undefined"!=typeof window&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window);de.useEffect(()=>{(async()=>{try{const e=await navigator.permissions.query({name:"microphone"});c("granted"===e.state),e.addEventListener("change",()=>{c("granted"===e.state)})}catch(e){c(!1)}})()},[]),de.useEffect(()=>{if(!f)return;const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);return e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onresult=e=>{const t=Date.now();let n="";for(let s=e.resultIndex;s<e.results.length;s++){const o=e.results[s],a=o[0].transcript;if(o.isFinal){const e=a.trim();if(e){const n={text:e,timestamp:h.current>0?h.current:t,isFinal:!0};r(e=>[...e.filter(e=>e.isFinal),n]),i(""),h.current=0}}else n+=a+" "}if(n.trim()){const e=n.trim();0===h.current&&(h.current=t),i(e),r(t=>[...t.filter(e=>e.isFinal),{text:e,timestamp:h.current,isFinal:!1}]),e.split(" ").length}},e.onend=()=>{if(d.current){p.current=0;try{e.start()}catch(n){t(!1),d.current=!1,a("Speech recognition stopped unexpectedly")}}else t(!1)},e.onerror=e=>{"not-allowed"===e.error?(c(!1),d.current=!1,t(!1),a("Microphone permission denied")):"no-speech"===e.error||e.error},u.current=e,()=>{if(u.current)try{d.current=!1,u.current.stop()}catch{}}},[f]);const m=de.useCallback(async()=>{if(!f)return a("Speech recognition not supported in this browser"),!1;if(!l)return a("Microphone permission not granted"),!1;if(!u.current)return a("Speech recognition not initialized"),!1;try{return r([]),i(""),h.current=0,p.current=0,d.current=!0,u.current.start(),t(!0),a(null),!0}catch(e){return d.current=!1,a("Failed to start speech recording"),!1}},[f,l]),g=de.useCallback(()=>{if(d.current=!1,u.current)try{u.current.stop()}catch(e){}t(!1)},[]),y=de.useCallback(()=>{r([])},[]);return{isRecording:e,speechSegments:n,currentInterimTranscript:s,error:o,isSupported:f,hasPermission:l,startRecording:m,stopRecording:g,clearSegments:y}})(),A=de.useRef([]);de.useEffect(()=>{A.current=M;const e=M.filter(e=>e.timestamp>v.current).map(e=>e.text).join(" ").trim();C(e)},[M]),de.useEffect(()=>{if(!m.current||r.isPaused)return;const t=(t,n)=>{if("KEYSTROKE_UPDATE"===t.type&&n.tab?.id===(d||e)){const e=t.text,r=t.element;if(!e)return void s(e=>({...e,steps:e.steps.filter(e=>!("type"===e.action&&e.isPending))}));let i=`Type "${e.substring(0,30)}${e.length>30?"...":""}"`;if(e.includes("@")?i=`Enter email "${e}"`:e.length<20&&!e.includes(" ")?i=`Enter "${e}"`:e.length>50&&(i=`Type text: "${e.substring(0,50)}..."`),r.name){const e=r.name.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().toLowerCase();i+=` in ${e} field`}s(s=>{const o=s.steps.findIndex(e=>"type"===e.action&&e.isPending);if(o>=0){const n=[...s.steps];return n[o]={...n[o],value:e,description:i,selector:r.selector,isPending:!t.isFinal},{...s,steps:n}}if(!t.isFinal){const t={action:"type",selector:r.selector,value:e,description:i,url:window.location.href,tabId:n.tab?.id,timestamp:Date.now(),isPending:!0};return{...s,steps:[...s.steps,t]}}return s})}};return chrome.runtime.onMessage.addListener(t),()=>{chrome.runtime.onMessage.removeListener(t)}},[r.isPaused,d,e]);const{captureFullScreen:L}=Rn({tabId:d||e,forceTabActivation:!1,onCapture:e=>{g.current=e.base64||""}}),O=de.useRef(new Set),I=de.useCallback(async e=>{if(!e)return;if(O.current.has(e.timestamp))return;O.current.add(e.timestamp);const t=e.tabId;if(t&&m.current&&!r.isPaused)try{await L();let o=g.current;g.current="",s(n=>{const r=n.steps.findIndex(e=>"type"===e.action&&e.isPending);if(r>=0){const t=[...n.steps];return t[r]={...t[r],screenshot:o,timestamp:e.timestamp-1,isPending:!1},{...n,steps:t}}if(e.typedText&&e.typedInElement){let r=`Type "${e.typedText.substring(0,30)}${e.typedText.length>30?"...":""}"`;if(e.typedText.includes("@")?r=`Enter email "${e.typedText}"`:e.typedText.length<20&&!e.typedText.includes(" ")?r=`Enter "${e.typedText}"`:e.typedText.length>50&&(r=`Type text: "${e.typedText.substring(0,50)}..."`),e.typedInElement.name){r+=` in ${e.typedInElement.name.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().toLowerCase()} field`}const s={action:"type",selector:e.typedInElement.selector,value:e.typedText,screenshot:o,description:r,url:e.url,tabId:t,timestamp:e.timestamp-1};return{...n,steps:[...n.steps,s]}}return n});const a=e.clickCoordinates?e.clickCoordinates:e.element.boundingRect?{x:e.element.boundingRect.x+e.element.boundingRect.width/2,y:e.element.boundingRect.y+e.element.boundingRect.height/2}:void 0;if(o&&a&&e.viewportWidth&&e.viewportHeight)try{o=await async function(e,t,n){return new Promise((r,s)=>{const o=new Image;o.onload=()=>{try{const e=o.width/n.width,i=o.height/n.height,a=t.x*e,l=t.y*i,c=document.createElement("canvas");c.width=o.width,c.height=o.height;const u=c.getContext("2d");if(!u)return void s(new Error("Failed to get canvas context"));u.drawImage(o,0,0);const d=Math.max(40,Math.min(120,.05*Math.min(o.width,o.height)));u.beginPath(),u.arc(a,l,d,0,2*Math.PI),u.fillStyle="rgba(44, 132, 219, 0.3)",u.fill(),u.strokeStyle="rgba(44, 132, 219, 1)",u.lineWidth=2,u.stroke();const h=c.toDataURL("image/jpeg",.9).split(",")[1];r(h)}catch(i){s(i)}},o.onerror=()=>{s(new Error("Failed to load screenshot image"))},o.src=`data:image/jpeg;base64,${e}`})}(o,{x:a.x,y:a.y},{width:e.viewportWidth,height:e.viewportHeight})}catch{}const l=v.current,c=A.current.filter(e=>e.timestamp>=l),u=c.length>0?c.map(e=>e.text).join(" ").trim():void 0;v.current=e.timestamp,C("");const d=(e=>{const t=e.tagName.toLowerCase(),n=e.text?.trim(),r=e.attributes||{};if(r["aria-label"])return`Click on "${r["aria-label"]}"`;if(r.title&&(!n||n.length<=3))return`Click on "${r.title}"`;if(("button"===t||"a"===t)&&n&&n.length>1)return`Click on "${n.length>40?n.substring(0,40)+"...":n}" button`;if(("button"===t||"a"===t)&&r.title)return`Click on "${r.title}" button`;if("input"===t){const e=r.type||"text",t=r.placeholder,s=r.name;if("submit"===e||"button"===e){const e=r.value||n;return e?`Click on "${e}" button`:"Click on submit button"}return t?`Click on "${t}" field`:s?`Click on ${s.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().toLowerCase()} field`:`Click on ${e} input`}if("select"===t){const e=r.name;return e?`Click on ${e.replace(/_/g," ").replace(/([A-Z])/g," $1").trim().toLowerCase()} dropdown`:"Click on dropdown menu"}if("img"===t){const e=r.alt;return e?`Click on "${e}" image`:"Click on image"}if(r.role){const e=r.role;return n?`Click on "${n.length>40?n.substring(0,40)+"...":n}"`:`Click on ${e}`}if("div"===t||"span"===t){const e=r.title||r["data-tooltip"]||r["data-tip"]||r["data-original-title"];if(e&&(!n||n.length<=3))return`Click on "${e}"`;if(n){const e=n.length>50?n.substring(0,50)+"...":n;return r.class?.includes("menu")||r.class?.includes("nav")?`Click on "${e}" menu item`:(r.class?.includes("card")||r.class?.includes("item"),`Click on "${e}"`)}if(e)return`Click on "${e}"`}if(r.id)return`Click on ${r.id.replace(/-/g," ").replace(/_/g," ").replace(/([A-Z])/g," $1").trim()}`;const s=r.title||r["data-tooltip"]||r["data-tip"]||r["data-original-title"]||r["aria-description"];if(s)return`Click on "${s}"`;if(n)return`Click on "${n.length>40?n.substring(0,40)+"...":n}"`;return`Click on ${t} element`})(e.element),h={action:"click",selector:e.element.selector,screenshot:o,description:d,url:e.url,tabId:t,elementText:e.element.text,elementAttributes:e.element.attributes,timestamp:e.timestamp,viewportDimensions:e.viewportWidth&&e.viewportHeight?{width:e.viewportWidth,height:e.viewportHeight}:void 0,clickPosition:a,isEnhancing:!!n,speechTranscript:u};s(e=>({...e,steps:[...e.steps,h]})),n&&chrome.tabs.get(t).then(async t=>{const r=t.title||"";Pn({tagName:e.element.tagName,text:e.element.text,attributes:e.element.attributes,url:e.url,pageTitle:r,action:"click",selector:e.element.selector,screenshot:o,speechTranscript:u},n).then(e=>{s(e?t=>({...t,steps:t.steps.map(t=>t.timestamp===h.timestamp?{...t,description:e,isEnhancing:!1}:t)}):e=>({...e,steps:e.steps.map(e=>e.timestamp===h.timestamp?{...e,isEnhancing:!1}:e)}))}).catch(()=>{s(e=>({...e,steps:e.steps.map(e=>e.timestamp===h.timestamp?{...e,isEnhancing:!1}:e)}))})}),setTimeout(()=>{O.current.delete(e.timestamp)},6e4),m.current&&!r.isPaused&&t&&!x.current.has(t)&&setTimeout(async()=>{if(m.current&&!r.isPaused&&!x.current.has(t))try{x.current.add(t);const e=await jV.injectElementSelector(t);x.current.delete(t),e&&await I(e)}catch{x.current.delete(t)}},350)}catch{o("Failed to capture action")}else O.current.delete(e.timestamp)},[r.isPaused,L,n]),D=de.useCallback(async t=>{m.current=!0;const n=Date.now();s({isRecording:!0,isPaused:!1,steps:[],startTime:n}),o(null),v.current=n;(void 0===t?_&&j:t&&_&&j)&&await E();const i=e;i&&(h(i),l(new Set([i])),c.current=new Set([i]),u.current=new Set([i]),chrome.tabs.get(i).then(e=>{p.current=e.groupId;const t={action:"navigate",description:`Navigate to ${e.url||"page"}`,url:e.url||"",tabId:i,timestamp:n-100};s(e=>({...e,steps:[t,...e.steps]}))}));const d=e=>{if(!m.current||r.isPaused)return;const t=e.tabId;chrome.tabs.get(t).then(e=>{const n=e.groupId,r=p.current;if(void 0===r||-1===r||n!==r)return s(e=>({...e,isPaused:!0})),void a.forEach(e=>{chrome.tabs.sendMessage(e,{type:"CANCEL_ELEMENT_SELECTOR"}).catch(()=>{})});const i=!u.current.has(t),o=!c.current.has(t);if(i&&u.current.add(t),i){const n=Date.now()-150,r={action:"create_tab",description:"Create new tab",url:e.url||"",tabId:t,timestamp:n};s(e=>({...e,steps:[...e.steps,r]}))}if(o&&EV(e.url)){c.current.add(t);const n=Date.now()-100,r={action:"navigate",description:`Navigate to ${e.url||"page"}`,url:e.url||"",tabId:t,timestamp:n};s(e=>({...e,steps:[...e.steps,r]}))}else o&&EV(e.url);h(t),l(e=>new Set(e).add(t)),EV(e.url)&&(x.current.has(t)||(x.current.add(t),jV.injectElementSelector(t).then(e=>{x.current.delete(t),e&&I(e)}).catch(()=>{x.current.delete(t)})))})};if(chrome.tabs.onActivated.addListener(d),y.current=d,i)try{x.current.add(i),jV.injectElementSelector(i).then(e=>{x.current.delete(i),e&&I(e)}).catch(()=>{x.current.delete(i)})}catch{o("Failed to activate element selector")}},[e,I,r.isPaused,a,_,j,E]),R=de.useCallback(()=>{s(e=>({...e,steps:e.steps.map(e=>"type"===e.action&&e.isPending?{...e,isPending:!1}:e)}));const{steps:e}=r;m.current=!1,S&&T(),y.current&&(chrome.tabs.onActivated.removeListener(y.current),y.current=null),a.size>0&&(a.forEach(e=>{chrome.tabs.sendMessage(e,{type:"CANCEL_ELEMENT_SELECTOR"}).catch(()=>{})}),l(new Set)),h(void 0),p.current=void 0,x.current.clear(),c.current.clear(),u.current.clear(),s({isRecording:!1,isPaused:!1,steps:[],startTime:null}),e.length>0&&t&&t(e)},[r,t,a,S,T]),P=de.useCallback(()=>{const t=r.isPaused;if(s(e=>({...e,isPaused:!e.isPaused})),t){const t=d||e;t&&!x.current.has(t)&&(x.current.add(t),jV.injectElementSelector(t).then(e=>{x.current.delete(t),e&&I(e)}).catch(()=>{x.current.delete(t)}))}else x.current.clear(),a.size>0&&a.forEach(e=>{chrome.tabs.sendMessage(e,{type:"CANCEL_ELEMENT_SELECTOR"}).catch(()=>{})})},[r.isPaused,a,d,e,I]),z=de.useCallback(async()=>{r.isRecording&&(S?T():await E())},[r.isRecording,S,E,T]),F=de.useCallback(async()=>{if(e&&r.isRecording&&!r.isPaused)try{const t=await jV.injectElementSelector(e);t&&await I(t)}catch{o("Failed to capture action")}},[e,r,I]),H=de.useCallback(async e=>{if(!r.isRecording||r.isPaused)return;let t=`Navigate to ${e}`;try{const n=new URL(e),r=n.hostname.replace("www.",""),s="/"===n.pathname?"":n.pathname;t=s?`Navigate to ${r}${s}`:`Navigate to ${r}`}catch{}const n={action:"navigate",description:t,url:e,timestamp:Date.now()};s(e=>({...e,steps:[...e.steps,n]}))},[r]),V=de.useCallback(async(t,n)=>{if(!e||!r.isRecording||r.isPaused)return;await L(),await new Promise(e=>setTimeout(e,100));const i=g.current;g.current="";let o=`Type "${t.substring(0,30)}${t.length>30?"...":""}"`;t.includes("@")?o=`Enter email "${t}"`:t.length<20&&!t.includes(" ")?o=`Enter "${t}"`:t.length>50&&(o=`Type text: "${t.substring(0,50)}..."`);const a={action:"type",selector:n,value:t,screenshot:i,description:o,url:window.location.href,timestamp:Date.now()};s(e=>({...e,steps:[...e.steps,a]}))},[e,r,L]),$=de.useCallback(e=>{s(t=>({...t,steps:t.steps.filter((t,n)=>n!==e)}))},[]),B=de.useCallback((e,t)=>{s(n=>{const r=[...n.steps],[s]=r.splice(e,1);return r.splice(t,0,s),{...n,steps:r}})},[]),U=de.useCallback(()=>{s(e=>({...e,steps:[]}))},[]);return de.useEffect(()=>{w.current=a,k.current=d},[a,d]),cr(d||e,t=>{const n=d||e;"loading"===t.status&&n&&x.current.has(n)&&x.current.delete(n),"complete"===t.status&&m.current&&!r.isPaused&&n&&chrome.tabs.get(n).then(e=>{if(!EV(e.url))return;if(!c.current.has(n)){c.current.add(n);const t=Date.now()-100,r={action:"navigate",description:`Navigate to ${e.url||"page"}`,url:e.url||"",tabId:n,timestamp:t};s(e=>({...e,steps:[...e.steps,r]}))}x.current.has(n)||(x.current.add(n),jV.injectElementSelector(n).then(e=>{x.current.delete(n),e&&I(e)}).catch(()=>{x.current.delete(n)}))})},["status"],[d,e,r.isPaused,I]),cr(d||e,t=>{const n=d||e;!0===t.active&&m.current&&!r.isPaused&&n&&(chrome.tabs.sendMessage(n,{type:"CANCEL_ELEMENT_SELECTOR"}).catch(()=>{}),x.current.delete(n),setTimeout(()=>{m.current&&!r.isPaused&&chrome.tabs.get(n).then(e=>{EV(e.url)&&(x.current.add(n),jV.injectElementSelector(n).then(e=>{x.current.delete(n),e&&I(e)}).catch(()=>{x.current.delete(n)}))})},150))},["active"],[d,e,r.isPaused,I]),de.useEffect(()=>{const e=()=>{if(m.current){const e=w.current;e.size>0&&e.forEach(e=>{chrome.tabs.sendMessage(e,{type:"CANCEL_ELEMENT_SELECTOR"}).catch(()=>{})}),y.current&&(chrome.tabs.onActivated.removeListener(y.current),y.current=null)}};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),()=>{e(),window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}},[]),{recordingState:r,error:i,isCapturing:f.current,isSpeechRecording:S,currentInterimTranscript:b,speechError:N,isSpeechSupported:_,hasSpeechPermission:j,startRecording:D,stopRecording:R,togglePause:P,toggleSpeechRecording:z,captureClick:F,captureNavigation:H,captureType:V,removeStep:$,reorderSteps:B,clearSteps:U}},AV=({steps:e,isVisible:t,onRemoveStep:n,onClose:s,fullScreen:i=!1,currentInterimTranscript:o="",isSpeechRecording:a=!1})=>{const c=de.useRef(null),u=de.useRef(null),d=de.useRef(null),[h,p]=de.useState(new Set);return de.useEffect(()=>{d.current?d.current.scrollIntoView({behavior:"smooth",block:"nearest"}):u.current&&u.current.scrollIntoView({behavior:"smooth",block:"end"})},[e.length,o]),t?he.jsxs(gn.div,{initial:i?{opacity:0}:{opacity:0,x:300},animate:i?{opacity:1}:{opacity:1,x:0},exit:i?{opacity:0}:{opacity:0,x:300},className:i?"flex flex-col h-full":"fixed right-0 top-[60px] bottom-0 w-80 bg-white shadow-xl z-40 border-l border-gray-200",children:[!i&&he.jsxs("div",{className:"flex flex-col border-b border-gray-200",children:[he.jsxs("div",{className:"flex items-center justify-between p-4",children:[he.jsx("h3",{className:"font-base-bold text-text-100",children:he.jsx(r,{defaultMessage:"Steps ({count})",id:"HLzAq2Ombw",values:{count:e.length}})}),s&&he.jsx(l,{variant:"ghost",size:"icon_sm",onClick:s,className:"hover:bg-bg-500",children:he.jsx(z,{size:16})})]}),a&&o&&he.jsxs("div",{className:"px-4 pb-3 flex items-start gap-2",children:[he.jsx(rs,{size:12,className:"text-accent-main-100 mt-1 flex-shrink-0 animate-pulse"}),he.jsx("p",{className:"text-text-300 font-base-sm italic flex-1",children:he.jsx(r,{defaultMessage:'"{transcript}"',id:"ICmjyWFB52",values:{transcript:o}})})]})]}),he.jsx("div",{ref:c,className:i?"flex-1 overflow-y-auto p-2":"overflow-y-auto h-[calc(100%-60px)] overflow-x-hidden",children:he.jsxs("div",{className:i?"space-y-1 max-w-3xl mx-auto":"p-2 space-y-2",children:[0===e.length&&he.jsx("div",{className:i?"text-center text-text-400 font-base py-8":"p-4 text-center text-text-400 font-base",children:he.jsx(r,{defaultMessage:"Click through your task to record each step",id:"vjsFq8zg2Y"})}),e.length>0&&he.jsx(yn,{children:e.map((t,s)=>he.jsx(gn.div,{ref:s===e.length-1?u:null,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"group relative",children:he.jsxs("div",{className:"rounded-2xl overflow-hidden transition-all hover:bg-bg-300",children:[he.jsxs("div",{className:"flex items-start justify-between px-3 py-3",children:[he.jsxs("div",{className:"flex items-start gap-3",children:[he.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 font-small-bold text-text-100 bg-bg-500 rounded-full",children:s+1}),he.jsxs("div",{className:"flex-1 pt-0.5",children:[he.jsx("p",{className:"text-text-100 font-base flex items-center gap-2",children:t.isEnhancing?he.jsx("span",{className:"inline-block bg-gradient-to-r from-text-400 via-text-200 to-text-400 bg-clip-text text-transparent animate-shimmertext bg-[length:400%_100%]",children:he.jsx(r,{defaultMessage:"Loading...",id:"gjBiyjshwX"})}):t.description}),t.tabId&&he.jsx("p",{className:"text-text-400 font-small text-xs mt-0.5",children:he.jsx(r,{defaultMessage:"Tab {tabId}",id:"iTW/IIP3mS",values:{tabId:t.tabId}})})]})]}),n&&he.jsx(l,{variant:"ghost",size:"icon_sm",onClick:()=>n(s),className:"opacity-0 group-hover:opacity-100 hover:bg-bg-500 !h-6 !w-6",children:he.jsx(V,{size:12})})]}),t.screenshot&&t.clickPosition&&he.jsx("div",{className:"px-3 pb-3",children:he.jsx("div",{className:"relative w-full h-48 overflow-hidden rounded-xl border-[0.5px] border-border-200",children:he.jsx(jy,{screenshot:`data:image/jpeg;base64,${t.screenshot}`,coordinates:[t.clickPosition.x,t.clickPosition.y],viewportDimensions:t.viewportDimensions,zoomLevel:2.5,className:"w-full h-full"})})}),t.speechTranscript&&he.jsx("div",{className:"px-3 pb-3",children:he.jsxs("button",{onClick:()=>{p(e=>{const t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},className:"w-full flex items-center gap-2 px-3 py-2 bg-bg-200 hover:bg-bg-300 rounded-lg transition-colors text-left",children:[he.jsx(rs,{size:12,className:"text-text-300 flex-shrink-0"}),he.jsx("span",{className:"text-text-200 font-base-sm flex-1",children:h.has(s)?he.jsx("span",{className:"italic",children:he.jsx(r,{defaultMessage:'"{transcript}"',id:"ICmjyWFB52",values:{transcript:t.speechTranscript}})}):he.jsxs(he.Fragment,{children:[he.jsx("span",{className:"italic",children:he.jsx(r,{defaultMessage:'"{transcript}"',id:"ICmjyWFB52",values:{transcript:t.speechTranscript.length>50?`${t.speechTranscript.substring(0,50)}...`:t.speechTranscript}})}),t.speechTranscript.length>50&&he.jsx("span",{className:"text-text-400 ml-1",children:he.jsx(r,{defaultMessage:"(click to expand)",id:"LcKcJVZQc7"})})]})})]})})]})},t.timestamp))}),i&&a&&he.jsx("div",{ref:d,className:"group relative rounded-2xl overflow-hidden transition-all hover:bg-bg-300",children:he.jsx("div",{className:"flex items-start justify-between px-3 py-3",children:he.jsxs("div",{className:"flex items-start gap-3",children:[he.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 font-small-bold text-text-100 bg-bg-500 rounded-full",children:e.length+1}),he.jsx("div",{className:"flex-1 pt-0.5",children:he.jsx("p",{className:"text-text-100 font-base flex items-center gap-2",children:o?he.jsx("span",{className:"inline-block bg-gradient-to-r from-text-400 via-text-200 to-text-400 bg-clip-text text-transparent animate-shimmertext bg-[length:400%_100%]",children:he.jsx(r,{defaultMessage:'"{transcript}"',id:"ICmjyWFB52",values:{transcript:o}})}):he.jsx("span",{className:"inline-block bg-gradient-to-r from-text-400 via-text-200 to-text-400 bg-clip-text text-transparent animate-shimmertext bg-[length:400%_100%]",children:he.jsx(r,{defaultMessage:"Listening...",id:"YAeW6K6mK9"})})})})]})})})]})}),!i&&e.length>0&&he.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-200",children:he.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-base-bold",children:he.jsx(r,{defaultMessage:"Save as Teach Claude",id:"ZpE0fwR7on"})})})]}):null},LV=({recordingState:e,isSpeechRecording:t,isSpeechSupported:s,hasSpeechPermission:i,currentInterimTranscript:o,onStop:c,onTogglePause:u,onToggleSpeech:d,onRemoveStep:h,onSave:p,createMessage:f,isGeneratingSummary:m,setIsGeneratingSummary:g,currentUrl:y,pageTitle:x})=>{const v=n(),[b,C]=de.useState(!1),w=de.useMemo(()=>{if(!y)return"";try{return new URL(y).hostname}catch{return""}},[y]),k=de.useMemo(()=>w?`https://www.google.com/s2/favicons?domain=${w}&sz=32`:"",[w]),S=de.useCallback(async()=>{g(!0);let t="";if(e.steps.length>0)try{const{generateWorkflowSummary:n}=await ye(async()=>{const{generateWorkflowSummary:e}=await import("./ModelSelector-GDUcHpDy.js").then(e=>e.as);return{generateWorkflowSummary:e}},__vite__mapDeps([8,1,3,4,6]));t=await n(e.steps,f,!0)}catch(s){}g(!1);let n=e.steps;if(o&&o.trim()){const e={action:"narration",description:`Note: "${o}"`,speechTranscript:o,timestamp:Date.now()};n=[...n,e]}const r=n.map(e=>({...e,screenshot:void 0}));p(r,t)},[e.steps,f,o,g,p]);return he.jsxs("div",{className:"flex flex-col h-full bg-bg-100",children:[he.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 pb-3",children:[he.jsxs("div",{className:"flex items-center gap-2",children:[k&&!b?he.jsx("img",{src:k,className:"w-4 h-4",alt:"",onError:()=>C(!0)}):he.jsx(Vr,{size:16,className:"text-text-300"}),he.jsx("span",{className:"text-text-200 font-base-sm truncate max-w-[200px]",children:x||w})]}),he.jsx("button",{onClick:c,className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":v.formatMessage({defaultMessage:"Close",id:"rbrahOGMC3"}),children:he.jsx(tr,{size:12})})]}),he.jsx("div",{className:"flex-1 overflow-y-auto",children:he.jsx(AV,{steps:e.steps,isVisible:!0,onRemoveStep:h,fullScreen:!0,currentInterimTranscript:o,isSpeechRecording:t})}),he.jsx("div",{className:"mx-auto mb-3 max-w-3xl w-full px-3",children:he.jsx("div",{className:"bg-bg-000 border-[0.5px] border-border-300 hover:border-border-200 rounded-[14px] relative z-30 transition-colors focus-within:outline-none",style:{boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.04)",outline:"none"},children:he.jsxs("div",{className:"flex flex-col gap-2 px-3 py-3",children:[he.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[he.jsx(a,{tooltipContent:v.formatMessage({defaultMessage:"Discard",id:"nmpevlUATU"}),side:"top",children:he.jsx(l,{variant:"secondary",size:"default",onClick:()=>{c()},"aria-label":v.formatMessage({defaultMessage:"Discard",id:"nmpevlUATU"}),className:"w-full px-0 min-w-0",children:he.jsx(V,{size:20})})}),he.jsx(a,{tooltipContent:e.isPaused?v.formatMessage({defaultMessage:"Resume",id:"3y9DGgura7"}):v.formatMessage({defaultMessage:"Pause",id:"tFFMkFDBMO"}),side:"top",children:he.jsx(l,{variant:"secondary",size:"default",onClick:u,"aria-label":e.isPaused?v.formatMessage({defaultMessage:"Resume",id:"3y9DGgura7"}):v.formatMessage({defaultMessage:"Pause",id:"tFFMkFDBMO"}),className:"w-full px-0 min-w-0",children:e.isPaused?he.jsx(Gr,{size:20}):he.jsx(zm,{size:20,weight:"light"})})}),s&&he.jsx(a,{tooltipContent:t?v.formatMessage({defaultMessage:"Turn off voice narration",id:"Jiou5flQWh"}):i?v.formatMessage({defaultMessage:"Turn on voice narration",id:"FKVVjBA/2e"}):v.formatMessage({defaultMessage:"Microphone permission needed",id:"FPK1O1X8S1"}),side:"top",children:he.jsx(l,{variant:"secondary",size:"default",onClick:d,"aria-label":v.formatMessage({defaultMessage:"Toggle voice narration",id:"Yxxj6rmlSW"}),className:"w-full px-0 min-w-0 "+(t?"bg-accent-main-100 text-oncolor-100 border-accent-main-100":""),children:t?he.jsx(nr,{size:20,weight:"light"}):he.jsx(Im,{size:20,weight:"light"})})})]}),he.jsx(l,{variant:"primary",size:"default",onClick:S,disabled:m||0===e.steps.length,"aria-label":v.formatMessage({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"w-full",children:m?he.jsx(r,{defaultMessage:"Generating shortcut...",id:"9qWxtxsjAd"}):he.jsx(r,{defaultMessage:"Done",id:"JXdbo8Vnlw"})})]})})})]})};function OV({isOpen:e,onVoiceOver:t,onClose:s,currentUrl:i,pageTitle:o,hasMicrophonePermission:a}){const c=n(),u=de.useMemo(()=>{if(!i)return"";try{return new URL(i).hostname}catch{return""}},[i]),d=de.useMemo(()=>u?`https://www.google.com/s2/favicons?domain=${u}&sz=32`:"",[u]),[h,p]=de.useState(!1),[f,m]=de.useState(a);de.useEffect(()=>{if(!e)return;(async()=>{try{const e=await navigator.permissions.query({name:"microphone"});m("granted"===e.state),e.onchange=()=>{m("granted"===e.state)}}catch{m(a)}})()},[e,a]);const g=de.useCallback(async()=>{const e=await chrome.tabs.getCurrent(),t=e?.id,[n]=await chrome.tabs.query({active:!0,currentWindow:!0}),r=n?.id||t,s=chrome.runtime.getURL(`options.html#permissions?requestMicrophone=true&returnTabId=${r}`);chrome.tabs.create({url:s})},[]),y=de.useCallback(()=>{t()},[t]);return e?he.jsxs("div",{className:"flex flex-col h-full bg-bg-100",children:[he.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 pb-3",children:[he.jsxs("div",{className:"flex items-center gap-2",children:[d&&!h?he.jsx("img",{src:d,className:"w-4 h-4",alt:"",onError:()=>p(!0)}):he.jsx(Vr,{size:16,className:"text-text-300"}),he.jsx("span",{className:"text-text-200 font-base-sm truncate max-w-[200px]",children:o||u})]}),he.jsx("button",{onClick:s,className:"p-1.5 rounded-md transition-colors text-text-300 hover:bg-bg-300 hover:text-text-100","aria-label":c.formatMessage({defaultMessage:"Close",id:"rbrahOGMC3"}),children:he.jsx(tr,{size:12})})]}),he.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:he.jsxs("div",{className:"max-w-md w-full flex flex-col items-center text-center space-y-6",children:[he.jsx("div",{className:"w-full flex items-center justify-center",children:he.jsx("img",{src:"/assets/record-workflow-hero-CjmRJsCN.png",alt:c.formatMessage({defaultMessage:"Teach Claude your workflow",id:"83Jawm3PD0"}),className:"w-[360px] h-auto"})}),he.jsxs("div",{className:"space-y-2",children:[he.jsx("h2",{className:"font-base-bold text-text-100",children:he.jsx(r,{defaultMessage:"Teach Claude your workflow",id:"83Jawm3PD0"})}),he.jsx("p",{className:"text-text-300 font-base max-w-[280px] mx-auto",children:f?he.jsx(r,{defaultMessage:"Go through the steps as if you're teaching a new teammate. Claude will learn the process and repeat it for you.",id:"lbjPYg5eW9"}):he.jsx(r,{defaultMessage:"Enable your microphone to narrate as you demonstrate the workflow. Claude will learn the process and repeat it for you.",id:"FWGJ6cHLeQ"})})]})]})}),he.jsx("div",{className:"mx-auto mb-3 max-w-3xl w-full px-3",children:he.jsx("div",{className:"bg-bg-000 border-[0.5px] border-border-300 hover:border-border-200 rounded-[14px] relative z-30 transition-colors focus-within:outline-none",style:{boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.04)",outline:"none"},children:he.jsx("div",{className:"flex flex-col gap-2 px-3 py-3",children:f?he.jsxs(l,{variant:"primary",size:"default",onClick:y,className:"w-full justify-center bg-always-black text-oncolor-100 hover:bg-always-black/90",children:[he.jsx(nr,{size:16,weight:"fill",className:"mr-2"}),he.jsx(r,{defaultMessage:"Start recording",id:"QpxPqx4skB"})]}):he.jsxs(l,{variant:"primary",size:"default",onClick:g,className:"w-full justify-center bg-always-black text-oncolor-100 hover:bg-always-black/90",children:[he.jsx(nr,{size:16,weight:"fill",className:"mr-2"}),he.jsx(r,{defaultMessage:"Enable microphone",id:"afNc7fLowL"})]})})})})]}):null}function IV(e){const{addServers:t,addTools:n,updateServerConnection:r}=Zn();de.useEffect(()=>{if(!e)return;let s;return async function(e,t){return Ae.fetchEventSource(`/api/oauth/organizations/${e}/mcp/v2/bootstrap`,{async onopen(e){if(!e.ok)throw new Error(`Connection failed: ${e.status} ${e.statusText}`)},onmessage(e){try{switch(e.event){case"server_list":{const n=JSON.parse(e.data);t.onServerList(n.servers||[]);break}case"tools":{const n=JSON.parse(e.data);t.onTools(n.server_uuid,n.tools||[]);break}case"server_base":{const n=JSON.parse(e.data);t.onServerBase(n.uuid,n.connected);break}}}catch(n){t.onError(n)}},onerror(e){throw t.onError(new Error("Bootstrap stream connection error")),e}})}(e,{onServerList:e=>{t(e)},onTools:(e,t)=>{n(e,t)},onServerBase:(e,t)=>{r(e,t)},onError:e=>{}}).then(e=>{s=e}).catch(e=>{}),()=>{s&&s()}},[e,t,n,r])}async function DV(e,t,n){try{const{blob:r,fileName:s}=await async function(e){const t=new URLSearchParams({path:e.filePath}),n=`/api/oauth/organizations/${e.organizationUuid}/conversations/${e.conversationUuid}/wiggle/download-file?${t}`;return{blob:await Ae.fetch(n),fileName:e.filePath.split("/").pop()||"download"}}({organizationUuid:t,conversationUuid:n,filePath:e}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}catch(r){}}function RV(){const e=n(),t=yt();jH();const s=Dx(),i=oH(),o=sH(),a=de.useMemo(()=>"window"===new URLSearchParams(window.location.search).get("mode"),[]),l=Dx(Ix(e=>({setShowCommandMenu:e.setShowCommandMenu,setShowWorkflowModeSelectionModal:e.setShowWorkflowModeSelectionModal,setShowSkipPermissionsOverlay:e.setShowSkipPermissionsOverlay,setShowShareWarningModal:e.setShowShareWarningModal,setShowAntBuildUpsell:e.setShowAntBuildUpsell,setShowFeedbackForm:e.setShowFeedbackForm,setShowNotificationBanner:e.setShowNotificationBanner,setAnnouncementDismissed:e.setAnnouncementDismissed,setSkipPermissionsWarningDismissed:e.setSkipPermissionsWarningDismissed,setIsMessageLimitDismissed:e.setIsMessageLimitDismissed,setShowTopGradient:e.setShowTopGradient,setHasBlockingWarning:e.setHasBlockingWarning,setCommandSearchTerm:e.setCommandSearchTerm,setIsGeneratingSummary:e.setIsGeneratingSummary,setPendingContinue:e.setPendingContinue,setLastGroupShowExpandedTimeline:e.setLastGroupShowExpandedTimeline,setLastGroupAnimationCompletedAt:e.setLastGroupAnimationCompletedAt,resetOnSessionClear:e.resetOnSessionClear}))),c=oH(Ix(e=>({setPermissionPrompt:e.setPermissionPrompt,setPermissionMode:e.setPermissionMode,resetOnSessionClear:e.resetOnSessionClear}))),{data:u}=le(),{data:d,refetch:h}=zn(),p=(()=>{const e=Tk(),t=Ak(),n=Ek();return e||t||n})();IV(u?.organization?.uuid);const{showFeedbackForm:f,setShowFeedbackForm:m,feedbackFormType:g,setFeedbackFormType:y,feedbackForMessage:x,setFeedbackForMessage:v,hardcodedFeedbackType:b,setHardcodedFeedbackType:C,submittedFeedback:w,setSubmittedFeedback:k}=function(){const[e,t]=de.useState(!1),[n,r]=de.useState("negative"),[s,i]=de.useState(null),[o,a]=de.useState(null),[l,c]=de.useState(new Map),u=de.useCallback(e=>{i(e),r("positive"),t(!0)},[]),d=de.useCallback(e=>{i(e),r("negative"),t(!0)},[]),h=de.useCallback(()=>{null!==s&&c(e=>{const t=new Map(e);return t.set(s,n),t}),t(!1),i(null),a(null)},[s,n]),p=de.useCallback(()=>{c(new Map),i(null),t(!1),a(null)},[]);return{showFeedbackForm:e,setShowFeedbackForm:t,feedbackFormType:n,setFeedbackFormType:r,feedbackForMessage:s,setFeedbackForMessage:i,hardcodedFeedbackType:o,setHardcodedFeedbackType:a,submittedFeedback:l,setSubmittedFeedback:c,handleThumbsUp:u,handleThumbsDown:d,handleFeedbackSubmit:h,clearFeedback:p}}(),{selectedModel:S,setSelectedModel:M,selectedModelRef:N,availableModelOptions:_,setAvailableModelOptions:j,modelConfig:E,usingFallbackNonStickyModelRef:T,loadStickyModel:A,setStickyModel:L}=function(e={}){const{onModelChange:t}=e,n=$(),{loadStickyModel:r,setStickyModel:s}=Sn(),[i,o]=de.useState(n.default||"claude-sonnet-4-5-20250929"),a=de.useRef(i),l=de.useRef(!1),[c,u]=de.useState(()=>n.options||[]);return de.useEffect(()=>{a.current=i},[i]),de.useEffect(()=>{n.default&&!n.default_model_override_id&&o(n.default)},[n.default,n.default_model_override_id]),de.useEffect(()=>{n.options&&u(n.options)},[n.options]),{selectedModel:i,setSelectedModel:e=>{o(e),t?.(e)},selectedModelRef:a,availableModelOptions:c,setAvailableModelOptions:u,modelConfig:n,usingFallbackNonStickyModelRef:l,loadStickyModel:r,setStickyModel:s}}(),{anthropicApiKey:O,authToken:I,needsOAuth:D,isLoading:R,refreshTokenIfNeeded:P}=(()=>{const[e,t]=de.useState(!0),[n,r]=de.useState(!0),[s,i]=de.useState(void 0),[o,a]=de.useState(void 0),l=de.useCallback(async()=>{r(!0);const e=await Ee(),n=await fe(me.ANTHROPIC_API_KEY)||void 0;t(void 0===e&&!0),i(e),a(n),r(!1)},[]),c=de.useCallback(async()=>{const{isRefreshed:e}=await Te();if(e){const e=await Ee();i(e)}},[]);return de.useEffect(()=>{l();const e=(e,t)=>{"local"===t&&[me.ACCESS_TOKEN,me.REFRESH_TOKEN,me.TOKEN_EXPIRY,me.ANTHROPIC_API_KEY].some(t=>t in e)&&l()};return chrome.storage.onChanged.addListener(e),()=>{chrome.storage.onChanged.removeListener(e)}},[l]),{authToken:s,needsOAuth:e,isLoading:n,anthropicApiKey:o,refreshTokenIfNeeded:c}})(),z=pe("chrome_ext_announcement",{}),F=yH(),H=de.useRef(!1),V=vV(u?.organization?.uuid,S,F),[U,Z]=rr(me.NOTIFICATIONS_ENABLED,void 0),W=de.useRef(()=>"skip_all_permission_checks"===i.permissionMode);W.current=()=>"skip_all_permission_checks"===i.permissionMode;const q=de.useMemo(()=>new Qn(()=>W.current()),[]),{isSidepanelVisible:G}=function(){const[e,t]=de.useState(!document.hidden);return de.useEffect(()=>{const e=()=>{const e=!document.hidden;t(e)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),{isSidepanelVisible:e}}(),{tabId:J,currentDomain:K,setCurrentDomain:Q,currentUrl:X,setCurrentUrl:ee,tabTitle:te,blockedCategory:ne,setBlockedCategory:re,blockedTabInfo:se,setBlockedTabInfo:ie,setIsOnBlockedPage:oe,shouldBlockDomain:ae,shouldDisableSkipPermissions:ce,shouldNotAllowSiteWidePermission:ue,hasBrowserControlPermission:ye,setHasBrowserControlPermission:xe}=function(e){const{permissionManager:t,permissionMode:n,setPermissionMode:r}=e,[s,i]=de.useState(void 0),[o,a]=de.useState(void 0),[l,c]=de.useState(void 0),[u,d]=de.useState(void 0),[h,p]=de.useState(null),[f,m]=de.useState({isMainTabBlocked:!0,blockedTabs:[]}),[g,y]=de.useState(!1),[x,v]=de.useState(!1),b=chrome.runtime.getURL("blocked.html"),C="category0"!==h&&null!==h,w="category1"===h||"category2"===h||"category_org_blocked"===h||g,k="category3"===h;return t.setForcePrompt(k),de.useEffect(()=>{!async function(){const e=new URLSearchParams(window.location.search),s=e.get("tabId");let o;if(s)o=parseInt(s);else if("window"===e.get("mode")){const e=await fe(me.TARGET_TAB_ID);e&&(o=e)}if(i(o),o)try{const e=await chrome.tabs.get(o);if(e.url){await ze.initialize();const s=await ze.isInGroup(o),i=ze.isMainTab(o);let l;if(s&&i){l=await ze.getGroupBlocklistStatus(o);const{isMainTabBlocked:e,blockedTabs:t}=await ze.getBlockedTabsInfo(o);m({isMainTabBlocked:e,blockedTabs:t})}else l=await Fe.getCategory(e.url),m({isMainTabBlocked:!0,blockedTabs:[]});p(l||null),y(e.url.startsWith(b)),c(e.url),d(e.title);try{const s=new URL(e.url);a(s.hostname),await t.hasSiteWidePermissions(s.hostname)&&"ask"===n&&r("allow_for_site")}catch(Mt){a(void 0),"allow_for_site"===n&&r("ask")}}}catch(Mt){}}()},[b,n,t,r]),de.useEffect(()=>{if(!s)return;const e=(e,t)=>{if(e===s&&(void 0!==t.title&&d(t.title),void 0!==t.url)){c(t.url);try{const e=new URL(t.url);a(e.hostname)}catch{a(void 0)}}};return chrome.tabs.onUpdated.addListener(e),()=>{chrome.tabs.onUpdated.removeListener(e)}},[s]),de.useEffect(()=>{let e=!0;return fe(me.BROWSER_CONTROL_PERMISSION_ACCEPTED).then(t=>{e&&v(!0===t)}),()=>{e=!1}},[]),de.useEffect(()=>((async()=>{try{await ze.initialize(),ze.startTabGroupChangeListener()}catch(Mt){}})(),()=>{ze.stopTabGroupChangeListener()}),[]),de.useEffect(()=>{C&&"ask"!==n&&r("ask")},[C,n,r]),{tabId:s,setTabId:i,currentDomain:o,setCurrentDomain:a,currentUrl:l,setCurrentUrl:c,tabTitle:u,setTabTitle:d,blockedCategory:h,setBlockedCategory:p,blockedTabInfo:f,setBlockedTabInfo:m,isOnBlockedPage:g,setIsOnBlockedPage:y,shouldBlockDomain:w,shouldDisableSkipPermissions:C,shouldNotAllowSiteWidePermission:k,hasBrowserControlPermission:x,setHasBrowserControlPermission:v}}({permissionManager:q,permissionMode:i.permissionMode,setPermissionMode:i.setPermissionMode}),{sendNotification:ve}=function(e){return{sendNotification:de.useCallback(({title:t,body:n,icon:r})=>{const s=r||chrome.runtime.getURL("claude_icon.svg");try{if(document.hidden){const e=chrome.runtime.getURL("sounds/notification.mp3");chrome.runtime.sendMessage({type:"PLAY_NOTIFICATION_SOUND",audioUrl:e,volume:.5}).then(()=>{}).catch(e=>{})}if(chrome.notifications){const r={type:"basic",iconUrl:s,title:t,message:n,priority:2,requireInteraction:!1};chrome.notifications.create(`notification_${e||"unknown"}_${Date.now()}`,r,e=>{})}else{const e=new Notification(t,{body:n,icon:s,silent:!0});setTimeout(()=>e.close(),5e3),e.onclick=()=>{window.focus(),e.close()}}}catch(Mt){}},[e])}}(J),{isSecondaryTab:Ce,mainTabId:we}=function(e){const[t,n]=de.useState({isSecondaryTab:!1,mainTabId:null});de.useEffect(()=>{if(!e)return;let t=!0;return(async()=>{if(t)try{await ze.initialize();const r=await ze.isInGroup(e),s=ze.isMainTab(e);if(r&&!s){const r=await ze.getMainTabId(e);t&&r&&n({isSecondaryTab:!0,mainTabId:r})}else t&&n({isSecondaryTab:!1,mainTabId:null})}catch(Mt){}})(),()=>{t=!1}},[e]);const r=de.useCallback(()=>{e&&(async()=>{try{await ze.initialize();const t=await ze.isInGroup(e),r=ze.isMainTab(e);if(t&&!r){const t=await ze.getMainTabId(e);t&&n({isSecondaryTab:!0,mainTabId:t})}else if(n({isSecondaryTab:!1,mainTabId:null}),!t)try{await ze.createGroup(e),n({isSecondaryTab:!1,mainTabId:e})}catch(Mt){}}catch(Mt){}})()},[e]);return lr(e,["groupId"],(t,n)=>{t===e&&"groupId"in n&&r()},[e,r]),t}(J),Se=de.useRef(null),Me=de.useRef(null),[Ne,je]=de.useState(!1);de.useEffect(()=>{je(!1)},[!1,J]);const Ae=de.useRef(null),Ie=de.useRef(null),De=de.useRef(null),Re=de.useRef(null),Pe=de.useRef(null),Ze=de.useRef(null),We=de.useRef({lastAssistantMessage:de.useRef(null),lastHumanMessage:de.useRef(null),extras:de.useRef(null),extraSpace:de.useRef(null),chatInput:de.useRef(null)}).current,qe=p||!1,{analytics:Ge}=B(),Je=u?.organization?.uuid,{attachments:Ke,isUploading:Ye,uploadingCount:Qe,handleFiles:Xe,handleDrop:et,handlePaste:tt,removeAttachment:nt,clearAttachments:rt,addAttachment:st}=Fn(),{isCapturing:it,captureSelection:ot}=Rn({tabId:J,onCapture:e=>st(e)}),{permissionPromptRef:at}=function({permissionPrompt:e,messagesContainerRef:t}){const[n,r]=de.useState(0),s=de.useRef(null);return de.useEffect(()=>{const i=t.current;if(i){if(e&&s.current){const e=new ResizeObserver(e=>{const t=e[0];if(t){const e=t.contentRect.height,s=n,o=i.scrollHeight-i.scrollTop-i.clientHeight;r(e),s!==e&&o<100&&requestAnimationFrame(()=>{i.scrollTop=i.scrollHeight-i.clientHeight-o})}});return e.observe(s.current),()=>{e.disconnect()}}if(!e&&n>0){const e=i.scrollHeight-i.scrollTop-i.clientHeight-n;r(0),requestAnimationFrame(()=>{const t=i.scrollHeight-i.clientHeight-e;i.scrollTop=Math.max(0,t)})}}},[e,n,t]),{permissionPromptRef:s,permissionPromptHeight:n,paddingBottom:n>0?n-80+"px":"40px"}}({permissionPrompt:i.permissionPrompt,messagesContainerRef:Ae}),lt=OH(),ct=de.useCallback(async()=>(s.setShowShareWarningModal(!0),new Promise(e=>{Me.current=e})),[s]),ut=de.useCallback(()=>{void 0===U&&s.setShowNotificationBanner(!0)},[U,s]),dt=de.useCallback(()=>{"enabled"===U&&ve({title:e.formatMessage({defaultMessage:"Claude is done",id:"pnrK9Ss/bt"}),body:e.formatMessage({defaultMessage:"Your task is completed. Ready to check in?",id:"dXUR4BjgcC"})})},[U,ve,e]),{messages:ht,messageHistory:pt,sendMessage:ft,retryLastMessage:mt,cancel:xt,clearMessages:vt,clearError:bt,isLoading:Ct,isInitializing:wt,hasInteractiveTools:kt,isCompacting:St,error:Mt,messageLimit:Nt,tokensSaved:_t,createAnthropicMessage:jt,lastStopReason:Et,currentStatus:Tt,conversationUuid:At,useSessionsAPI:Lt,setUseSessionsAPI:Ot}=function(e){const[t,n]=de.useState(!1),r=de.useRef(!1);return de.useEffect(()=>{(async()=>{const e=await fe(me.USE_SESSIONS_API);void 0!==e&&n(e)})()},[]),de.useEffect(()=>{r.current||ge(me.USE_SESSIONS_API,t);const e=(e,s)=>{if("local"===s&&e[me.USE_SESSIONS_API]){const s=e[me.USE_SESSIONS_API].newValue;void 0!==s&&s!==t&&(r.current=!0,n(s),setTimeout(()=>{r.current=!1},0))}};return chrome.storage.onChanged.addListener(e),()=>chrome.storage.onChanged.removeListener(e)},[t]),{...AH(e),useSessionsAPI:t,setUseSessionsAPI:n}}({apiKey:O,authToken:I,refreshTokenIfNeeded:P,model:S,modelRef:N,sessionId:o.sessionId,deviceId:o.deviceId,existingSessionId:o.existingSessionIdToLoad,existingConversationUuid:o.existingConversationUuidToLoad,organizationUuid:u?.organization?.uuid,tabId:J,currentDomain:K,onShowNotificationBanner:ut,onSendNotification:dt,onShareRequested:ct,onSessionCreated:e=>{V.refreshSessions(),V.setActiveSessionId(e)},permissionManager:q,permissionMode:i.permissionMode,onPermissionRequired:async e=>{i.setPermissionPrompt(e);try{const t=e.url?new URL(e.url).hostname:"this page";chrome.runtime.sendMessage({type:"SHOW_PERMISSION_NOTIFICATION",action:"browser_automation",domain:t},()=>{chrome.runtime.lastError})}catch(t){}return new Promise(e=>{Se.current=e})}});!function(e,t){de.useEffect(()=>{const n=new URLSearchParams(window.location.search),r="true"===n.get("mcpPermissionOnly"),s=n.get("requestId");if(!r||!s)return;const i=`mcp_prompt_${s}`;chrome.storage.local.get(i).then(n=>{const r=n[i];r&&(t(r.prompt),e.current=e=>{chrome.runtime.sendMessage({type:"MCP_PERMISSION_RESPONSE",requestId:s,allowed:e}),setTimeout(()=>{window.close()},50)})})},[e,t])}(Se,i.setPermissionPrompt),function(e,t){de.useEffect(()=>{if(!e||t!==e)return;const n=()=>{"hidden"===document.visibilityState&&ze.stopRunning()};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[e,t])}(J,we),function(e,t){const n=sH(e=>e.currentScheduledTaskRunId),r=sH(e=>e.currentScheduledTaskName),s=sH(e=>e.setCurrentScheduledTask),i=sH(e=>e.clearCurrentScheduledTask);de.useEffect(()=>{const e=sessionStorage.getItem("currentScheduledTaskRunId"),t=sessionStorage.getItem("currentScheduledTaskName");e&&t&&s(e,t)},[s]),de.useEffect(()=>{if(!n||0===e.length)return;const t=e[e.length-1];if("type"in t&&"result"===t.type)return;const r={role:t.role,content:"string"==typeof t.content?t.content:JSON.stringify(t.content),timestamp:Date.now()};rH.addLogMessage(n,r).catch(e=>{})},[n,e]),de.useEffect(()=>{if(!n||!r||t||0===e.length)return;const s=e[e.length-1];"assistant"===s.role&&"string"==typeof s.content&&(s.content.includes("<answer>")||s.content.includes("</answer>"))&&(rH.updateTaskRunStatus(n,"completed").catch(e=>{}),i(),sessionStorage.removeItem("currentScheduledTaskRunId"),sessionStorage.removeItem("currentScheduledTaskName"))},[n,r,e,t,i])}(ht,Ct);const It=Le,Dt=de.useMemo(()=>{try{return PH(ht,Ct)}catch(e){return ht.map((e,t)=>({type:"single",messages:[e],startIndex:t,endIndex:t}))}},[ht,Ct]),{recordingState:Rt,error:Pt,startRecording:zt,stopRecording:Ft,togglePause:Ht,removeStep:Vt,isSpeechRecording:$t,currentInterimTranscript:Bt,isSpeechSupported:Ut,hasSpeechPermission:Zt,toggleSpeechRecording:Wt}=TV({tabId:J,createMessage:jt}),{isConvertingToTask:qt,conversionError:Gt,showConversionError:Jt,handleConvertToScheduledTask:Kt}=oV({messages:ht,isAgentRunning:Ct,currentUrl:X,createAnthropicMessage:jt}),Yt=de.useCallback(async e=>{Je&&At&&await DV(e,Je,At)},[Je,At]),Qt=function({lastStopReason:e,currentModel:t,modelConfig:n,onBlockingStateChange:s}){const i="refusal"===e?.reason,o=i&&!!n.modelFallbacks?.[t];return de.useEffect(()=>{s?.(i)},[i,s]),i?o?null:he.jsx(xv,{type:"refusal",children:he.jsx("span",{className:"font-small",children:he.jsx(r,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <usagePolicyLink>Usage Policy</usagePolicyLink>. Please start a new chat.",id:"opnhVjl2Ux",values:{usagePolicyLink:e=>he.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://www.anthropic.com/legal/aup"}),className:"inline-link",children:e})}})})}):null}({lastStopReason:Et,currentModel:S,modelConfig:E,onBlockingStateChange:s.setHasBlockingWarning});de.useEffect(()=>{l.setHasBlockingWarning(!qe)},[qe,l]),function({tabId:e,isAgentRunning:t,hasInteractiveTools:n,domainTransitionPromptsEnabled:r,cancel:s,permissionMode:i,permissionManager:o,setPermissionPrompt:a,setBlockedCategory:l,setBlockedTabInfo:c,setIsOnBlockedPage:u,setPendingContinue:d,permissionResolveRef:h}){const p=de.useRef(new Map);de.useEffect(()=>{if(!e)return;chrome.tabs.get(e).then(t=>{t?.url&&p.current.set(e,t.url)});const t=(e,t,n)=>{"complete"===t.status&&n.url&&(p.current.has(e)||p.current.set(e,n.url))};return chrome.tabs.onUpdated.addListener(t),()=>{chrome.tabs.onUpdated.removeListener(t)}},[e]),de.useEffect(()=>{if(!e)return;const n=async n=>{if(0!==n.frameId)return;const{isMainTab:r,isSecondaryTab:i,group:o}=await He(e,n.tabId);if(r||i)try{let a,d=n.url;if(r||i){const t=await Ve(n.tabId,n.url);if(o){a=await ze.getGroupBlocklistStatus(e);const{isMainTabBlocked:t,blockedTabs:n}=await ze.getBlockedTabsInfo(e);c({isMainTabBlocked:t,blockedTabs:n})}else a=t,c({isMainTabBlocked:!0,blockedTabs:[]});l(a||null)}$e(a)&&t&&s(),"category1"===a&&(d=Be(n.url),chrome.tabs.update(n.tabId,{url:d})),r&&u(d.startsWith(chrome.runtime.getURL("blocked.html")));const h=p.current.get(n.tabId);Ue(h,n.url)}catch(Mt){}},r=async(t,n)=>{if(!e)return;const r=await ze.findGroupByMainTab(e);if(r&&r.chromeGroupId===t){l(n||null);const{isMainTabBlocked:t,blockedTabs:r}=await ze.getBlockedTabsInfo(e);c({isMainTabBlocked:t,blockedTabs:r})}},i=e=>{0===e.frameId&&p.current.set(e.tabId,e.url)},o=async n=>{if(0!==n.frameId||!e)return;await ze.initialize();const r=await ze.findGroupByTab(n.tabId);if(r&&r.mainTabId===e&&n.tabId!==e&&!t)try{await ze.setTabIndicatorState(n.tabId,"static")}catch(Mt){}};return chrome.webNavigation.onBeforeNavigate.addListener(n),chrome.webNavigation.onCommitted.addListener(i),chrome.webNavigation.onCompleted.addListener(o),ze.addBlocklistListener(r),()=>{chrome.webNavigation.onBeforeNavigate.removeListener(n),chrome.webNavigation.onCommitted.removeListener(i),chrome.webNavigation.onCompleted.removeListener(o),ze.removeBlocklistListener(r)}},[e,t,n,r,s,i,o,a,l,c,u,d,h])}({tabId:J,isAgentRunning:Ct,hasInteractiveTools:kt,domainTransitionPromptsEnabled:!1,cancel:xt,permissionMode:i.permissionMode,permissionManager:q,setPermissionPrompt:i.setPermissionPrompt,setBlockedCategory:re,setBlockedTabInfo:ie,setIsOnBlockedPage:oe,setPendingContinue:s.setPendingContinue,permissionResolveRef:Se}),function({tabId:e,isAgentRunning:t,hasInteractiveTools:n,isSidepanelVisible:r,setBlockedCategory:s,setBlockedTabInfo:i}){de.useEffect(()=>{e&&(async()=>{if(!e)return;await ze.initialize();const r=await ze.isInGroup(e),s=ze.isMainTab(e);let i;if(i=r?s?e:await ze.getMainTabId(e)||e:e,n&&t)setTimeout(async()=>{try{await chrome.tabs.sendMessage(i,{type:"SHOW_AGENT_INDICATORS"})}catch(Mt){}},300),await ze.startRunning(i);else if(!t||!n){try{await chrome.tabs.sendMessage(i,{type:"HIDE_AGENT_INDICATORS"})}catch(Mt){}await ze.stopRunning()}})()},[n,t,e]),lr("all",["active"],async(n,r)=>{if(r.active&&t&&e&&(await ze.initialize(),await ze.isInGroup(n)))try{const r=await chrome.tabs.get(n),s=await chrome.tabs.get(e);if(r.groupId!==s.groupId)return;await ze.addTabToIndicatorGroup({tabId:n,isRunning:t})}catch(Mt){}},[t,e]),lr("all",["groupId","url"],async(n,r)=>{if("groupId"in r&&void 0!==r.groupId&&e)try{await ze.initialize();const t=await ze.isInGroup(e),s=ze.isMainTab(e);if(t&&s){const t=await ze.findGroupByMainTab(e);t&&t.memberTabs.length>1&&await ze.showSecondaryTabIndicators(e),t&&t.chromeGroupId===r.groupId&&n!==e&&(await ze.addTabToGroup(e,n),await ze.setTabIndicatorState(n,"static"))}}catch(Mt){}if(r.url&&"about:blank"!==r.url&&e)try{await ze.initialize();const o=await ze.findGroupByTab(n);if(o&&o.mainTabId===e){await ze.updateTabBlocklistStatus(n,r.url);const o=await ze.getGroupBlocklistStatus(e),{isMainTabBlocked:a,blockedTabs:l}=await ze.getBlockedTabsInfo(e);if(i({isMainTabBlocked:a,blockedTabs:l}),s(o||null),!t&&n!==e)try{await ze.setTabIndicatorState(n,"static")}catch(Mt){}}}catch(Mt){}},[e,t,i,s]),de.useEffect(()=>{if(!e)return;const t=setTimeout(async()=>{try{await ze.initialize();const t=await chrome.tabs.get(e);if(t.groupId===chrome.tabGroups.TAB_GROUP_ID_NONE)return;const n=t.groupId,r=await ze.findGroupByTab(e);r?.isUnmanaged&&await ze.adoptOrphanedGroup(r.mainTabId,n),await ze.showStaticIndicatorsForChromeGroup(n)}catch(Mt){}},3e3);return()=>{clearTimeout(t),(async()=>{try{await ze.hideSecondaryTabIndicators(e)}catch(Mt){}})()}},[e,t]),de.useEffect(()=>{!r&&e&&ze.removeCompletionPrefix(e).catch(e=>{})},[r,e])}({tabId:J,isAgentRunning:Ct,hasInteractiveTools:kt,isSidepanelVisible:G,setBlockedCategory:re,setBlockedTabInfo:ie}),de.useEffect(()=>{const e=new URLSearchParams(window.location.search),t="true"===e.get("mcpPermissionOnly"),n=e.get("requestId");if(t&&n){const e=`mcp_prompt_${n}`;chrome.storage.local.get(e).then(t=>{const n=t[e];n&&c.setPermissionPrompt(n.prompt)}),Se.current=e=>{chrome.runtime.sendMessage({type:"MCP_PERMISSION_RESPONSE",requestId:n,allowed:e}),setTimeout(()=>window.close(),50)}}},[c]),de.useEffect(()=>{J&&chrome.runtime.sendMessage({type:"PANEL_OPENED",tabId:J,mainTabId:we||J}).catch(console.error)},[J,we]),de.useEffect(()=>{fe(me.ANNOUNCEMENT_DISMISSED).then(e=>{const t=z.id??"";l.setAnnouncementDismissed(e===t&&!!t)})},[z,l]),de.useEffect(()=>{H.current&&ge(me.LAST_PERMISSION_MODE_PREFERENCE,i.permissionMode)},[i.permissionMode]),de.useEffect(()=>{V.activeSessionId&&!Lt&&Ot(!0)},[V.activeSessionId,Lt,Ot]),de.useEffect(()=>{let e=!0;return(async()=>{try{if("true"===new URLSearchParams(window.location.search).get("skipPermissions"))return void(H.current=!0);let t=await fe(me.LAST_PERMISSION_MODE_PREFERENCE);if(!e)return;"ask"===t&&(t=Oe),void 0!==t&&!ce&&It.includes(t)?c.setPermissionMode(t):c.setPermissionMode(Oe)}catch(t){}finally{H.current=!0}})(),()=>{e=!1}},[ce,It,c]),de.useEffect(()=>{const e=()=>{"hidden"===document.visibilityState&&(async()=>{chrome.runtime.sendMessage({type:"PANEL_CLOSED",tabId:J,mainTabId:we||J}).catch(console.error),J&&(await ze.initialize(),ze.isMainTab(J)&&ze.stopRunning().catch(console.debug))})()};return document.addEventListener("visibilitychange",e),(async()=>{try{if(o.existingSessionIdToLoad)return;const e=(E.options||[]).map(e=>"string"==typeof e?{model:e,name:e}:e),t=new URLSearchParams(window.location.search).get("model");if(t&&e.some(e=>e.model===t))M(t);else{const t=await A(e);if(T.current)return;if(null!=E.default_model_override_id&&null!=E.default){await fe(me.MODEL_OVERRIDE_SEEN)!==E.default_model_override_id?(M(E.default),await L(E.default),await ge(me.MODEL_OVERRIDE_SEEN,E.default_model_override_id)):t&&M(t)}else t&&M(t)}}catch(e){}})(),()=>{document.removeEventListener("visibilitychange",e)}},[J,we,E,A,L,o.existingSessionIdToLoad,M,T]),de.useEffect(()=>{l.setIsMessageLimitDismissed(!1)},[Nt,l]),de.useEffect(()=>{l.setSkipPermissionsWarningDismissed(!1)},[o.sessionId,l]),de.useEffect(()=>{Ie.current&&(Ie.current.style.height="auto",Ie.current.style.height=`${Ie.current.scrollHeight}px`)},[o.inputText]),de.useEffect(()=>{!o.inputText&&Ie.current&&(Ie.current.style.height="auto")},[o.inputText]),de.useEffect(()=>{const e=e=>{if("Escape"===e.key&&Ct&&!it&&xt(),"Tab"===e.key&&e.shiftKey){e.preventDefault();const t=(It.indexOf(i.permissionMode)+1)%It.length;i.setPermissionMode(It[t]),Ge?.track("claude_chrome.permission_mode.changed",{from:i.permissionMode,to:It[t],method:"keyboard_shortcut"})}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[Ct,xt,it,i.permissionMode,Ge,It,i]),de.useEffect(()=>{i.permissionPrompt&&Re.current?.scrollToBottom("smooth",{onlyIfPinned:!0})},[i.permissionPrompt]),de.useEffect(()=>{const e=Re.current?.getScrollContainer();if(!e)return;const t=()=>{const{scrollTop:t}=e;l.setShowTopGradient(t>10)};return e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)},[R,lt.isBlocked,D,ye,l]),de.useEffect(()=>{"true"===new URLSearchParams(window.location.search).get("mcpPermissionOnly")||(i.permissionPrompt&&"enabled"===U&&ve({title:e.formatMessage({defaultMessage:"Claude had to pause",id:"x8JhFG5A3f"}),body:e.formatMessage({defaultMessage:"Your permission is needed to continue",id:"qEqMmrx/MW"})}),i.permissionPrompt&&J&&ze.addPermissionPrefix(J).catch(console.debug))},[e,i.permissionPrompt,U,ve,J]),de.useEffect(()=>{"window"===new URLSearchParams(window.location.search).get("mode")&&chrome.windows.getCurrent(e=>{chrome.runtime.sendMessage({type:"resize_window",windowId:e.id})})},[]),lr("all",["url","status"],async(e,t)=>{if(e===J){if(t.url){ee(t.url);try{const e=new URL(t.url);Q(e.hostname);await q.hasSiteWidePermissions(e.hostname)&&"ask"===i.permissionMode&&i.setPermissionMode("allow_for_site")}catch(n){Q(void 0),"allow_for_site"===i.permissionMode&&i.setPermissionMode("ask")}}"complete"===t.status&&kt&&Ct&&ze.addTabToIndicatorGroup({tabId:J,isRunning:Ct}).catch(console.debug)}},[J,kt,Ct]),de.useEffect(()=>{s.pendingContinue&&!Ct&&(l.setPendingContinue(!1),ft("continue",void 0,void 0,!0))},[s.pendingContinue,Ct,ft,l]);const Xt=de.useMemo(()=>{if("refusal"===Et?.reason&&!!E.modelFallbacks?.[S])return null;if(!qe)return"eligibility";if(Mt)return"error";if(Qt)return"refusal";if(("exceeded_limit"===Nt.type||"approaching_limit"===Nt.type)&&!s.isMessageLimitDismissed)return"messageLimit";if("skip_all_permission_checks"===i.permissionMode&&!s.skipPermissionsWarningDismissed)return"highRisk";if(s.showNotificationBanner&&void 0===U)return"notification";const e=z.text??"";return(z.enabled??!1)&&e&&!s.announcementDismissed?"announcement":null},[Mt,Et,S,E,qe,Qt,Nt,s.isMessageLimitDismissed,i.permissionMode,s.skipPermissionsWarningDismissed,s.showNotificationBanner,U,z,s.announcementDismissed]),en=de.useCallback(async()=>{const e=Ke.some(e=>!e.error);if((o.inputText.trim()||e)&&!Ct&&(I||O)){let e=o.inputText.trim();if(e.startsWith("/")){const t=e.slice(1).split(" ")[0],n=e.slice(1+t.length).trim(),r=await be.getPromptByCommand(t);r?(Ge?.track("claude_chrome.chat.system_command_executed",{sessionId:o.sessionId||"",commandName:t,commandType:"shortcut"}),e=r.prompt,n&&(e=e+" "+n)):Hn(t)&&Ge?.track("claude_chrome.chat.system_command_executed",{sessionId:o.sessionId||"",commandName:t,commandType:"system"})}const t=Ke.filter(e=>!e.error).map(e=>{let t="image/jpeg";return"image/png"===e.file.type?t="image/png":"image/gif"===e.file.type?t="image/gif":"image/webp"===e.file.type&&(t="image/webp"),{base64:e.base64,mediaType:t,id:e.id}});o.setInputText(""),rt();const n=Ke.some(e=>e.isAnnotated);await ft(e,t,n)}},[Ke,Ct,I,O,Ge,rt,ft,o]),tn=de.useCallback(async(e,t)=>{if(!i.permissionPrompt||!Se.current)return;if(i.permissionPrompt.tool===ke.REMOTE_MCP&&i.permissionPrompt.actionData?.remoteMcp&&e===_e.ALWAYS)try{const e=i.permissionPrompt.actionData.remoteMcp.alwaysApprovedKey,t=d?.enabled_mcp_tools||{};await Vn({enabled_mcp_tools:{...t,[e]:!0}}),await h()}catch(n){}await q.grantPermission(t,e,e===_e.ONCE?i.permissionPrompt.toolUseId:void 0),Se.current(!0),Se.current=null,i.setPermissionPrompt(null),J&&Ct&&ze.addLoadingPrefix(J).catch(()=>{})},[d,h,q,J,Ct,i]),nn=de.useCallback(()=>{Se.current&&(Se.current(!1),Se.current=null,i.setPermissionPrompt(null))},[i]);!function({tabId:e,isSecondaryTab:t,isAgentRunning:n,cancel:r,handlePermissionDeny:s,sessionHistory:i,sessionStore:o,permissionStore:a,sendMessage:l,setSelectedModel:c,addAttachment:u,clearAttachments:d,anthropicApiKey:h,authToken:p,hasBrowserControlPermission:f}){de.useEffect(()=>{if(!o.existingConversationUuidToLoad||0===i.sessions.length)return;if(o.existingSessionIdToLoad)return;const e=i.sessions.find(e=>e.uuid===o.existingConversationUuidToLoad);e&&(o.setExistingSessionIdToLoad(e.session_id??void 0),i.setActiveSessionId(e.session_id))},[o.existingConversationUuidToLoad,o.existingSessionIdToLoad,o.setExistingSessionIdToLoad,i,o]),de.useEffect(()=>{const m=(m,g,y)=>{if("PING_SIDEPANEL"===m.type)return y({success:!0,tabId:e}),!0;if("MAIN_TAB_ACK_REQUEST"===m.type)return e!==m.mainTabId||t||(chrome.runtime.sendMessage({type:"MAIN_TAB_ACK_RESPONSE",secondaryTabId:m.secondaryTabId,mainTabId:e,success:!0}),y({success:!0})),!0;if("STOP_AGENT"===m.type)return n&&r(),s(),y({success:!0}),!0;if("EXECUTE_TASK"===m.type){const t=new URLSearchParams(window.location.search),r="window"===t.get("mode"),s=t.get("sessionId");if(r&&s){if(m.windowSessionId!==s)return}else{if(r||m.windowSessionId)return;if(m.targetTabId&&e&&e!==m.targetTabId)return}"true"===t.get("skipPermissions")&&a.setPermissionMode("skip_all_permission_checks");const i=m.isScheduledTask&&m.taskName?`[Scheduled Task: ${m.taskName}]\n${m.prompt}`:m.prompt;return!n&&(h||p)&&i.trim()&&(o.setInputText(""),l(i)),y({success:!0}),!0}if("POPULATE_INPUT_TEXT"===m.type){const e=m.prompt||"";o.setInputText(e),o.setPendingPrompt(e),m.permissionMode&&a.setPermissionMode(m.permissionMode),m.selectedModel&&c(m.selectedModel);const t=[];let r=!1;if(m.attachments&&m.attachments.length>0)for(const n of m.attachments)try{const e=atob(n.base64),s=new Uint8Array(e.length);for(let t=0;t<e.length;t++)s[t]=e.charCodeAt(t);const i=new Blob([s],{type:n.mediaType}),o=new File([i],n.fileName,{type:n.mediaType}),a={id:n.id,file:o,base64:n.base64,url:`data:${n.mediaType};base64,${n.base64}`,isAnnotated:n.isAnnotated};u(a),t.push({base64:n.base64,mediaType:n.mediaType,id:n.id}),n.isAnnotated&&(r=!0)}catch(Mt){}setTimeout(()=>{!n&&(h||p)&&e.trim()&&f&&(o.setInputText(""),o.setPendingPrompt(null),d(),l(e,t.length>0?t:void 0,r))},500),y({success:!0})}else if("LOAD_CONVERSATION"===m.type){if(m.conversationUuid){o.setExistingConversationUuidToLoad(m.conversationUuid);const e=i.sessions.find(e=>e.uuid===m.conversationUuid);e&&(o.setExistingSessionIdToLoad(e.session_id??void 0),i.setActiveSessionId(e.session_id))}y({success:!0})}};return chrome.runtime.onMessage.addListener(m),()=>{chrome.runtime.onMessage.removeListener(m)}},[i,o,e,t,n,r,s,h,p,l,a,c,u,d,f])}({tabId:J,isSecondaryTab:Ce,isAgentRunning:Ct,cancel:xt,handlePermissionDeny:nn,sessionHistory:V,sessionStore:o,permissionStore:i,sendMessage:ft,setSelectedModel:M,addAttachment:st,clearAttachments:rt,anthropicApiKey:O,authToken:I,hasBrowserControlPermission:ye});const rn=de.useCallback(()=>{nn();const e=()=>{vt();o.generateNewSessionId();k(new Map),s.resetOnSessionClear(),setTimeout(()=>{Ie.current?.focus()},50)};Ct?(xt(),setTimeout(e,100)):e()},[Ct,xt,vt,nn,k,o,s]),sn=de.useCallback(async e=>{if(e===V.activeSessionId)return;Ct&&xt(),vt();const t=V.sessions.find(t=>t.session_id===e);if(o.setExistingSessionIdToLoad(e),o.setExistingConversationUuidToLoad(t?.uuid),V.setActiveSessionId(e),t?.session_id)try{const e=await V.getSessionModel(t.session_id)||await A(_);e&&(M(e),T.current=!1)}catch(n){}},[V,Ct,xt,vt,A,_,o,M,T]),on=de.useCallback(()=>{rn(),V.setActiveSessionId(null),o.setExistingSessionIdToLoad(void 0),o.setExistingConversationUuidToLoad(void 0)},[rn,V,o]),an=de.useCallback(async e=>{const t=V.sessions.find(t=>t.uuid===e);await V.deleteConversationById(e),t?.session_id===V.activeSessionId&&on()},[V,on]),ln=de.useCallback(async(e,t)=>{u?.organization?.uuid&&(await $n({organizationUuid:u.organization.uuid,conversationUuid:e,name:t}),await V.refreshSessions())},[u?.organization?.uuid,V]),cn=de.useCallback(async()=>{await Z("enabled"),s.setShowNotificationBanner(!1)},[Z,s]),un=de.useCallback(async()=>{s.setShowNotificationBanner(!1),await Z("disabled")},[Z,s]),dn=de.useCallback(async()=>{const e=z.id??"";s.setAnnouncementDismissed(!0),await ge(me.ANNOUNCEMENT_DISMISSED,e)},[z,s]),hn=de.useCallback(async e=>{try{if(null!==x&&x>=0){const e=new Map(w);e.set(x,g),k(e)}Ge?.track("claude_chrome.chat.feedback",{...e,sessionId:o.sessionId,permissions:i.permissionMode})}catch(t){}},[x,w,k,g,Ge,o.sessionId,i.permissionMode]),pn=de.useCallback(e=>{y("positive"),v(e),C(null),m(!0)},[y,v,C,m]),fn=de.useCallback(e=>{y("negative"),v(e),C(null),m(!0)},[y,v,C,m]),mn=de.useCallback(e=>{const t=E.modelFallbacks?.[S];if(t){_.some(t=>("string"==typeof t?t:t.model)===e)||j([..._,{model:t.fallbackModelName,name:t.fallbackDisplayName}])}M(e),N.current=e,T.current=!0,mt()},[E.modelFallbacks,S,_,j,mt,M,N,T]),gn=de.useCallback(()=>{y("negative"),v(null),C("sc/false_positive"),m(!0)},[y,v,C,m]),yn=de.useCallback(e=>{T.current||L(e)},[L,T]);if("true"===new URLSearchParams(window.location.search).get("mcpPermissionOnly"))return he.jsx(ZH,{permissionPrompt:i.permissionPrompt,onAllow:tn,onDeny:nn,disableAlwaysAllow:ue});if(R)return he.jsx(Y,{});if(lt.isBlocked)return he.jsx(YH,{currentVersion:lt.currentVersion,minSupportedVersion:lt.minSupportedVersion||""});if(D)return he.jsx(IH,{});if(!ye)return he.jsx(KH,{onAccept:()=>{ge(me.BROWSER_CONTROL_PERMISSION_ACCEPTED,!0).then(()=>{xe(!0),o.pendingPrompt&&setTimeout(()=>{ft(o.pendingPrompt),o.setPendingPrompt(null),o.setInputText("")},100)})}});if(Ce&&we&&!a)return he.jsx(gV,{mainTabId:we,onSwitchToMainTab:()=>{}});const xn=se.blockedTabs.some(e=>e.tabId!==J&&("category1"===e.category||"category2"===e.category||"category_org_blocked"===e.category)),vn=se.blockedTabs.find(e=>e.tabId===J)?.category||ne;return ae||xn?he.jsx(XH,{isMainTabBlocked:se.isMainTabBlocked,category:vn}):he.jsxs("div",{className:"relative h-screen","data-theme":"claude",children:[he.jsx(iV,{isActive:"skip_all_permission_checks"===i.permissionMode}),Pt&&Rt.isRecording&&he.jsx("div",{className:"fixed top-12 left-4 right-4 z-50 bg-red-100 text-red-700 p-2 rounded text-sm",children:Pt}),Rt.isRecording&&Ut&&!Zt&&he.jsxs("div",{className:"fixed top-12 left-4 right-4 z-50 bg-yellow-100 text-yellow-800 p-2 rounded text-sm flex items-center gap-2",children:[he.jsx(rs,{size:12}),he.jsx("span",{children:he.jsx(r,{defaultMessage:"<link>Enable microphone</link> for voice narration. Recording workflow without speech.",id:"ECOs1wUY9P",values:{link:e=>he.jsx("button",{onClick:()=>chrome.runtime.openOptionsPage(),className:"inline-link hover:no-underline cursor-pointer",children:e})}})})]}),he.jsxs("div",{className:"flex flex-col h-screen bg-bg-100 relative overflow-hidden",children:[!Rt.isRecording&&!s.showWorkflowModeSelectionModal&&he.jsx(NV,{showModelSelector:!0,selectedModel:S,onModelChange:M,modelConfig:E,availableModelOptions:_,handleStickyModelChange:yn,useSessionsAPI:Lt??!1,onNewConversation:on,onClearChat:rn,onSessionsToggle:e=>{on(),Ot(e)},sessions:V.sessions,activeSessionId:V.activeSessionId,onSelectSession:sn,onConversationDelete:an,onConversationRename:ln,isLoadingSessions:V.isLoading,onLoadMoreSessions:V.loadMore,hasMoreSessions:V.hasMore,onConvertToScheduledTask:Kt,isConvertingToTask:qt,isAgentRunning:Ct,onOpenOptions:()=>chrome.runtime.openOptionsPage(),hasMessages:ht.length>0}),s.showWorkflowModeSelectionModal?he.jsx(OV,{isOpen:!0,onVoiceOver:async()=>{s.setShowWorkflowModeSelectionModal(!1),await zt(!0)},onClose:()=>s.setShowWorkflowModeSelectionModal(!1),currentUrl:X,pageTitle:te,hasMicrophonePermission:Zt}):Rt.isRecording?he.jsx(LV,{recordingState:Rt,isSpeechRecording:$t,isSpeechSupported:Ut,hasSpeechPermission:Zt,currentInterimTranscript:Bt,onStop:Ft,onTogglePause:Ht,onToggleSpeech:Wt,onRemoveStep:Vt,onSave:(e,t)=>{o.setPromptToSave({prompt:t}),Ft()},createMessage:jt,isGeneratingSummary:s.isGeneratingSummary,setIsGeneratingSummary:s.setIsGeneratingSummary,currentUrl:X,pageTitle:te}):he.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[he.jsx(Vx,{messages:ht,messageGroups:Dt,messageHistory:pt,isAgentRunning:Ct,isCompacting:St,isInitializing:wt,showConversionError:Jt,conversionError:Gt,hasPermissionPrompt:!!i.permissionPrompt,currentStatus:Tt,tokensSaved:_t,isDarkMode:t,tabId:J,autoScrollRef:Re,scrollRefs:We,sentinelRef:Ze,submittedFeedback:w,onThumbsUp:pn,onThumbsDown:fn,onSavePrompt:e=>o.setPromptToSave({prompt:e}),onEditShortcut:async e=>{const t=await be.getPromptById(e);t&&o.setPromptToEdit(t)},onComputerFileClick:Yt,onPromptClick:e=>{o.setInputText(e),setTimeout(()=>{Ie.current&&(Ie.current.style.height="auto",Ie.current.style.height=`${Ie.current.scrollHeight}px`,Ie.current.focus())},0)},children:he.jsx(nH,{inputText:o.inputText,setInputText:o.setInputText,attachments:Ke,isUploading:Ye,uploadingCount:Qe,hasBlockingWarning:s.hasBlockingWarning,chromeExtEligibility:qe,permissionMode:i.permissionMode,setPermissionMode:i.setPermissionMode,supportedPermissionModes:It,canSkipPermissions:!0,shouldDisableSkipPermissions:ce,messages:ht,isAgentRunning:Ct,recordingState:Rt,isSpeechRecording:$t,isSpeechSupported:Ut,hasSpeechPermission:Zt,isGeneratingSummary:s.isGeneratingSummary,setIsGeneratingSummary:s.setIsGeneratingSummary,handleDrop:et,handlePaste:tt,handleFiles:Xe,removeAttachment:nt,handleSend:en,cancel:xt,captureSelection:ot,sendMessage:ft,stopRecording:Ft,togglePause:Ht,toggleSpeechRecording:Wt,setShowWorkflowModeSelectionModal:s.setShowWorkflowModeSelectionModal,setPromptToSave:o.setPromptToSave,setPromptToEdit:o.setPromptToEdit,activeBanner:Xt,messageStopWarning:Qt,error:Mt,onRetryError:Mt?mt:void 0,onClearError:bt,messageLimit:Nt,lastStopReason:Et,selectedModel:S,modelConfig:E,skipPermissionsWarningDismissed:s.skipPermissionsWarningDismissed,setSkipPermissionsWarningDismissed:s.setSkipPermissionsWarningDismissed,isMessageLimitDismissed:s.isMessageLimitDismissed,setIsMessageLimitDismissed:s.setIsMessageLimitDismissed,showNotificationBanner:s.showNotificationBanner,notificationsEnabled:U,announcementConfig:z,announcementDismissed:s.announcementDismissed,handleEnableNotifications:cn,handleDismissNotificationBanner:un,handleDismissAnnouncement:dn,handleRetryWithFallback:mn,handleSendFeedbackForRefusal:gn,recordWorkflowEnabled:!0,isCapturing:it,currentUrl:X,useSessionsAPI:Lt??!1,autoScrollRef:Re,sentinelRef:Ze,isStreaming:Ct,fileInputRef:Pe,chatInputContainerRef:De,analytics:Ge,createAnthropicMessage:jt})}),i.permissionPrompt&&he.jsx("div",{ref:at,className:"absolute bottom-0 left-0 right-0 z-[10] "+((Re.current?.getScrollContainer()?.scrollHeight??0)>(Re.current?.getScrollContainer()?.clientHeight??0)?"pr-2":""),children:he.jsxs("div",{className:"mx-auto max-w-3xl md:px-2",children:[he.jsx("div",{className:"mx-3 md:mx-0 border border-border-300 rounded-[14px] shadow-[0_4px_20px_0_rgba(0,0,0,0.04)] bg-bg-100",children:he.jsx($H,{tool:i.permissionPrompt.tool,url:i.permissionPrompt.url,screenshot:i.permissionPrompt.actionData?.screenshot,coordinate:i.permissionPrompt.actionData?.coordinate,typeText:i.permissionPrompt.actionData?.text,uploadImageData:i.permissionPrompt.actionData?.imageId?(()=>{const e=gt(ht,i.permissionPrompt.actionData.imageId);return e?`data:image/png;base64,${e.base64}`:void 0})():void 0,plan:i.permissionPrompt.actionData?.plan,fromDomain:i.permissionPrompt.actionData?.fromDomain,toDomain:i.permissionPrompt.actionData?.toDomain,actionData:i.permissionPrompt.actionData,onAllow:tn,onDeny:nn,disableAlwaysAllow:ue})}),he.jsx("div",{className:"bg-bg-100 h-3"})]})})]}),f&&he.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 flex justify-center px-3 pb-3",children:he.jsx("div",{className:"w-full max-w-3xl border border-border-300 rounded-[14px] bg-bg-100",children:he.jsx(rV,{onClose:()=>{m(!1),C(null)},onSubmit:hn,feedbackType:g,message:null!==x?ht[x]:null,hardcodedType:b,messageId:b?Et?.messageId:null})})}),he.jsx(eV,{isOpen:s.showSkipPermissionsOverlay,onClose:()=>s.setShowSkipPermissionsOverlay(!1),onConfirm:async()=>{if(!ce){if(i.permissionPrompt&&"permission_required"===i.permissionPrompt.type){const{host:e}=new URL(i.permissionPrompt.url),t={type:"netloc",netloc:e};tn(_e.ONCE,t)}i.setPermissionMode("skip_all_permission_checks")}}}),he.jsx(tV,{isOpen:s.showAntBuildUpsell,onClose:()=>s.setShowAntBuildUpsell(!1)}),(null!==o.promptToSave||null!==o.promptToEdit)&&he.jsx(aV,{prompt:o.promptToEdit||o.promptToSave||void 0,sessionId:o.sessionId,currentModel:S,onClose:()=>{o.setPromptToSave(null),o.setPromptToEdit(null)},onSave:e=>{o.promptToSave?(o.setPromptToSave(null),o.setInputText(`/${e}`),s.setShowCommandMenu(!0),s.setCommandSearchTerm(e),setTimeout(()=>{if(Ie.current){Ie.current.focus();const e=Ie.current.value.length;Ie.current.setSelectionRange(e,e)}},50)):o.setPromptToEdit(null)},onDelete:()=>o.setPromptToEdit(null),generateName:async e=>{try{return await Bn(e,e=>jt(e,void 0,"generate_shortcut_name"))}catch(t){return""}}}),!1,he.jsx(mV,{organizationUuid:u?.organization?.uuid})]})]})}Xn(),er(),sr(),ce.createRoot(document.getElementById("root")).render(he.jsx(xe.StrictMode,{children:he.jsx(ue,{pageName:"Side Panel",children:he.jsx(RV,{})})}));export{ps as S,Ul as a,al as b,as as c,iu as f,Gl as h,of as l,Qc as m,gl as n,il as o,Kl as p,Jl as s,fs as v};
