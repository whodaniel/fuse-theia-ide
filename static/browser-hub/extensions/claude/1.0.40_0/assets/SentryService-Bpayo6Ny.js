import{p as t,a as e,h as n,L as r,P as i,g as s,S as o,s as a}from"./permissions-BsMI2TUG.js";var c="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},u="1.9.0",l=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var d=function(t){var e=new Set([t]),n=new Set,r=t.match(l);if(!r)return function(){return!1};var i=+r[1],s=+r[2],o=+r[3];if(null!=r[4])return function(e){return e===t};function a(t){return n.add(t),!1}function c(t){return e.add(t),!0}return function(t){if(e.has(t))return!0;if(n.has(t))return!1;var r=t.match(l);if(!r)return a(t);var u=+r[1],d=+r[2],h=+r[3];return null!=r[4]||i!==u?a(t):0===i?s===d&&o<=h?c(t):a(t):s<=d?c(t):a(t)}}(u),h=u.split(".")[0],p=Symbol.for("opentelemetry.js.api."+h),m=c;function f(t,e,n,r){var i;void 0===r&&(r=!1);var s=m[p]=null!==(i=m[p])&&void 0!==i?i:{version:u};if(!r&&s[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(o.stack||o.message),!1}if(s.version!==u){o=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+u);return n.error(o.stack||o.message),!1}return s[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+u+"."),!0}function g(t){var e,n,r=null===(e=m[p])||void 0===e?void 0:e.version;if(r&&d(r))return null===(n=m[p])||void 0===n?void 0:n[t]}function _(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+u+".");var n=m[p];n&&delete n[t]}var v,b,y=function(){function t(t){this._namespace=t.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("debug",this._namespace,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("error",this._namespace,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("info",this._namespace,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("warn",this._namespace,t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w("verbose",this._namespace,t)},t}();function w(t,e,n){var r=g("diag");if(r)return n.unshift(e),r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(n),!1))}(b=v||(v={}))[b.NONE=0]="NONE",b[b.ERROR=30]="ERROR",b[b.WARN=50]="WARN",b[b.INFO=60]="INFO",b[b.DEBUG=70]="DEBUG",b[b.VERBOSE=80]="VERBOSE",b[b.ALL=9999]="ALL";var S=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=g("diag");if(r)return r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(e),!1))}}var e=this;e.setLogger=function(t,n){var r,i,s;if(void 0===n&&(n={logLevel:v.INFO}),t===e){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return e.error(null!==(r=o.stack)&&void 0!==r?r:o.message),!1}"number"==typeof n&&(n={logLevel:n});var a=g("diag"),c=function(t,e){function n(n,r){var i=e[n];return"function"==typeof i&&t>=r?i.bind(e):function(){}}return t<v.NONE?t=v.NONE:t>v.ALL&&(t=v.ALL),e=e||{},{error:n("error",v.ERROR),warn:n("warn",v.WARN),info:n("info",v.INFO),debug:n("debug",v.DEBUG),verbose:n("verbose",v.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:v.INFO,t);if(a&&!n.suppressOverrideMessage){var u=null!==(s=(new Error).stack)&&void 0!==s?s:"<failed to generate stacktrace>";a.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return f("diag",c,e,!0)},e.disable=function(){_("diag",e)},e.createComponentLogger=function(t){return new y(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),x=function(){function t(t){this._entries=t?new Map(t):new Map}return t.prototype.getEntry=function(t){var e=this._entries.get(t);if(e)return Object.assign({},e)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(t,2);return[e[0],e[1]]})},t.prototype.setEntry=function(e,n){var r=new t(this._entries);return r._entries.set(e,n),r},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=new t(this._entries);try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=o.next();!a.done;a=o.next()){var c=a.value;s._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return s},t.prototype.clear=function(){return new t},t}(),E=Symbol("BaggageEntryMetadata"),T=S.instance();function A(t){return void 0===t&&(t={}),new x(new Map(Object.entries(t)))}function C(t){return Symbol.for(t)}var P,O,k=new(function(){return function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(t){return n._currentContext.get(t)},n.setValue=function(e,r){var i=new t(n._currentContext);return i._currentContext.set(e,r),i},n.deleteValue=function(e){var r=new t(n._currentContext);return r._currentContext.delete(e),r}}}()),L=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],M=function(){return function(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(console){var r=console[t];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,e)}}}for(var e=0;e<L.length;e++)this[L[e].n]=t(L[e].c)}}(),R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(){function t(){}return t.prototype.createGauge=function(t,e){return W},t.prototype.createHistogram=function(t,e){return q},t.prototype.createCounter=function(t,e){return H},t.prototype.createUpDownCounter=function(t,e){return K},t.prototype.createObservableGauge=function(t,e){return Y},t.prototype.createObservableCounter=function(t,e){return X},t.prototype.createObservableUpDownCounter=function(t,e){return J},t.prototype.addBatchObservableCallback=function(t,e){},t.prototype.removeBatchObservableCallback=function(t){},t}(),I=function(){return function(){}}(),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.add=function(t,e){},e}(I),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.add=function(t,e){},e}(I),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.record=function(t,e){},e}(I),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype.record=function(t,e){},e}(I),B=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.removeCallback=function(t){},t}(),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e}(B),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e}(B),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e}(B),V=new N,H=new D,W=new $,q=new j,K=new U,X=new F,Y=new G,J=new z;(O=P||(P={}))[O.INT=0]="INT",O[O.DOUBLE=1]="DOUBLE";var Q,Z,tt={get:function(t,e){if(null!=t)return t[e]},keys:function(t){return null==t?[]:Object.keys(t)}},et={set:function(t,e,n){null!=t&&(t[e]=n)}},nt=function(){function t(){}return t.prototype.active=function(){return k},t.prototype.with=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),rt="context",it=new nt,st=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return f(rt,t,S.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t,e,n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}(i),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return g(rt)||it},t.prototype.disable=function(){this._getContextManager().disable(),_(rt,S.instance())},t}();(Z=Q||(Q={}))[Z.NONE=0]="NONE",Z[Z.SAMPLED=1]="SAMPLED";var ot="0000000000000000",at="00000000000000000000000000000000",ct={traceId:at,spanId:ot,traceFlags:Q.NONE},ut=function(){function t(t){void 0===t&&(t=ct),this._spanContext=t}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(t,e){return this},t.prototype.setAttributes=function(t){return this},t.prototype.addEvent=function(t,e){return this},t.prototype.addLink=function(t){return this},t.prototype.addLinks=function(t){return this},t.prototype.setStatus=function(t){return this},t.prototype.updateName=function(t){return this},t.prototype.end=function(t){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(t,e){},t}(),lt=C("OpenTelemetry Context Key SPAN");function dt(t){return t.getValue(lt)||void 0}function ht(){return dt(st.getInstance().active())}function pt(t,e){return t.setValue(lt,e)}function mt(t){return t.deleteValue(lt)}function ft(t,e){return pt(t,new ut(e))}function gt(t){var e;return null===(e=dt(t))||void 0===e?void 0:e.spanContext()}var _t=/^([0-9a-f]{32})$/i,vt=/^[0-9a-f]{16}$/i;function bt(t){return _t.test(t)&&t!==at}function yt(t){return bt(t.traceId)&&(e=t.spanId,vt.test(e)&&e!==ot);var e}function wt(t){return new ut(t)}var St=st.getInstance(),xt=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=St.active()),Boolean(null==e?void 0:e.root))return new ut;var r,i=n&&gt(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&yt(i)?new ut(i):new ut},t.prototype.startActiveSpan=function(t,e,n,r){var i,s,o;if(!(arguments.length<2)){2===arguments.length?o=e:3===arguments.length?(i=e,o=n):(i=e,s=n,o=r);var a=null!=s?s:St.active(),c=this.startSpan(t,i,a),u=pt(a,c);return St.with(u,o,void 0,c)}},t}();var Et,Tt,At,Ct,Pt,Ot,kt=new xt,Lt=function(){function t(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}return t.prototype.startSpan=function(t,e,n){return this._getTracer().startSpan(t,e,n)},t.prototype.startActiveSpan=function(t,e,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):kt},t}(),Mt=new(function(){function t(){}return t.prototype.getTracer=function(t,e,n){return new xt},t}()),Rt=function(){function t(){}return t.prototype.getTracer=function(t,e,n){var r;return null!==(r=this.getDelegateTracer(t,e,n))&&void 0!==r?r:new Lt(this,t,e,n)},t.prototype.getDelegate=function(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Mt},t.prototype.setDelegate=function(t){this._delegate=t},t.prototype.getDelegateTracer=function(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(t,e,n)},t}();(Tt=Et||(Et={}))[Tt.NOT_RECORD=0]="NOT_RECORD",Tt[Tt.RECORD=1]="RECORD",Tt[Tt.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(Ct=At||(At={}))[Ct.INTERNAL=0]="INTERNAL",Ct[Ct.SERVER=1]="SERVER",Ct[Ct.CLIENT=2]="CLIENT",Ct[Ct.PRODUCER=3]="PRODUCER",Ct[Ct.CONSUMER=4]="CONSUMER",(Ot=Pt||(Pt={}))[Ot.UNSET=0]="UNSET",Ot[Ot.OK=1]="OK",Ot[Ot.ERROR=2]="ERROR";var Nt=st.getInstance(),It=S.instance(),Dt=new(function(){function t(){}return t.prototype.getMeter=function(t,e,n){return V},t}()),Ut="metrics",$t=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(t){return f(Ut,t,S.instance())},t.prototype.getMeterProvider=function(){return g(Ut)||Dt},t.prototype.getMeter=function(t,e,n){return this.getMeterProvider().getMeter(t,e,n)},t.prototype.disable=function(){_(Ut,S.instance())},t}().getInstance(),jt=function(){function t(){}return t.prototype.inject=function(t,e){},t.prototype.extract=function(t,e){return t},t.prototype.fields=function(){return[]},t}(),Bt=C("OpenTelemetry Baggage Key");function Ft(t){return t.getValue(Bt)||void 0}function Gt(){return Ft(st.getInstance().active())}function zt(t,e){return t.setValue(Bt,e)}function Vt(t){return t.deleteValue(Bt)}var Ht="propagation",Wt=new jt,qt=function(){function t(){this.createBaggage=A,this.getBaggage=Ft,this.getActiveBaggage=Gt,this.setBaggage=zt,this.deleteBaggage=Vt}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(t){return f(Ht,t,S.instance())},t.prototype.inject=function(t,e,n){return void 0===n&&(n=et),this._getGlobalPropagator().inject(t,e,n)},t.prototype.extract=function(t,e,n){return void 0===n&&(n=tt),this._getGlobalPropagator().extract(t,e,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){_(Ht,S.instance())},t.prototype._getGlobalPropagator=function(){return g(Ht)||Wt},t}().getInstance(),Kt="trace",Xt=function(){function t(){this._proxyTracerProvider=new Rt,this.wrapSpanContext=wt,this.isSpanContextValid=yt,this.deleteSpan=mt,this.getSpan=dt,this.getActiveSpan=ht,this.getSpanContext=gt,this.setSpan=pt,this.setSpanContext=ft}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(t){var e=f(Kt,this._proxyTracerProvider,S.instance());return e&&this._proxyTracerProvider.setDelegate(t),e},t.prototype.getTracerProvider=function(){return g(Kt)||this._proxyTracerProvider},t.prototype.getTracer=function(t,e){return this.getTracerProvider().getTracer(t,e)},t.prototype.disable=function(){_(Kt,S.instance()),this._proxyTracerProvider=new Rt},t}().getInstance();let Yt=class{emit(t){}};const Jt=new Yt;const Qt=new class{getLogger(t,e,n){return new Yt}};let Zt=class{constructor(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Jt}},te=class{getLogger(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new Zt(this,t,e,n)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Qt}setDelegate(t){this._delegate=t}getDelegateLogger(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)}};const ee="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},ne=Symbol.for("io.opentelemetry.js.api.logs"),re=ee;const ie=class t{constructor(){this._proxyLoggerProvider=new te}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(t){return re[ne]?this.getLoggerProvider():(re[ne]=(e=1,n=t,r=Qt,t=>t===e?n:r),this._proxyLoggerProvider.setDelegate(t),t);var e,n,r}getLoggerProvider(){var t,e;return null!==(e=null===(t=re[ne])||void 0===t?void 0:t.call(re,1))&&void 0!==e?e:this._proxyLoggerProvider}getLogger(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)}disable(){delete re[ne],this._proxyLoggerProvider=new te}}.getInstance();const se="service.name",oe="telemetry.sdk.language",ae="telemetry.sdk.name",ce="telemetry.sdk.version",ue="process.runtime.name",le={[ae]:"opentelemetry",[ue]:"browser",[oe]:"webjs",[ce]:"2.0.1"};const de=t=>null!==t&&"object"==typeof t&&"function"==typeof t.then;class he{_rawAttributes;_asyncAttributesPending=!1;_memoizedAttributes;static FromAttributeList(t){const e=new he({});return e._rawAttributes=ge(t),e._asyncAttributesPending=t.filter(([t,e])=>de(e)).length>0,e}constructor(t){const e=t.attributes??{};this._rawAttributes=Object.entries(e).map(([t,e])=>(de(e)&&(this._asyncAttributesPending=!0),[t,e])),this._rawAttributes=ge(this._rawAttributes)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let t=0;t<this._rawAttributes.length;t++){const[e,n]=this._rawAttributes[t];this._rawAttributes[t]=[e,de(n)?await n:n]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&It.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const t={};for(const[e,n]of this._rawAttributes)de(n)?It.debug(`Unsettled resource attribute ${e} skipped`):null!=n&&(t[e]??=n);return this._asyncAttributesPending||(this._memoizedAttributes=t),t}getRawAttributes(){return this._rawAttributes}merge(t){return null==t?this:he.FromAttributeList([...t.getRawAttributes(),...this.getRawAttributes()])}}function pe(t){return he.FromAttributeList(Object.entries(t))}function me(){return pe({})}function fe(){return pe({[se]:"unknown_service",[oe]:le[oe],[ae]:le[ae],[ce]:le[ce]})}function ge(t){return t.map(([t,e])=>de(e)?[t,e.catch(e=>{It.debug("promise rejection for resource attribute: %s - %s",t,e)})]:[t,e])}const _e=(t={})=>(t.detectors||[]).map(e=>{try{const r=(n=e.detect(t),new he(n));return It.debug(`${e.constructor.name} found resource.`,r),r}catch(r){return It.debug(`${e.constructor.name} failed: ${r.message}`),me()}var n}).reduce((t,e)=>t.merge(e),me()),ve=C("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function be(t){const e={};if("object"!=typeof t||null==t)return e;for(const[n,r]of Object.entries(t))ye(n)?we(r)?Array.isArray(r)?e[n]=r.slice():e[n]=r:It.warn(`Invalid attribute value set for key: ${n}`):It.warn(`Invalid attribute key: ${n}`);return e}function ye(t){return"string"==typeof t&&t.length>0}function we(t){return null==t||(Array.isArray(t)?function(t){let e;for(const n of t)if(null!=n){if(!e){if(Se(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}(t):Se(t))}function Se(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}let xe=t=>{It.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){const e={};let n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(t=>{if(e[t])return;const r=n[t];r&&(e[t]=String(r))}),n=Object.getPrototypeOf(n);return e}(t))}(t))};function Ee(t){try{xe(t)}catch{}}const Te=performance,Ae="exception.message",Ce="exception.type";const Pe=Math.pow(10,6),Oe=Math.pow(10,9);function ke(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*Pe)]}function Le(){let t=Te.timeOrigin;if("number"!=typeof t){const e=Te;t=e.timing&&e.timing.fetchStart}return t}function Me(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function Re(t){return Me(t)||"number"==typeof t||t instanceof Date}function Ne(t,e){const n=[t[0]+e[0],t[1]+e[1]];return n[1]>=Oe&&(n[1]-=Oe,n[0]+=1),n}var Ie,De;(De=Ie||(Ie={}))[De.SUCCESS=0]="SUCCESS",De[De.FAILED=1]="FAILED";const Ue="[object Null]",$e="[object Undefined]",je=Function.prototype.toString,Be=je.call(Object),Fe=Object.getPrototypeOf,Ge=Object.prototype,ze=Ge.hasOwnProperty,Ve=Symbol?Symbol.toStringTag:void 0,He=Ge.toString;function We(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!==function(t){if(null==t)return void 0===t?$e:Ue;return Ve&&Ve in Object(t)?function(t){const e=ze.call(t,Ve),n=t[Ve];let r=!1;try{t[Ve]=void 0,r=!0}catch(s){}const i=He.call(t);r&&(e?t[Ve]=n:delete t[Ve]);return i}(t):function(t){return He.call(t)}(t)}(t))return!1;const e=Fe(t);if(null===e)return!0;const n=ze.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&je.call(n)===Be}function qe(t){return Ye(t)?t.slice():t}function Ke(t,e,n=0,r){let i;if(!(n>20)){if(n++,Ze(t)||Ze(e)||Je(e))i=qe(e);else if(Ye(t)){if(i=t.slice(),Ye(e))for(let t=0,n=e.length;t<n;t++)i.push(qe(e[t]));else if(Qe(e)){const t=Object.keys(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r]=qe(e[r])}}}else if(Qe(t))if(Qe(e)){if(!function(t,e){if(!We(t)||!We(e))return!1;return!0}(t,e))return e;i=Object.assign({},t);const s=Object.keys(e);for(let o=0,a=s.length;o<a;o++){const a=s[o],c=e[a];if(Ze(c))void 0===c?delete i[a]:i[a]=c;else{const s=i[a],o=c;if(Xe(t,a,r)||Xe(e,a,r))delete i[a];else{if(Qe(s)&&Qe(o)){const n=r.get(s)||[],i=r.get(o)||[];n.push({obj:t,key:a}),i.push({obj:e,key:a}),r.set(s,n),r.set(o,i)}i[a]=Ke(i[a],c,n,r)}}}}else i=e;return i}}function Xe(t,e,n){const r=n.get(t[e])||[];for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.key===e&&n.obj===t)return!0}return!1}function Ye(t){return Array.isArray(t)}function Je(t){return"function"==typeof t}function Qe(t){return!Ze(t)&&!Ye(t)&&!Je(t)&&"object"==typeof t}function Ze(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}let tn=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}},en=class{_callback;_that;_isCalled=!1;_deferred=new tn;constructor(t,e){this._callback=t,this._that=e}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(t=>this._deferred.resolve(t),t=>this._deferred.reject(t))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}};class nn{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:Pt.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(t){const e=Date.now();this._spanContext=t.spanContext,this._performanceStartTime=Te.now(),this._performanceOffset=e-(this._performanceStartTime+Le()),this._startTimeProvided=null!=t.startTime,this._spanLimits=t.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=t.spanProcessor,this.name=t.name,this.parentSpanContext=t.parentSpanContext,this.kind=t.kind,this.links=t.links||[],this.startTime=this._getTime(t.startTime??e),this.resource=t.resource,this.instrumentationScope=t.scope,null!=t.attributes&&this.setAttributes(t.attributes),this._spanProcessor.onStart(this,t.context)}spanContext(){return this._spanContext}setAttribute(t,e){if(null==e||this._isSpanEnded())return this;if(0===t.length)return It.warn(`Invalid attribute key: ${t}`),this;if(!we(e))return It.warn(`Invalid attribute value set for key: ${t}`),this;const{attributeCountLimit:n}=this._spanLimits;return void 0!==n&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(e),this)}setAttributes(t){for(const[e,n]of Object.entries(t))this.setAttribute(e,n);return this}addEvent(t,e,n){if(this._isSpanEnded())return this;const{eventCountLimit:r}=this._spanLimits;if(0===r)return It.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==r&&this.events.length>=r&&(0===this._droppedEventsCount&&It.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Re(e)&&(Re(n)||(n=e),e=void 0);const i=be(e);return this.events.push({name:t,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(t){return this.links.push(t),this}addLinks(t){return this.links.push(...t),this}setStatus(t){return this._isSpanEnded()||(this.status={...t},null!=this.status.message&&"string"!=typeof t.message&&(It.warn(`Dropping invalid status.message of type '${typeof t.message}', expected 'string'`),delete this.status.message)),this}updateName(t){return this._isSpanEnded()||(this.name=t),this}end(t){this._isSpanEnded()?It.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(t),this._duration=function(t,e){let n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=Oe),[n,r]}(this.startTime,this.endTime),this._duration[0]<0&&(It.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&It.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this))}_getTime(t){if("number"==typeof t&&t<=Te.now())return e=t+this._performanceOffset,Ne(ke(Le()),ke("number"==typeof e?e:Te.now()));var e;if("number"==typeof t)return ke(t);if(t instanceof Date)return ke(t.getTime());if(Me(t))return t;if(this._startTimeProvided)return ke(Date.now());const n=Te.now()-this._performanceStartTime;return Ne(this.startTime,ke(n))}isRecording(){return!1===this._ended}recordException(t,e){const n={};"string"==typeof t?n[Ae]=t:t&&(t.code?n[Ce]=t.code.toString():t.name&&(n[Ce]=t.name),t.message&&(n[Ae]=t.message),t.stack&&(n["exception.stacktrace"]=t.stack)),n[Ce]||n[Ae]?this.addEvent("exception",n,e):It.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const t=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);It.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,t)}return this._ended}_truncateToLimitUtil(t,e){return t.length<=e?t:t.substring(0,e)}_truncateToSize(t){const e=this._attributeValueLengthLimit;return e<=0?(It.warn(`Attribute value limit must be positive, got ${e}`),t):"string"==typeof t?this._truncateToLimitUtil(t,e):Array.isArray(t)?t.map(t=>"string"==typeof t?this._truncateToLimitUtil(t,e):t):t}}var rn;!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(rn||(rn={}));class sn{shouldSample(){return{decision:rn.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class on{shouldSample(){return{decision:rn.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class an{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(t){this._root=t.root,this._root||(Ee(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new on),this._remoteParentSampled=t.remoteParentSampled??new on,this._remoteParentNotSampled=t.remoteParentNotSampled??new sn,this._localParentSampled=t.localParentSampled??new on,this._localParentNotSampled=t.localParentNotSampled??new sn}shouldSample(t,e,n,r,i,s){const o=Xt.getSpanContext(t);return o&&yt(o)?o.isRemote?o.traceFlags&Q.SAMPLED?this._remoteParentSampled.shouldSample(t,e,n,r,i,s):this._remoteParentNotSampled.shouldSample(t,e,n,r,i,s):o.traceFlags&Q.SAMPLED?this._localParentSampled.shouldSample(t,e,n,r,i,s):this._localParentNotSampled.shouldSample(t,e,n,r,i,s):this._root.shouldSample(t,e,n,r,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class cn{_ratio;_upperBound;constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(t,e){return{decision:bt(e)&&this._accumulate(e)<this._upperBound?rn.RECORD_AND_SAMPLED:rn.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return"number"!=typeof t||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let e=0;for(let n=0;n<t.length/8;n++){const r=8*n;e=(e^parseInt(t.slice(r,r+8),16))>>>0}return e}}function un(){return{sampler:ln(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function ln(){const t="parentbased_always_on";switch(t){case"always_on":return new on;case"always_off":return new sn;case"parentbased_always_on":return new an({root:new on});case"parentbased_always_off":return new an({root:new sn});case"traceidratio":return new cn(dn());case"parentbased_traceidratio":return new an({root:new cn(dn())});default:return It.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "parentbased_always_on".`),new an({root:new on})}}function dn(){return It.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1}const hn=1/0;class pn{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(t,e){this._exporter=t,this._maxExportBatchSize="number"==typeof e?.maxExportBatchSize?e.maxExportBatchSize:512,this._maxQueueSize="number"==typeof e?.maxQueueSize?e.maxQueueSize:2048,this._scheduledDelayMillis="number"==typeof e?.scheduledDelayMillis?e.scheduledDelayMillis:5e3,this._exportTimeoutMillis="number"==typeof e?.exportTimeoutMillis?e.exportTimeoutMillis:3e4,this._shutdownOnce=new en(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(It.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,e){}onEnd(t){this._shutdownOnce.isCalled||0!==(t.spanContext().traceFlags&Q.SAMPLED)&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&It.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(It.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,e)=>{const n=[];for(let r=0,i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);r<i;r++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(e)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((t,e)=>{const n=setTimeout(()=>{e(new Error("Timeout"))},this._exportTimeoutMillis);Nt.with(Nt.active().setValue(ve,!0),()=>{let r;this._finishedSpans.length<=this._maxExportBatchSize?(r=this._finishedSpans,this._finishedSpans=[]):r=this._finishedSpans.splice(0,this._maxExportBatchSize);const i=()=>this._exporter.export(r,r=>{clearTimeout(n),r.code===Ie.SUCCESS?t():e(r.error??new Error("BatchSpanProcessor: span export failed"))});let s=null;for(let t=0,e=r.length;t<e;t++){const e=r[t];e.resource.asyncAttributesPending&&e.resource.waitForAsyncAttributes&&(s??=[],s.push(e.resource.waitForAsyncAttributes()))}null===s?i():Promise.all(s).then(i,t=>{Ee(t),e(t)})})})}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{this._isExporting=!1,Ee(t)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),this._timer)}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}class mn extends pn{_visibilityChangeListener;_pageHideListener;constructor(t,e){super(t,e),this.onInit(e)}onInit(t){!0!==t?.disableAutoFlushOnDocumentHide&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush().catch(t=>{Ee(t)})},this._pageHideListener=()=>{this.forceFlush().catch(t=>{Ee(t)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}class fn{generateTraceId=_n(16);generateSpanId=_n(8)}const gn=Array(32);function _n(t){return function(){for(let e=0;e<2*t;e++)gn[e]=Math.floor(16*Math.random())+48,gn[e]>=58&&(gn[e]+=39);return String.fromCharCode.apply(null,gn.slice(0,2*t))}}class vn{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(t,e,n,r){const i=function(t){const e={sampler:ln()},n=un(),r=Object.assign({},n,e,t);return r.generalLimits=Object.assign({},n.generalLimits,t.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,t.spanLimits||{}),r}(e);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=e.idGenerator||new fn,this._resource=n,this._spanProcessor=r,this.instrumentationScope=t}startSpan(t,e={},n=Nt.active()){e.root&&(n=Xt.deleteSpan(n));const r=Xt.getSpan(n);if(!0===n.getValue(ve)){It.debug("Instrumentation suppressed, returning Noop Span");return Xt.wrapSpanContext(ct)}const i=r?.spanContext(),s=this._idGenerator.generateSpanId();let o,a,c;i&&Xt.isSpanContextValid(i)?(a=i.traceId,c=i.traceState,o=i):a=this._idGenerator.generateTraceId();const u=e.kind??At.INTERNAL,l=(e.links??[]).map(t=>({context:t.context,attributes:be(t.attributes)})),d=be(e.attributes),h=this._sampler.shouldSample(n,a,t,u,d,l);c=h.traceState??c;const p={traceId:a,spanId:s,traceFlags:h.decision===Et.RECORD_AND_SAMPLED?Q.SAMPLED:Q.NONE,traceState:c};if(h.decision===Et.NOT_RECORD){It.debug("Recording is off, propagating context in a non-recording span");return Xt.wrapSpanContext(p)}const m=be(Object.assign(d,h.attributes));return new nn({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:p,name:t,kind:u,links:l,parentSpanContext:o,attributes:m,startTime:e.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(t,e,n,r){let i,s,o;if(arguments.length<2)return;2===arguments.length?o=e:3===arguments.length?(i=e,o=n):(i=e,s=n,o=r);const a=s??Nt.active(),c=this.startSpan(t,i,a),u=Xt.setSpan(a,c);return Nt.with(u,o,void 0,c)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class bn{_spanProcessors;constructor(t){this._spanProcessors=t}forceFlush(){const t=[];for(const e of this._spanProcessors)t.push(e.forceFlush());return new Promise(e=>{Promise.all(t).then(()=>{e()}).catch(t=>{Ee(t||new Error("MultiSpanProcessor: forceFlush failed")),e()})})}onStart(t,e){for(const n of this._spanProcessors)n.onStart(t,e)}onEnd(t){for(const e of this._spanProcessors)e.onEnd(t)}shutdown(){const t=[];for(const e of this._spanProcessors)t.push(e.shutdown());return new Promise((e,n)=>{Promise.all(t).then(()=>{e()},n)})}}var yn,wn;(wn=yn||(yn={}))[wn.resolved=0]="resolved",wn[wn.timeout=1]="timeout",wn[wn.error=2]="error",wn[wn.unresolved=3]="unresolved";class Sn{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(t={}){const e=function(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=Ke(e,t.shift(),0,n);return e}({},un(),function(t){const e=Object.assign({},t.spanLimits);return e.attributeCountLimit=t.spanLimits?.attributeCountLimit??t.generalLimits?.attributeCountLimit??void 0??void 0??128,e.attributeValueLengthLimit=t.spanLimits?.attributeValueLengthLimit??t.generalLimits?.attributeValueLengthLimit??void 0??void 0??hn,Object.assign({},t,{spanLimits:e})}(t));this._resource=e.resource??fe(),this._config=Object.assign({},e,{resource:this._resource});const n=[];t.spanProcessors?.length&&n.push(...t.spanProcessors),this._activeSpanProcessor=new bn(n)}getTracer(t,e,n){const r=`${t}@${e||""}:${n?.schemaUrl||""}`;return this._tracers.has(r)||this._tracers.set(r,new vn({name:t,version:e,schemaUrl:n?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(r)}forceFlush(){const t=this._config.forceFlushTimeoutMillis,e=this._activeSpanProcessor._spanProcessors.map(e=>new Promise(n=>{let r;const i=setTimeout(()=>{n(new Error(`Span processor did not completed within timeout period of ${t} ms`)),r=yn.timeout},t);e.forceFlush().then(()=>{clearTimeout(i),r!==yn.timeout&&(r=yn.resolved,n(r))}).catch(t=>{clearTimeout(i),r=yn.error,n(t)})}));return new Promise((t,n)=>{Promise.all(e).then(e=>{const r=e.filter(t=>t!==yn.resolved);r.length>0?n(r):t()}).catch(t=>n([t]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}class xn{_enabled=!1;_currentContext=k;_bindFunction(t=k,e){const n=this,r=function(...r){return n.with(t,()=>e.apply(this,r))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),r}active(){return this._currentContext}bind(t,e){return void 0===t&&(t=this.active()),"function"==typeof e?this._bindFunction(t,e):e}disable(){return this._currentContext=k,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=k),this}with(t,e,n,...r){const i=this._currentContext;this._currentContext=t||k;try{return e.call(n,...r)}finally{this._currentContext=i}}}const En=C("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Tn(t){return!0===t.getValue(En)}const An="baggage";function Cn(t){const e=t.split(";");if(e.length<=0)return;const n=e.shift();if(!n)return;const r=n.indexOf("=");if(r<=0)return;const i=decodeURIComponent(n.substring(0,r).trim()),s=decodeURIComponent(n.substring(r+1).trim());let o;var a;return e.length>0&&("string"!=typeof(a=e.join(";"))&&(T.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),o={__TYPE__:E,toString:function(){return a}}),{key:i,value:s,metadata:o}}class Pn{inject(t,e,n){const r=qt.getBaggage(t);if(!r||Tn(t))return;const i=function(t){return t.getAllEntries().map(([t,e])=>{let n=`${encodeURIComponent(t)}=${encodeURIComponent(e.value)}`;return void 0!==e.metadata&&(n+=";"+e.metadata.toString()),n})}(r).filter(t=>t.length<=4096).slice(0,180),s=function(t){return t.reduce((t,e)=>{const n=`${t}${""!==t?",":""}${e}`;return n.length>8192?t:n},"")}(i);s.length>0&&n.set(e,An,s)}extract(t,e,n){const r=n.get(e,An),i=Array.isArray(r)?r.join(","):r;if(!i)return t;const s={};if(0===i.length)return t;return i.split(",").forEach(t=>{const e=Cn(t);if(e){const t={value:e.value};e.metadata&&(t.metadata=e.metadata),s[e.key]=t}}),0===Object.entries(s).length?t:qt.setBaggage(t,qt.createBaggage(s))}fields(){return[An]}}class On{_propagators;_fields;constructor(t={}){this._propagators=t.propagators??[],this._fields=Array.from(new Set(this._propagators.map(t=>"function"==typeof t.fields?t.fields():[]).reduce((t,e)=>t.concat(e),[])))}inject(t,e,n){for(const i of this._propagators)try{i.inject(t,e,n)}catch(r){It.warn(`Failed to inject with ${i.constructor.name}. Err: ${r.message}`)}}extract(t,e,n){return this._propagators.reduce((t,r)=>{try{return r.extract(t,e,n)}catch(i){It.warn(`Failed to extract with ${r.constructor.name}. Err: ${i.message}`)}return t},t)}fields(){return this._fields.slice()}}const kn="[_0-9a-z-*/]",Ln=new RegExp(`^(?:${`[a-z]${kn}{0,255}`}|${`[a-z0-9]${kn}{0,240}@[a-z]${kn}{0,13}`})$`),Mn=/^[ -~]{0,255}[!-~]$/,Rn=/,|=/;class Nn{_internalState=new Map;constructor(t){t&&this._parse(t)}set(t,e){const n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,e),n}unset(t){const e=this._clone();return e._internalState.delete(t),e}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,e)=>(t.push(e+"="+this.get(e)),t),[]).join(",")}_parse(t){t.length>512||(this._internalState=t.split(",").reverse().reduce((t,e)=>{const n=e.trim(),r=n.indexOf("=");if(-1!==r){const i=n.slice(0,r),s=n.slice(r+1,e.length);(function(t){return Ln.test(t)})(i)&&function(t){return Mn.test(t)&&!Rn.test(t)}(s)&&t.set(i,s)}return t},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const t=new Nn;return t._internalState=new Map(this._internalState),t}}const In="traceparent",Dn="tracestate",Un=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");class $n{inject(t,e,n){const r=Xt.getSpanContext(t);if(!r||Tn(t)||!yt(r))return;const i=`00-${r.traceId}-${r.spanId}-0${Number(r.traceFlags||Q.NONE).toString(16)}`;n.set(e,In,i),r.traceState&&n.set(e,Dn,r.traceState.serialize())}extract(t,e,n){const r=n.get(e,In);if(!r)return t;const i=Array.isArray(r)?r[0]:r;if("string"!=typeof i)return t;const s=function(t){const e=Un.exec(t);return e?"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}:null}(i);if(!s)return t;s.isRemote=!0;const o=n.get(e,Dn);if(o){const t=Array.isArray(o)?o.join(","):o;s.traceState=new Nn("string"==typeof t?t:void 0)}return Xt.setSpanContext(t,s)}fields(){return[In,Dn]}}class jn extends Sn{constructor(t={}){super(t)}register(t={}){var e;Xt.setGlobalTracerProvider(this),null!==(e=t.propagator)&&(void 0!==e?qt.setGlobalPropagator(e):qt.setGlobalPropagator(new On({propagators:[new $n,new Pn]}))),function(t){if(null!==t){if(void 0===t){const t=new xn;return t.enable(),void Nt.setGlobalContextManager(t)}t.enable(),Nt.setGlobalContextManager(t)}}(t.contextManager)}}const Bn="exception.message",Fn="exception.stacktrace",Gn="exception.type",zn="service.name",Vn="service.version",Hn="user_agent.original",Wn="browser.platform",qn="browser.brands",Kn="browser.mobile",Xn="browser.language",Yn="browser.user_agent";const Jn=new class{detect(t){if(!("undefined"!=typeof navigator))return me();const e=function(){const t={},e=navigator.userAgentData;e?(t[Wn]=e.platform,t[qn]=e.brands.map(t=>`${t.brand} ${t.version}`),t[Kn]=e.mobile):t[Yn]=navigator.userAgent;return t[Xn]=navigator.language,t}();return this._getResourceAttributes(e,t)}_getResourceAttributes(t,e){return t[Yn]||t[Wn]?{attributes:t}:(It.debug("BrowserDetector failed: Unable to find required browser resources. "),me())}},Qn=C("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Zn(t){return null==t||(Array.isArray(t)?function(t){let e;for(const n of t)if(null!=n){if(!e){if(tr(n)){e=typeof n;continue}return!1}if(typeof n!==e)return!1}return!0}(t):tr(t))}function tr(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}let er=t=>{It.error(function(t){return"string"==typeof t?t:JSON.stringify(function(t){const e={};let n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(t=>{if(e[t])return;const r=n[t];r&&(e[t]=String(r))}),n=Object.getPrototypeOf(n);return e}(t))}(t))};function nr(t){try{er(t)}catch{}}const rr=performance;const ir=Math.pow(10,6),sr=Math.pow(10,9);function or(t){const e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*ir)]}function ar(){let t=rr.timeOrigin;if("number"!=typeof t){const e=rr;t=e.timing&&e.timing.fetchStart}return t}function cr(t){return function(t,e){const n=[t[0]+e[0],t[1]+e[1]];n[1]>=sr&&(n[1]-=sr,n[0]+=1);return n}(or(ar()),or("number"==typeof t?t:rr.now()))}function ur(t){if(e=t,Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return t;if("number"==typeof t)return t<ar()?cr(t):or(t);if(t instanceof Date)return or(t.getTime());throw TypeError("Invalid input type");var e}function lr(t){return 1e6*t[0]+t[1]/1e3}var dr;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(dr||(dr={}));const hr="[object Null]",pr="[object Undefined]",mr=Function.prototype.toString,fr=mr.call(Object),gr=Object.getPrototypeOf,_r=Object.prototype,vr=_r.hasOwnProperty,br=Symbol?Symbol.toStringTag:void 0,yr=_r.toString;function wr(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!==function(t){if(null==t)return void 0===t?pr:hr;return br&&br in Object(t)?function(t){const e=vr.call(t,br),n=t[br];let r=!1;try{t[br]=void 0,r=!0}catch(s){}const i=yr.call(t);r&&(e?t[br]=n:delete t[br]);return i}(t):function(t){return yr.call(t)}(t)}(t))return!1;const e=gr(t);if(null===e)return!0;const n=vr.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&mr.call(n)===fr}function Sr(t){return Tr(t)?t.slice():t}function xr(t,e,n=0,r){let i;if(!(n>20)){if(n++,Pr(t)||Pr(e)||Ar(e))i=Sr(e);else if(Tr(t)){if(i=t.slice(),Tr(e))for(let t=0,n=e.length;t<n;t++)i.push(Sr(e[t]));else if(Cr(e)){const t=Object.keys(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];i[r]=Sr(e[r])}}}else if(Cr(t))if(Cr(e)){if(!function(t,e){if(!wr(t)||!wr(e))return!1;return!0}(t,e))return e;i=Object.assign({},t);const s=Object.keys(e);for(let o=0,a=s.length;o<a;o++){const a=s[o],c=e[a];if(Pr(c))void 0===c?delete i[a]:i[a]=c;else{const s=i[a],o=c;if(Er(t,a,r)||Er(e,a,r))delete i[a];else{if(Cr(s)&&Cr(o)){const n=r.get(s)||[],i=r.get(o)||[];n.push({obj:t,key:a}),i.push({obj:e,key:a}),r.set(s,n),r.set(o,i)}i[a]=xr(i[a],c,n,r)}}}}else i=e;return i}}function Er(t,e,n){const r=n.get(t[e])||[];for(let i=0,s=r.length;i<s;i++){const n=r[i];if(n.key===e&&n.obj===t)return!0}return!1}function Tr(t){return Array.isArray(t)}function Ar(t){return"function"==typeof t}function Cr(t){return!Pr(t)&&!Tr(t)&&!Ar(t)&&"object"==typeof t}function Pr(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||t instanceof RegExp||null===t}let Or=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};class kr{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}get promise(){return this._promise}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}class Lr{_callback;_that;_isCalled=!1;_deferred=new kr;constructor(t,e){this._callback=t,this._that=e}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...t){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...t)).then(t=>this._deferred.resolve(t),t=>this._deferred.reject(t))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}const Mr={_export:function(t,e){return new Promise(n=>{Nt.with(Nt.active().setValue(Qn,!0),()=>{t.export(e,t=>{n(t)})})})}},Rr="1.1.0";var Nr,Ir;var Dr,Ur=function(){if(Ir)return Nr;function t(t){return"function"==typeof t}Ir=1;var e=function(){}.bind();function n(t,e,n){var r=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:r,writable:!0,value:n})}function r(n){n&&n.logger&&(t(n.logger)?e=n.logger:e("new logger isn't a function, not replacing"))}function i(r,i,s){if(r&&r[i]){if(!s)return e("no wrapper function"),void e((new Error).stack);if(t(r[i])&&t(s)){var o=r[i],a=s(o,i);return n(a,"__original",o),n(a,"__unwrap",function(){r[i]===a&&n(r,i,o)}),n(a,"__wrapped",!0),n(r,i,a),a}e("original object and wrapper must be functions")}else e("no original function "+i+" to wrap")}function s(t,n){return t&&t[n]?t[n].__unwrap?t[n].__unwrap():void e("no original to unwrap to -- has "+n+" already been unwrapped?"):(e("no function to unwrap."),void e((new Error).stack))}return r.wrap=i,r.massWrap=function(t,n,r){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach(function(t){n.forEach(function(e){i(t,e,r)})}):e("must provide one or more functions to wrap on modules")},r.unwrap=s,r.massUnwrap=function(t,n){if(!t)return e("must provide one or more modules to patch"),void e((new Error).stack);Array.isArray(t)||(t=[t]),n&&Array.isArray(n)?t.forEach(function(t){n.forEach(function(e){s(t,e)})}):e("must provide one or more functions to unwrap on modules")},Nr=r}(),$r={exports:{}};var jr,Br,Fr=(Dr||(Dr=1,jr=$r,function(t){if(t){var e={},n=t.TraceKit,r=[].slice,i="?",s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;e.noConflict=function(){return t.TraceKit=n,e},e.wrap=function(t){return function(){try{return t.apply(this,arguments)}catch(n){throw e.report(n),n}}},e.report=function(){var n,r,i,a,c=[],u=null,l=null;function d(t,n,r){var i=null;if(!n||e.collectWindowErrors){for(var s in c)if(o(c,s))try{c[s](t,n,r)}catch(a){i=a}if(i)throw i}}function h(t,r,i,o,a){if(l)e.computeStackTrace.augmentStackTraceWithInitialElement(l,r,i,t),m();else if(a)d(e.computeStackTrace(a),!0,a);else{var c,u={url:r,line:i,column:o},h=t;if("[object String]"==={}.toString.call(t)){var p=t.match(s);p&&(c=p[1],h=p[2])}u.func=e.computeStackTrace.guessFunctionName(u.url,u.line),u.context=e.computeStackTrace.gatherContext(u.url,u.line),d({name:c,message:h,mode:"onerror",stack:[u]},!0,null)}return!!n&&n.apply(this,arguments)}function p(t){d(e.computeStackTrace(t.reason),!0,t.reason)}function m(){var t=l,e=u;l=null,u=null,d(t,!1,e)}function f(t){if(l){if(u===t)return;m()}var n=e.computeStackTrace(t);throw l=n,u=t,setTimeout(function(){u===t&&m()},n.incomplete?2e3:0),t}return f.subscribe=function(e){!0!==r&&(n=t.onerror,t.onerror=h,r=!0),!0!==a&&(i=t.onunhandledrejection,t.onunhandledrejection=p,a=!0),c.push(e)},f.unsubscribe=function(e){for(var s=c.length-1;s>=0;--s)c[s]===e&&c.splice(s,1);0===c.length&&(r&&(t.onerror=n,r=!1),a&&(t.onunhandledrejection=i,a=!1))},f}(),e.computeStackTrace=function(){var n={};function r(r){if("string"!=typeof r)return[];if(!o(n,r)){var i="",s="";try{s=t.document.domain}catch(c){}var a=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(r);a&&a[2]===s&&(i=function(n){if(!e.remoteFetching)return"";try{var r=function(){try{return new t.XMLHttpRequest}catch(c){return new t.ActiveXObject("Microsoft.XMLHTTP")}}();return r.open("GET",n,!1),r.send(""),r.responseText}catch(c){return""}}(r)),n[r]=i?i.split("\n"):[]}return n[r]}function s(t,e){var n,s=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",u=r(t);if(!u.length)return i;for(var l=0;l<10;++l)if(!a(c=u[e-l]+c)){if(n=o.exec(c))return n[1];if(n=s.exec(c))return n[1]}return i}function c(t,n){var i=r(t);if(!i.length)return null;var s=[],o=Math.floor(e.linesOfContext/2),c=o+e.linesOfContext%2,u=Math.max(0,n-o-1),l=Math.min(i.length,n+c-1);n-=1;for(var d=u;d<l;++d)a(i[d])||s.push(i[d]);return s.length>0?s:null}function u(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(t){return u(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(t,e){for(var n,i,s=0,o=e.length;s<o;++s)if((n=r(e[s])).length&&(n=n.join("\n"),i=t.exec(n)))return{url:e[s],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function h(t,e,n){var i,s=r(e),o=new RegExp("\\b"+u(t)+"\\b");return n-=1,s&&s.length>n&&(i=o.exec(s[n]))?i.index:null}function p(e){if(!a(t&&t.document)){for(var n,r,i,s,o=[t.location.href],c=t.document.getElementsByTagName("script"),h=""+e,p=0;p<c.length;++p){var m=c[p];m.src&&o.push(m.src)}if(i=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h)){var f=i[1]?"\\s+"+i[1]:"",g=i[2].split(",").join("\\s*,\\s*");n=u(i[3]).replace(/;$/,";?"),r=new RegExp("function"+f+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(u(h).replace(/\s+/g,"\\s+"));if(s=d(r,o))return s;if(i=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(h)){var _=i[1];if(n=l(i[2]),s=d(r=new RegExp("on"+_+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o[0]))return s;if(s=d(r=new RegExp(n),o))return s}return null}}function m(t){if(!t.stack)return null;for(var e,n,r,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,p=/\((\S*)(?::(\d+))(?::(\d+))\)/,m=t.stack.split("\n"),f=[],g=/^(.*) is undefined$/.exec(t.message),_=0,v=m.length;_<v;++_){if(n=o.exec(m[_])){var b=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=p.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:b?null:n[2],func:n[1]||i,args:b?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=l.exec(m[_]))r={url:n[2],func:n[1]||i,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=u.exec(m[_])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=d.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==_||n[5]||a(t.columnNumber)||(f[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||i,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=s(r.url,r.line)),r.context=r.line?c(r.url,r.line):null,f.push(r)}return f.length?(f[0]&&f[0].line&&!f[0].column&&g&&(f[0].column=h(g[1],f[0].url,f[0].line)),{mode:"stack",name:t.name,message:t.message,stack:f}):null}function f(t,e,n,r){var i={url:e,line:n};if(i.url&&i.line){t.incomplete=!1,i.func||(i.func=s(i.url,i.line)),i.context||(i.context=c(i.url,i.line));var o=/ '([^']+)' /.exec(r);if(o&&(i.column=h(o[1],i.url,i.line)),t.stack.length>0&&t.stack[0].url===i.url){if(t.stack[0].line===i.line)return!1;if(!t.stack[0].line&&t.stack[0].func===i.func)return t.stack[0].line=i.line,t.stack[0].context=i.context,!1}return t.stack.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function g(t,n){for(var r,o,a,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],l={},d=!1,m=g.caller;m&&!d;m=m.caller)if(m!==_&&m!==e.report){if(o={url:null,func:i,args:[],line:null,column:null},m.name?o.func=m.name:(r=c.exec(m.toString()))&&(o.func=r[1]),void 0===o.func)try{o.func=r.input.substring(0,r.input.indexOf("{"))}catch(y){}if(a=p(m)){o.url=a.url,o.line=a.line,o.func===i&&(o.func=s(o.url,o.line));var v=/ '([^']+)' /.exec(t.message||t.description);v&&(o.column=h(v[1],a.url,a.line))}l[""+m]?d=!0:l[""+m]=!0,u.push(o)}n&&u.splice(0,n);var b={mode:"callers",name:t.name,message:t.message,stack:u};return f(b,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),b}function _(e,n){var i=null;n=null==n?0:+n;try{if(i=function(t){var e=t.stacktrace;if(e){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=e.split("\n"),a=[],u=0;u<o.length;u+=2){var l=null;if((n=r.exec(o[u]))?l={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=i.exec(o[u]))&&(l={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),l){if(!l.func&&l.line&&(l.func=s(l.url,l.line)),l.line)try{l.context=c(l.url,l.line)}catch(d){}l.context||(l.context=[o[u+1]]),a.push(l)}}return a.length?{mode:"stacktrace",name:t.name,message:t.message,stack:a}:null}}(e),i)return i}catch(a){}try{if(i=m(e))return i}catch(a){}try{if(i=function(e){var n=e.message.split("\n");if(n.length<4)return null;var i,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,u=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of function script\s*$/i,p=[],m=t&&t.document&&t.document.getElementsByTagName("script"),f=[];for(var g in m)o(m,g)&&!m[g].src&&f.push(m[g]);for(var _=2;_<n.length;_+=2){var v=null;if(i=a.exec(n[_]))v={url:i[2],func:i[3],args:[],line:+i[1],column:null};else if(i=u.exec(n[_])){v={url:i[3],func:i[4],args:[],line:+i[1],column:null};var b=+i[1],y=f[i[2]-1];if(y){var w=r(v.url);if(w){var S=(w=w.join("\n")).indexOf(y.innerText);S>=0&&(v.line=b+w.substring(0,S).split("\n").length)}}}else if(i=h.exec(n[_])){var x=t.location.href.replace(/#.*$/,""),E=d(new RegExp(l(n[_+1])),[x]);v={url:x,func:"",args:[],line:E?E.line:i[1],column:null}}if(v){v.func||(v.func=s(v.url,v.line));var T=c(v.url,v.line),A=T?T[Math.floor(T.length/2)]:null;T&&A.replace(/^\s*/,"")===n[_+1].replace(/^\s*/,"")?v.context=T:v.context=[n[_+1]],p.push(v)}}return p.length?{mode:"multiline",name:e.name,message:n[0],stack:p}:null}(e),i)return i}catch(a){}try{if(i=g(e,n+1))return i}catch(a){}return{name:e.name,message:e.message,mode:"failed"}}return _.augmentStackTraceWithInitialElement=f,_.computeStackTraceFromStackProp=m,_.guessFunctionName=s,_.gatherContext=c,_.ofCaller=function(t){t=1+(null==t?0:+t);try{throw new Error}catch(e){return _(e,t+1)}},_.getSource=r,_}(),e.extendToAsynchronousCallbacks=function(){var n=function(n){var i=t[n];t[n]=function(){var t=r.call(arguments),n=t[0];return"function"==typeof n&&(t[0]=e.wrap(n)),i.apply?i.apply(this,t):i(t[0],t[1])}};n("setTimeout"),n("setInterval")},e.remoteFetching||(e.remoteFetching=!0),e.collectWindowErrors||(e.collectWindowErrors=!0),(!e.linesOfContext||e.linesOfContext<1)&&(e.linesOfContext=11),jr.exports&&t.module!==jr?jr.exports=e:t.TraceKit=e}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){return void 0===t}}("undefined"!=typeof window?window:t)),$r.exports);class Gr{_delegate;constructor(t){this._delegate=t}export(t,e){this._delegate.export(t,e)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}class zr extends Error{code;name="OTLPExporterError";data;constructor(t,e,n){super(t),this.data=n,this.code=e}}function Vr(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function Hr(t){if(null!=t)return()=>t}function Wr(t,e,n){return{timeoutMillis:Vr(t.timeoutMillis??e.timeoutMillis??n.timeoutMillis),concurrencyLimit:t.concurrencyLimit??e.concurrencyLimit??n.concurrencyLimit,compression:t.compression??e.compression??n.compression}}class qr{_concurrencyLimit;_sendingPromises=[];constructor(t){this._concurrencyLimit=t}pushPromise(t){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(t);const e=()=>{const e=this._sendingPromises.indexOf(t);this._sendingPromises.splice(e,1)};t.then(e,e)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function Kr(t){return new qr(t.concurrencyLimit)}function Xr(){return{handleResponse(t){null!=t&&function(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}(t)&&null!=t.partialSuccess&&0!==Object.keys(t.partialSuccess).length&&It.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}}}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Br||(Br={}));class Yr{_transport;_serializer;_responseHandler;_promiseQueue;_timeout;_diagLogger;constructor(t,e,n,r,i){this._transport=t,this._serializer=e,this._responseHandler=n,this._promiseQueue=r,this._timeout=i,this._diagLogger=It.createComponentLogger({namespace:"OTLPExportDelegate"})}export(t,e){if(this._diagLogger.debug("items to be sent",t),this._promiseQueue.hasReachedLimit())return void e({code:Br.FAILED,error:new Error("Concurrent export limit reached")});const n=this._serializer.serializeRequest(t);null!=n?this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then(t=>{if("success"!==t.status)"failure"===t.status&&t.error?e({code:Br.FAILED,error:t.error}):"retryable"===t.status?e({code:Br.FAILED,error:new zr("Export failed with retryable status")}):e({code:Br.FAILED,error:new zr("Export failed with unknown error")});else{if(null!=t.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(t.data))}catch(n){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",n,t.data)}e({code:Br.SUCCESS})}},t=>e({code:Br.FAILED,error:t}))):e({code:Br.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function Jr(t,e,n){return r={transport:n,serializer:e,promiseHandler:Kr(t)},i={timeout:t.timeoutMillis},new Yr(r.transport,r.serializer,Xr(),r.promiseHandler,i.timeout);var r,i}const Qr=Math.pow(10,9);function Zr(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function ti(t){const e=new Uint8Array(t.length/2);let n=0;for(let r=0;r<t.length;r+=2){const i=Zr(t.charCodeAt(r)),s=Zr(t.charCodeAt(r+1));e[n++]=i<<4|s}return e}function ei(t){const e=BigInt(1e9);return BigInt(t[0])*e+BigInt(t[1])}function ni(t){const e=ei(t);return n=e,{low:Number(BigInt.asUintN(32,n)),high:Number(BigInt.asUintN(32,n>>BigInt(32)))};var n}const ri="undefined"!=typeof BigInt?function(t){return ei(t).toString()}:function(t){return t[0]*Qr+t[1]};function ii(t){return t}function si(t){if(void 0!==t)return ti(t)}const oi={encodeHrTime:ni,encodeSpanContext:ti,encodeOptionalSpanContext:si};function ai(t){if(void 0===t)return oi;const e=t.useLongBits??!0,n=t.useHex??!1;return{encodeHrTime:e?ni:ri,encodeSpanContext:n?ii:ti,encodeOptionalSpanContext:n?ii:si}}function ci(t){return{attributes:li(t.attributes),droppedAttributesCount:0}}function ui(t){return{name:t.name,version:t.version}}function li(t){return Object.keys(t).map(e=>di(e,t[e]))}function di(t,e){return{key:t,value:hi(e)}}function hi(t){const e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(hi)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map(([t,e])=>di(t,e))}}:{}}function pi(t,e){const n=function(t){const e=new Map;for(const n of t){const{resource:t,instrumentationScope:{name:r,version:i="",schemaUrl:s=""}}=n;let o=e.get(t);o||(o=new Map,e.set(t,o));const a=`${r}@${i}:${s}`;let c=o.get(a);c||(c=[],o.set(a,c)),c.push(n)}return e}(t);return Array.from(n,([t,n])=>({resource:ci(t),scopeLogs:Array.from(n,([,t])=>({scope:ui(t[0].instrumentationScope),logRecords:t.map(t=>function(t,e){return{timeUnixNano:e.encodeHrTime(t.hrTime),observedTimeUnixNano:e.encodeHrTime(t.hrTimeObserved),severityNumber:t.severityNumber,severityText:t.severityText,body:hi(t.body),eventName:t.eventName,attributes:mi(t.attributes),droppedAttributesCount:t.droppedAttributesCount,flags:t.spanContext?.traceFlags,traceId:e.encodeOptionalSpanContext(t.spanContext?.traceId),spanId:e.encodeOptionalSpanContext(t.spanContext?.spanId)}}(t,e)),schemaUrl:t[0].instrumentationScope.schemaUrl})),schemaUrl:void 0}))}function mi(t){return Object.keys(t).map(e=>di(e,t[e]))}var fi,gi,_i,vi,bi,yi,wi,Si,xi,Ei;function Ti(t,e){return Array.from(t.map(t=>({scope:ui(t.scope),metrics:t.metrics.map(t=>function(t,e){const n={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},r=function(t){switch(t){case fi.DELTA:return xi.AGGREGATION_TEMPORALITY_DELTA;case fi.CUMULATIVE:return xi.AGGREGATION_TEMPORALITY_CUMULATIVE}}(t.aggregationTemporality);switch(t.dataPointType){case bi.SUM:n.sum={aggregationTemporality:r,isMonotonic:t.isMonotonic,dataPoints:Ai(t,e)};break;case bi.GAUGE:n.gauge={dataPoints:Ai(t,e)};break;case bi.HISTOGRAM:n.histogram={aggregationTemporality:r,dataPoints:Ci(t,e)};break;case bi.EXPONENTIAL_HISTOGRAM:n.exponentialHistogram={aggregationTemporality:r,dataPoints:Pi(t,e)}}return n}(t,e)),schemaUrl:t.scope.schemaUrl})))}function Ai(t,e){return t.dataPoints.map(n=>function(t,e,n){const r={attributes:li(t.attributes),startTimeUnixNano:n.encodeHrTime(t.startTime),timeUnixNano:n.encodeHrTime(t.endTime)};switch(e){case P.INT:r.asInt=t.value;break;case P.DOUBLE:r.asDouble=t.value}return r}(n,t.descriptor.valueType,e))}function Ci(t,e){return t.dataPoints.map(t=>{const n=t.value;return{attributes:li(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Pi(t,e){return t.dataPoints.map(t=>{const n=t.value;return{attributes:li(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function Oi(t,e){return{resourceMetrics:t.map(t=>function(t,e){const n=ai(e);return{resource:ci(t.resource),schemaUrl:void 0,scopeMetrics:Ti(t.scopeMetrics,n)}}(t,e))}}function ki(t,e){const n=t.spanContext(),r=t.status,i=t.parentSpanContext?.spanId?e.encodeSpanContext(t.parentSpanContext?.spanId):void 0;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:i,traceState:n.traceState?.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:li(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(t=>function(t,e){return{attributes:t.attributes?li(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)),droppedEventsCount:t.droppedEventsCount,status:{code:r.code,message:r.message},links:t.links.map(t=>function(t,e){return{attributes:t.attributes?li(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:t.context.traceState?.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)),droppedLinksCount:t.droppedLinksCount}}function Li(t,e){const n=function(t){const e=new Map;for(const n of t){let t=e.get(n.resource);t||(t=new Map,e.set(n.resource,t));const r=`${n.instrumentationScope.name}@${n.instrumentationScope.version||""}:${n.instrumentationScope.schemaUrl||""}`;let i=t.get(r);i||(i=[],t.set(r,i)),i.push(n)}return e}(t),r=[],i=n.entries();let s=i.next();for(;!s.done;){const[t,n]=s.value,o=[],a=n.values();let c=a.next();for(;!c.done;){const t=c.value;if(t.length>0){const n=t.map(t=>ki(t,e));o.push({scope:ui(t[0].instrumentationScope),spans:n,schemaUrl:t[0].instrumentationScope.schemaUrl})}c=a.next()}const u={resource:ci(t),scopeSpans:o,schemaUrl:void 0};r.push(u),s=i.next()}return r}(gi=fi||(fi={}))[gi.DELTA=0]="DELTA",gi[gi.CUMULATIVE=1]="CUMULATIVE",(vi=_i||(_i={})).COUNTER="COUNTER",vi.GAUGE="GAUGE",vi.HISTOGRAM="HISTOGRAM",vi.UP_DOWN_COUNTER="UP_DOWN_COUNTER",vi.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",vi.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",vi.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER",(yi=bi||(bi={}))[yi.HISTOGRAM=0]="HISTOGRAM",yi[yi.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",yi[yi.GAUGE=2]="GAUGE",yi[yi.SUM=3]="SUM",(Si=wi||(wi={}))[Si.DEFAULT=0]="DEFAULT",Si[Si.DROP=1]="DROP",Si[Si.SUM=2]="SUM",Si[Si.LAST_VALUE=3]="LAST_VALUE",Si[Si.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",Si[Si.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM",(Ei=xi||(xi={}))[Ei.AGGREGATION_TEMPORALITY_UNSPECIFIED=0]="AGGREGATION_TEMPORALITY_UNSPECIFIED",Ei[Ei.AGGREGATION_TEMPORALITY_DELTA=1]="AGGREGATION_TEMPORALITY_DELTA",Ei[Ei.AGGREGATION_TEMPORALITY_CUMULATIVE=2]="AGGREGATION_TEMPORALITY_CUMULATIVE";const Mi={serializeRequest:t=>{const e={resourceLogs:pi(t,ai({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}},Ri={serializeRequest:t=>{const e=Oi([t],{useLongBits:!1});return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}},Ni={serializeRequest:t=>{const e={resourceSpans:Li(t,ai({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:t=>{if(0===t.length)return{};const e=new TextDecoder;return JSON.parse(e.decode(t))}};function Ii(){return.4*Math.random()-.2}class Di{_transport;constructor(t){this._transport=t}retry(t,e,n){return new Promise((r,i)=>{setTimeout(()=>{this._transport.send(t,e).then(r,i)},n)})}async send(t,e){const n=Date.now()+e;let r=await this._transport.send(t,e),i=5,s=1e3;for(;"retryable"===r.status&&i>0;){i--;const e=Math.max(Math.min(s,5e3)+Ii(),0);s*=1.5;const o=r.retryInMillis??e,a=n-Date.now();if(o>a)return r;r=await this.retry(t,a,o)}return r}shutdown(){return this._transport.shutdown()}}function Ui(t){return new Di(t.transport)}function $i(t){if(null==t)return;const e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;const n=new Date(t).getTime()-Date.now();return n>=0?n:0}class ji{_parameters;constructor(t){this._parameters=t}send(t,e){return new Promise(n=>{const r=new XMLHttpRequest;r.timeout=e,r.open("POST",this._parameters.url);const i=this._parameters.headers();Object.entries(i).forEach(([t,e])=>{r.setRequestHeader(t,e)}),r.ontimeout=t=>{n({status:"failure",error:new Error("XHR request timed out")})},r.onreadystatechange=()=>{var t;r.status>=200&&r.status<=299?(It.debug("XHR success"),n({status:"success"})):r.status&&(t=r.status,[429,502,503,504].includes(t))?n({status:"retryable",retryInMillis:$i(r.getResponseHeader("Retry-After"))}):0!==r.status&&n({status:"failure",error:new Error("XHR request failed with non-retryable status")})},r.onabort=()=>{n({status:"failure",error:new Error("XHR request aborted")})},r.onerror=()=>{n({status:"failure",error:new Error("XHR request errored")})},r.send(t)})}shutdown(){}}class Bi{_params;constructor(t){this._params=t}send(t){return new Promise(e=>{navigator.sendBeacon(this._params.url,new Blob([t],{type:this._params.blobType}))?(It.debug("SendBeacon success"),e({status:"success"})):e({status:"failure",error:new Error("SendBeacon failed")})})}shutdown(){}}function Fi(t,e,n){const r={...n()},i={};return()=>(null!=e&&Object.assign(i,e()),null!=t&&Object.assign(i,t()),Object.assign(i,r))}function Gi(t){if(null!=t)try{return new URL(t),t}catch{throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function zi(t,e,n){return r={url:t.url,timeoutMillis:t.timeoutMillis,headers:Hr(t.headers),concurrencyLimit:t.concurrencyLimit},i={},s=function(t,e){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none",headers:()=>t,url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}}}(n,e),{...Wr(r,i,s),headers:Fi((o=r.headers,()=>{const t={};return Object.entries(o?.()??{}).forEach(([e,n])=>{void 0!==n?t[e]=String(n):It.warn(`Header "${e}" has invalid value (${n}) and will be ignored`)}),t}),i.headers,s.headers),url:Gi(r.url)??i.url??s.url,agentOptions:r.agentOptions??i.agentOptions??s.agentOptions};var r,i,s,o}function Vi(t,e,n,r){const i=!!t.headers||"function"!=typeof navigator.sendBeacon,s=zi(t,n,r);return i?function(t,e){return Jr(t,e,Ui({transport:(n=t,new ji(n))}));var n}(s,e):function(t,e){return Jr(t,e,Ui({transport:(n={url:t.url,blobType:t.headers()["Content-Type"]},new Bi(n))}));var n}(s,e)}class Hi extends Gr{constructor(t={}){super(Vi(t,Ni,"v1/traces",{"Content-Type":"application/json"}))}}var Wi,qi;(qi=Wi||(Wi={}))[qi.DELTA=0]="DELTA",qi[qi.CUMULATIVE=1]="CUMULATIVE",qi[qi.LOWMEMORY=2]="LOWMEMORY";const Ki=()=>fi.CUMULATIVE,Xi=t=>{switch(t){case _i.COUNTER:case _i.OBSERVABLE_COUNTER:case _i.GAUGE:case _i.HISTOGRAM:case _i.OBSERVABLE_GAUGE:return fi.DELTA;case _i.UP_DOWN_COUNTER:case _i.OBSERVABLE_UP_DOWN_COUNTER:return fi.CUMULATIVE}},Yi=t=>{switch(t){case _i.COUNTER:case _i.HISTOGRAM:return fi.DELTA;case _i.GAUGE:case _i.UP_DOWN_COUNTER:case _i.OBSERVABLE_UP_DOWN_COUNTER:case _i.OBSERVABLE_COUNTER:case _i.OBSERVABLE_GAUGE:return fi.CUMULATIVE}};function Ji(t){return null!=t?t===Wi.DELTA?Xi:t===Wi.LOWMEMORY?Yi:Ki:function(){const t="cumulative".toLowerCase();return"cumulative"===t?Ki:"delta"===t?Xi:"lowmemory"===t?Yi:(It.warn(`OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '${t}', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead.`),Ki)}()}const Qi=Object.freeze({type:wi.DEFAULT});class Zi extends Gr{_aggregationTemporalitySelector;_aggregationSelector;constructor(t,e){super(t),this._aggregationSelector=function(t){return t?.aggregationPreference??(()=>Qi)}(e),this._aggregationTemporalitySelector=Ji(e?.temporalityPreference)}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}}class ts extends Zi{constructor(t){super(Vi(t??{},Ri,"v1/metrics",{"Content-Type":"application/json"}),t)}}class es extends Gr{constructor(t={}){super(Vi(t,Mi,"v1/logs",{"Content-Type":"application/json"}))}}class ns{_sessionIdProvider;constructor(t){this._sessionIdProvider=t}async forceFlush(){}onStart(t,e){const n=this._sessionIdProvider?.getSessionId();n&&t.setAttribute("session.id",n)}onEnd(t){}async shutdown(){}}var rs,is={exports:{}},ss=is.exports;var os=(rs||(rs=1,function(t,e){!function(n,r){var i="function",s="undefined",o="object",a="string",c="major",u="model",l="name",d="type",h="vendor",p="version",m="architecture",f="console",g="mobile",_="tablet",v="smarttv",b="wearable",y="embedded",w="Amazon",S="Apple",x="ASUS",E="BlackBerry",T="Browser",A="Chrome",C="Firefox",P="Google",O="Huawei",k="LG",L="Microsoft",M="Motorola",R="Opera",N="Samsung",I="Sharp",D="Sony",U="Xiaomi",$="Zebra",j="Facebook",B="Chromium OS",F="Mac OS",G=" Browser",z=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},V=function(t,e){return typeof t===a&&-1!==H(e).indexOf(H(t))},H=function(t){return t.toLowerCase()},W=function(t,e){if(typeof t===a)return t=t.replace(/^\s\s*/,""),typeof e===s?t:t.substring(0,500)},q=function(t,e){for(var n,s,a,c,u,l,d=0;d<e.length&&!u;){var h=e[d],p=e[d+1];for(n=s=0;n<h.length&&!u&&h[n];)if(u=h[n++].exec(t))for(a=0;a<p.length;a++)l=u[++s],typeof(c=p[a])===o&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;d+=2}},K=function(t,e){for(var n in e)if(typeof e[n]===o&&e[n].length>0){for(var i=0;i<e[n].length;i++)if(V(e[n][i],t))return"?"===n?r:n}else if(V(e[n],t))return"?"===n?r:n;return e.hasOwnProperty("*")?e["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,R+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[l,R+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[l,R]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[l,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[l,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[l,"Smart Lenovo "+T]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+T],p],[/\bfocus\/([\w\.]+)/i],[p,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,R+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,R+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI"+G]],[/fxios\/([\w\.-]+)/i],[p,[l,C]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[l,"360"]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+G],p],[/samsungbrowser\/([\w\.]+)/i],[p,[l,N+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[l,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,j],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,A+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[l,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,H]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",H]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,H]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,N],[d,_]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,N],[d,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[h,S],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,S],[d,_]],[/(macintosh);/i],[u,[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,I],[d,g]],[/(?:honor)([-\w ]+)[;\)]/i],[u,[h,"Honor"],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,O],[d,_]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,O],[d,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[h,U],[d,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,U],[d,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[d,g]],[/\b(opd2\d{3}a?) bui/i],[u,[h,"OPPO"],[d,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[d,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,M],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,M],[d,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,k],[d,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,k],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[d,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[h,P],[d,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,P],[d,g]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,D],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,D],[d,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,w],[d,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,w],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[d,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,E],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,x],[d,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,x],[d,g]],[/(nexus 9)/i],[u,[h,"HTC"],[d,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[d,g]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[h,"TCL"],[d,_]],[/(itel) ((\w+))/i],[[h,H],u,[d,K,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[d,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[d,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[h,"Ulefone"],[d,g]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[u,[h,"Energizer"],[d,g]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[u,[h,"Cat"],[d,g]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[u,[h,"Smartfren"],[d,g]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[h,"Nothing"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[d,g]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[d,_]],[/(surface duo)/i],[u,[h,L],[d,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[h,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[d,_]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[d,_]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[d,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[d,_]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[d,_]],[/\b(k88) b/i],[u,[h,"ZTE"],[d,_]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[d,_]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[d,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[d,_]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[d,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[d,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[h,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[d,_]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[d,_]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[d,_]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[d,_]],[/(sprint) (\w+)/i],[h,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,L],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,$],[d,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,$],[d,g]],[/smart-tv.+(samsung)/i],[h,[d,v]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,N],[d,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,k],[d,v]],[/(apple) ?tv/i],[h,[u,S+" TV"],[d,v]],[/crkey/i],[[u,A+"cast"],[h,P],[d,v]],[/droid.+aft(\w+)( bui|\))/i],[u,[h,w],[d,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,I],[d,v]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,D],[d,v]],[/(mitv-\w{5}) bui/i],[u,[h,U],[d,v]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[d,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,W],[u,W],[d,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[d,f]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[d,f]],[/(playstation [345portablevi]+)/i],[u,[h,D],[d,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,L],[d,f]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[h,N],[d,b]],[/((pebble))app/i],[h,u,[d,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,S],[d,b]],[/droid.+; (glass) \d/i],[u,[h,P],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,$],[d,b]],[/droid.+; (glass) \d/i],[u,[h,P],[d,b]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,u,[d,b]],[/; (quest( \d| pro)?)/i],[u,[h,j],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,y]],[/(aeobc)\b/i],[u,[h,w],[d,y]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[l,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[p,K,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,K,X],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,F],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},J=function(t,e){if(typeof t===o&&(e=t,t=r),!(this instanceof J))return new J(t,e).getResult();var f=typeof n!==s&&n.navigator?n.navigator:r,v=t||(f&&f.userAgent?f.userAgent:""),b=f&&f.userAgentData?f.userAgentData:r,y=e?function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2==0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n}(Y,e):Y,w=f&&f.userAgent==v;return this.getBrowser=function(){var t,e={};return e[l]=r,e[p]=r,q.call(e,v,y.browser),e[c]=typeof(t=e[p])===a?t.replace(/[^\d\.]/g,"").split(".")[0]:r,w&&f&&f.brave&&typeof f.brave.isBrave==i&&(e[l]="Brave"),e},this.getCPU=function(){var t={};return t[m]=r,q.call(t,v,y.cpu),t},this.getDevice=function(){var t={};return t[h]=r,t[u]=r,t[d]=r,q.call(t,v,y.device),w&&!t[d]&&b&&b.mobile&&(t[d]=g),w&&"Macintosh"==t[u]&&f&&typeof f.standalone!==s&&f.maxTouchPoints&&f.maxTouchPoints>2&&(t[u]="iPad",t[d]=_),t},this.getEngine=function(){var t={};return t[l]=r,t[p]=r,q.call(t,v,y.engine),t},this.getOS=function(){var t={};return t[l]=r,t[p]=r,q.call(t,v,y.os),w&&!t[l]&&b&&b.platform&&"Unknown"!=b.platform&&(t[l]=b.platform.replace(/chrome os/i,B).replace(/macos/i,F)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(t){return v=typeof t===a&&t.length>500?W(t,500):t,this},this.setUA(v),this};J.VERSION="1.0.40",J.BROWSER=z([l,p,c]),J.CPU=z([m]),J.DEVICE=z([u,h,d,f,g,v,_,b,y]),J.ENGINE=J.OS=z([l,p]),t.exports&&(e=t.exports=J),e.UAParser=J;var Q=typeof n!==s&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var Z=new J;Q.ua=Z.getResult(),Q.ua.get=function(){return Z.getUA()},Q.ua.set=function(t){Z.setUA(t);var e=Z.getResult();for(var n in e)Q.ua[n]=e[n]}}}("object"==typeof window?window:ss)}(is,is.exports)),is.exports);const as=e(os);var cs,us,ls,ds,hs;function ps(t){return null!=t}function ms(t){let e=Object.keys(t);return 0===e.length?"":(e=e.sort(),JSON.stringify(e.map(e=>[e,t[e]])))}!function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE"}(cs||(cs={})),function(t){t.COUNTER="COUNTER",t.GAUGE="GAUGE",t.HISTOGRAM="HISTOGRAM",t.UP_DOWN_COUNTER="UP_DOWN_COUNTER",t.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",t.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",t.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"}(us||(us={})),function(t){t[t.HISTOGRAM=0]="HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",t[t.GAUGE=2]="GAUGE",t[t.SUM=3]="SUM"}(ls||(ls={}));class fs extends Error{constructor(t){super(t),Object.setPrototypeOf(this,fs.prototype)}}function gs(t,e){let n;const r=new Promise(function(t,r){n=setTimeout(function(){r(new fs("Operation timed out."))},e)});return Promise.race([t,r]).then(t=>(clearTimeout(n),t),t=>{throw clearTimeout(n),t})}function _s(t){return"rejected"===t.status}function vs(t,e){const n=[];return t.forEach(t=>{n.push(...e(t))}),n}(hs=ds||(ds={}))[hs.DROP=0]="DROP",hs[hs.SUM=1]="SUM",hs[hs.LAST_VALUE=2]="LAST_VALUE",hs[hs.HISTOGRAM=3]="HISTOGRAM",hs[hs.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM";class bs{kind=ds.DROP;createAccumulation(){}merge(t,e){}diff(t,e){}toMetricData(t,e,n,r){}}class ys{startTime;_boundaries;_recordMinMax;_current;constructor(t,e,n=!0,r=function(t){const e=t.map(()=>0);return e.push(0),{buckets:{boundaries:t,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}(e)){this.startTime=t,this._boundaries=e,this._recordMinMax=n,this._current=r}record(t){if(Number.isNaN(t))return;this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);const e=function(t,e){let n=0,r=t.length-1,i=t.length;for(;r>=n;){const s=n+Math.trunc((r-n)/2);t[s]<e?n=s+1:(i=s,r=s-1)}return i}(this._boundaries,t);this._current.buckets.counts[e]+=1}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class ws{_boundaries;_recordMinMax;kind=ds.HISTOGRAM;constructor(t,e){this._boundaries=t,this._recordMinMax=e}createAccumulation(t){return new ys(t,this._boundaries,this._recordMinMax)}merge(t,e){const n=t.toPointValue(),r=e.toPointValue(),i=n.buckets.counts,s=r.buckets.counts,o=new Array(i.length);for(let u=0;u<i.length;u++)o[u]=i[u]+s[u];let a=1/0,c=-1/0;return this._recordMinMax&&(n.hasMinMax&&r.hasMinMax?(a=Math.min(n.min,r.min),c=Math.max(n.max,r.max)):n.hasMinMax?(a=n.min,c=n.max):r.hasMinMax&&(a=r.min,c=r.max)),new ys(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:o},count:n.count+r.count,sum:n.sum+r.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||r.hasMinMax),min:a,max:c})}diff(t,e){const n=t.toPointValue(),r=e.toPointValue(),i=n.buckets.counts,s=r.buckets.counts,o=new Array(i.length);for(let a=0;a<i.length;a++)o[a]=s[a]-i[a];return new ys(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:o},count:r.count-n.count,sum:r.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:ls.HISTOGRAM,dataPoints:n.map(([e,n])=>{const i=n.toPointValue(),s=t.type===us.GAUGE||t.type===us.UP_DOWN_COUNTER||t.type===us.OBSERVABLE_GAUGE||t.type===us.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:e,startTime:n.startTime,endTime:r,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:s?void 0:i.sum,buckets:i.buckets,count:i.count}}})}}}class Ss{backing;indexBase;indexStart;indexEnd;constructor(t=new xs,e=0,n=0,r=0){this.backing=t,this.indexBase=e,this.indexStart=n,this.indexEnd=r}get offset(){return this.indexStart}get length(){return 0===this.backing.length||this.indexEnd===this.indexStart&&0===this.at(0)?0:this.indexEnd-this.indexStart+1}counts(){return Array.from({length:this.length},(t,e)=>this.at(e))}at(t){const e=this.indexBase-this.indexStart;return t<e&&(t+=this.backing.length),t-=e,this.backing.countAt(t)}incrementBucket(t,e){this.backing.increment(t,e)}decrementBucket(t,e){this.backing.decrement(t,e)}trim(){for(let t=0;t<this.length;t++){if(0!==this.at(t)){this.indexStart+=t;break}if(t===this.length-1)return void(this.indexStart=this.indexEnd=this.indexBase=0)}for(let t=this.length-1;t>=0;t--)if(0!==this.at(t)){this.indexEnd-=this.length-t-1;break}this._rotate()}downscale(t){this._rotate();const e=1+this.indexEnd-this.indexStart,n=1<<t;let r=0,i=0;for(let s=this.indexStart;s<=this.indexEnd;){let t=s%n;t<0&&(t+=n);for(let o=t;o<n&&r<e;o++)this._relocateBucket(i,r),r++,s++;i++}this.indexStart>>=t,this.indexEnd>>=t,this.indexBase=this.indexStart}clone(){return new Ss(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)}_rotate(){const t=this.indexBase-this.indexStart;0!==t&&(t>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,t),this.backing.reverse(t,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+t)),this.indexBase=this.indexStart)}_relocateBucket(t,e){t!==e&&this.incrementBucket(t,this.backing.emptyBucket(e))}}class xs{_counts;constructor(t=[0]){this._counts=t}get length(){return this._counts.length}countAt(t){return this._counts[t]}growTo(t,e,n){const r=new Array(t).fill(0);r.splice(n,this._counts.length-e,...this._counts.slice(e)),r.splice(0,e,...this._counts.slice(0,e)),this._counts=r}reverse(t,e){const n=Math.floor((t+e)/2)-t;for(let r=0;r<n;r++){const n=this._counts[t+r];this._counts[t+r]=this._counts[e-r-1],this._counts[e-r-1]=n}}emptyBucket(t){const e=this._counts[t];return this._counts[t]=0,e}increment(t,e){this._counts[t]+=e}decrement(t,e){this._counts[t]>=e?this._counts[t]-=e:this._counts[t]=0}clone(){return new xs([...this._counts])}}const Es=1023,Ts=Es,As=Math.pow(2,-1022);function Cs(t){const e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);return((2146435072&e.getUint32(0))>>20)-Es}function Ps(t){const e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);const n=e.getUint32(0),r=e.getUint32(4);return(1048575&n)*Math.pow(2,32)+r}function Os(t,e){return 0===t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY||Number.isNaN(t)?t:t*Math.pow(2,e)}class ks extends Error{}class Ls{_shift;constructor(t){this._shift=-t}mapToIndex(t){if(t<As)return this._minNormalLowerBoundaryIndex();return Cs(t)+this._rightShift(Ps(t)-1,52)>>this._shift}lowerBoundary(t){const e=this._minNormalLowerBoundaryIndex();if(t<e)throw new ks(`underflow: ${t} is < minimum lower boundary: ${e}`);const n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new ks(`overflow: ${t} is > maximum lower boundary: ${n}`);return Os(1,t<<this._shift)}get scale(){return 0===this._shift?0:-this._shift}_minNormalLowerBoundaryIndex(){let t=-1022>>this._shift;return this._shift<2&&t--,t}_maxNormalLowerBoundaryIndex(){return Ts>>this._shift}_rightShift(t,e){return Math.floor(t*Math.pow(2,-e))}}class Ms{_scale;_scaleFactor;_inverseFactor;constructor(t){this._scale=t,this._scaleFactor=Os(Math.LOG2E,t),this._inverseFactor=Os(Math.LN2,-t)}mapToIndex(t){if(t<=As)return this._minNormalLowerBoundaryIndex()-1;if(0===Ps(t)){return(Cs(t)<<this._scale)-1}const e=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return e>=n?n:e}lowerBoundary(t){const e=this._maxNormalLowerBoundaryIndex();if(t>=e){if(t===e)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new ks(`overflow: ${t} is > maximum lower boundary: ${e}`)}const n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return As;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new ks(`overflow: ${t} is < minimum lower boundary: ${n}`)}return Math.exp(t*this._inverseFactor)}get scale(){return this._scale}_minNormalLowerBoundaryIndex(){return-1022<<this._scale}_maxNormalLowerBoundaryIndex(){return(1024<<this._scale)-1}}const Rs=Array.from({length:31},(t,e)=>e>10?new Ms(e-10):new Ls(e-10));function Ns(t){if(t>20||t<-10)throw new ks(`expected scale >= -10 && <= 20, got: ${t}`);return Rs[t+10]}class Is{low;high;static combine(t,e){return new Is(Math.min(t.low,e.low),Math.max(t.high,e.high))}constructor(t,e){this.low=t,this.high=e}}class Ds{startTime;_maxSize;_recordMinMax;_sum;_count;_zeroCount;_min;_max;_positive;_negative;_mapping;constructor(t=t,e=160,n=!0,r=0,i=0,s=0,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=new Ss,u=new Ss,l=Ns(20)){this.startTime=t,this._maxSize=e,this._recordMinMax=n,this._sum=r,this._count=i,this._zeroCount=s,this._min=o,this._max=a,this._positive=c,this._negative=u,this._mapping=l,this._maxSize<2&&(It.warn(`Exponential Histogram Max Size set to ${this._maxSize},                 changing to the minimum size of: 2`),this._maxSize=2)}record(t){this.updateByIncrement(t,1)}setStartTime(t){this.startTime=t}toPointValue(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}}get sum(){return this._sum}get min(){return this._min}get max(){return this._max}get count(){return this._count}get zeroCount(){return this._zeroCount}get scale(){return this._count===this._zeroCount?0:this._mapping.scale}get positive(){return this._positive}get negative(){return this._negative}updateByIncrement(t,e){Number.isNaN(t)||(t>this._max&&(this._max=t),t<this._min&&(this._min=t),this._count+=e,0!==t?(this._sum+=t*e,t>0?this._updateBuckets(this._positive,t,e):this._updateBuckets(this._negative,-t,e)):this._zeroCount+=e)}merge(t){0===this._count?(this._min=t.min,this._max=t.max):0!==t.count&&(t.min<this.min&&(this._min=t.min),t.max>this.max&&(this._max=t.max)),this.startTime=t.startTime,this._sum+=t.sum,this._count+=t.count,this._zeroCount+=t.zeroCount;const e=this._minScale(t);this._downscale(this.scale-e),this._mergeBuckets(this.positive,t,t.positive,e),this._mergeBuckets(this.negative,t,t.negative,e)}diff(t){this._min=1/0,this._max=-1/0,this._sum-=t.sum,this._count-=t.count,this._zeroCount-=t.zeroCount;const e=this._minScale(t);this._downscale(this.scale-e),this._diffBuckets(this.positive,t,t.positive,e),this._diffBuckets(this.negative,t,t.negative,e)}clone(){return new Ds(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)}_updateBuckets(t,e,n){let r=this._mapping.mapToIndex(e),i=!1,s=0,o=0;if(0===t.length?(t.indexStart=r,t.indexEnd=t.indexStart,t.indexBase=t.indexStart):r<t.indexStart&&t.indexEnd-r>=this._maxSize?(i=!0,o=r,s=t.indexEnd):r>t.indexEnd&&r-t.indexStart>=this._maxSize&&(i=!0,o=t.indexStart,s=r),i){const t=this._changeScale(s,o);this._downscale(t),r=this._mapping.mapToIndex(e)}this._incrementIndexBy(t,r,n)}_incrementIndexBy(t,e,n){if(0===n)return;if(0===t.length&&(t.indexStart=t.indexEnd=t.indexBase=e),e<t.indexStart){const n=t.indexEnd-e;n>=t.backing.length&&this._grow(t,n+1),t.indexStart=e}else if(e>t.indexEnd){const n=e-t.indexStart;n>=t.backing.length&&this._grow(t,n+1),t.indexEnd=e}let r=e-t.indexBase;r<0&&(r+=t.backing.length),t.incrementBucket(r,n)}_grow(t,e){const n=t.backing.length,r=t.indexBase-t.indexStart,i=n-r;let s=(o=e,o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,++o);var o;s>this._maxSize&&(s=this._maxSize);const a=s-r;t.backing.growTo(s,i,a)}_changeScale(t,e){let n=0;for(;t-e>=this._maxSize;)t>>=1,e>>=1,n++;return n}_downscale(t){if(0===t)return;if(t<0)throw new Error(`impossible change of scale: ${this.scale}`);const e=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=Ns(e)}_minScale(t){const e=Math.min(this.scale,t.scale),n=Is.combine(this._highLowAtScale(this.positive,this.scale,e),this._highLowAtScale(t.positive,t.scale,e)),r=Is.combine(this._highLowAtScale(this.negative,this.scale,e),this._highLowAtScale(t.negative,t.scale,e));return Math.min(e-this._changeScale(n.high,n.low),e-this._changeScale(r.high,r.low))}_highLowAtScale(t,e,n){if(0===t.length)return new Is(0,-1);const r=e-n;return new Is(t.indexStart>>r,t.indexEnd>>r)}_mergeBuckets(t,e,n,r){const i=n.offset,s=e.scale-r;for(let o=0;o<n.length;o++)this._incrementIndexBy(t,i+o>>s,n.at(o))}_diffBuckets(t,e,n,r){const i=n.offset,s=e.scale-r;for(let o=0;o<n.length;o++){let e=(i+o>>s)-t.indexBase;e<0&&(e+=t.backing.length),t.decrementBucket(e,n.at(o))}t.trim()}}class Us{_maxSize;_recordMinMax;kind=ds.EXPONENTIAL_HISTOGRAM;constructor(t,e){this._maxSize=t,this._recordMinMax=e}createAccumulation(t){return new Ds(t,this._maxSize,this._recordMinMax)}merge(t,e){const n=e.clone();return n.merge(t),n}diff(t,e){const n=e.clone();return n.diff(t),n}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:ls.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(([e,n])=>{const i=n.toPointValue(),s=t.type===us.GAUGE||t.type===us.UP_DOWN_COUNTER||t.type===us.OBSERVABLE_GAUGE||t.type===us.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:e,startTime:n.startTime,endTime:r,value:{min:i.hasMinMax?i.min:void 0,max:i.hasMinMax?i.max:void 0,sum:s?void 0:i.sum,positive:{offset:i.positive.offset,bucketCounts:i.positive.bucketCounts},negative:{offset:i.negative.offset,bucketCounts:i.negative.bucketCounts},count:i.count,scale:i.scale,zeroCount:i.zeroCount}}})}}}class $s{startTime;_current;sampleTime;constructor(t,e=0,n=[0,0]){this.startTime=t,this._current=e,this.sampleTime=n}record(t){this._current=t,this.sampleTime=or(Date.now())}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class js{kind=ds.LAST_VALUE;createAccumulation(t){return new $s(t)}merge(t,e){const n=lr(e.sampleTime)>=lr(t.sampleTime)?e:t;return new $s(t.startTime,n.toPointValue(),n.sampleTime)}diff(t,e){const n=lr(e.sampleTime)>=lr(t.sampleTime)?e:t;return new $s(e.startTime,n.toPointValue(),n.sampleTime)}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:ls.GAUGE,dataPoints:n.map(([t,e])=>({attributes:t,startTime:e.startTime,endTime:r,value:e.toPointValue()}))}}}class Bs{startTime;monotonic;_current;reset;constructor(t,e,n=0,r=!1){this.startTime=t,this.monotonic=e,this._current=n,this.reset=r}record(t){this.monotonic&&t<0||(this._current+=t)}setStartTime(t){this.startTime=t}toPointValue(){return this._current}}class Fs{monotonic;kind=ds.SUM;constructor(t){this.monotonic=t}createAccumulation(t){return new Bs(t,this.monotonic)}merge(t,e){const n=t.toPointValue(),r=e.toPointValue();return e.reset?new Bs(e.startTime,this.monotonic,r,e.reset):new Bs(t.startTime,this.monotonic,n+r)}diff(t,e){const n=t.toPointValue(),r=e.toPointValue();return this.monotonic&&n>r?new Bs(e.startTime,this.monotonic,r,!0):new Bs(e.startTime,this.monotonic,r-n)}toMetricData(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:ls.SUM,dataPoints:n.map(([t,e])=>({attributes:t,startTime:e.startTime,endTime:r,value:e.toPointValue()})),isMonotonic:this.monotonic}}}class Gs{static DEFAULT_INSTANCE=new bs;createAggregator(t){return Gs.DEFAULT_INSTANCE}}class zs{static MONOTONIC_INSTANCE=new Fs(!0);static NON_MONOTONIC_INSTANCE=new Fs(!1);createAggregator(t){switch(t.type){case us.COUNTER:case us.OBSERVABLE_COUNTER:case us.HISTOGRAM:return zs.MONOTONIC_INSTANCE;default:return zs.NON_MONOTONIC_INSTANCE}}}class Vs{static DEFAULT_INSTANCE=new js;createAggregator(t){return Vs.DEFAULT_INSTANCE}}class Hs{static DEFAULT_INSTANCE=new ws([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0);createAggregator(t){return Hs.DEFAULT_INSTANCE}}class Ws{_recordMinMax;_boundaries;constructor(t,e=!0){if(this._recordMinMax=e,null==t)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");const n=(t=(t=t.concat()).sort((t,e)=>t-e)).lastIndexOf(-1/0);let r=t.indexOf(1/0);-1===r&&(r=void 0),this._boundaries=t.slice(n+1,r)}createAggregator(t){return new ws(this._boundaries,this._recordMinMax)}}class qs{_maxSize;_recordMinMax;constructor(t=160,e=!0){this._maxSize=t,this._recordMinMax=e}createAggregator(t){return new Us(this._maxSize,this._recordMinMax)}}const Ks=new Gs,Xs=new zs,Ys=new Vs,Js=new Hs,Qs=new class{_resolve(t){switch(t.type){case us.COUNTER:case us.UP_DOWN_COUNTER:case us.OBSERVABLE_COUNTER:case us.OBSERVABLE_UP_DOWN_COUNTER:return Xs;case us.GAUGE:case us.OBSERVABLE_GAUGE:return Ys;case us.HISTOGRAM:return t.advice.explicitBucketBoundaries?new Ws(t.advice.explicitBucketBoundaries):Js}return It.warn(`Unable to recognize instrument type: ${t.type}`),Ks}createAggregator(t){return this._resolve(t).createAggregator(t)}};var Zs;function to(t){switch(t.type){case Zs.DEFAULT:return Qs;case Zs.DROP:return Ks;case Zs.SUM:return Xs;case Zs.LAST_VALUE:return Ys;case Zs.EXPONENTIAL_HISTOGRAM:{const e=t;return new qs(e.options?.maxSize,e.options?.recordMinMax)}case Zs.EXPLICIT_BUCKET_HISTOGRAM:{const e=t;return null==e.options?Js:new Ws(e.options?.boundaries,e.options?.recordMinMax)}default:throw new Error("Unsupported Aggregation")}}!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DROP=1]="DROP",t[t.SUM=2]="SUM",t[t.LAST_VALUE=3]="LAST_VALUE",t[t.EXPLICIT_BUCKET_HISTOGRAM=4]="EXPLICIT_BUCKET_HISTOGRAM",t[t.EXPONENTIAL_HISTOGRAM=5]="EXPONENTIAL_HISTOGRAM"}(Zs||(Zs={}));const eo=t=>({type:Zs.DEFAULT}),no=t=>cs.CUMULATIVE;class ro{_shutdown=!1;_metricProducers;_sdkMetricProducer;_aggregationTemporalitySelector;_aggregationSelector;_cardinalitySelector;constructor(t){this._aggregationSelector=t?.aggregationSelector??eo,this._aggregationTemporalitySelector=t?.aggregationTemporalitySelector??no,this._metricProducers=t?.metricProducers??[],this._cardinalitySelector=t?.cardinalitySelector}setMetricProducer(t){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=t,this.onInitialized()}selectAggregation(t){return this._aggregationSelector(t)}selectAggregationTemporality(t){return this._aggregationTemporalitySelector(t)}selectCardinalityLimit(t){return this._cardinalitySelector?this._cardinalitySelector(t):2e3}onInitialized(){}async collect(t){if(void 0===this._sdkMetricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");const[e,...n]=await Promise.all([this._sdkMetricProducer.collect({timeoutMillis:t?.timeoutMillis}),...this._metricProducers.map(e=>e.collect({timeoutMillis:t?.timeoutMillis}))]),r=e.errors.concat(vs(n,t=>t.errors));return{resourceMetrics:{resource:e.resourceMetrics.resource,scopeMetrics:e.resourceMetrics.scopeMetrics.concat(vs(n,t=>t.resourceMetrics.scopeMetrics))},errors:r}}async shutdown(t){this._shutdown?It.error("Cannot call shutdown twice."):(null==t?.timeoutMillis?await this.onShutdown():await gs(this.onShutdown(),t.timeoutMillis),this._shutdown=!0)}async forceFlush(t){this._shutdown?It.warn("Cannot forceFlush on already shutdown MetricReader."):null!=t?.timeoutMillis?await gs(this.onForceFlush(),t.timeoutMillis):await this.onForceFlush()}}class io extends ro{_interval;_exporter;_exportInterval;_exportTimeout;constructor(t){if(super({aggregationSelector:t.exporter.selectAggregation?.bind(t.exporter),aggregationTemporalitySelector:t.exporter.selectAggregationTemporality?.bind(t.exporter),metricProducers:t.metricProducers}),void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(void 0!==t.exportTimeoutMillis&&void 0!==t.exportIntervalMillis&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");this._exportInterval=t.exportIntervalMillis??6e4,this._exportTimeout=t.exportTimeoutMillis??3e4,this._exporter=t.exporter}async _runOnce(){try{await gs(this._doRun(),this._exportTimeout)}catch(t){if(t instanceof fs)return void It.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);nr(t)}}async _doRun(){const{resourceMetrics:t,errors:e}=await this.collect({timeoutMillis:this._exportTimeout});if(e.length>0&&It.error("PeriodicExportingMetricReader: metrics collection errors",...e),t.resource.asyncAttributesPending)try{await(t.resource.waitForAsyncAttributes?.())}catch(r){It.debug("Error while resolving async portion of resource: ",r),nr(r)}if(0===t.scopeMetrics.length)return;const n=await Mr._export(this._exporter,t);if(n.code!==dr.SUCCESS)throw new Error(`PeriodicExportingMetricReader: metrics export failed (error ${n.error})`)}onInitialized(){this._interval=setInterval(()=>{this._runOnce()},this._exportInterval),this._interval}async onForceFlush(){await this._runOnce(),await this._exporter.forceFlush()}async onShutdown(){this._interval&&clearInterval(this._interval),await this.onForceFlush(),await this._exporter.shutdown()}}class so{_shutdown=!1;_temporalitySelector;constructor(t){this._temporalitySelector=t?.temporalitySelector??no}export(t,e){if(!this._shutdown)return so._sendMetrics(t,e);setImmediate(e,{code:dr.FAILED})}forceFlush(){return Promise.resolve()}selectAggregationTemporality(t){return this._temporalitySelector(t)}shutdown(){return this._shutdown=!0,Promise.resolve()}static _sendMetrics(t,e){for(const n of t.scopeMetrics)for(const t of n.metrics)console.dir({descriptor:t.descriptor,dataPointType:t.dataPointType,dataPoints:t.dataPoints},{depth:null});e({code:dr.SUCCESS})}}class oo{_registeredViews=[];addView(t){this._registeredViews.push(t)}findViews(t,e){return this._registeredViews.filter(n=>this._matchInstrument(n.instrumentSelector,t)&&this._matchMeter(n.meterSelector,e))}_matchInstrument(t,e){return(void 0===t.getType()||e.type===t.getType())&&t.getNameFilter().match(e.name)&&t.getUnitFilter().match(e.unit)}_matchMeter(t,e){return t.getNameFilter().match(e.name)&&(void 0===e.version||t.getVersionFilter().match(e.version))&&(void 0===e.schemaUrl||t.getSchemaUrlFilter().match(e.schemaUrl))}}function ao(t,e,n){return function(t){return null!=t.match(uo)}(t)||It.warn(`Invalid metric name: "${t}". The metric name should be a ASCII string with a length no greater than 255 characters.`),{name:t,type:e,description:n?.description??"",unit:n?.unit??"",valueType:n?.valueType??P.DOUBLE,advice:n?.advice??{}}}function co(t,e){return n=t.name,r=e.name,n.toLowerCase()===r.toLowerCase()&&t.unit===e.unit&&t.type===e.type&&t.valueType===e.valueType;var n,r}const uo=/^[a-z][a-z0-9_.\-/]{0,254}$/i;class lo{_writableMetricStorage;_descriptor;constructor(t,e){this._writableMetricStorage=t,this._descriptor=e}_record(t,e={},n=Nt.active()){"number"==typeof t?(this._descriptor.valueType!==P.INT||Number.isInteger(t)||(It.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`),t=Math.trunc(t),Number.isInteger(t)))&&this._writableMetricStorage.record(t,e,n,or(Date.now())):It.warn(`non-number value provided to metric ${this._descriptor.name}: ${t}`)}}class ho extends lo{add(t,e,n){this._record(t,e,n)}}class po extends lo{add(t,e,n){t<0?It.warn(`negative value provided to counter ${this._descriptor.name}: ${t}`):this._record(t,e,n)}}class mo extends lo{record(t,e,n){this._record(t,e,n)}}class fo extends lo{record(t,e,n){t<0?It.warn(`negative value provided to histogram ${this._descriptor.name}: ${t}`):this._record(t,e,n)}}class go{_observableRegistry;_metricStorages;_descriptor;constructor(t,e,n){this._observableRegistry=n,this._descriptor=t,this._metricStorages=e}addCallback(t){this._observableRegistry.addCallback(t,this)}removeCallback(t){this._observableRegistry.removeCallback(t,this)}}class _o extends go{}class vo extends go{}class bo extends go{}function yo(t){return t instanceof go}class wo{_meterSharedState;constructor(t){this._meterSharedState=t}createGauge(t,e){const n=ao(t,us.GAUGE,e),r=this._meterSharedState.registerMetricStorage(n);return new mo(r,n)}createHistogram(t,e){const n=ao(t,us.HISTOGRAM,e),r=this._meterSharedState.registerMetricStorage(n);return new fo(r,n)}createCounter(t,e){const n=ao(t,us.COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new po(r,n)}createUpDownCounter(t,e){const n=ao(t,us.UP_DOWN_COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new ho(r,n)}createObservableGauge(t,e){const n=ao(t,us.OBSERVABLE_GAUGE,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new vo(n,r,this._meterSharedState.observableRegistry)}createObservableCounter(t,e){const n=ao(t,us.OBSERVABLE_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new _o(n,r,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(t,e){const n=ao(t,us.OBSERVABLE_UP_DOWN_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new bo(n,r,this._meterSharedState.observableRegistry)}addBatchObservableCallback(t,e){this._meterSharedState.observableRegistry.addBatchCallback(t,e)}removeBatchObservableCallback(t,e){this._meterSharedState.observableRegistry.removeBatchCallback(t,e)}}class So{_instrumentDescriptor;constructor(t){this._instrumentDescriptor=t}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(t){this._instrumentDescriptor=ao(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})}}class xo{_hash;_valueMap=new Map;_keyMap=new Map;constructor(t){this._hash=t}get(t,e){return e??=this._hash(t),this._valueMap.get(e)}getOrDefault(t,e){const n=this._hash(t);if(this._valueMap.has(n))return this._valueMap.get(n);const r=e();return this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,r),r}set(t,e,n){n??=this._hash(t),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,e)}has(t,e){return e??=this._hash(t),this._valueMap.has(e)}*keys(){const t=this._keyMap.entries();let e=t.next();for(;!0!==e.done;)yield[e.value[1],e.value[0]],e=t.next()}*entries(){const t=this._valueMap.entries();let e=t.next();for(;!0!==e.done;)yield[this._keyMap.get(e.value[0]),e.value[1],e.value[0]],e=t.next()}get size(){return this._valueMap.size}}class Eo extends xo{constructor(){super(ms)}}class To{_aggregator;_activeCollectionStorage=new Eo;_cumulativeMemoStorage=new Eo;_cardinalityLimit;_overflowAttributes={"otel.metric.overflow":!0};_overflowHashCode;constructor(t,e){this._aggregator=t,this._cardinalityLimit=(e??2e3)-1,this._overflowHashCode=ms(this._overflowAttributes)}record(t,e,n,r){let i=this._activeCollectionStorage.get(e);if(!i){if(this._activeCollectionStorage.size>=this._cardinalityLimit){const e=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,()=>this._aggregator.createAccumulation(r));return void e?.record(t)}i=this._aggregator.createAccumulation(r),this._activeCollectionStorage.set(e,i)}i?.record(t)}batchCumulate(t,e){Array.from(t.entries()).forEach(([t,n,r])=>{const i=this._aggregator.createAccumulation(e);i?.record(n);let s=i;if(this._cumulativeMemoStorage.has(t,r)){const e=this._cumulativeMemoStorage.get(t,r);s=this._aggregator.diff(e,i)}else if(this._cumulativeMemoStorage.size>=this._cardinalityLimit&&(t=this._overflowAttributes,r=this._overflowHashCode,this._cumulativeMemoStorage.has(t,r))){const e=this._cumulativeMemoStorage.get(t,r);s=this._aggregator.diff(e,i)}if(this._activeCollectionStorage.has(t,r)){const e=this._activeCollectionStorage.get(t,r);s=this._aggregator.merge(e,s)}this._cumulativeMemoStorage.set(t,i,r),this._activeCollectionStorage.set(t,s,r)})}collect(){const t=this._activeCollectionStorage;return this._activeCollectionStorage=new Eo,t}}class Ao{_aggregator;_unreportedAccumulations=new Map;_reportHistory=new Map;constructor(t,e){this._aggregator=t,e.forEach(t=>{this._unreportedAccumulations.set(t,[])})}buildMetrics(t,e,n,r){this._stashAccumulations(n);const i=this._getMergedUnreportedAccumulations(t);let s,o=i;if(this._reportHistory.has(t)){const e=this._reportHistory.get(t),n=e.collectionTime;s=e.aggregationTemporality,o=s===cs.CUMULATIVE?Ao.merge(e.accumulations,i,this._aggregator):Ao.calibrateStartTime(e.accumulations,i,n)}else s=t.selectAggregationTemporality(e.type);this._reportHistory.set(t,{accumulations:o,collectionTime:r,aggregationTemporality:s});const a=(c=o,Array.from(c.entries()));var c;if(0!==a.length)return this._aggregator.toMetricData(e,s,a,r)}_stashAccumulations(t){const e=this._unreportedAccumulations.keys();for(const n of e){let e=this._unreportedAccumulations.get(n);void 0===e&&(e=[],this._unreportedAccumulations.set(n,e)),e.push(t)}}_getMergedUnreportedAccumulations(t){let e=new Eo;const n=this._unreportedAccumulations.get(t);if(this._unreportedAccumulations.set(t,[]),void 0===n)return e;for(const r of n)e=Ao.merge(e,r,this._aggregator);return e}static merge(t,e,n){const r=t,i=e.entries();let s=i.next();for(;!0!==s.done;){const[e,o,a]=s.value;if(t.has(e,a)){const i=t.get(e,a),s=n.merge(i,o);r.set(e,s,a)}else r.set(e,o,a);s=i.next()}return r}static calibrateStartTime(t,e,n){for(const[r,i]of t.keys()){const t=e.get(r,i);t?.setStartTime(n)}return e}}class Co extends So{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(t,e,n,r,i){super(t),this._attributesProcessor=n,this._aggregationCardinalityLimit=i,this._deltaMetricStorage=new To(e,this._aggregationCardinalityLimit),this._temporalMetricStorage=new Ao(e,r)}record(t,e){const n=new Eo;Array.from(t.entries()).forEach(([t,e])=>{n.set(this._attributesProcessor.process(t),e)}),this._deltaMetricStorage.batchCumulate(n,e)}collect(t,e){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,e)}}function Po(t,e){let n="";return t.unit!==e.unit&&(n+=`\t- Unit '${t.unit}' does not match '${e.unit}'\n`),t.type!==e.type&&(n+=`\t- Type '${t.type}' does not match '${e.type}'\n`),t.valueType!==e.valueType&&(n+=`\t- Value Type '${t.valueType}' does not match '${e.valueType}'\n`),t.description!==e.description&&(n+=`\t- Description '${t.description}' does not match '${e.description}'\n`),n}function Oo(t,e){return t.valueType!==e.valueType?function(t,e){return`\t- use valueType '${t.valueType}' on instrument creation or use an instrument name other than '${e.name}'`}(t,e):t.unit!==e.unit?function(t,e){return`\t- use unit '${t.unit}' on instrument creation or use an instrument name other than '${e.name}'`}(t,e):t.type!==e.type?function(t,e){const n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return`\t- create a new view with a name other than '${t.name}' and InstrumentSelector '${r}'`}(t,e):t.description!==e.description?function(t,e){const n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return`\t- create a new view with a name other than '${t.name}' and InstrumentSelector '${r}'\n    \t- OR - create a new view with the name ${t.name} and description '${t.description}' and InstrumentSelector ${r}\n    \t- OR - create a new view with the name ${e.name} and description '${t.description}' and InstrumentSelector ${r}`}(t,e):""}class ko{_sharedRegistry=new Map;_perCollectorRegistry=new Map;static create(){return new ko}getStorages(t){let e=[];for(const r of this._sharedRegistry.values())e=e.concat(r);const n=this._perCollectorRegistry.get(t);if(null!=n)for(const r of n.values())e=e.concat(r);return e}register(t){this._registerStorage(t,this._sharedRegistry)}registerForCollector(t,e){let n=this._perCollectorRegistry.get(t);null==n&&(n=new Map,this._perCollectorRegistry.set(t,n)),this._registerStorage(e,n)}findOrUpdateCompatibleStorage(t){const e=this._sharedRegistry.get(t.name);return void 0===e?null:this._findOrUpdateCompatibleStorage(t,e)}findOrUpdateCompatibleCollectorStorage(t,e){const n=this._perCollectorRegistry.get(t);if(void 0===n)return null;const r=n.get(e.name);return void 0===r?null:this._findOrUpdateCompatibleStorage(e,r)}_registerStorage(t,e){const n=t.getInstrumentDescriptor(),r=e.get(n.name);void 0!==r?r.push(t):e.set(n.name,[t])}_findOrUpdateCompatibleStorage(t,e){let n=null;for(const r of e){const e=r.getInstrumentDescriptor();co(e,t)?(e.description!==t.description&&(t.description.length>e.description.length&&r.updateDescription(t.description),It.warn("A view or instrument with the name ",t.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",Po(e,t),"The longer description will be used.\nTo resolve the conflict:",Oo(e,t))),n=r):It.warn("A view or instrument with the name ",t.name," has already been registered and is incompatible with another registered view.\n","Details:\n",Po(e,t),"To resolve the conflict:\n",Oo(e,t))}return n}}class Lo{_backingStorages;constructor(t){this._backingStorages=t}record(t,e,n,r){this._backingStorages.forEach(i=>{i.record(t,e,n,r)})}}class Mo{_instrumentName;_valueType;_buffer=new Eo;constructor(t,e){this._instrumentName=t,this._valueType=e}observe(t,e={}){"number"==typeof t?(this._valueType!==P.INT||Number.isInteger(t)||(It.warn(`INT value type cannot accept a floating-point value for ${this._instrumentName}, ignoring the fractional digits.`),t=Math.trunc(t),Number.isInteger(t)))&&this._buffer.set(e,t):It.warn(`non-number value provided to metric ${this._instrumentName}: ${t}`)}}class Ro{_buffer=new Map;observe(t,e,n={}){if(!yo(t))return;let r=this._buffer.get(t);null==r&&(r=new Eo,this._buffer.set(t,r)),"number"==typeof e?(t._descriptor.valueType!==P.INT||Number.isInteger(e)||(It.warn(`INT value type cannot accept a floating-point value for ${t._descriptor.name}, ignoring the fractional digits.`),e=Math.trunc(e),Number.isInteger(e)))&&r.set(n,e):It.warn(`non-number value provided to metric ${t._descriptor.name}: ${e}`)}}class No{_callbacks=[];_batchCallbacks=[];addCallback(t,e){this._findCallback(t,e)>=0||this._callbacks.push({callback:t,instrument:e})}removeCallback(t,e){const n=this._findCallback(t,e);n<0||this._callbacks.splice(n,1)}addBatchCallback(t,e){const n=new Set(e.filter(yo));if(0===n.size)return void It.error("BatchObservableCallback is not associated with valid instruments",e);this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n})}removeBatchCallback(t,e){const n=new Set(e.filter(yo)),r=this._findBatchCallback(t,n);r<0||this._batchCallbacks.splice(r,1)}async observe(t,e){const n=this._observeCallbacks(t,e),r=this._observeBatchCallbacks(t,e);return(await async function(t){return Promise.all(t.map(async t=>{try{return{status:"fulfilled",value:await t}}catch(e){return{status:"rejected",reason:e}}}))}([...n,...r])).filter(_s).map(t=>t.reason)}_observeCallbacks(t,e){return this._callbacks.map(async({callback:n,instrument:r})=>{const i=new Mo(r._descriptor.name,r._descriptor.valueType);let s=Promise.resolve(n(i));null!=e&&(s=gs(s,e)),await s,r._metricStorages.forEach(e=>{e.record(i._buffer,t)})})}_observeBatchCallbacks(t,e){return this._batchCallbacks.map(async({callback:n,instruments:r})=>{const i=new Ro;let s=Promise.resolve(n(i));null!=e&&(s=gs(s,e)),await s,r.forEach(e=>{const n=i._buffer.get(e);null!=n&&e._metricStorages.forEach(e=>{e.record(n,t)})})})}_findCallback(t,e){return this._callbacks.findIndex(n=>n.callback===t&&n.instrument===e)}_findBatchCallback(t,e){return this._batchCallbacks.findIndex(n=>n.callback===t&&function(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}(n.instruments,e))}}class Io extends So{_attributesProcessor;_aggregationCardinalityLimit;_deltaMetricStorage;_temporalMetricStorage;constructor(t,e,n,r,i){super(t),this._attributesProcessor=n,this._aggregationCardinalityLimit=i,this._deltaMetricStorage=new To(e,this._aggregationCardinalityLimit),this._temporalMetricStorage=new Ao(e,r)}record(t,e,n,r){e=this._attributesProcessor.process(e,n),this._deltaMetricStorage.record(t,e,n,r)}collect(t,e){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,n,e)}}class Do{_processors;constructor(t){this._processors=t}process(t,e){let n=t;for(const r of this._processors)n=r.process(n,e);return n}}function Uo(){return $o}const $o=new class{process(t,e){return t}};class jo{_meterProviderSharedState;_instrumentationScope;metricStorageRegistry=new ko;observableRegistry=new No;meter;constructor(t,e){this._meterProviderSharedState=t,this._instrumentationScope=e,this.meter=new wo(this)}registerMetricStorage(t){const e=this._registerMetricStorage(t,Io);return 1===e.length?e[0]:new Lo(e)}registerAsyncMetricStorage(t){return this._registerMetricStorage(t,Co)}async collect(t,e,n){const r=await this.observableRegistry.observe(e,n?.timeoutMillis),i=this.metricStorageRegistry.getStorages(t);if(0===i.length)return null;const s=i.map(n=>n.collect(t,e)).filter(ps);return 0===s.length?{errors:r}:{scopeMetrics:{scope:this._instrumentationScope,metrics:s},errors:r}}_registerMetricStorage(t,e){let n=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map(n=>{const r=function(t,e){return{name:t.name??e.name,description:t.description??e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}(n,t),i=this.metricStorageRegistry.findOrUpdateCompatibleStorage(r);if(null!=i)return i;const s=n.aggregation.createAggregator(r),o=new e(r,s,n.attributesProcessor,this._meterProviderSharedState.metricCollectors,n.aggregationCardinalityLimit);return this.metricStorageRegistry.register(o),o});if(0===n.length){const r=this._meterProviderSharedState.selectAggregations(t.type).map(([n,r])=>{const i=this.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(n,t);if(null!=i)return i;const s=r.createAggregator(t),o=n.selectCardinalityLimit(t.type),a=new e(t,s,Uo(),[n],o);return this.metricStorageRegistry.registerForCollector(n,a),a});n=n.concat(r)}return n}}class Bo{resource;viewRegistry=new oo;metricCollectors=[];meterSharedStates=new Map;constructor(t){this.resource=t}getMeterSharedState(t){const e=function(t){return`${t.name}:${t.version??""}:${t.schemaUrl??""}`}(t);let n=this.meterSharedStates.get(e);return null==n&&(n=new jo(this,t),this.meterSharedStates.set(e,n)),n}selectAggregations(t){const e=[];for(const n of this.metricCollectors)e.push([n,to(n.selectAggregation(t))]);return e}}class Fo{_sharedState;_metricReader;constructor(t,e){this._sharedState=t,this._metricReader=e}async collect(t){const e=or(Date.now()),n=[],r=[],i=Array.from(this._sharedState.meterSharedStates.values()).map(async i=>{const s=await i.collect(this,e,t);null!=s?.scopeMetrics&&n.push(s.scopeMetrics),null!=s?.errors&&r.push(...s.errors)});return await Promise.all(i),{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:r}}async forceFlush(t){await this._metricReader.forceFlush(t)}async shutdown(t){await this._metricReader.shutdown(t)}selectAggregationTemporality(t){return this._metricReader.selectAggregationTemporality(t)}selectAggregation(t){return this._metricReader.selectAggregation(t)}selectCardinalityLimit(t){return this._metricReader.selectCardinalityLimit?.(t)??2e3}}const Go=/[\^$\\.+?()[\]{}|]/g;class zo{_matchAll;_regexp;constructor(t){"*"===t?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(zo.escapePattern(t)))}match(t){return!!this._matchAll||this._regexp.test(t)}static escapePattern(t){return`^${t.replace(Go,"\\$&").replace("*",".*")}$`}static hasWildcard(t){return t.includes("*")}}class Vo{_matchAll;_pattern;constructor(t){this._matchAll=void 0===t,this._pattern=t}match(t){return!!this._matchAll||t===this._pattern}}class Ho{_nameFilter;_type;_unitFilter;constructor(t){this._nameFilter=new zo(t?.name??"*"),this._type=t?.type,this._unitFilter=new Vo(t?.unit)}getType(){return this._type}getNameFilter(){return this._nameFilter}getUnitFilter(){return this._unitFilter}}class Wo{_nameFilter;_versionFilter;_schemaUrlFilter;constructor(t){this._nameFilter=new Vo(t?.name),this._versionFilter=new Vo(t?.version),this._schemaUrlFilter=new Vo(t?.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}class qo{name;description;aggregation;attributesProcessor;instrumentSelector;meterSelector;aggregationCardinalityLimit;constructor(t){var e;!function(t){if(null==(e=t).instrumentName&&null==e.instrumentType&&null==e.instrumentUnit&&null==e.meterName&&null==e.meterVersion&&null==e.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");var e;if(null!=t.name&&(null==t?.instrumentName||zo.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}(t),null!=t.attributesProcessors?this.attributesProcessor=(e=t.attributesProcessors,new Do(e)):this.attributesProcessor=Uo(),this.name=t.name,this.description=t.description,this.aggregation=to(t.aggregation??{type:Zs.DEFAULT}),this.instrumentSelector=new Ho({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new Wo({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl}),this.aggregationCardinalityLimit=t.aggregationCardinalityLimit}}class Ko{_sharedState;_shutdown=!1;constructor(t){if(this._sharedState=new Bo(t?.resource??fe()),null!=t?.views&&t.views.length>0)for(const e of t.views)this._sharedState.viewRegistry.addView(new qo(e));if(null!=t?.readers&&t.readers.length>0)for(const e of t.readers){const t=new Fo(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)}}getMeter(t,e="",n={}){return this._shutdown?(It.warn("A shutdown MeterProvider cannot provide a Meter"),V):this._sharedState.getMeterSharedState({name:t,version:e,schemaUrl:n.schemaUrl}).meter}async shutdown(t){this._shutdown?It.warn("shutdown may only be called once per MeterProvider"):(this._shutdown=!0,await Promise.all(this._sharedState.metricCollectors.map(e=>e.shutdown(t))))}async forceFlush(t){this._shutdown?It.warn("invalid attempt to force flush after MeterProvider shutdown"):await Promise.all(this._sharedState.metricCollectors.map(e=>e.forceFlush(t)))}}class Xo{emit(t){}}const Yo=new Xo;const Jo=new class{getLogger(t,e,n){return new Xo}};class Qo{constructor(t,e,n,r){this._provider=t,this.name=e,this.version=n,this.options=r}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Yo}}class Zo{getLogger(t,e,n){var r;return null!==(r=this.getDelegateLogger(t,e,n))&&void 0!==r?r:new Qo(this,t,e,n)}getDelegate(){var t;return null!==(t=this._delegate)&&void 0!==t?t:Jo}setDelegate(t){this._delegate=t}getDelegateLogger(t,e,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getLogger(t,e,n)}}const ta="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},ea=Symbol.for("io.opentelemetry.js.api.logs"),na=ta;class ra{constructor(){this._proxyLoggerProvider=new Zo}static getInstance(){return this._instance||(this._instance=new ra),this._instance}setGlobalLoggerProvider(t){return na[ea]?this.getLoggerProvider():(na[ea]=(e=1,n=t,r=Jo,t=>t===e?n:r),this._proxyLoggerProvider.setDelegate(t),t);var e,n,r}getLoggerProvider(){var t,e;return null!==(e=null===(t=na[ea])||void 0===t?void 0:t.call(na,1))&&void 0!==e?e:this._proxyLoggerProvider}getLogger(t,e,n){return this.getLoggerProvider().getLogger(t,e,n)}disable(){delete na[ea],this._proxyLoggerProvider=new Zo}}const ia=ra.getInstance();class sa{hrTime;hrTimeObserved;spanContext;resource;instrumentationScope;attributes={};_severityText;_severityNumber;_body;_eventName;totalAttributesCount=0;_isReadonly=!1;_logRecordLimits;set severityText(t){this._isLogRecordReadonly()||(this._severityText=t)}get severityText(){return this._severityText}set severityNumber(t){this._isLogRecordReadonly()||(this._severityNumber=t)}get severityNumber(){return this._severityNumber}set body(t){this._isLogRecordReadonly()||(this._body=t)}get body(){return this._body}get eventName(){return this._eventName}set eventName(t){this._isLogRecordReadonly()||(this._eventName=t)}get droppedAttributesCount(){return this.totalAttributesCount-Object.keys(this.attributes).length}constructor(t,e,n){const{timestamp:r,observedTimestamp:i,eventName:s,severityNumber:o,severityText:a,body:c,attributes:u={},context:l}=n,d=Date.now();if(this.hrTime=ur(r??d),this.hrTimeObserved=ur(i??d),l){const t=Xt.getSpanContext(l);t&&yt(t)&&(this.spanContext=t)}this.severityNumber=o,this.severityText=a,this.body=c,this.resource=t.resource,this.instrumentationScope=e,this._logRecordLimits=t.logRecordLimits,this._eventName=s,this.setAttributes(u)}setAttribute(t,e){return this._isLogRecordReadonly()||null===e?this:0===t.length?(It.warn(`Invalid attribute key: ${t}`),this):Zn(e)||"object"==typeof e&&!Array.isArray(e)&&Object.keys(e).length>0?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(1===this.droppedAttributesCount&&It.warn("Dropping extra attributes."),this):(Zn(e)?this.attributes[t]=this._truncateToSize(e):this.attributes[t]=e,this)):(It.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(const[e,n]of Object.entries(t))this.setAttribute(e,n);return this}setBody(t){return this.body=t,this}setEventName(t){return this.eventName=t,this}setSeverityNumber(t){return this.severityNumber=t,this}setSeverityText(t){return this.severityText=t,this}_makeReadonly(){this._isReadonly=!0}_truncateToSize(t){const e=this._logRecordLimits.attributeValueLengthLimit;return e<=0?(It.warn(`Attribute value limit must be positive, got ${e}`),t):"string"==typeof t?this._truncateToLimitUtil(t,e):Array.isArray(t)?t.map(t=>"string"==typeof t?this._truncateToLimitUtil(t,e):t):t}_truncateToLimitUtil(t,e){return t.length<=e?t:t.substring(0,e)}_isLogRecordReadonly(){return this._isReadonly&&It.warn("Can not execute the operation on emitted log record"),this._isReadonly}}class oa{instrumentationScope;_sharedState;constructor(t,e){this.instrumentationScope=t,this._sharedState=e}emit(t){const e=t.context||Nt.active(),n=new sa(this._sharedState,this.instrumentationScope,{context:e,...t});this._sharedState.activeProcessor.onEmit(n,e),n._makeReadonly()}}class aa{forceFlush(){return Promise.resolve()}onEmit(t,e){}shutdown(){return Promise.resolve()}}class ca{processors;forceFlushTimeoutMillis;constructor(t,e){this.processors=t,this.forceFlushTimeoutMillis=e}async forceFlush(){const t=this.forceFlushTimeoutMillis;await Promise.all(this.processors.map(e=>function(t,e){let n;const r=new Promise(function(t,r){n=setTimeout(function(){r(new Or("Operation timed out."))},e)});return Promise.race([t,r]).then(t=>(clearTimeout(n),t),t=>{throw clearTimeout(n),t})}(e.forceFlush(),t)))}onEmit(t,e){this.processors.forEach(n=>n.onEmit(t,e))}async shutdown(){await Promise.all(this.processors.map(t=>t.shutdown()))}}class ua{resource;forceFlushTimeoutMillis;logRecordLimits;processors;loggers=new Map;activeProcessor;registeredLogRecordProcessors=[];constructor(t,e,n,r){this.resource=t,this.forceFlushTimeoutMillis=e,this.logRecordLimits=n,this.processors=r,r.length>0?(this.registeredLogRecordProcessors=r,this.activeProcessor=new ca(this.registeredLogRecordProcessors,this.forceFlushTimeoutMillis)):this.activeProcessor=new aa}}class la{_shutdownOnce;_sharedState;constructor(t={}){const e=function(...t){let e=t.shift();const n=new WeakMap;for(;t.length>0;)e=xr(e,t.shift(),0,n);return e}({},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},includeTraceContext:!0},t),n=t.resource??fe();var r;this._sharedState=new ua(n,e.forceFlushTimeoutMillis,{attributeCountLimit:(r=e.logRecordLimits).attributeCountLimit??void 0??void 0??128,attributeValueLengthLimit:r.attributeValueLengthLimit??void 0??void 0??1/0},t?.processors??[]),this._shutdownOnce=new Lr(this._shutdown,this)}getLogger(t,e,n){if(this._shutdownOnce.isCalled)return It.warn("A shutdown LoggerProvider cannot provide a Logger"),Yo;t||It.warn("Logger requested without instrumentation scope name.");const r=t||"unknown",i=`${r}@${e||""}:${n?.schemaUrl||""}`;return this._sharedState.loggers.has(i)||this._sharedState.loggers.set(i,new oa({name:r,version:e,schemaUrl:n?.schemaUrl},this._sharedState)),this._sharedState.loggers.get(i)}forceFlush(){return this._shutdownOnce.isCalled?(It.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()}shutdown(){return this._shutdownOnce.isCalled?(It.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()}_shutdown(){return this._sharedState.activeProcessor.shutdown()}}class da{export(t,e){this._sendLogRecords(t,e)}shutdown(){return Promise.resolve()}_exportInfo(t){return{resource:{attributes:t.resource.attributes},instrumentationScope:t.instrumentationScope,timestamp:lr(t.hrTime),traceId:t.spanContext?.traceId,spanId:t.spanContext?.spanId,traceFlags:t.spanContext?.traceFlags,severityText:t.severityText,severityNumber:t.severityNumber,body:t.body,attributes:t.attributes}}_sendLogRecords(t,e){for(const n of t)console.dir(this._exportInfo(n),{depth:3});e?.({code:dr.SUCCESS})}}class ha{_exporter;_shutdownOnce;_unresolvedExports;constructor(t){this._exporter=t,this._shutdownOnce=new Lr(this._shutdown,this),this._unresolvedExports=new Set}onEmit(t){if(this._shutdownOnce.isCalled)return;const e=()=>Mr._export(this._exporter,[t]).then(t=>{t.code!==dr.SUCCESS&&nr(t.error??new Error(`SimpleLogRecordProcessor: log record export failed (status ${t})`))}).catch(nr);if(t.resource.asyncAttributesPending){const n=t.resource.waitForAsyncAttributes?.().then(()=>(this._unresolvedExports.delete(n),e()),nr);null!=n&&this._unresolvedExports.add(n)}else e()}async forceFlush(){await Promise.all(Array.from(this._unresolvedExports))}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class pa{constructor(t={}){var e,n,r;if(this._resource=fe().merge(null!==(e=t.resource)&&void 0!==e?e:pe({})),this._resourceDetectors=null!==(n=t.resourceDetectors)&&void 0!==n?n:[Jn],this._serviceName=t.serviceName,this._serviceVersion=t.serviceVersion,this._autoDetectResources=null===(r=t.autoDetectResources)||void 0===r||r,t.spanProcessor||t.traceExporter||t.spanProcessors){const e={};t.sampler&&(e.sampler=t.sampler),t.spanLimits&&(e.spanLimits=t.spanLimits),t.idGenerator&&(e.idGenerator=t.idGenerator);const n=t.spanProcessors||[];t.traceExporter&&n.push(new mn(t.traceExporter)),this._tracerProviderConfig={tracerConfig:e,spanProcessor:t.spanProcessor,spanProcessors:n,contextManager:t.contextManager,textMapPropagator:t.textMapPropagator}}t.metricExporters&&(this._meterProviderConfig={metricExporters:t.metricExporters}),t.logExporters&&(this._loggerProviderConfig={logExporters:t.logExporters});let i=[];t.instrumentations&&(i=t.instrumentations),this._instrumentations=i}start(){var t,e,n,r,i;if(this._disabled)return;if(this._autoDetectResources){const t={detectors:this._resourceDetectors};this._resource=this._resource.merge(_e(t))}this._resource=void 0===this._serviceName?this._resource:this._resource.merge(pe({[zn]:this._serviceName})),void 0!==this._serviceVersion&&(this._resource=this._resource.merge(pe({[Vn]:this._serviceVersion})));const s=[];(null===(t=this._tracerProviderConfig)||void 0===t?void 0:t.spanProcessor)&&s.push(this._tracerProviderConfig.spanProcessor),(null===(e=this._tracerProviderConfig)||void 0===e?void 0:e.spanProcessors)&&s.push(...this._tracerProviderConfig.spanProcessors);const o=new jn(Object.assign(Object.assign({},null===(n=this._tracerProviderConfig)||void 0===n?void 0:n.tracerConfig),{resource:this._resource,spanProcessors:s}));if(this._tracerProvider=o,o.register({contextManager:null===(r=this._tracerProviderConfig)||void 0===r?void 0:r.contextManager,propagator:null===(i=this._tracerProviderConfig)||void 0===i?void 0:i.textMapPropagator}),this._meterProviderConfig){const t=this._meterProviderConfig.metricExporters.map(t=>new io({exporter:t}));this._meterProvider=new Ko({resource:this._resource,readers:t}),$t.setGlobalMeterProvider(this._meterProvider)}if(this._loggerProviderConfig){const t=this._loggerProviderConfig.logExporters.map(t=>new ha(t));this._loggerProvider=new la({resource:this._resource,processors:t}),ia.setGlobalLoggerProvider(this._loggerProvider)}!function(t){const e=t.tracerProvider||Xt.getTracerProvider(),n=t.meterProvider||$t.getMeterProvider(),r=t.loggerProvider||ie.getLoggerProvider(),i=t.instrumentations?.flat()??[];(function(t,e,n,r){for(let i=0,s=t.length;i<s;i++){const s=t[i];e&&s.setTracerProvider(e),n&&s.setMeterProvider(n),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}})(i,e,n,r)}({instrumentations:this._instrumentations})}getResourceAttributes(){return this._resource.attributes}forceFlush(){const t=[];return this._tracerProvider&&t.push(this._tracerProvider.forceFlush()),this._meterProvider&&t.push(this._meterProvider.forceFlush()),this._loggerProvider&&t.push(this._loggerProvider.forceFlush()),Promise.all(t).then(()=>{})}shutdown(){const t=[];return this._tracerProvider&&t.push(this._tracerProvider.shutdown()),this._meterProvider&&t.push(this._meterProvider.shutdown()),this._loggerProvider&&t.push(this._loggerProvider.shutdown()),Promise.all(t).then(()=>{})}}const ma="https://api.honeycomb.io",fa="v1/traces",ga=`${ma}/${fa}`,_a="v1/metrics",va=`${ma}/${_a}`,ba="v1/logs",ya=`${ma}/${ba}`,wa={apiKey:"",tracesApiKey:"",endpoint:ga,tracesEndpoint:ga,serviceName:"unknown_service",debug:!1,sampleRate:1,skipOptionsValidation:!1,localVisualizations:!1,webVitalsInstrumentationConfig:{enabled:!0}},Sa=t=>`@honeycombio/opentelemetry-web: ${t}`,xa=/^[a-f0-9]*$/,Ea=/^hc[a-z]ic_[a-z0-9]*$/;function Ta(t){return null!=t&&0!==t.length&&(32===t.length?xa.test(t):64===t.length&&Ea.test(t))}function Aa(t,e){return t.endsWith(e)||t.endsWith(`${e}/`)?t:t.endsWith("/")?t+e:t+"/"+e}const Ca=t=>(null==t?void 0:t.tracesEndpoint)?t.tracesEndpoint:(null==t?void 0:t.endpoint)?Aa(t.endpoint,fa):ga,Pa=t=>(null==t?void 0:t.metricsEndpoint)?t.metricsEndpoint:(null==t?void 0:t.endpoint)?Aa(t.endpoint,_a):va,Oa=t=>(null==t?void 0:t.logsEndpoint)?t.logsEndpoint:(null==t?void 0:t.endpoint)?Aa(t.endpoint,ba):ya,ka=t=>(null==t?void 0:t.tracesApiKey)||(null==t?void 0:t.apiKey),La=t=>"number"==typeof(null==t?void 0:t.sampleRate)&&Number.isSafeInteger(null==t?void 0:t.sampleRate)&&(null==t?void 0:t.sampleRate)>=0?null==t?void 0:t.sampleRate:1,Ma=Sa(" Missing API Key. Set `apiKey` in HoneycombOptions. Telemetry will not be exported."),Ra=Sa(` Missing Service Name. Set \`serviceName\` in HoneycombOptions. Defaulting to '${wa.serviceName}'`),Na=(Sa(" Dataset is ignored in favor of service name."),Sa(" Missing dataset. Specify either HONEYCOMB_DATASET environment variable or dataset in the options parameter."),Sa(" Skipping options validation. To re-enable, set skipOptionsValidation option or HONEYCOMB_SKIP_OPTIONS_VALIDATION to false."),Sa(" Skipping options validation, because a custom collector is being used."),Sa(" Default deterministic sampler has been overridden. Honeycomb requires a resource attribute called SampleRate to properly show weighted values. Non-deterministic sampleRate could lead to missing spans in Honeycomb. See our docs for more details. https://docs.honeycomb.io/getting-data-in/opentelemetry/node-distro/#sampling-without-the-honeycomb-sdk"),Sa(" Disabling local visualizations - must have both service name and API key configured."),Sa(" Disabling local visualizations - cannot infer auth and ui url roots from endpoint url."),Sa(" Failed to get proper auth response from Honeycomb. No local visualization available."),Sa(" Default honeycomb exporter disabled but no exporters provided"),t=>{var e,n;(null==t?void 0:t.logLevel)?t.logLevel:v.DEBUG;if(null==t?void 0:t.skipOptionsValidation)return void v.DEBUG;const r=null!==(e=null==t?void 0:t.tracesEndpoint)&&void 0!==e?e:null==t?void 0:t.endpoint;if(!r||!(t=>{try{return!new URL(t).hostname.endsWith(".honeycomb.io")}catch(e){return!1}})(r))return!(null==t?void 0:t.apiKey)&&v.WARN,!(null==t?void 0:t.serviceName)&&v.WARN,(null==t?void 0:t.apiKey)&&!Ta(null==t?void 0:t.apiKey)&&(null==t?void 0:t.dataset)&&v.WARN,(null==t?void 0:t.apiKey)&&Ta(null==t?void 0:t.apiKey)&&!(null==t?void 0:t.dataset)&&v.WARN,(null==t?void 0:t.sampler)&&v.DEBUG,!0===(null==t?void 0:t.disableDefaultTraceExporter)&&!(null==t?void 0:t.traceExporter)&&(null===(n=null==t?void 0:t.traceExporters)||void 0===n||n.length),t;v.DEBUG});function Ia(t){if(!(null==t?void 0:t.debug))return;It.setLogger(new M,v.DEBUG),It.debug(Sa(" Honeycomb Web SDK Debug Mode Enabled "));const e=Ca(t),n=Object.assign(Object.assign(Object.assign({},wa),t),{tracesEndpoint:e});!function(t){const e=ka(t)||"";if(!e)return void It.debug(Ma);It.debug(Sa(`API Key configured for traces: '${e}'`))}(n),function(t){const e=t.serviceName||wa.serviceName;if(e===wa.serviceName)return void It.debug(Ra);It.debug(`@honeycombio/opentelemetry-web: Service Name configured for traces: '${e}'`)}(n),function(t){const e=Ca(t);if(!e)return void It.debug(Sa("No endpoint configured for traces"));It.debug(Sa(`Endpoint configured for traces: '${e}'`))}(n),function(t){const e=La(t);if(!e)return void It.debug("No sampler configured for traces");It.debug(Sa(`Sample Rate configured for traces: '${e}'`))}(n)}const Da=t=>{if(null==t?void 0:t.sampler)return t.sampler;const e=La(t);return new Ua(e)};class Ua{constructor(t){switch(this._sampleRate=t,t){case 0:this._sampler=new sn;break;case 1:this._sampler=new on;break;default:{const e=1/t;this._sampler=new cn(e);break}}}shouldSample(t,e,n,r,i,s){const o=this._sampler.shouldSample(t,e,n,r,i,s);return Object.assign(Object.assign({},o),{attributes:Object.assign(Object.assign({},o.attributes),{SampleRate:this._sampleRate})})}toString(){return`DeterministicSampler(${this._sampler.toString()})`}}class $a{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const ja=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ba=t=>{if("loading"===document.readyState)return"loading";{const e=ja();if(e){if(t<e.domInteractive)return"loading";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return"dom-interactive";if(0===e.domComplete||t<e.domComplete)return"dom-content-loaded"}}return"complete"},Fa=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Ga=t=>{let e="";try{for(;9!==t?.nodeType;){const n=t,r=n.id?"#"+n.id:[Fa(n),...Array.from(n.classList).sort()].join(".");if(e.length+r.length>99)return e||r;if(e=e?r+">"+e:r,n.id)break;t=n.parentNode}}catch{}return e},za=new WeakMap;function Va(t,e){return za.get(t)||za.set(t,new e),za.get(t)}let Ha=-1;const Wa=()=>Ha,qa=t=>{addEventListener("pageshow",e=>{e.persisted&&(Ha=e.timeStamp,t(e))},!0)},Ka=(t,e,n,r)=>{let i,s;return o=>{var a,c;e.value>=0&&(o||r)&&(s=e.value-(i??0),(s||void 0===i)&&(i=e.value,e.delta=s,e.rating=(a=e.value)>(c=n)[1]?"poor":a>c[0]?"needs-improvement":"good",t(e)))}},Xa=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},Ya=()=>{const t=ja();return t?.activationStart??0},Ja=(t,e=-1)=>{const n=ja();let r="navigate";return Wa()>=0?r="back-forward-cache":n&&(document.prerendering||Ya()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Qa=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(t=>{Promise.resolve().then(()=>{e(t.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Za=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let tc=-1;const ec=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,nc=t=>{"hidden"===document.visibilityState&&tc>-1&&(tc="visibilitychange"===t.type?t.timeStamp:0,ic())},rc=()=>{addEventListener("visibilitychange",nc,!0),addEventListener("prerenderingchange",nc,!0)},ic=()=>{removeEventListener("visibilitychange",nc,!0),removeEventListener("prerenderingchange",nc,!0)},sc=()=>{if(tc<0){const t=Ya(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0]?.startTime;tc=e??ec(),rc(),qa(()=>{setTimeout(()=>{tc=ec(),rc()})})}return{get firstHiddenTime(){return tc}}},oc=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},ac=[1800,3e3],cc=(t,e={})=>{oc(()=>{const n=sc();let r,i=Ja("FCP");const s=Qa("paint",t=>{for(const e of t)"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-Ya(),0),i.entries.push(e),r(!0)))});s&&(r=Ka(t,i,ac,e.reportAllChanges),qa(n=>{i=Ja("FCP"),r=Ka(t,i,ac,e.reportAllChanges),Xa(()=>{i.value=performance.now()-n.timeStamp,r(!0)})}))})},uc=[.1,.25],lc=t=>t.find(t=>1===t.node?.nodeType)||t[0];let dc=0,hc=1/0,pc=0;const mc=t=>{for(const e of t)e.interactionId&&(hc=Math.min(hc,e.interactionId),pc=Math.max(pc,e.interactionId),dc=pc?(pc-hc)/7+1:0)};let fc;const gc=()=>fc?dc:performance.interactionCount??0;let _c=0;class vc{l=[];h=new Map;m;p;v(){_c=gc(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((gc()-_c)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&"first-input"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort((t,e)=>e.T-t.T),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const bc=t=>{const e=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?t():(t=Za(t),document.addEventListener("visibilitychange",t,{once:!0}),e(()=>{t(),document.removeEventListener("visibilitychange",t)}))},yc=[200,500],wc=(t,e={})=>{const n=Va(e=Object.assign({},e),vc);let r=[],i=[],s=0;const o=new WeakMap,a=new WeakMap;let c=!1;const u=()=>{c||(bc(l),c=!0)},l=()=>{const t=n.l.map(t=>o.get(t.entries[0])),e=i.length-50;i=i.filter((n,r)=>r>=e||t.includes(n));const a=new Set;for(const n of i){const t=d(n.startTime,n.processingEnd);for(const e of t)a.add(e)}const u=r.length-1-50;r=r.filter((t,e)=>t.startTime>s&&e>u||a.has(t)),c=!1};n.m=t=>{const e=t.startTime+t.duration;let n;s=Math.max(s,t.processingEnd);for(let r=i.length-1;r>=0;r--){const s=i[r];if(Math.abs(e-s.renderTime)<=8){n=s,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},i.push(n)),(t.interactionId||"first-input"===t.entryType)&&o.set(t,n),u()},n.p=t=>{if(!a.get(t)){const n=(e.generateTarget??Ga)(t.entries[0].target);a.set(t,n)}};const d=(t,e)=>{const n=[];for(const i of r)if(!(i.startTime+i.duration<t)){if(i.startTime>e)break;n.push(i)}return n};Qa("long-animation-frame",t=>{r=r.concat(t),u()}),((t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&oc(()=>{"interactionCount"in performance||fc||(fc=Qa("event",mc,{type:"event",buffered:!0,durationThreshold:0}));let n,r=Ja("INP");const i=Va(e,vc),s=t=>{bc(()=>{for(const n of t)i.u(n);const e=i.M();e&&e.T!==r.value&&(r.value=e.T,r.entries=e.entries,n())})},o=Qa("event",s,{durationThreshold:e.durationThreshold??40});n=Ka(t,r,yc,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(s(o.takeRecords()),n(!0))}),qa(()=>{i.v(),r=Ja("INP"),n=Ka(t,r,yc,e.reportAllChanges)}))})})(e=>{const r=(t=>{const e=t.entries[0],r=o.get(e),i=e.processingStart,s=Math.max(e.startTime+e.duration,i),c=Math.min(r.processingEnd,s),u=r.entries.sort((t,e)=>t.processingStart-e.processingStart),l=d(e.startTime,c),h=n.h.get(e.interactionId),p={interactionTarget:a.get(h),interactionType:e.name.startsWith("key")?"keyboard":"pointer",interactionTime:e.startTime,nextPaintTime:s,processedEventEntries:u,longAnimationFrameEntries:l,inputDelay:i-e.startTime,processingDuration:c-i,presentationDelay:s-c,loadState:Ba(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};return(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,r=t.processingDuration;let i,s,o=0,a=0,c=0,u=0;for(const h of t.longAnimationFrameEntries){a=a+h.startTime+h.duration-h.styleAndLayoutStart;for(const t of h.scripts){const c=t.startTime+t.duration;if(c<e)continue;const l=c-Math.max(e,t.startTime),d=t.duration?l/t.duration*t.forcedStyleAndLayoutDuration:0;o+=l-d,a+=d,l>u&&(s=t.startTime<e+n?"input-delay":t.startTime>=e+n+r?"presentation-delay":"processing-duration",i=t,u=l)}}const l=t.longAnimationFrameEntries.at(-1),d=l?l.startTime+l.duration:0;d>=e+n+r&&(c=t.nextPaintTime-d),i&&s&&(t.longestScript={entry:i,subpart:s,intersectingDuration:u}),t.totalScriptDuration=o,t.totalStyleAndLayoutDuration=a,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-o-a-c})(p),Object.assign(t,{attribution:p})})(e);t(r)},e)};class Sc{m;u(t){this.m?.(t)}}const xc=[2500,4e3],Ec=[800,1800],Tc=t=>{document.prerendering?oc(()=>Tc(t)):"complete"!==document.readyState?addEventListener("load",()=>Tc(t),!0):setTimeout(t)},Ac="browser.name",Cc="browser.version",Pc="browser.touch_screen_enabled",Oc="browser.width",kc="browser.height",Lc="device.type",Mc="network.effectiveType",Rc="screen.width",Nc="screen.height",Ic="screen.size",Dc="page.hash",Uc="page.url",$c="page.route",jc="page.hostname",Bc="page.search",Fc="url.path",Gc="entry_page.url",zc="entry_page.path",Vc="entry_page.search",Hc="entry_page.hash",Wc="entry_page.hostname",qc="entry_page.referrer",Kc="honeycomb.distro.version",Xc="honeycomb.distro.runtime_version",Yc="cls.id",Jc="cls.value",Qc="cls.delta",Zc="cls.rating",tu="cls.navigation_type",eu="lcp.id",nu="lcp.value",ru="lcp.delta",iu="lcp.rating",su="lcp.navigation_type",ou="inp.id",au="inp.value",cu="inp.delta",uu="inp.rating",lu="inp.navigation_type",du="fcp.id",hu="fcp.value",pu="fcp.delta",mu="fcp.rating",fu="fcp.navigation_type",gu="ttfb.id",_u="ttfb.value",vu="ttfb.delta",bu="ttfb.rating",yu="ttfb.navigation_type",wu="cls.largest_shift_target",Su="cls.element",xu="cls.largest_shift_time",Eu="cls.largest_shift_value",Tu="cls.load_state",Au="cls.had_recent_input",Cu="lcp.element",Pu="lcp.url",Ou="lcp.time_to_first_byte",ku="lcp.resource_load_delay",Lu="lcp.resource_load_duration",Mu="lcp.element_render_delay",Ru="lcp.resource_load_time",Nu="inp.input_delay",Iu="inp.interaction_target",Du="inp.interaction_time",Uu="inp.interaction_type",$u="inp.load_state",ju="inp.next_paint_time",Bu="inp.presentation_delay",Fu="inp.processing_duration",Gu="inp.duration",zu="inp.element",Vu="inp.event_type",Hu="inp.timing.script.entry_type",Wu="inp.timing.script.start_time",qu="inp.timing.script.execution_start",Ku="inp.timing.script.duration",Xu="inp.timing.script.forced_style_and_layout_duration",Yu="inp.timing.script.invoker",Ju="inp.timing.script.pause_duration",Qu="inp.timing.script.source_url",Zu="inp.timing.script.source_function_name",tl="inp.timing.script.source_char_position",el="inp.timing.script.window_attribution",nl="inp.timing.duration",rl="inp.timing.entryType",il="inp.timing.name",sl="inp.timing.renderStart",ol="inp.timing.startTime",al="fcp.time_to_first_byte",cl="fcp.time_since_first_byte",ul="fcp.load_state",ll="ttfb.waiting_duration",dl="ttfb.dns_duration",hl="ttfb.connection_duration",pl="ttfb.request_duration",ml="ttfb.cache_duration",fl="ttfb.waiting_time",gl="ttfb.dns_time",_l="ttfb.connection_time",vl="ttfb.request_time";class bl{constructor(t,e,n={}){this.instrumentationName=t,this.instrumentationVersion=e,this._wrap=Ur.wrap,this._unwrap=Ur.unwrap,this._massWrap=Ur.massWrap,this._massUnwrap=Ur.massUnwrap,this._config=Object.assign({enabled:!0},n),this._diag=It.createComponentLogger({namespace:t}),this._tracer=Xt.getTracer(t,e),this._meter=$t.getMeter(t,e),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t={}){this._config=Object.assign({},t)}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}}class yl extends bl{constructor({enabled:t=!0,vitalsToTrack:e=["CLS","LCP","INP","TTFB","FCP"],lcp:n,cls:r,inp:i,fcp:s,ttfb:o}={}){super("@honeycombio/instrumentation-web-vitals",Rr,{enabled:t,vitalsToTrack:e,lcp:n,cls:r,inp:i,fcp:s,ttfb:o}),this.onReportCLS=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{largestShiftTarget:s,largestShiftTime:o,largestShiftValue:a,loadState:c,largestShiftEntry:u}=i,l=this.tracer.startSpan(r);l.setAttributes({[Yc]:t.id,[Qc]:t.delta,[Jc]:t.value,[Zc]:t.rating,[tu]:t.navigationType,[wu]:s,[Su]:s,[xu]:o,[Eu]:a,[Tu]:c,[Au]:null==u?void 0:u.hadRecentInput}),n&&n(t,l),l.end()},this.onReportLCP=(t,e={})=>{const{applyCustomAttributes:n,dataAttributes:r}=e;if(!this.isEnabled())return;const{name:i,attribution:s}=t,{target:o,url:a,timeToFirstByte:c,resourceLoadDelay:u,resourceLoadDuration:l,elementRenderDelay:d,lcpEntry:h}=s,p=this.tracer.startSpan(i);p.setAttributes({[eu]:t.id,[ru]:t.delta,[nu]:t.value,[iu]:t.rating,[su]:t.navigationType,[Cu]:o,[Pu]:a,[Ou]:c,[ku]:u,[Lu]:l,[Mu]:d,[Ru]:l}),this.addDataAttributes(null==h?void 0:h.element,p,r,"lcp"),n&&n(t,p),p.end()},this.onReportINP=(t,e={includeTimingsAsSpans:!1})=>{const{applyCustomAttributes:n,includeTimingsAsSpans:r,dataAttributes:i}=e;if(!this.isEnabled())return;const{name:s,attribution:o}=t,{inputDelay:a,interactionTarget:c,interactionTime:u,interactionType:l,loadState:d,nextPaintTime:h,presentationDelay:p,processingDuration:m,longAnimationFrameEntries:f}=o,g=a+m+p;this.tracer.startActiveSpan(s,{startTime:u},e=>{const s={[ou]:t.id,[cu]:t.delta,[au]:t.value,[uu]:t.rating,[lu]:t.navigationType,[Nu]:a,[Iu]:c,[Du]:u,[Uu]:l,[$u]:d,[ju]:h,[Bu]:p,[Fu]:m,[Gu]:g,[zu]:c,[Vu]:l};e.setAttributes(s),t.entries.forEach(t=>{this.addDataAttributes(this.getElementFromNode(t.target),e,i,"inp")}),n&&n(t,e),r&&f.forEach(t=>{this.processPerformanceLongAnimationFrameTimingSpans("inp",t)}),e.end(u+g)})},this.onReportFCP=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{timeToFirstByte:s,firstByteToFCP:o,loadState:a}=i,c=this.tracer.startSpan(r);c.setAttributes({[du]:t.id,[pu]:t.delta,[hu]:t.value,[mu]:t.rating,[fu]:t.navigationType,[al]:s,[cl]:o,[ul]:a}),n&&n(t,c),c.end()},this.onReportTTFB=(t,e={})=>{const{applyCustomAttributes:n}=e;if(!this.isEnabled())return;const{name:r,attribution:i}=t,{cacheDuration:s,connectionDuration:o,dnsDuration:a,requestDuration:c,waitingDuration:u}=i,l={[gu]:t.id,[vu]:t.delta,[_u]:t.value,[bu]:t.rating,[yu]:t.navigationType,[ll]:u,[dl]:a,[hl]:o,[pl]:c,[ml]:s,[fl]:u,[gl]:a,[_l]:o,[vl]:c},d=this.tracer.startSpan(r);d.setAttributes(l),n&&n(t,d),d.end()},this.vitalsToTrack=[...e],this.lcpOpts=n,this.clsOpts=r,this.inpOpts=i,this.fcpOpts=s,this.ttfbOpts=o,this._isEnabled=t,this._setupWebVitalsCallbacks()}init(){}_setupWebVitalsCallbacks(){this.vitalsToTrack.includes("CLS")&&((t,e={})=>{const n=Va(e=Object.assign({},e),$a),r=new WeakMap;n.t=t=>{if(t?.sources?.length){const n=lc(t.sources);if(n){const t=(e.generateTarget??Ga)(n.node);r.set(n,t)}}},((t,e={})=>{cc(Za(()=>{let n,r=Ja("CLS",0);const i=Va(e,$a),s=t=>{for(const e of t)i.u(e);i.o>r.value&&(r.value=i.o,r.entries=i.i,n())},o=Qa("layout-shift",s);o&&(n=Ka(t,r,uc,e.reportAllChanges),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(s(o.takeRecords()),n(!0))}),qa(()=>{i.o=0,r=Ja("CLS",0),n=Ka(t,r,uc,e.reportAllChanges),Xa(()=>n())}),setTimeout(n))}))})(e=>{const n=(t=>{let e={};if(t.entries.length){const n=t.entries.reduce((t,e)=>t.value>e.value?t:e);if(n?.sources?.length){const t=lc(n.sources);t&&(e={largestShiftTarget:r.get(t),largestShiftTime:n.startTime,largestShiftValue:n.value,largestShiftSource:t,largestShiftEntry:n,loadState:Ba(n.startTime)})}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportCLS(t,this.clsOpts)},this.clsOpts),this.vitalsToTrack.includes("LCP")&&((t,e={})=>{const n=Va(e=Object.assign({},e),Sc),r=new WeakMap;n.m=t=>{if(t.element){const n=(e.generateTarget??Ga)(t.element);r.set(t,n)}},((t,e={})=>{oc(()=>{const n=sc();let r,i=Ja("LCP");const s=Va(e,Sc),o=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)s.u(e),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-Ya(),0),i.entries=[e],r())},a=Qa("largest-contentful-paint",o);if(a){r=Ka(t,i,xc,e.reportAllChanges);const n=Za(()=>{o(a.takeRecords()),a.disconnect(),r(!0)});for(const t of["keydown","click","visibilitychange"])addEventListener(t,()=>bc(n),{capture:!0,once:!0});qa(n=>{i=Ja("LCP"),r=Ka(t,i,xc,e.reportAllChanges),Xa(()=>{i.value=performance.now()-n.timeStamp,r(!0)})})}})})(e=>{const n=(t=>{let e={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const n=ja();if(n){const i=n.activationStart||0,s=t.entries.at(-1),o=s.url&&performance.getEntriesByType("resource").filter(t=>t.name===s.url)[0],a=Math.max(0,n.responseStart-i),c=Math.max(a,o?(o.requestStart||o.startTime)-i:0),u=Math.min(t.value,Math.max(c,o?o.responseEnd-i:0));e={target:r.get(s),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:u-c,elementRenderDelay:t.value-u,navigationEntry:n,lcpEntry:s},s.url&&(e.url=s.url),o&&(e.lcpResourceEntry=o)}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportLCP(t,this.lcpOpts)},this.lcpOpts),this.vitalsToTrack.includes("INP")&&wc(t=>{this.onReportINP(t,this.inpOpts)},this.inpOpts),this.vitalsToTrack.includes("TTFB")&&((t,e={})=>{((t,e={})=>{let n=Ja("TTFB"),r=Ka(t,n,Ec,e.reportAllChanges);Tc(()=>{const i=ja();i&&(n.value=Math.max(i.responseStart-Ya(),0),n.entries=[i],r(!0),qa(()=>{n=Ja("TTFB",0),r=Ka(t,n,Ec,e.reportAllChanges),r(!0)}))})})(e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],r=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-r,0),s=Math.max(n.domainLookupStart-r,0),o=Math.max(n.connectStart-r,0),a=Math.max(n.connectEnd-r,0);e={waitingDuration:i,cacheDuration:s-i,dnsDuration:o-s,connectionDuration:a-o,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportTTFB(t,this.ttfbOpts)},this.ttfbOpts),this.vitalsToTrack.includes("FCP")&&((t,e={})=>{cc(e=>{const n=(t=>{let e={timeToFirstByte:0,firstByteToFCP:t.value,loadState:Ba(Wa())};if(t.entries.length){const n=ja(),r=t.entries.at(-1);if(n){const i=n.activationStart||0,s=Math.max(0,n.responseStart-i);e={timeToFirstByte:s,firstByteToFCP:t.value-s,loadState:Ba(t.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(t,{attribution:e})})(e);t(n)},e)})(t=>{this.onReportFCP(t,this.fcpOpts)},this.fcpOpts)}getAttrPrefix(t){return t.toLowerCase()}getAttributesForPerformanceLongAnimationFrameTiming(t){return{[nl]:t.duration,[rl]:t.entryType,[il]:t.name,[sl]:t.renderStart,[ol]:t.startTime}}getAttributesForPerformanceScriptTiming(t){return{[Hu]:t.entryType,[Wu]:t.startTime,[qu]:t.executionStart,[Ku]:t.duration,[Xu]:t.forcedStyleAndLayoutDuration,[Yu]:t.invoker,[Ju]:t.pauseDuration,[Qu]:t.sourceURL,[Zu]:t.sourceFunctionName,[tl]:t.sourceCharPosition,[el]:t.windowAttribution}}processPerformanceLongAnimationFrameTimingSpans(t,e){if(!e)return;const n=this.getAttributesForPerformanceLongAnimationFrameTiming(e);this.tracer.startActiveSpan(e.name,{startTime:e.startTime},r=>{r.setAttributes(n),this.processPerformanceScriptTimingSpans(t,e.scripts),r.end(e.startTime+e.duration)})}processPerformanceScriptTimingSpans(t,e){e&&(null==e?void 0:e.length)&&e.map(t=>{this.tracer.startActiveSpan(t.name,{startTime:t.startTime},e=>{const n=this.getAttributesForPerformanceScriptTiming(t);e.setAttributes(n),e.end(t.startTime+t.duration)})})}getElementFromNode(t){if((null==t?void 0:t.nodeType)===Node.ELEMENT_NODE)return t}addDataAttributes(t,e,n,r){const i=t;if(null==i?void 0:i.dataset)for(const s in i.dataset){const t=i.dataset[s];void 0===t||void 0!==n&&!n.includes(s)||e.setAttribute(`${r}.element.data.${s}`,t)}}disable(){this.isEnabled()?(this._isEnabled=!1,this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,this._diag.debug("Instrumentation  enabled"),this._diag.debug(`Sending spans for ${this.vitalsToTrack.join(",")}`))}isEnabled(){return this._isEnabled}}const wl="@honeycombio/instrumentation-global-errors";function Sl(t,e={},n=Xt.getTracer(wl),r){const i=t.message,s=t.name,o=Object.assign(Object.assign({[Gn]:s,[Bn]:i,[Fn]:t.stack},function(t){if(!t)return{};const e=Fr.computeStackTrace(t).stack,n=[],r=[],i=[],s=[];return Array.isArray(e)?(e.forEach(t=>{n.push(t.line),r.push(t.column),i.push(t.func),s.push(t.url)}),{"exception.structured_stacktrace.columns":r,"exception.structured_stacktrace.lines":n,"exception.structured_stacktrace.functions":i,"exception.structured_stacktrace.urls":s}):{}}(t)),e),a=n.startSpan("exception",{attributes:o},Nt.active());r&&r(a,t),a.setStatus({code:Pt.ERROR,message:i}),a.end()}class xl extends bl{constructor({enabled:t=!0,applyCustomAttributesOnSpan:e}={}){super(wl,Rr,{enabled:t,applyCustomAttributesOnSpan:e}),this.onError=t=>{const e="reason"in t?t.reason:t.error;e&&Sl(e,{},this.tracer,this.applyCustomAttributesOnSpan)},t&&this.enable(),this._isEnabled=t,this.applyCustomAttributesOnSpan=e}init(){}disable(){this.isEnabled()?(this._isEnabled=!1,window.removeEventListener("error",this.onError),window.removeEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  disabled")):this._diag.debug("Instrumentation already disabled")}enable(){this.isEnabled()?this._diag.debug("Instrumentation already enabled"):(this._isEnabled=!0,window.addEventListener("error",this.onError),window.addEventListener("unhandledrejection",this.onError),this._diag.debug("Instrumentation  enabled"))}isEnabled(){return this._isEnabled}}const El="x-honeycomb-team",Tl="x-honeycomb-dataset";function Al(t,e,n,r=!1){const i=Object.assign(Object.assign({},null==t?void 0:t.headers),n);return e&&!i[El]&&(i[El]=e),Ta(e)&&(r&&(null==t?void 0:t.metricsDataset)?i[Tl]=null==t?void 0:t.metricsDataset:(null==t?void 0:t.dataset)&&(i[Tl]=null==t?void 0:t.dataset)),i}const Cl=(t="")=>{const e=new URL(t),n=/(api)([.|-])?(.*?)(\.?)(honeycomb\.io)(.*)/.exec(e.host);if(null===n)return{authRoot:void 0,uiRoot:void 0};let r,i;"-"===n[2]?(r=`api-${n[3]}`,i=`ui-${n[3]}`):(r=n[3]?`api.${n[3]}`:"api",i=n[3]?`ui.${n[3]}`:"ui");return{authRoot:`${e.protocol}//${r}.honeycomb.io/1/auth`,uiRoot:`${e.protocol}//${i}.honeycomb.io`}};class Pl{constructor(t,e,n,r,i){if(this._traceUrl="",this._logLevel=v.DEBUG,n&&(this._logLevel=n),!t||!e)return this._logLevel,void v.DEBUG;if(!r||!i)return this._logLevel,void v.DEBUG;fetch(r,{headers:{"x-honeycomb-team":e}}).then(t=>{if(t.ok)return t.json();throw new Error}).then(n=>{var r,s,o;const a=n;if(!(null===(r=a.team)||void 0===r?void 0:r.slug))throw new Error;this._traceUrl=function(t,e,n,r,i){let s=`${i}/${n}`;!Ta(t)&&r&&(s+=`/environments/${r}`);return s+=`/datasets/${e}/trace?trace_id`,s}(e,t,null===(s=a.team)||void 0===s?void 0:s.slug,null===(o=a.environment)||void 0===o?void 0:o.slug,i)}).catch(()=>{this._logLevel,v.INFO})}export(t,e){this._traceUrl&&t.forEach(t=>{var e;!(null===(e=t.parentSpanContext)||void 0===e?void 0:e.spanId)&&(this._logLevel,v.INFO)}),e({code:dr.SUCCESS})}shutdown(){return Promise.resolve()}}function Ol(t){const e=[];return(null==t?void 0:t.localVisualizations)&&e.push(function(t){const e=ka(t),{authRoot:n,uiRoot:r}=Cl((null==t?void 0:t.tracesEndpoint)||Ca(t));return new Pl(null==t?void 0:t.serviceName,e,null==t?void 0:t.logLevel,n,r)}(t)),(null==t?void 0:t.traceExporter)&&e.push(null==t?void 0:t.traceExporter),(null==t?void 0:t.traceExporters)&&e.push(...t.traceExporters),!0!==(null==t?void 0:t.disableDefaultTraceExporter)&&e.unshift(function(t){const e=ka(t);return new Hi({url:Ca(t),headers:Al(t,e,null==t?void 0:t.tracesHeaders),timeoutMillis:(null==t?void 0:t.tracesTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),n=[...e],new Ml(n);var n}function kl(t){const e=[];return(null==t?void 0:t.metricExporters)&&e.push(...t.metricExporters),!0!==(null==t?void 0:t.disableDefaultMetricExporter)&&e.unshift(function(t){const e=(t=>(null==t?void 0:t.metricsApiKey)||(null==t?void 0:t.apiKey))(t);return new ts({url:Pa(t),headers:Al(t,e,null==t?void 0:t.metricsHeaders,!0),timeoutMillis:(null==t?void 0:t.metricsTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),(null==t?void 0:t.localVisualizations)&&e.push(new so),e}function Ll(t){const e=[];return e.push(function(t){const e=(t=>(null==t?void 0:t.logsApiKey)||(null==t?void 0:t.apiKey))(t);return new es({url:Oa(t),headers:Al(t,e,null==t?void 0:t.logsHeaders),timeoutMillis:(null==t?void 0:t.logsTimeout)||(null==t?void 0:t.timeout)||1e4})}(t)),(null==t?void 0:t.localVisualizations)&&e.push(new da),e}class Ml{constructor(t){this._exporters=t}export(t,e){this._exporters.forEach(n=>n.export(t,e)),e({code:dr.SUCCESS})}async shutdown(){const t=[];this._exporters.forEach(e=>t.push(e.shutdown())),await Promise.all(t)}}class Rl{constructor(){}onStart(t,e){var n,r;(null!==(r=null===(n=qt.getBaggage(e))||void 0===n?void 0:n.getAllEntries())&&void 0!==r?r:[]).forEach(e=>{t.setAttribute(e[0],e[1].value),It.debug(`@honeycombio/opentelemetry-web:  Baggage in all outgoing headers: ${e[0]}=${e[1].value} `)})}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}class Nl{constructor(){}onStart(t){const{href:e,pathname:n,search:r,hash:i,hostname:s}=window.location;t.setAttributes({[Oc]:window.innerWidth,[kc]:window.innerHeight,[Dc]:i,[Uc]:e,[$c]:n,[jc]:s,[Bc]:r,[Fc]:n})}onEnd(){}forceFlush(){return Promise.resolve()}shutdown(){return Promise.resolve()}}const Il=(new fn).generateTraceId(),Dl={getSessionId:()=>Il},Ul=t=>{const e=[];var n;return(null==t?void 0:t.disableBrowserAttributes)||e.push(new Nl),e.push(new Rl,(n=(null==t?void 0:t.sessionProvider)||Dl,new ns(n)),...(null==t?void 0:t.spanProcessors)||[]),e},$l="browser.language",jl="browser.mobile",Bl="telemetry.distro.name",Fl="telemetry.distro.version";const Gl={path:!0,hash:!0,hostname:!0,referrer:!0,url:!1,search:!1};function zl(t){if(!1===t||!(null===window||void 0===window?void 0:window.location))return pe({});const e=function(t){if(!t)return Gl;return Object.assign(Object.assign({},Gl),t)}(t),{href:n,pathname:r,search:i,hash:s,hostname:o}=window.location;return pe({[Gc]:Vl(e.url,n),[zc]:Vl(e.path,r),[Vc]:Vl(e.search,i),[Hc]:Vl(e.hash,s),[Wc]:Vl(e.hostname,o),[qc]:Vl(e.referrer,document.referrer)})}function Vl(t,e){if(t)return e}function Hl(){const{browserName:t,browserVersion:e,deviceType:n}=(t=>{const e=new as(t),{name:n,version:r}=e.getBrowser();return{browserName:null!=n?n:"unknown",browserVersion:null!=r?r:"unknown",deviceType:(i=e.getDevice().type,s=n,i||s?i||"desktop":"unknown")};var i,s})(navigator.userAgent);var r,i,s;return pe({[Hn]:navigator.userAgent,[jl]:navigator.userAgent.includes("Mobi"),[Pc]:navigator.maxTouchPoints>0,[$l]:navigator.language,[Ac]:t,[Cc]:e,[Lc]:n,[Mc]:(i=navigator.connection,null!==(s=null==i?void 0:i.effectiveType)&&void 0!==s?s:"unknown"),[Rc]:window.screen.width,[Nc]:window.screen.height,[Ic]:(r=window.screen.width,r<=768?"small":r>768&&r<=1024?"medium":r>1024?"large":"unknown")})}const Wl=t=>{let e=pe({});return(null==t?void 0:t.disableBrowserAttributes)||(e=e.merge(zl(null==t?void 0:t.entryPageAttributes)).merge(Hl())),e=e.merge(pe({[Kc]:Rr,[Xc]:"browser",[Bl]:"@honeycombio/opentelemetry-web",[Fl]:Rr})),(null==t?void 0:t.resource)&&(e=e.merge(t.resource)),(null==t?void 0:t.resourceAttributes)&&(e=e.merge(pe(t.resourceAttributes))),e};class ql extends pa{constructor(t){var e,n;const r=[...(null==t?void 0:t.instrumentations)||[]];!1!==(null===(e=null==t?void 0:t.webVitalsInstrumentationConfig)||void 0===e?void 0:e.enabled)&&r.push(new yl(null==t?void 0:t.webVitalsInstrumentationConfig)),!1!==(null===(n=null==t?void 0:t.globalErrorsInstrumentationConfig)||void 0===n?void 0:n.enabled)&&r.push(new xl(null==t?void 0:t.globalErrorsInstrumentationConfig)),super(Object.assign(Object.assign({},t),{instrumentations:r,resource:Wl(t),sampler:Da(t),spanProcessors:Ul(t),traceExporter:Ol(t),metricExporters:kl(t),logExporters:Ll(t)})),Na(t),(null==t?void 0:t.debug)&&Ia(t)}}const Kl="claude-browser-extension";async function Xl(t,e,n){return Xt.getTracer(Kl).startActiveSpan(t,{kind:At.INTERNAL},n?Xt.setSpan(Nt.active(),n):Nt.active(),async t=>{try{const n=await e(t);return t.setStatus({code:Pt.OK}),n}catch(n){throw t.setStatus({code:Pt.ERROR,message:n.message}),t.recordException(n),n}finally{t.end()}})}function Yl(t){const e="0123456789abcdef",n=Array.from({length:32},()=>e[Math.floor(16*Math.random())]).join(""),r=Array.from({length:16},()=>e[Math.floor(16*Math.random())]).join(""),i={traceparent:`00-${n}-${r}-01`,"x-cloud-trace-context":`${n}/${parseInt(r,16).toString()};o=1`,baggage:"forceTrace=true","x-refinery-force-trace":"true"};return{traceId:n,headers:i}}function Jl(){const t=n(),e=chrome.runtime.getManifest();try{new ql({debug:"production"!==t.environment||!1,apiKey:"hcaik_01k4x5jaf9v7sdymjzmxvktd6whp9x2y75jj8y5f8y7aaf1zy6aedg9858",serviceName:Kl,sampleRate:1,resourceAttributes:{"extension.version":e.version,"build.type":"external"},webVitalsInstrumentationConfig:{enabled:!1}}).start()}catch{return}}class Ql{permissions=[];cache=new Map;getSkipAllPermissions;forcePrompt=!1;bypassLocalhostForMcp=!1;turnApprovedDomains=new Set;constructor(t,e){this.getSkipAllPermissions=t,this.bypassLocalhostForMcp=e?.bypassLocalhostForMcp??!1,this.loadPermissions(),this.setupStorageListener()}setForcePrompt(t){this.forcePrompt=t}setTurnApprovedDomains(t){this.turnApprovedDomains.clear();for(const e of t){const t=this.normalizeDomain(e);t&&this.turnApprovedDomains.add(t)}}clearTurnApprovedDomains(){this.turnApprovedDomains.clear()}isTurnApprovedDomain(t){const e=this.normalizeDomain(t);return!!e&&this.turnApprovedDomains.has(e)}getTurnApprovedDomains(){return Array.from(this.turnApprovedDomains)}normalizeDomain(t){try{if(t.startsWith("http://")||t.startsWith("https://")){return new URL(t).hostname.toLowerCase().replace(/^www\./,"")}return t.toLowerCase().replace(/^www\./,"").split("/")[0]}catch{return null}}async checkPermission(t,e){if(this.bypassLocalhostForMcp&&this.isLocalhostUrl(t))return{allowed:!0,needsPrompt:!1};if(!this.forcePrompt&&this.getSkipAllPermissions())return{allowed:!0,permission:void 0};const{host:n}=new URL(t);if(!this.forcePrompt&&this.isTurnApprovedDomain(n))return{allowed:!0,needsPrompt:!1};await this.loadPermissions();const i=this.findApplicablePermission(n,e);return i?(i.lastUsed=Date.now(),await this.savePermissions(),{allowed:i.action===r.ALLOW,permission:i}):(this.forcePrompt,{allowed:!1,needsPrompt:!0})}async checkDomainTransition(t,e){if(this.bypassLocalhostForMcp){const n=this.isLocalhostDomain(t),r=this.isLocalhostDomain(e);if(r)return{allowed:!0,needsPrompt:!1};if(n&&!r)return{allowed:!1,needsPrompt:!0}}if(this.forcePrompt)return{allowed:!1,needsPrompt:!0};if(this.isTurnApprovedDomain(e))return{allowed:!0,needsPrompt:!1};await this.loadPermissions();const n=this.permissions.filter(n=>"domain_transition"===n.scope.type&&n.scope.fromDomain===t&&n.scope.toDomain===e),i=n.find(t=>t.action===r.DENY);if(i)return i.lastUsed=Date.now(),await this.savePermissions(),{allowed:!1,permission:i};const s=n.find(t=>t.action===r.ALLOW);return s?(s.lastUsed=Date.now(),await this.savePermissions(),{allowed:!0,permission:s}):{allowed:!1,needsPrompt:!0}}async grantPermission(t,e,n){const s={id:crypto.randomUUID(),scope:t,action:r.ALLOW,duration:e,createdAt:Date.now(),toolUseId:e===i.ONCE?n:void 0};this.permissions.push(s),await this.savePermissions(),this.clearCache()}async denyPermission(t,e){if(e===i.ONCE)return;const n={id:crypto.randomUUID(),scope:t,action:r.DENY,duration:e,createdAt:Date.now()};e===i.ALWAYS&&this.permissions.push(n),await this.savePermissions(),this.clearCache()}async revokePermission(t){this.permissions=this.permissions.filter(e=>e.id!==t),await this.savePermissions(),this.clearCache()}async clearAllPermissions(){this.permissions=[],await this.savePermissions(),this.clearCache()}async clearOncePermissions(){const t=this.permissions.length;this.permissions=this.permissions.filter(t=>t.duration!==i.ONCE);t-this.permissions.length>0&&(await this.savePermissions(),this.clearCache())}getPermissionsByScope(){return{netloc:this.permissions.filter(t=>"netloc"===t.scope.type),domain_transition:this.permissions.filter(t=>"domain_transition"===t.scope.type)}}getAllPermissions(){return[...this.permissions]}findApplicablePermission(t,e){const n=`${t}:${e||"no-tool"}`;if(this.cache.has(n))return this.cache.get(n);if(e){const n=this.permissions.find(n=>n.duration===i.ONCE&&n.toolUseId===e&&"netloc"===n.scope.type&&n.scope.netloc&&this.matchesNetloc(t,n.scope.netloc));if(n)return this.revokePermission(n.id),n}this.permissions.forEach(t=>{});const s=this.permissions.filter(e=>"netloc"===e.scope.type&&e.duration!==i.ONCE&&e.scope.netloc&&this.matchesNetloc(t,e.scope.netloc)),o=s.find(t=>t.action===r.DENY);if(o)return this.cache.set(n,o),o;const a=s.find(t=>t.action===r.ALLOW);return a?(this.cache.set(n,a),a):null}async hasSiteWidePermissions(t){return await this.loadPermissions(),this.permissions.some(e=>"netloc"===e.scope.type&&e.duration===i.ALWAYS&&e.action===r.ALLOW&&e.scope.netloc&&this.matchesNetloc(t,e.scope.netloc))}matchesNetloc(t,e){if(e.startsWith("*.")){const n=e.slice(2);return t===n||t.endsWith("."+n)}return t===e||t.replace(/^www\./,"")===e.replace(/^www\./,"")}async loadPermissions(){try{const t=await s(o.PERMISSION_STORAGE);t&&(this.permissions=t.permissions||[])}catch(t){}}async savePermissions(){try{const t={permissions:this.permissions};await a(o.PERMISSION_STORAGE,t)}catch(t){}}setupStorageListener(){chrome.storage.onChanged.addListener((t,e)=>{"local"===e&&t[o.PERMISSION_STORAGE]&&(this.loadPermissions(),this.clearCache())})}clearCache(){this.cache.clear()}isLocalhostDomain(t){const e=t.toLowerCase();return"localhost"===e||"127.0.0.1"===e||"[::1]"===e||"::1"===e||e.startsWith("127.")||e.endsWith(".localhost")}isLocalhostUrl(t){try{const e=new URL(t),n=e.protocol;return("http:"===n||"https:"===n)&&this.isLocalhostDomain(e.hostname)}catch{return!1}}}const Zl="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,td=globalThis,ed="10.22.0";function nd(){return rd(td),td}function rd(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||ed,e[ed]=e[ed]||{}}function id(t,e,n=td){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[ed]=r[ed]||{};return i[t]||(i[t]=e())}const sd=["debug","info","warn","error","log","assert","trace"],od={};function ad(t){if(!("console"in td))return t();const e=td.console,n={},r=Object.keys(od);r.forEach(t=>{const r=od[t];n[t]=e[t],e[t]=r});try{return t()}finally{r.forEach(t=>{e[t]=n[t]})}}function cd(){return ld().enabled}function ud(t,...e){Zl&&cd()&&ad(()=>{td.console[t](`Sentry Logger [${t}]:`,...e)})}function ld(){return Zl?id("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const dd={enable:function(){ld().enabled=!0},disable:function(){ld().enabled=!1},isEnabled:cd,log:function(...t){ud("log",...t)},warn:function(...t){ud("warn",...t)},error:function(...t){ud("error",...t)}},hd="?",pd=/\(error: (.*)\)/,md=/captureMessage|captureException/;function fd(...t){const e=t.sort((t,e)=>t[0]-e[0]).map(t=>t[1]);return(t,n=0,r=0)=>{const i=[],s=t.split("\n");for(let o=n;o<s.length;o++){let t=s[o];t.length>1024&&(t=t.slice(0,1024));const n=pd.test(t)?t.replace(pd,"$1"):t;if(!n.match(/\S*Error: /)){for(const t of e){const e=t(n);if(e){i.push(e);break}}if(i.length>=50+r)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(gd(e).function||"")&&e.pop();e.reverse(),md.test(gd(e).function||"")&&(e.pop(),md.test(gd(e).function||"")&&e.pop());return e.slice(0,50).map(t=>({...t,filename:t.filename||gd(e).filename,function:t.function||hd}))}(i.slice(r))}}function gd(t){return t[t.length-1]||{}}const _d="<anonymous>";function vd(t){try{return t&&"function"==typeof t&&t.name||_d}catch{return _d}}function bd(t){const e=t.exception;if(e){const t=[];try{return e.values.forEach(e=>{e.stacktrace.frames&&t.push(...e.stacktrace.frames)}),t}catch{return}}}const yd={},wd={};function Sd(t,e){yd[t]=yd[t]||[],yd[t].push(e)}function xd(t,e){if(!wd[t]){wd[t]=!0;try{e()}catch(n){Zl&&dd.error(`Error while instrumenting ${t}`,n)}}}function Ed(t,e){const n=t&&yd[t];if(n)for(const i of n)try{i(e)}catch(r){Zl&&dd.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${vd(i)}\nError:`,r)}}let Td=null;function Ad(){Td=td.onerror,td.onerror=function(t,e,n,r,i){return Ed("error",{column:r,error:i,line:n,msg:t,url:e}),!!Td&&Td.apply(this,arguments)},td.onerror.__SENTRY_INSTRUMENTED__=!0}let Cd=null;function Pd(){Cd=td.onunhandledrejection,td.onunhandledrejection=function(t){return Ed("unhandledrejection",t),!Cd||Cd.apply(this,arguments)},td.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Od=Object.prototype.toString;function kd(t){switch(Od.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Bd(t,Error)}}function Ld(t,e){return Od.call(t)===`[object ${e}]`}function Md(t){return Ld(t,"ErrorEvent")}function Rd(t){return Ld(t,"DOMError")}function Nd(t){return Ld(t,"String")}function Id(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Dd(t){return null===t||Id(t)||"object"!=typeof t&&"function"!=typeof t}function Ud(t){return Ld(t,"Object")}function $d(t){return"undefined"!=typeof Event&&Bd(t,Event)}function jd(t){return Boolean(t?.then&&"function"==typeof t.then)}function Bd(t,e){try{return t instanceof e}catch{return!1}}function Fd(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}const Gd=td;function zd(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=Vd(n,l),!("html"===u||s>1&&o+i.length*c+u.length>=d));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function Vd(t,e){const n=t,r=[];if(!n?.tagName)return"";if(Gd.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e?.length?e.filter(t=>n.getAttribute(t)).map(t=>[t,n.getAttribute(t)]):null;if(i?.length)i.forEach(t=>{r.push(`[${t[0]}="${t[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const t=n.className;if(t&&Nd(t)){const e=t.split(/\s+/);for(const t of e)r.push(`.${t}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const t=n.getAttribute(o);t&&r.push(`[${o}="${t}"]`)}return r.join("")}function Hd(){try{return Gd.document.location.href}catch{return""}}function Wd(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function qd(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const e=t[r];try{Fd(e)?n.push("[VueViewModel]"):n.push(String(e))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Kd(t,e,n=!1){return!!Nd(t)&&(Ld(e,"RegExp")?e.test(t):!!Nd(e)&&(n?t===e:t.includes(e)))}function Xd(t,e=[],n=!1){return e.some(e=>Kd(t,e,n))}function Yd(t,e,n){if(!(e in t))return;const r=t[e];if("function"!=typeof r)return;const i=n(r);"function"==typeof i&&Qd(i,r);try{t[e]=i}catch{Zl&&dd.log(`Failed to replace method "${e}" in object`,t)}}function Jd(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Zl&&dd.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Qd(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Jd(t,"__sentry_original__",e)}catch{}}function Zd(t){return t.__sentry_original__}function th(t){if(kd(t))return{message:t.message,name:t.name,stack:t.stack,...nh(t)};if($d(t)){const e={type:t.type,target:eh(t.target),currentTarget:eh(t.currentTarget),...nh(t)};return"undefined"!=typeof CustomEvent&&Bd(t,CustomEvent)&&(e.detail=t.detail),e}return t}function eh(t){try{return e=t,"undefined"!=typeof Element&&Bd(e,Element)?zd(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function nh(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}let rh;function ih(t=function(){const t=td;return t.crypto||t.msCrypto}()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return rh||(rh="10000000100040008000100000000000"),rh.replace(/[018]/g,t=>(t^(16*Math.random()&15)>>t/4).toString(16))}function sh(t){return t.exception?.values?.[0]}function oh(t){const{message:e,event_id:n}=t;if(e)return e;const r=sh(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ah(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function ch(t,e){const n=sh(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...r?.data,...e.data};n.mechanism.data=t}}function uh(t){if(function(t){try{return t.__sentry_captured__}catch{}}(t))return!0;try{Jd(t,"__sentry_captured__",!0)}catch{}return!1}function lh(){return Date.now()/1e3}let dh;function hh(){return(dh??(dh=function(){const{performance:t}=td;if(!t?.now||!t.timeOrigin)return lh;const e=t.timeOrigin;return()=>(e+t.now())/1e3}()))()}function ph(t){const e=hh(),n={sid:ih(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return{sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}(n)};return t&&mh(n,t),n}function mh(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||hh(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:ih()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function fh(t,e,n=2){if(!e||"object"!=typeof e||n<=0)return e;if(t&&0===Object.keys(e).length)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=fh(r[i],e[i],n-1));return r}function gh(){return ih()}function _h(){return ih().substring(16)}const vh="_sentrySpan";function bh(t,e){e?Jd(t,vh,e):delete t[vh]}function yh(t){return t[vh]}class wh{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:gh(),sampleRand:Math.random()}}clone(){const t=new wh;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,bh(t,yh(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&mh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t,n=e instanceof wh?e.getScopeData():Ud(e)?t:void 0,{tags:r,extra:i,user:s,contexts:o,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...i},this._contexts={...this._contexts,...o},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,bh(this,void 0),this._attachments=[],this.setPropagationContext({traceId:gh(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:lh(),...t,message:t.message?Wd(t.message,2048):t.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:yh(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=fh(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e?.event_id||ih();if(!this._client)return Zl&&dd.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},this),n}captureMessage(t,e,n){const r=n?.event_id||ih();if(!this._client)return Zl&&dd.warn("No client configured on scope - will not capture message!"),r;const i=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureEvent(t,e){const n=e?.event_id||ih();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(Zl&&dd.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}class Sh{constructor(t,e){let n,r;n=t||new wh,r=e||new wh,this._stack=[{scope:n}],this._isolationScope=r}withScope(t){const e=this._pushScope();let n;try{n=t(e)}catch(r){throw this._popScope(),r}return jd(n)?n.then(t=>(this._popScope(),t),t=>{throw this._popScope(),t}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function xh(){const t=rd(nd());return t.stack=t.stack||new Sh(id("defaultCurrentScope",()=>new wh),id("defaultIsolationScope",()=>new wh))}function Eh(t){return xh().withScope(t)}function Th(t,e){const n=xh();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Ah(t){return xh().withScope(()=>t(xh().getIsolationScope()))}function Ch(t){const e=rd(t);return e.acs?e.acs:{withIsolationScope:Ah,withScope:Eh,withSetScope:Th,withSetIsolationScope:(t,e)=>Ah(e),getCurrentScope:()=>xh().getScope(),getIsolationScope:()=>xh().getIsolationScope()}}function Ph(){return Ch(nd()).getCurrentScope()}function Oh(){return Ch(nd()).getIsolationScope()}function kh(){return Ph().getClient()}function Lh(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=e,s={trace_id:n,span_id:i||_h()};return r&&(s.parent_span_id=r),s}const Mh="sentry.profile_id",Rh="sentry.exclusive_time";function Nh(t){if(t){if("object"==typeof t&&"deref"in t&&"function"==typeof t.deref)try{return t.deref()}catch{return}return t}}function Ih(t){const e=t;return{scope:e._sentryScope,isolationScope:Nh(e._sentryIsolationScope)}}const Dh=/^sentry-/;function Uh(t){const e=function(t){if(!t||!Nd(t)&&!Array.isArray(t))return;if(Array.isArray(t))return t.reduce((t,e)=>{const n=$h(e);return Object.entries(n).forEach(([e,n])=>{t[e]=n}),t},{});return $h(t)}(t);if(!e)return;const n=Object.entries(e).reduce((t,[e,n])=>{if(e.match(Dh)){t[e.slice(7)]=n}return t},{});return Object.keys(n).length>0?n:void 0}function $h(t){return t.split(",").map(t=>{const e=t.indexOf("=");if(-1===e)return[];return[t.slice(0,e),t.slice(e+1)].map(t=>{try{return decodeURIComponent(t.trim())}catch{return}})}).reduce((t,[e,n])=>(e&&n&&(t[e]=n),t),{})}const jh=/^o(\d+)\./,Bh=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Fh(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function Gh(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function zh(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=function(t){const e=t.match(jh);return e?.[1]}(n)),r}function Vh(t){const e="string"==typeof t?function(t){const e=Bh.exec(t);if(!e)return void ad(()=>{});const[n,r,i="",s="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return Gh({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}(t):Gh(t);if(e&&function(t){if(!Zl)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find(e=>!t[e]&&(dd.error(`Invalid Sentry Dsn: ${e} missing`),!0))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(dd.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(dd.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(dd.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}let Hh=!1;function Wh(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:Yh(t).parent_span_id,s=Ih(t).scope;return{parent_span_id:i,span_id:r?s?.getPropagationContext().propagationSpanId||_h():e,trace_id:n}}function qh(t){return t&&t.length>0?t.map(({context:{spanId:t,traceId:e,traceFlags:n,...r},attributes:i})=>({span_id:t,trace_id:e,sampled:1===n,attributes:i,...r})):void 0}function Kh(t){return"number"==typeof t?Xh(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Xh(t.getTime()):hh()}function Xh(t){return t>9999999999?t/1e3:t}function Yh(t){if(function(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(function(t){const e=t;return!!(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:o,status:a,links:c}=t;return{span_id:e,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0,start_timestamp:Kh(i),timestamp:Kh(o)||void 0,status:Jh(a),op:r["sentry.op"],origin:r["sentry.origin"],links:qh(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Jh(t){if(t&&0!==t.code)return 1===t.code?"ok":t.message||"unknown_error"}function Qh(t){return t._sentryRootSpan||t}function Zh(){Hh||(ad(()=>{}),Hh=!0)}function tp(t){dd.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function ep(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if(rp(n)){if(Kd(t.description,n))return Zl&&tp(t),!0;continue}if(!n.name&&!n.op)continue;const e=!n.name||Kd(t.description,n.name),r=!n.op||t.op&&Kd(t.op,n.op);if(e&&r)return Zl&&tp(t),!0}return!1}function np(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const i of t)i.parent_span_id===r&&(i.parent_span_id=n)}function rp(t){return"string"==typeof t||t instanceof RegExp}const ip="production";function sp(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||ip,release:n.release,public_key:r,trace_id:t,org_id:zh(e)};return e.emit("createDsc",i),i}function op(t){const e=kh();if(!e)return{};const n=Qh(t),r=Yh(n),i=r.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??i["sentry.sample_rate"]??i["sentry.previous_trace_sample_rate"];function a(t){return"number"!=typeof o&&"string"!=typeof o||(t.sample_rate=`${o}`),t}const c=n._frozenDsc;if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&Uh(u);if(l)return a(l);const d=sp(t.spanContext().traceId,e),h=i["sentry.source"],p=r.description;return"url"!==h&&p&&(d.transaction=p),function(){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=kh()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(d.sampled=String(function(t){const{traceFlags:e}=t.spanContext();return 1===e}(n)),d.sample_rand=s?.get("sentry.sample_rand")??Ih(n).scope?.getPropagationContext().sampleRand.toString()),a(d),e.emit("createDsc",d,n),d}function ap(t,e=100,n=1/0){try{return up("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function cp(t,e=3,n=102400){const r=ap(t,e);return i=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(i))>n?cp(t,e-1,n):r;var i}function up(t,e,n=1/0,r=1/0,i=function(){const t=new WeakSet;function e(e){return!!t.has(e)||(t.add(e),!1)}function n(e){t.delete(e)}return[e,n]}()){const[s,o]=i;if(null==e||["boolean","string"].includes(typeof e)||"number"==typeof e&&Number.isFinite(e))return e;const a=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!=typeof global&&e===global)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(Fd(e))return"[VueViewModel]";if(Ud(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof e&&!Number.isFinite(e))return`[${e}]`;if("function"==typeof e)return`[Function: ${vd(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const r=function(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}var n}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return up("",u.toJSON(),c-1,r,i)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const h=th(e);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const t=h[p];l[p]=up(p,t,c-1,r,i),d++}return o(e),l}function lp(t,e=[]){return[t,e]}function dp(t,e){const[n,r]=t;return[n,[...r,e]]}function hp(t,e){const n=t[1];for(const r of n){if(e(r,r[0].type))return!0}return!1}function pp(t){const e=rd(td);return e.encodePolyfill?e.encodePolyfill(t):(new TextEncoder).encode(t)}function mp(t){const[e,n]=t;let r=JSON.stringify(e);function i(t){"string"==typeof r?r="string"==typeof t?r+t:[pp(r),t]:r.push("string"==typeof t?pp(t):t)}for(const s of n){const[t,e]=s;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof e||e instanceof Uint8Array)i(e);else{let t;try{t=JSON.stringify(e)}catch{t=JSON.stringify(ap(e))}i(t)}}return"string"==typeof r?r:function(t){const e=t.reduce((t,e)=>t+e.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}(r)}function fp(t){const e="string"==typeof t.data?pp(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const gp={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function _p(t){return gp[t]}function vp(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function bp(t,e,n,r){const i=vp(n),s=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){if(!e)return t;const n=t.sdk||{};t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0}}(t,n?.sdk);const o=function(t,e,n,r){const i=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Fh(r)},...i&&{trace:i}}}(t,i,r,e);delete t.sdkProcessingMetadata;return lp(o,[[{type:s},t]])}function yp(t){return new Sp(e=>{e(t)})}function wp(t){return new Sp((e,n)=>{n(t)})}class Sp{constructor(t){this._state=0,this._handlers=[],this._runExecutor(t)}then(t,e){return new Sp((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(i){r(i)}else n(e)},t=>{if(e)try{n(e(t))}catch(i){r(i)}else r(t)}]),this._executeHandlers()})}catch(t){return this.then(t=>t,t)}finally(t){return new Sp((e,n)=>{let r,i;return this.then(e=>{i=!1,r=e,t&&t()},e=>{i=!0,r=e,t&&t()}).then(()=>{i?n(r):e(r)})})}_executeHandlers(){if(0===this._state)return;const t=this._handlers.slice();this._handlers=[],t.forEach(t=>{t[0]||(1===this._state&&t[1](this._value),2===this._state&&t[2](this._value),t[0]=!0)})}_runExecutor(t){const e=(t,e)=>{0===this._state&&(jd(e)?e.then(n,r):(this._state=t,this._value=e,this._executeHandlers()))},n=t=>{e(1,t)},r=t=>{e(2,t)};try{t(n,r)}catch(i){r(i)}}}function xp(t,e,n,r=0){try{const i=Ep(e,n,t,r);return jd(i)?i:yp(i)}catch(i){return wp(i)}}function Ep(t,e,n,r){const i=n[r];if(!t||!i)return t;const s=i({...t},e);return Zl&&null===s&&dd.log(`Event processor "${i.id||"?"}" dropped event`),jd(s)?s.then(t=>Ep(t,e,n,r+1)):Ep(s,e,n,r+1)}function Tp(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;!function(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra});Object.keys(r).length&&(t.tags={...r,...t.tags});Object.keys(i).length&&(t.user={...i,...t.user});Object.keys(s).length&&(t.contexts={...s,...t.contexts});o&&(t.level=o);a&&"transaction"!==t.type&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:Wh(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:op(e),...t.sdkProcessingMetadata};const n=Qh(e),r=Yh(n).description;r&&!t.transaction&&"transaction"===t.type&&(t.transaction=r)}(t,r),function(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint.length||delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,i),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,s)}function Ap(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:m}=e;Cp(t,"extra",n),Cp(t,"tags",r),Cp(t,"user",i),Cp(t,"contexts",s),t.sdkProcessingMetadata=fh(t.sdkProcessingMetadata,a,2),o&&(t.level=o),p&&(t.transactionName=p),m&&(t.span=m),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...h}}function Cp(t,e,n){t[e]=fh(t[e],n,1)}let Pp,Op,kp,Lp;function Mp(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||ih(),timestamp:e.timestamp||lh()},u=n.integrations||t.integrations.map(t=>t.name);!function(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;t.environment=t.environment||n||ip,!t.release&&r&&(t.release=r);!t.dist&&i&&(t.dist=i);const o=t.request;o?.url&&(o.url=Wd(o.url,s))}(c,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(c,u),i&&i.emit("applyFrameMetadata",e),void 0===e.type&&function(t,e){const n=function(t){const e=td._sentryDebugIds,n=td._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],i=n?Object.keys(n):[];if(Lp&&r.length===Op&&i.length===kp)return Lp;Op=r.length,kp=i.length,Lp={},Pp||(Pp={});const s=(e,n)=>{for(const r of e){const e=n[r],i=Pp?.[r];if(i&&Lp&&e)Lp[i[0]]=e,Pp&&(Pp[r]=[i[0],e]);else if(e){const n=t(r);for(let t=n.length-1;t>=0;t--){const i=n[t],s=i?.filename;if(s&&Lp&&Pp){Lp[s]=e,Pp[r]=[s,e];break}}}}};return e&&s(r,e),n&&s(i,n),Lp}(e);t.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(t=>{t.filename&&(t.debug_id=n[t.filename])})})}(c,t.stackParser);const l=function(t,e){if(!e)return t;const n=t?t.clone():new wh;return n.update(e),n}(r,n.captureContext);n.mechanism&&ch(c,n.mechanism);const d=i?i.getEventProcessors():[],h=id("globalScope",()=>new wh).getScopeData();if(s){Ap(h,s.getScopeData())}if(l){Ap(h,l.getScopeData())}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),Tp(c,h);return xp([...d,...h.eventProcessors],c,n).then(t=>(t&&function(t){const e={};if(t.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)})}),0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([t,e])=>{n.push({type:"sourcemap",code_file:t,debug_id:e})})}(t),"number"==typeof o&&o>0?function(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(t=>({...t,...t.data&&{data:ap(t.data,e,n)}}))},...t.user&&{user:ap(t.user,e,n)},...t.contexts&&{contexts:ap(t.contexts,e,n)},...t.extra&&{extra:ap(t.extra,e,n)}};t.contexts?.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=ap(t.contexts.trace.data,e,n)));t.spans&&(r.spans=t.spans.map(t=>({...t,...t.data&&{data:ap(t.data,e,n)}})));t.contexts?.flags&&r.contexts&&(r.contexts.flags=ap(t.contexts.flags,3,n));return r}(t,o,a):t))}function Rp(t,e){return Ph().captureEvent(t,e)}function Np(t){const e=Oh(),n=Ph(),{userAgent:r}=td.navigator||{},i=ph({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return"ok"===s?.status&&mh(s,{status:"exited"}),Ip(),e.setSession(i),i}function Ip(){const t=Oh(),e=Ph().getSession()||t.getSession();e&&function(t){let e={};"ok"===t.status&&(e={status:"exited"}),mh(t,e)}(e),Dp(),t.setSession()}function Dp(){const t=Oh(),e=kh(),n=t.getSession();n&&e&&e.captureSession(n)}function Up(t=!1){t?Ip():Dp()}function $p(t,e,n){return e||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){const n={sentry_version:"7"};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}(t,n)}`}const jp=[];function Bp(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;if(e.forEach(t=>{t.isDefaultInstance=!0}),Array.isArray(n))r=[...e,...n];else if("function"==typeof n){const t=n(e);r=Array.isArray(t)?t:[t]}else r=e;return function(t){const e={};return t.forEach(t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)}),Object.values(e)}(r)}function Fp(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function Gp(t,e,n){if(n[e.name])Zl&&dd.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===jp.indexOf(e.name)&&"function"==typeof e.setupOnce&&(e.setupOnce(),jp.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(e,r)=>n(e,r,t))}if("function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign((e,r)=>n(e,r,t),{id:e.name});t.addEventProcessor(r)}Zl&&dd.log(`Integration installed: ${e.name}`)}}function zp(t,e){const n=e??function(t){return Vp().get(t)}(t)??[];if(0===n.length)return;const r=t.getOptions(),i=function(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Fh(r)),lp(i,[(s=t,[{type:"log",item_count:s.length,content_type:"application/vnd.sentry.items.log+json"},{items:s}])]);var s}(n,r._metadata,r.tunnel,t.getDsn());Vp().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function Vp(){return id("clientToLogBufferMap",()=>new WeakMap)}function Hp(t,e){const n=e??function(t){return Wp().get(t)}(t)??[];if(0===n.length)return;const r=t.getOptions(),i=function(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Fh(r)),lp(i,[(s=t,[{type:"trace_metric",item_count:s.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:s}])]);var s}(n,r._metadata,r.tunnel,t.getDsn());Wp().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function Wp(){return id("clientToMetricBufferMap",()=>new WeakMap)}function qp(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}const Kp="Not capturing exception because it's already been captured.",Xp="Discarded session because of missing or non-string release",Yp=Symbol.for("SentryInternalError"),Jp=Symbol.for("SentryDoNotSendEventError");function Qp(t){return{message:t,[Yp]:!0}}function Zp(t){return{message:t,[Jp]:!0}}function tm(t){return!!t&&"object"==typeof t&&Yp in t}function em(t){return!!t&&"object"==typeof t&&Jp in t}function nm(t,e,n,r,i){let s,o=0;t.on(n,()=>{o=0,clearTimeout(s)}),t.on(e,e=>{o+=r(e),o>=8e5?i(t):(clearTimeout(s),s=setTimeout(()=>{i(t)},5e3))}),t.on("flush",()=>{i(t)})}class rm{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Vh(t.dsn):Zl&&dd.warn("No DSN provided, client will not send events."),this._dsn){const e=$p(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}this._options.enableLogs&&nm(this,"afterCaptureLog","flushLogs",am,zp),this._options._experiments?.enableMetrics&&nm(this,"afterCaptureMetric","flushMetrics",om,Hp)}captureException(t,e,n){const r=ih();if(uh(t))return Zl&&dd.log(Kp),r;const i={event_id:r,...e};return this._process(this.eventFromException(t,i).then(t=>this._captureEvent(t,i,n))),i.event_id}captureMessage(t,e,n,r){const i={event_id:ih(),...n},s=Id(t)?t:String(t),o=Dd(t)?this.eventFromMessage(s,e,i):this.eventFromException(t,i);return this._process(o.then(t=>this._captureEvent(t,i,r))),i.event_id}captureEvent(t,e,n){const r=ih();if(e?.originalException&&uh(e.originalException))return Zl&&dd.log(Kp),r;const i={event_id:r,...e},s=t.sdkProcessingMetadata||{},o=s.capturedSpanScope,a=s.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,o||n,a)),i.event_id}captureSession(t){this.sendSession(t),mh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const e=this._transport;if(!e)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(t),r=await e.flush(t);return n&&r}async close(t){const e=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),e}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];Gp(this,t,this._integrations),e||Fp(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=bp(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])n=dp(n,fp(r));this.sendEnvelope(n).then(e=>this.emit("afterSendEvent",t,e))}sendSession(t){const{release:e,environment:n=ip}=this._options;if("aggregates"in t){const r=t.attrs||{};if(!r.release&&!e)return void(Zl&&dd.warn(Xp));r.release=r.release||e,r.environment=r.environment||n,t.attrs=r}else{if(!t.release&&!e)return void(Zl&&dd.warn(Xp));t.release=t.release||e,t.environment=t.environment||n}this.emit("beforeSendSession",t);const r=function(t,e,n,r){const i=vp(n);return lp({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:Fh(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,e,n=1){if(this._options.sendClientReports){const r=`${t}:${e}`;Zl&&dd.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(t,e){const n=this._hooks[t]=this._hooks[t]||new Set,r=(...t)=>e(...t);return n.add(r),()=>{n.delete(r)}}emit(t,...e){const n=this._hooks[t];n&&n.forEach(t=>t(...e))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(e){return Zl&&dd.error("Error while sending envelope:",e),{}}return Zl&&dd.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach(e=>{e&&Gp(t,e,n)}),n}(this,t),Fp(this,t)}_updateSessionFromEvent(t,e){let n="fatal"===e.level,r=!1;const i=e.exception?.values;if(i){r=!0;for(const t of i){const e=t.mechanism;if(!1===e?.handled){n=!0;break}}}const s="ok"===t.status;(s&&0===t.errors||s&&n)&&(mh(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}async _isClientDoneProcessing(t){let e=0;for(;!t||e<t;){if(await new Promise(t=>setTimeout(t,1)),!this._numProcessing)return!0;e++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r){const i=this.getOptions(),s=Object.keys(this._integrations);return!e.integrations&&s?.length&&(e.integrations=s),this.emit("preprocessEvent",t,e),t.type||r.setLastEventId(t.event_id||e.event_id),Mp(i,t,e,n,this,r).then(t=>{if(null===t)return t;this.emit("postprocessEvent",t,e),t.contexts={trace:Lh(n),...t.contexts};const r=function(t,e){const n=e.getPropagationContext();return n.dsc||sp(n.traceId,t)}(this,n);return t.sdkProcessingMetadata={dynamicSamplingContext:r,...t.sdkProcessingMetadata},t})}_captureEvent(t,e={},n=Ph(),r=Oh()){return Zl&&im(t)&&dd.log(`Captured error event \`${qp(t)[0]||"<unknown>"}\``),this._processEvent(t,e,n,r).then(t=>t.event_id,t=>{Zl&&(em(t)?dd.log(t.message):tm(t)?dd.warn(t.message):dd.warn(t))})}_processEvent(t,e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=sm(t),a=im(t),c=t.type||"error",u=`before send for type \`${c}\``,l=void 0===s?void 0:function(t){if("boolean"==typeof t)return Number(t);const e="string"==typeof t?parseFloat(t):t;return"number"!=typeof e||isNaN(e)||e<0||e>1?void 0:e}(s);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),wp(Zp(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));const d="replay_event"===c?"replay":c;return this._prepareEvent(t,e,n,r).then(t=>{if(null===t)throw this.recordDroppedEvent("event_processor",d),Zp("An event processor returned `null`, will not send event.");if(e.data&&!0===e.data.__sentry__)return t;const n=function(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=e;let c=n;if(im(c)&&i)return i(c,r);if(sm(c)){if(o||a){const e=function(t){const{trace_id:e,parent_span_id:n,span_id:r,status:i,origin:s,data:o,op:a}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:o?.[Mh],exclusive_time:o?.[Rh],measurements:t.measurements,is_segment:!0}}(c);if(a?.length&&ep(e,a))return null;if(o){const t=o(e);t?c=fh(n,{type:"transaction",timestamp:(u=t).timestamp,start_timestamp:u.start_timestamp,transaction:u.description,contexts:{trace:{trace_id:u.trace_id,span_id:u.span_id,parent_span_id:u.parent_span_id,op:u.op,status:u.status,origin:u.origin,data:{...u.data,...u.profile_id&&{[Mh]:u.profile_id},...u.exclusive_time&&{[Rh]:u.exclusive_time}}}},measurements:u.measurements}):Zh()}if(c.spans){const e=[],n=c.spans;for(const t of n)if(a?.length&&ep(t,a))np(n,t);else if(o){const n=o(t);n?e.push(n):(Zh(),e.push(t))}else e.push(t);const r=c.spans.length-e.length;r&&t.recordDroppedEvent("before_send","span",r),c.spans=e}}if(s){if(c.spans){const t=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return s(c,r)}}var u;return c}(this,i,t,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(jd(t))return t.then(t=>{if(!Ud(t)&&null!==t)throw Qp(n);return t},t=>{throw Qp(`${e} rejected with ${t}`)});if(!Ud(t)&&null!==t)throw Qp(n);return t}(n,u)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",d),o){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw Zp(`${u} returned \`null\`, will not send event.`)}const s=n.getSession()||r.getSession();if(a&&s&&this._updateSessionFromEvent(s,i),o){const t=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const c=i.transaction_info;if(o&&c&&i.transaction!==t.transaction){const t="custom";i.transaction_info={...c,source:t}}return this.sendEvent(i,e),i}).then(null,t=>{if(em(t)||tm(t))throw t;throw this.captureException(t,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:t}),Qp(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)})}_process(t){this._numProcessing++,t.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([t,e])=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e}})}_flushOutcomes(){Zl&&dd.log("Flushing outcomes...");const t=this._clearOutcomes();if(0===t.length)return void(Zl&&dd.log("No outcomes to send"));if(!this._dsn)return void(Zl&&dd.log("No dsn provided, will not send outcomes"));Zl&&dd.log("Sending outcomes:",t);const e=(n=t,lp((r=this._options.tunnel&&Fh(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:lh(),discarded_events:n}]]));var n,r;this.sendEnvelope(e)}}function im(t){return void 0===t.type}function sm(t){return"transaction"===t.type}function om(t){let e=0;return t.name&&(e+=2*t.name.length),"string"==typeof t.value?e+=2*t.value.length:e+=8,e+cm(t.attributes)}function am(t){let e=0;return t.message&&(e+=2*t.message.length),e+cm(t.attributes)}function cm(t){if(!t)return 0;let e=0;return Object.values(t).forEach(t=>{Array.isArray(t)?e+=t.length*um(t[0]):Dd(t)?e+=um(t):e+=100}),e}function um(t){return"string"==typeof t?2*t.length:"number"==typeof t?8:"boolean"==typeof t?4:0}function lm(t,e){!0===e.debug&&(Zl?dd.enable():ad(()=>{}));Ph().update(e.initialScope);const n=new t(e);return function(t){Ph().setClient(t)}(n),n.init(),n}const dm=Symbol.for("SentryBufferFullError");function hm(t=100){const e=new Set;function n(t){e.delete(t)}return{get $(){return Array.from(e)},add:function(r){if(!(e.size<t))return wp(dm);const i=r();return e.add(i),i.then(()=>n(i),()=>n(i)),i},drain:function(t){if(!e.size)return yp(!0);const n=Promise.allSettled(Array.from(e)).then(()=>!0);if(!t)return n;const r=[n,new Promise(e=>setTimeout(()=>e(!1),t))];return Promise.race(r)}}}function pm(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[t,e,,,n]=a.split(":",5),s=parseInt(t,10),o=1e3*(isNaN(s)?60:s);if(e)for(const a of e.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(i[a]=r+o);else i.all=r+o}else o?i.all=r+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}(o,r):429===e&&(i.all=r+6e4);return i}function mm(t,e,n=hm(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(hp(i,(e,n)=>{const i=_p(n);!function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(r,i)?s.push(e):t.recordDroppedEvent("ratelimit_backoff",i)}),0===s.length)return Promise.resolve({});const o=lp(i[0],s),a=e=>{hp(o,(n,r)=>{t.recordDroppedEvent(e,_p(r))})};return n.add(()=>e({body:mp(o)}).then(t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&Zl&&dd.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=pm(r,t),t),t=>{throw a("network_error"),Zl&&dd.error("Encountered error running transport request:",t),t})).then(t=>t,t=>{if(t===dm)return Zl&&dd.error("Skipped sending event because buffer is full."),a("queue_overflow"),Promise.resolve({});throw t})},flush:t=>n.drain(t)}}function fm(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function gm(t){"aggregates"in t?void 0===t.attrs?.ip_address&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):void 0===t.ipAddress&&(t.ipAddress="{{auto}}")}const _m=100;function vm(t,e){const n=kh(),r=Oh();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=_m}=n.getOptions();if(s<=0)return;const o={timestamp:lh(),...t},a=i?ad(()=>i(o,e)):o;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,e),r.addBreadcrumb(a,s))}let bm;const ym=new WeakMap,wm=()=>({name:"FunctionToString",setupOnce(){bm=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Zd(this),n=ym.has(kh())&&void 0!==e?e:this;return bm.apply(n,t)}}catch{}},setup(t){ym.set(t,!0)}}),Sm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],xm=(t={})=>{let e;return{name:"EventFilters",setup(n){const r=n.getOptions();e=Tm(t,r)},processEvent(n,r,i){if(!e){const n=i.getOptions();e=Tm(t,n)}return function(t,e){if(t.type){if("transaction"===t.type&&function(t,e){if(!e?.length)return!1;const n=t.transaction;return!!n&&Xd(n,e)}(t,e.ignoreTransactions))return Zl&&dd.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${oh(t)}`),!0}else{if(function(t,e){if(!e?.length)return!1;return qp(t).some(t=>Xd(t,e))}(t,e.ignoreErrors))return Zl&&dd.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${oh(t)}`),!0;if(function(t){if(!t.exception?.values?.length)return!1;return!t.message&&!t.exception.values.some(t=>t.stacktrace||t.type&&"Error"!==t.type||t.value)}(t))return Zl&&dd.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${oh(t)}`),!0;if(function(t,e){if(!e?.length)return!1;const n=Am(t);return!!n&&Xd(n,e)}(t,e.denyUrls))return Zl&&dd.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${oh(t)}.\nUrl: ${Am(t)}`),!0;if(!function(t,e){if(!e?.length)return!0;const n=Am(t);return!n||Xd(n,e)}(t,e.allowUrls))return Zl&&dd.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${oh(t)}.\nUrl: ${Am(t)}`),!0}return!1}(n,e)?null:n}}},Em=(t={})=>({...xm(t),name:"InboundFilters"});function Tm(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Sm],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Am(t){try{const e=[...t.exception?.values??[]].reverse().find(t=>void 0===t.mechanism?.parent_id&&t.stacktrace?.frames?.length),n=e?.stacktrace?.frames;return n?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return Zl&&dd.error(`Cannot extract url for event ${oh(t)}`),null}}function Cm(t,e,n,r,i,s){if(!i.exception?.values||!s||!Bd(s.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=Pm(t,e,r,s.originalException,n,i.exception.values,o,0))}function Pm(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(Bd(r[i],Error)){Om(o,a);const s=t(e,r[i]),u=c.length;km(s,i,u,a),c=Pm(t,e,n,r[i],i,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach((r,s)=>{if(Bd(r,Error)){Om(o,a);const u=t(e,r),l=c.length;km(u,`errors[${s}]`,l,a),c=Pm(t,e,n,r,i,[u,...c],u,l)}}),c}function Om(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:e}}function km(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Lm(){"console"in td&&sd.forEach(function(t){t in td.console&&Yd(td.console,t,function(e){return od[t]=e,function(...e){Ed("console",{args:e,level:t});const n=od[t];n?.apply(td.console,e)}})})}function Mm(t){return"warn"===t?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Rm=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Im(t,e))return!1;if(!Nm(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=Dm(e),r=Dm(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Im(t,e))return!1;if(!Nm(t,e))return!1;return!0}(t,e))return!0;return!1}(e,t))return Zl&&dd.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function Nm(t,e){let n=bd(t),r=bd(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const t=r[i],e=n[i];if(t.filename!==e.filename||t.lineno!==e.lineno||t.colno!==e.colno||t.function!==e.function)return!1}return!0}function Im(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function Dm(t){return t.exception?.values?.[0]}function Um(t){return void 0===t?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const $m=td;function jm(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Bm(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in $m))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(jm($m.fetch))return!0;let t=!1;const e=$m.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=jm(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){Zl&&dd.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Fm(t,e){const n="fetch";Sd(n,t),xd(n,()=>function(t,e=!1){if(e&&!Bm())return;Yd(td,"fetch",function(t){return function(...e){const n=new Error,{method:r,url:i}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:zm(e),method:Gm(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:zm(e),method:Gm(e,"method")?String(e.method).toUpperCase():"GET"}}(e),s={args:e,fetchData:{method:r,url:i},startTimestamp:1e3*hh(),virtualError:n,headers:Vm(e)};return Ed("fetch",{...s}),t.apply(td,e).then(async t=>(Ed("fetch",{...s,endTimestamp:1e3*hh(),response:t}),t),t=>{if(Ed("fetch",{...s,endTimestamp:1e3*hh(),error:t}),kd(t)&&void 0===t.stack&&(t.stack=n.stack,Jd(t,"framesToPop",1)),t instanceof TypeError&&("Failed to fetch"===t.message||"Load failed"===t.message||"NetworkError when attempting to fetch resource."===t.message))try{const e=new URL(s.fetchData.url);t.message=`${t.message} (${e.host})`}catch{}throw t})}})}(0,e))}function Gm(t,e){return!!t&&"object"==typeof t&&!!t[e]}function zm(t){return"string"==typeof t?t:t?Gm(t,"url")?t.url:t.toString?t.toString():"":""}function Vm(t){const[e,n]=t;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(r=e,"undefined"!=typeof Request&&Bd(r,Request))return new Headers(e.headers)}catch{}var r}const Hm=td;let Wm=0;function qm(){return Wm>0}function Km(t,e={}){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return"function"==typeof e?e:t;if(Zd(t))return t}catch{return t}const n=function(...n){try{const r=n.map(t=>Km(t,e));return t.apply(this,r)}catch(r){throw Wm++,setTimeout(()=>{Wm--}),function(...t){const e=Ch(nd());if(2===t.length){const[n,r]=t;return n?e.withSetScope(n,r):e.withScope(r)}e.withScope(t[0])}(t=>{var i;t.addEventProcessor(t=>(e.mechanism&&(ah(t,void 0),ch(t,e.mechanism)),t.extra={...t.extra,arguments:n},t)),i=r,Ph().captureException(i,void 0)}),r}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}catch{}Qd(n,t),Jd(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch{}return n}function Xm(t,e){const n=Qm(t,e),r={type:ef(e),value:nf(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ym(t,e,n,r){const i=kh(),s=i?.getOptions().normalizeDepth,o=function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}return}(e),a={__serialized__:cp(e,s)};if(o)return{exception:{values:[Xm(t,o)]},extra:a};const c={exception:{values:[{type:$d(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:of(e,{isUnhandledRejection:r})}]},extra:a};if(n){const e=Qm(t,n);e.length&&(c.exception.values[0].stacktrace={frames:e})}return c}function Jm(t,e){return{exception:{values:[Xm(t,e)]}}}function Qm(t,e){const n=e.stacktrace||e.stack||"",r=function(t){if(t&&Zm.test(t.message))return 1;return 0}(e),i=function(t){if("number"==typeof t.framesToPop)return t.framesToPop;return 0}(e);try{return t(n,r,i)}catch{}return[]}const Zm=/Minified React error #\d+;/i;function tf(t){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&t instanceof WebAssembly.Exception}function ef(t){const e=t?.name;if(!e&&tf(t)){return t.message&&Array.isArray(t.message)&&2==t.message.length?t.message[0]:"WebAssembly.Exception"}return e}function nf(t){const e=t?.message;return tf(t)?Array.isArray(t.message)&&2==t.message.length?t.message[1]:"wasm exception":e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function rf(t,e,n,r,i){let s;if(Md(e)&&e.error){return Jm(t,e.error)}if(Rd(e)||Ld(e,"DOMException")){const i=e;if("stack"in e)s=Jm(t,e);else{const e=i.name||(Rd(i)?"DOMError":"DOMException"),o=i.message?`${e}: ${i.message}`:e;s=sf(t,o,n,r),ah(s,o)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":`${i.code}`}),s}if(kd(e))return Jm(t,e);if(Ud(e)||$d(e)){return s=Ym(t,e,n,i),ch(s,{synthetic:!0}),s}return s=sf(t,e,n,r),ah(s,`${e}`),ch(s,{synthetic:!0}),s}function sf(t,e,n,r){const i={};if(r&&n){const r=Qm(t,n);r.length&&(i.exception={values:[{value:e,stacktrace:{frames:r}}]}),ch(i,{synthetic:!0})}if(Id(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return i.logentry={message:t,params:n},i}return i.message=e,i}function of(t,{isUnhandledRejection:e}){const n=function(t,e=40){const n=Object.keys(th(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return Wd(r,e);for(let i=n.length;i>0;i--){const t=n.slice(0,i).join(", ");if(!(t.length>e))return i===n.length?t:Wd(t,e)}return""}(t),r=e?"promise rejection":"exception";if(Md(t))return`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``;if($d(t)){return`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class af extends rm{constructor(t){const e=(n=t,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Hm.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...n});var n;!function(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(t=>({name:`${r}:@sentry/${t}`,version:ed})),version:ed}),t._metadata=i}(e,"browser",["browser"],Hm.SENTRY_SDK_SOURCE||"npm"),e._metadata?.sdk&&(e._metadata.sdk.settings={infer_ip:e.sendDefaultPii?"auto":"never",...e._metadata.sdk.settings}),super(e);const{sendDefaultPii:r,sendClientReports:i,enableLogs:s,_experiments:o}=this._options;Hm.document&&(i||s||o?.enableMetrics)&&Hm.document.addEventListener("visibilitychange",()=>{"hidden"===Hm.document.visibilityState&&(i&&this._flushOutcomes(),s&&zp(this),o?.enableMetrics&&Hp(this))}),r&&this.on("beforeSendSession",gm)}eventFromException(t,e){return function(t,e,n,r){const i=rf(t,e,n?.syntheticException||void 0,r);return ch(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),yp(i)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",r,i){const s=sf(t,e,r?.syntheticException||void 0,i);return s.level=n,r?.event_id&&(s.event_id=r.event_id),yp(s)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}_prepareEvent(t,e,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n,r)}}const cf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,uf=td;let lf,df,hf,pf;function mf(){if(!uf.document)return;const t=Ed.bind(null,"dom"),e=ff(t,!0);uf.document.addEventListener("click",e,!1),uf.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(e=>{const n=uf,r=n[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Yd(r,"addEventListener",function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=r[n]=r[n]||{refCount:0};if(!s.handler){const r=ff(t);s.handler=r,e.call(this,n,r,i)}s.refCount++}catch{}return e.call(this,n,r,i)}}),Yd(r,"removeEventListener",function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this.__sentry_instrumentation_handlers__||{},i=n[e];i&&(i.refCount--,i.refCount<=0&&(t.call(this,e,i.handler,r),i.handler=void 0,delete n[e]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return t.call(this,e,n,r)}}))})}function ff(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch{return null}}(n);if(function(t,e){return"keypress"===t&&(!e?.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;Jd(n,"_sentryCaptured",!0),r&&!r._sentryId&&Jd(r,"_sentryId",ih());const i="keypress"===n.type?"input":n.type;if(!function(t){if(t.type!==df)return!1;try{if(!t.target||t.target._sentryId!==hf)return!1}catch{}return!0}(n)){t({event:n,name:i,global:e}),df=n.type,hf=r?r._sentryId:void 0}clearTimeout(lf),lf=uf.setTimeout(()=>{hf=void 0,df=void 0},1e3)}}function gf(t){const e="history";Sd(e,t),xd(e,_f)}function _f(){function t(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const r=pf,i=function(t){try{return new URL(t,uf.location.origin).toString()}catch{return t}}(String(n));if(pf=i,r===i)return t.apply(this,e);Ed("history",{from:r,to:i})}return t.apply(this,e)}}uf.addEventListener("popstate",()=>{const t=uf.location.href,e=pf;if(pf=t,e===t)return;Ed("history",{from:e,to:t})}),"history"in $m&&$m.history&&(Yd(uf.history,"pushState",t),Yd(uf.history,"replaceState",t))}const vf={};const bf="__sentry_xhr_v3__";function yf(){if(!uf.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(t,e,n){const r=new Error,i=1e3*hh(),s=Nd(n[0])?n[0].toUpperCase():void 0,o=function(t){if(Nd(t))return t;try{return t.toString()}catch{}return}(n[1]);if(!s||!o)return t.apply(e,n);e[bf]={method:s,url:o,request_headers:{}},"POST"===s&&o.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const a=()=>{const t=e[bf];if(t&&4===e.readyState){try{t.status_code=e.status}catch{}Ed("xhr",{endTimestamp:1e3*hh(),startTimestamp:i,xhr:e,virtualError:r})}};return"onreadystatechange"in e&&"function"==typeof e.onreadystatechange?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(t,e,n)=>(a(),t.apply(e,n))}):e.addEventListener("readystatechange",a),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(t,e,n){const[r,i]=n,s=e[bf];return s&&Nd(r)&&Nd(i)&&(s.request_headers[r.toLowerCase()]=i),t.apply(e,n)}}),t.apply(e,n)}}),t.send=new Proxy(t.send,{apply(t,e,n){const r=e[bf];if(!r)return t.apply(e,n);void 0!==n[0]&&(r.body=n[0]);return Ed("xhr",{startTimestamp:1e3*hh(),xhr:e}),t.apply(e,n)}})}function wf(t,e=function(t){const e=vf[t];if(e)return e;let n=uf[t];if(jm(n))return vf[t]=n.bind(uf);const r=uf.document;if(r&&"function"==typeof r.createElement)try{const e=r.createElement("iframe");e.hidden=!0,r.head.appendChild(e);const i=e.contentWindow;i?.[t]&&(n=i[t]),r.head.removeChild(e)}catch(i){cf&&dd.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n?vf[t]=n.bind(uf):n}("fetch")){let n=0,r=0;return mm(t,async function(i){const s=i.body.length;n+=s,r++;const o={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const n=await e(t.url,o);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(a){throw vf["fetch"]=void 0,a}finally{n-=s,r--}})}function Sf(t,e,n,r){const i={filename:t,function:"<anonymous>"===e?hd:e,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}const xf=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ef=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Tf=/\((\S*)(?::(\d+))(?::(\d+))\)/,Af=/at (.+?) ?\(data:(.+?),/,Cf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pf=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Of=fd(...[[30,t=>{const e=t.match(Af);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=xf.exec(t);if(n){const[,t,e,r]=n;return Sf(t,hd,+e,+r)}const r=Ef.exec(t);if(r){if(r[2]&&0===r[2].indexOf("eval")){const t=Tf.exec(r[2]);t&&(r[2]=t[1],r[3]=t[2],r[4]=t[3])}const[t,e]=kf(r[1]||hd,r[2]);return Sf(e,t,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,t=>{const e=Cf.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=Pf.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||hd;return[n,t]=kf(n,t),Sf(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]),kf=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:hd,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Lf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Mf=1024,Rf=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(t){var n;e.console&&function(t){const e="console";Sd(e,t),xd(e,Lm)}(function(t){return function(e){if(kh()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:Mm(e.level),message:qd(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${qd(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}vm(n,{input:e.args,level:e.level})}}(t)),e.dom&&(n=function(t,e){return function(n){if(kh()!==t)return;let r,i,s="object"==typeof e?e.serializeAttribute:void 0,o="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;o&&o>Mf&&(Lf&&dd.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Mf),"string"==typeof s&&(s=[s]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=zd(e,{keyAttrs:s,maxStringLength:o}),i=function(t){if(!Gd.HTMLElement)return null;let e=t;for(let n=0;n<5;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}(e)}catch{r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};i&&(a.data={"ui.component_name":i}),vm(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom),Sd("dom",n),xd("dom",mf)),e.xhr&&function(t){Sd("xhr",t),xd("xhr",yf)}(function(t){return function(e){if(kh()!==t)return;const{startTimestamp:n,endTimestamp:r}=e,i=e.xhr[bf];if(!n||!r||!i)return;const{method:s,url:o,status_code:a,body:c}=i,u={method:s,url:o,status_code:a},l={xhr:e.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:u,type:"http",level:Um(a)};t.emit("beforeOutgoingRequestBreadcrumb",d,l),vm(d,l)}}(t)),e.fetch&&Fm(function(t){return function(e){if(kh()!==t)return;const{startTimestamp:n,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.fetchData.method,e.fetchData.url,e.error){const i=e.fetchData,s={data:e.error,input:e.args,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",o,s),vm(o,s)}else{const i=e.response,s={...e.fetchData,status_code:i?.status};e.fetchData.request_body_size,e.fetchData.response_body_size;const o={input:e.args,response:i,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:s,type:"http",level:Um(s.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",a,o),vm(a,o)}}}(t)),e.history&&gf(function(t){return function(e){if(kh()!==t)return;let n=e.from,r=e.to;const i=fm(Hm.location.href);let s=n?fm(n):void 0;const o=fm(r);s?.path||(s=i),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),i.protocol===s.protocol&&i.host===s.host&&(n=s.relative),vm({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on("beforeSendEvent",function(t){return function(e){kh()===t&&vm({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:oh(e)},{event:e})}}(t))}}};const Nf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],If=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Yd(Hm,"setTimeout",Df),e.setInterval&&Yd(Hm,"setInterval",Df),e.requestAnimationFrame&&Yd(Hm,"requestAnimationFrame",Uf),e.XMLHttpRequest&&"XMLHttpRequest"in Hm&&Yd(XMLHttpRequest.prototype,"send",$f);const t=e.eventTarget;if(t){(Array.isArray(t)?t:Nf).forEach(t=>function(t,e){const n=Hm,r=n[t]?.prototype;if(!r?.hasOwnProperty?.("addEventListener"))return;Yd(r,"addEventListener",function(n){return function(r,i,s){try{"function"==typeof i.handleEvent&&(i.handleEvent=Km(i.handleEvent,{mechanism:{data:{handler:vd(i),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&function(t,e,n){t&&"object"==typeof t&&"removeEventListener"in t&&"function"==typeof t.removeEventListener&&t.removeEventListener(e,n)}(this,r,i),n.apply(this,[r,Km(i,{mechanism:{data:{handler:vd(i),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),s])}}),Yd(r,"removeEventListener",function(t){return function(e,n,r){try{const i=n.__sentry_wrapped__;i&&t.call(this,e,i,r)}catch{}return t.call(this,e,n,r)}})}(t,e))}}}};function Df(t){return function(...e){const n=e[0];return e[0]=Km(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${vd(t)}`}}),t.apply(this,e)}}function Uf(t){return function(e){return t.apply(this,[Km(e,{mechanism:{data:{handler:vd(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function $f(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(t=>{t in n&&"function"==typeof n[t]&&Yd(n,t,function(e){const n={mechanism:{data:{handler:vd(e)},handled:!1,type:`auto.browser.browserapierrors.xhr.${t}`}},r=Zd(e);return r&&(n.mechanism.data.handler=vd(r)),Km(e,n)})}),t.apply(this,e)}}const jf=()=>({name:"BrowserSession",setupOnce(){void 0!==Hm.document?(Np({ignoreDuration:!0}),Up(),gf(({from:t,to:e})=>{void 0!==t&&t!==e&&(Np({ignoreDuration:!0}),Up())})):Lf&&dd.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),Bf=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(t){!function(t){const e="error";Sd(e,t),xd(e,Ad)}(e=>{const{stackParser:n,attachStacktrace:r}=Gf();if(kh()!==t||qm())return;const{msg:i,url:s,line:o,column:a,error:c}=e,u=function(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=function(t){if(!Nd(t)||0===t.length)return;if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/);return`<data:${e?e[1]:"text/javascript"}${t.includes("base64,")?",base64":""}>`}return t.slice(0,1024)}(e)??Hd();0===c.length&&c.push({colno:u,filename:d,function:hd,in_app:!0,lineno:l});return t}(rf(n,c||i,void 0,r,!1),s,o,a);u.level="error",Rp(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}(t),Ff("onerror")),e.onunhandledrejection&&(!function(t){!function(t){const e="unhandledrejection";Sd(e,t),xd(e,Pd)}(e=>{const{stackParser:n,attachStacktrace:r}=Gf();if(kh()!==t||qm())return;const i=function(t){if(Dd(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}(e),s=Dd(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:rf(n,i,void 0,r,!0);s.level="error",Rp(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}(t),Ff("onunhandledrejection"))}}};function Ff(t){Lf&&dd.log(`Global Handler attached: ${t}`)}function Gf(){const t=kh();return t?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const zf=()=>({name:"HttpContext",preprocessEvent(t){if(!Hm.navigator&&!Hm.location&&!Hm.document)return;const e=function(){const t=Hd(),{referrer:e}=Hm.document||{},{userAgent:n}=Hm.navigator||{};return{url:t,headers:{...e&&{Referer:e},...n&&{"User-Agent":n}}}}(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),Vf=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(t,r,i){Cm(Xm,i.getOptions().stackParser,n,e,t,r)}}};function Hf(){return!!function(){if(void 0===Hm.window)return!1;const t=Hm;if(t.nw)return!1;const e=t.chrome||t.browser;if(!e?.runtime?.id)return!1;const n=Hd(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Hm===Hm.top&&r.some(t=>n.startsWith(`${t}://`)))}()&&(Lf&&ad(()=>{}),!0)}function Wf(t){return[Em(),wm(),If(),Rf(),Bf(),Vf(),Rm(),zf(),jf()]}const qf=()=>{const t=Wf().filter(t=>!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(t.name));!function(t={}){const e=!t.skipBrowserExtensionCheck&&Hf(),n={...t,enabled:!e&&t.enabled,stackParser:(r=t.stackParser||Of,Array.isArray(r)?fd(...r):r),integrations:Bp({integrations:t.integrations,defaultIntegrations:null==t.defaultIntegrations?Wf():t.defaultIntegrations}),transport:t.transport||wf};var r;lm(af,n)}({dsn:"https://60bea3ee4ef1022e4035b23ba50f44d0@o1158394.ingest.us.sentry.io/4509876992278529",transport:wf,stackParser:Of,integrations:t,beforeSend:t=>(t.contexts={...t.contexts,extension:{id:chrome.runtime.id,version:chrome.runtime.getManifest().version,environment:"production"}},t)})};export{Ql as P,Pt as S,Jl as a,Yl as g,qf as i,Xl as w};
